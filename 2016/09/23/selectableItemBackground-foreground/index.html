<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <title>android使用selectableItemBackground的一些坑 | Haldir的博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="android:foreground=”?android:attr/selectableItemBackground”

或是

android:background=”?android:attr/selectableItemBackground”

这个xml属性最早是我学着写recyclerVeiw的item xml的时候接触到的，简单来说就是，在API 21及以上，用户点击这个itemVi">
<meta property="og:type" content="article">
<meta property="og:title" content="android使用selectableItemBackground的一些坑">
<meta property="og:url" content="http://haldir65.github.io/2016/09/23/selectableItemBackground-foreground/index.html">
<meta property="og:site_name" content="Haldir的博客">
<meta property="og:description" content="android:foreground=”?android:attr/selectableItemBackground”

或是

android:background=”?android:attr/selectableItemBackground”

这个xml属性最早是我学着写recyclerVeiw的item xml的时候接触到的，简单来说就是，在API 21及以上，用户点击这个itemVi">
<meta property="og:image" content="https://cloud.githubusercontent.com/assets/12274855/18787855/2a6d93f2-81d7-11e6-8026-58cdbd8583d4.JPG">
<meta property="og:image" content="https://cloud.githubusercontent.com/assets/12274855/18787841/1d0b2d82-81d7-11e6-916e-b4113772c3a2.JPG">
<meta property="og:updated_time" content="2016-09-23T14:48:31.323Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="android使用selectableItemBackground的一些坑">
<meta name="twitter:description" content="android:foreground=”?android:attr/selectableItemBackground”

或是

android:background=”?android:attr/selectableItemBackground”

这个xml属性最早是我学着写recyclerVeiw的item xml的时候接触到的，简单来说就是，在API 21及以上，用户点击这个itemVi">
<meta name="twitter:image" content="https://cloud.githubusercontent.com/assets/12274855/18787855/2a6d93f2-81d7-11e6-8026-58cdbd8583d4.JPG">
  
    <link rel="alternative" href="/atom.xml" title="Haldir的博客" type="application/atom+xml">
  
  
    <link rel="icon" href="//favicon.png">
  
  <script src="/style.js"></script>
</head>

<body>
  <div id="container">
    <div class="left-col">
      <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img src="/assets/blogImg/cat.jpg" class="js-avatar" style="width: 100%;height: 100%;opacity: 1;">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">Haldir</a></h1>
		</hgroup>

		

		<nav class="header-menu">
			<ul>
			
				<li><a href="/">主页</a></li>
	        
				<li><a href="/tags/android">文章</a></li>
	        
			</ul>
		</nav>
		<nav class="header-smart-menu">
	        
    		
    			
    			<a class="js-smart-menu" data-idx="0" href="javascript:void(0)">主页</a>
    			
    			
            
    			
    			<a class="js-smart-menu" data-idx="1" href="javascript:void(0)">标签</a>
    			
    			
            
    			
    			<a class="js-smart-menu" data-idx="2" href="javascript:void(0)">友链</a>
    			
    			
            
    			
    			<a class="js-smart-menu" data-idx="3" href="javascript:void(0)">关于我</a>
    			
    			
            
		</nav>
		<nav class="header-nav">
			<div class="social">
				
					<a class="github" target="_blank" href="https://github.com/Haldir65" title="github">github</a>
		        
					<a class="weibo" target="_blank" href="#" title="weibo">weibo</a>
		        
					<a class="rss" target="_blank" href="#" title="rss">rss</a>
		        
					<a class="zhihu" target="_blank" href="#" title="zhihu">zhihu</a>
		        
			</div>
		</nav>
	</header>		
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"><i class="icon-list"></i></div>
  		<h1 class="header-author js-mobile-header hide">Haldir</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				
					<img src="null/assets/blogImg/cat.jpg" class="js-avatar" style="width: 100%;height: 100%;opacity: 1;">
				
			</div>
			<hgroup>
			  <h1 class="header-author">Haldir</h1>
			</hgroup>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/tags/android">文章</a></li>
		        
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/Haldir65" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="#" title="weibo">weibo</a>
			        
						<a class="rss" target="_blank" href="#" title="rss">rss</a>
			        
						<a class="zhihu" target="_blank" href="#" title="zhihu">zhihu</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>

      <div class="body-wrap">
        <article id="post-selectableItemBackground-foreground" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      android使用selectableItemBackground的一些坑
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>android:foreground=”?android:attr/selectableItemBackground”</p>
</blockquote>
<p>或是</p>
<blockquote>
<p>android:background=”?android:attr/selectableItemBackground”</p>
</blockquote>
<p>这个xml属性最早是我学着写recyclerVeiw的item xml的时候接触到的，简单来说就是，在API 21及以上，用户点击这个itemView时候会出现一个Ripple效果<br>非常好看，而在API 21以下则会表现为MonoChrome的类似按压色的效果<img src="https://cloud.githubusercontent.com/assets/12274855/18787855/2a6d93f2-81d7-11e6-8026-58cdbd8583d4.JPG" alt=""> <br><br>而这个点击时的水波纹颜色也是可以Customize的<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;item name=&quot;android:colorControlHighlight&quot;&gt;@color/my_ripple_color&lt;/item&gt;</div></pre></td></tr></table></figure></p>
<p>//这个要写在自己的Activity的Theme(style-v21)里，注意，当前Activity的Theme必须继承自Appcompat!!<br>于是，我写了这样的xml<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">LinearLayout</span></span></div><div class="line">        <span class="attr">android:id</span>=<span class="string">"@+id/item_root"</span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"?android:attr/listPreferredItemHeight"</span></div><div class="line">        <span class="attr">android:orientation</span>=<span class="string">"vertical"</span></div><div class="line">        <span class="attr">android:gravity</span>=<span class="string">"center"</span></div><div class="line">        <span class="attr">android:onClick</span>=<span class="string">"@&#123;(view) -&gt; callback.onClick(view,data)&#125;"</span></div><div class="line">        <span class="attr">android:elevation</span>=<span class="string">"2dp"</span></div><div class="line">        <span class="attr">android:background</span>=<span class="string">"@color/md_amber_200"</span></div><div class="line">        <span class="attr">android:foreground</span>=<span class="string">"?android:attr/selectableItemBackground"</span></div><div class="line">        /&gt;</div></pre></td></tr></table></figure></p>
<p>然而，点击之后并没有出现水波纹(模拟器 API 21)，换成CardView或是将foreground改为background之后才有效。查了很多博客，最后得出结论:<br>android:foreground在API 23之前只对FrameLayout有效(CardView继承自FrameLayout当然有效)。<br><a id="more"></a></p>
<p>##所以正确的做法是</p>
<blockquote>
<p>android:foreground=”?android:attr/selectableItemBackground”</p>
</blockquote>
<p>改为</p>
<blockquote>
<p>android:background=”?android:attr/selectableItemBackground”</p>
</blockquote>
<p>或者使用FrameLayout。</p>
<ul>
<li><p>关于foreground<br>之前看google io2016时，<a href="https://github.com/chrisbanes" target="_blank" rel="external">Chris Banes</a>给了这样的解释。<br><img src="https://cloud.githubusercontent.com/assets/12274855/18787841/1d0b2d82-81d7-11e6-916e-b4113772c3a2.JPG" alt="">,<br>android:foreground在API 1 的FrameLayout中就有了，但直到API 23才将这个属性添加到View中。<br>所以，换成API 23的手机上面那段代码foreground也是可以出现Ripple的,至于23之前为什么foreground无效，并不清楚为什么</p>
</li>
<li><p>首先是一种简单的模拟这种视觉效果的尝试：<a href="http://effmx.com/articles/ru-he-chuang-jian-jian-rong-de-foreground-drawable-selectorshi-xian-layoutdian-ji-xiao-guo/" target="_blank" rel="external">如何创建兼容的Forefround drawable selector</a> 这篇文章提到了:</p>
<blockquote>
<p>简单来讲，Foreground 定义了绘制于当前内容之上的 Drawable，类似一层覆盖物。所以我们可以为设置 Foreground 的值为 drawable或者color， 那如果将 Froeground 设置为 drawable selector，自然就可以为控件实现点击响应效果了。 比较奇怪的是在 sdk 23 以前，foregrond 属性只对 Framelayout 生效，但这个问题现在得到了解决，所以也请确保你的 compileSdkVersion 大于等于23<br>  这篇文章的做法是针对21以下的版本使用slelector Drawable实现类似的效果</p>
</blockquote>
</li>
<li><p>如何真正实现为API23之前的View,ViewGroup添加foreground?<br>随后我找到了<a href="https://dzone.com/articles/adding-foreground-selector" target="_blank" rel="external">这篇博客</a>，具体的逻辑并不太多。<br>这里插一句，任何Drawable对象，在你调用setDrawable之后，该Drawable都会保留一个最后一个调用对象的callback</p>
<blockquote>
<p>Drawable-&gt;View-&gt;Context //leak!<br>//所以Drawable也有可能导致Activity leak</p>
</blockquote>
</li>
<li><p>随后我发现了更多有意思的讨论<br>首先是<a href="https://github.com/chrisbanes" target="_blank" rel="external">Chris Banes</a>在G+上的Post : <a href="https://plus.google.com/+ChrisBanes/posts/DRerZ8wEFuF" target="_blank" rel="external">Foreground Doge</a><br>他给出了两种方案,Chris作为Google员工，给出的解决方案应该是比较官方的了</p>
</li>
</ul>
<ol>
<li>如果想利用FrameLayout的foreground特性来实现点击特效的话，完全可以在自己的xml外面再包裹一层FrameLayout</li>
<li>自己动手写一个实现foreground的Viewgroup , <a href="https://gist.github.com/chrisbanes/9091754" target="_blank" rel="external">代码</a></li>
</ol>
<ul>
<li>attrs:<figure class="highlight plain"><figcaption><span>version="1.0" encoding="utf-8"?></span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&lt;resources&gt;</div><div class="line">    &lt;declare-styleable name=&quot;ForegroundLinearLayout&quot;&gt;</div><div class="line">        &lt;attr name=&quot;android:foreground&quot; /&gt;</div><div class="line">        &lt;attr name=&quot;android:foregroundInsidePadding&quot; /&gt;</div><div class="line">        &lt;attr name=&quot;android:foregroundGravity&quot; /&gt;</div><div class="line">    &lt;/declare-styleable&gt;</div><div class="line">&lt;/resources&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/* </span></div><div class="line"> * Copyright (C) 2006 The Android Open Source Project </div><div class="line"> * </div><div class="line"> * Licensed under the Apache License, Version 2.0 (the "License"); </div><div class="line"> * you may not use this file except in compliance with the License. </div><div class="line"> * You may obtain a copy of the License at </div><div class="line"> * </div><div class="line"> *      http://www.apache.org/licenses/LICENSE-2.0 </div><div class="line"> * </div><div class="line"> * Unless required by applicable law or agreed to in writing, software </div><div class="line"> * distributed under the License is distributed on an "AS IS" BASIS, </div><div class="line"> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. </div><div class="line"> * See the License for the specific language governing permissions and </div><div class="line"> * limitations under the License. </div><div class="line"> */ </div><div class="line"> </div><div class="line"><span class="keyword">package</span> your.<span class="keyword">package</span>; </div><div class="line"> </div><div class="line"><span class="keyword">import</span> android.content.Context;</div><div class="line"><span class="keyword">import</span> android.content.res.TypedArray;</div><div class="line"><span class="keyword">import</span> android.graphics.Canvas;</div><div class="line"><span class="keyword">import</span> android.graphics.Rect;</div><div class="line"><span class="keyword">import</span> android.graphics.drawable.Drawable;</div><div class="line"><span class="keyword">import</span> android.util.AttributeSet;</div><div class="line"><span class="keyword">import</span> android.view.Gravity;</div><div class="line"><span class="keyword">import</span> android.widget.LinearLayout;</div><div class="line"> </div><div class="line"><span class="keyword">import</span> your.<span class="keyword">package</span>.R; </div><div class="line"> </div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ForegroundLinearLayout</span> <span class="keyword">extends</span> <span class="title">LinearLayout</span> </span>&#123;</div><div class="line"> </div><div class="line">    <span class="keyword">private</span> Drawable mForeground;</div><div class="line"> </div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Rect mSelfBounds = <span class="keyword">new</span> Rect();</div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Rect mOverlayBounds = <span class="keyword">new</span> Rect();</div><div class="line"> </div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> mForegroundGravity = Gravity.FILL;</div><div class="line"> </div><div class="line">    <span class="keyword">protected</span> <span class="keyword">boolean</span> mForegroundInPadding = <span class="keyword">true</span>;</div><div class="line"> </div><div class="line">    <span class="keyword">boolean</span> mForegroundBoundsChanged = <span class="keyword">false</span>;</div><div class="line"> </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ForegroundLinearLayout</span><span class="params">(Context context)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>(context);</div><div class="line">    &#125; </div><div class="line"> </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ForegroundLinearLayout</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>(context, attrs, <span class="number">0</span>);</div><div class="line">    &#125; </div><div class="line"> </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ForegroundLinearLayout</span><span class="params">(Context context, AttributeSet attrs, <span class="keyword">int</span> defStyle)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>(context, attrs, defStyle);</div><div class="line"> </div><div class="line">        TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.ForegroundLinearLayout,</div><div class="line">                defStyle, <span class="number">0</span>);</div><div class="line"> </div><div class="line">        mForegroundGravity = a.getInt(</div><div class="line">                R.styleable.ForegroundLinearLayout_android_foregroundGravity, mForegroundGravity);</div><div class="line"> </div><div class="line">        <span class="keyword">final</span> Drawable d = a.getDrawable(R.styleable.ForegroundLinearLayout_android_foreground);</div><div class="line">        <span class="keyword">if</span> (d != <span class="keyword">null</span>) &#123;</div><div class="line">            setForeground(d);</div><div class="line">        &#125; </div><div class="line"> </div><div class="line">        mForegroundInPadding = a.getBoolean(</div><div class="line">                R.styleable.ForegroundLinearLayout_android_foregroundInsidePadding, <span class="keyword">true</span>);</div><div class="line"> </div><div class="line">        a.recycle();</div><div class="line">    &#125; </div><div class="line"> </div><div class="line">    <span class="comment">/** </span></div><div class="line">     * Describes how the foreground is positioned. </div><div class="line">     * </div><div class="line">     * <span class="doctag">@return</span> foreground gravity. </div><div class="line">     * </div><div class="line">     * <span class="doctag">@see</span> #setForegroundGravity(int) </div><div class="line">     */ </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getForegroundGravity</span><span class="params">()</span> </span>&#123; </div><div class="line">        <span class="keyword">return</span> mForegroundGravity;</div><div class="line">    &#125; </div><div class="line"> </div><div class="line">    <span class="comment">/** </span></div><div class="line">     * Describes how the foreground is positioned. Defaults to START and TOP. </div><div class="line">     * </div><div class="line">     * <span class="doctag">@param</span> foregroundGravity See &#123;<span class="doctag">@link</span> android.view.Gravity&#125; </div><div class="line">     * </div><div class="line">     * <span class="doctag">@see</span> #getForegroundGravity() </div><div class="line">     */ </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setForegroundGravity</span><span class="params">(<span class="keyword">int</span> foregroundGravity)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (mForegroundGravity != foregroundGravity) &#123;</div><div class="line">            <span class="keyword">if</span> ((foregroundGravity &amp; Gravity.RELATIVE_HORIZONTAL_GRAVITY_MASK) == <span class="number">0</span>) &#123;</div><div class="line">                foregroundGravity |= Gravity.START;</div><div class="line">            &#125; </div><div class="line"> </div><div class="line">            <span class="keyword">if</span> ((foregroundGravity &amp; Gravity.VERTICAL_GRAVITY_MASK) == <span class="number">0</span>) &#123;</div><div class="line">                foregroundGravity |= Gravity.TOP;</div><div class="line">            &#125; </div><div class="line"> </div><div class="line">            mForegroundGravity = foregroundGravity;</div><div class="line"> </div><div class="line"> </div><div class="line">            <span class="keyword">if</span> (mForegroundGravity == Gravity.FILL &amp;&amp; mForeground != <span class="keyword">null</span>) &#123;</div><div class="line">                Rect padding = <span class="keyword">new</span> Rect();</div><div class="line">                mForeground.getPadding(padding);</div><div class="line">            &#125; </div><div class="line"> </div><div class="line">            requestLayout();</div><div class="line">        &#125; </div><div class="line">    &#125; </div><div class="line"> </div><div class="line">    <span class="meta">@Override</span> </div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">boolean</span> <span class="title">verifyDrawable</span><span class="params">(Drawable who)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.verifyDrawable(who) || (who == mForeground);</div><div class="line">    &#125; </div><div class="line"> </div><div class="line">    <span class="meta">@Override</span> </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">jumpDrawablesToCurrentState</span><span class="params">()</span> </span>&#123; </div><div class="line">        <span class="keyword">super</span>.jumpDrawablesToCurrentState(); </div><div class="line">        <span class="keyword">if</span> (mForeground != <span class="keyword">null</span>) mForeground.jumpToCurrentState();</div><div class="line">    &#125; </div><div class="line"> </div><div class="line">    <span class="meta">@Override</span> </div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">drawableStateChanged</span><span class="params">()</span> </span>&#123; </div><div class="line">        <span class="keyword">super</span>.drawableStateChanged(); </div><div class="line">        <span class="keyword">if</span> (mForeground != <span class="keyword">null</span> &amp;&amp; mForeground.isStateful()) &#123;</div><div class="line">            mForeground.setState(getDrawableState());</div><div class="line">        &#125; </div><div class="line">    &#125; </div><div class="line"> </div><div class="line">    <span class="comment">/** </span></div><div class="line">     * Supply a Drawable that is to be rendered on top of all of the child </div><div class="line">     * views in the frame layout.  Any padding in the Drawable will be taken </div><div class="line">     * into account by ensuring that the children are inset to be placed </div><div class="line">     * inside of the padding area. </div><div class="line">     * </div><div class="line">     * <span class="doctag">@param</span> drawable The Drawable to be drawn on top of the children. </div><div class="line">     */ </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setForeground</span><span class="params">(Drawable drawable)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (mForeground != drawable) &#123;</div><div class="line">            <span class="keyword">if</span> (mForeground != <span class="keyword">null</span>) &#123;</div><div class="line">                mForeground.setCallback(<span class="keyword">null</span>);</div><div class="line">                unscheduleDrawable(mForeground);</div><div class="line">            &#125; </div><div class="line"> </div><div class="line">            mForeground = drawable;</div><div class="line"> </div><div class="line">            <span class="keyword">if</span> (drawable != <span class="keyword">null</span>) &#123;</div><div class="line">                setWillNotDraw(<span class="keyword">false</span>);</div><div class="line">                drawable.setCallback(<span class="keyword">this</span>);</div><div class="line">                <span class="keyword">if</span> (drawable.isStateful()) &#123;</div><div class="line">                    drawable.setState(getDrawableState());</div><div class="line">                &#125; </div><div class="line">                <span class="keyword">if</span> (mForegroundGravity == Gravity.FILL) &#123;</div><div class="line">                    Rect padding = <span class="keyword">new</span> Rect();</div><div class="line">                    drawable.getPadding(padding);</div><div class="line">                &#125; </div><div class="line">            &#125;  <span class="keyword">else</span> &#123; </div><div class="line">                setWillNotDraw(<span class="keyword">true</span>);</div><div class="line">            &#125; </div><div class="line">            requestLayout();</div><div class="line">            invalidate();</div><div class="line">        &#125; </div><div class="line">    &#125; </div><div class="line"> </div><div class="line">    <span class="comment">/** </span></div><div class="line">     * Returns the drawable used as the foreground of this FrameLayout. The </div><div class="line">     * foreground drawable, if non-null, is always drawn on top of the children. </div><div class="line">     * </div><div class="line">     * <span class="doctag">@return</span> A Drawable or null if no foreground was set. </div><div class="line">     */ </div><div class="line">    <span class="function"><span class="keyword">public</span> Drawable <span class="title">getForeground</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> mForeground;</div><div class="line">    &#125; </div><div class="line"> </div><div class="line">    <span class="meta">@Override</span> </div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onLayout</span><span class="params">(<span class="keyword">boolean</span> changed, <span class="keyword">int</span> left, <span class="keyword">int</span> top, <span class="keyword">int</span> right, <span class="keyword">int</span> bottom)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.onLayout(changed, left, top, right, bottom);</div><div class="line">        mForegroundBoundsChanged = changed;</div><div class="line">    &#125; </div><div class="line"> </div><div class="line">    <span class="meta">@Override</span> </div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onSizeChanged</span><span class="params">(<span class="keyword">int</span> w, <span class="keyword">int</span> h, <span class="keyword">int</span> oldw, <span class="keyword">int</span> oldh)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.onSizeChanged(w, h, oldw, oldh);</div><div class="line">        mForegroundBoundsChanged = <span class="keyword">true</span>;</div><div class="line">    &#125; </div><div class="line"> </div><div class="line">    <span class="meta">@Override</span> </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">(Canvas canvas)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.draw(canvas);</div><div class="line"> </div><div class="line">        <span class="keyword">if</span> (mForeground != <span class="keyword">null</span>) &#123;</div><div class="line">            <span class="keyword">final</span> Drawable foreground = mForeground;</div><div class="line"> </div><div class="line">            <span class="keyword">if</span> (mForegroundBoundsChanged) &#123;</div><div class="line">                mForegroundBoundsChanged = <span class="keyword">false</span>;</div><div class="line">                <span class="keyword">final</span> Rect selfBounds = mSelfBounds;</div><div class="line">                <span class="keyword">final</span> Rect overlayBounds = mOverlayBounds;</div><div class="line"> </div><div class="line">                <span class="keyword">final</span> <span class="keyword">int</span> w = getRight() - getLeft();</div><div class="line">                <span class="keyword">final</span> <span class="keyword">int</span> h = getBottom() - getTop();</div><div class="line"> </div><div class="line">                <span class="keyword">if</span> (mForegroundInPadding) &#123;</div><div class="line">                    selfBounds.set(<span class="number">0</span>, <span class="number">0</span>, w, h);</div><div class="line">                &#125; <span class="keyword">else</span> &#123; </div><div class="line">                    selfBounds.set(getPaddingLeft(), getPaddingTop(),</div><div class="line">                            w - getPaddingRight(), h - getPaddingBottom());</div><div class="line">                &#125; </div><div class="line"> </div><div class="line">                Gravity.apply(mForegroundGravity, foreground.getIntrinsicWidth(),</div><div class="line">                        foreground.getIntrinsicHeight(), selfBounds, overlayBounds);</div><div class="line">                foreground.setBounds(overlayBounds);</div><div class="line">            &#125; </div><div class="line"> </div><div class="line">            foreground.draw(canvas);</div><div class="line">        &#125; </div><div class="line">    &#125; </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li><p>使用方式</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">your.package.ForegroundLinearLayout</span></span></div><div class="line">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">    <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">    <span class="attr">android:foreground</span>=<span class="string">"?android:selectableItemBackground"</span>&gt;</div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">ImageView</span></span></div><div class="line">        <span class="attr">android:id</span>=<span class="string">”@+id/imageview_opaque”</span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span> /&gt;</div><div class="line"></div><div class="line">    ... other views ...</div><div class="line">/&gt;</div></pre></td></tr></table></figure>
</li>
<li><p>接着是<a href="https://github.com/JakeWharton" target="_blank" rel="external">Jack Wharton</a>的<a href="https://gist.github.com/JakeWharton/0a251d67649305d84e8a" target="_blank" rel="external">ForegroundImageView</a><br></p>
</li>
<li><p>attrs</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">resources</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">declare-styleable</span> <span class="attr">name</span>=<span class="string">"ForegroundImageView"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">attr</span> <span class="attr">name</span>=<span class="string">"android:foreground"</span>/&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">declare-styleable</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">resources</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> android.content.Context;</div><div class="line"><span class="keyword">import</span> android.content.res.TypedArray;</div><div class="line"><span class="keyword">import</span> android.graphics.Canvas;</div><div class="line"><span class="keyword">import</span> android.graphics.drawable.Drawable;</div><div class="line"><span class="keyword">import</span> android.util.AttributeSet;</div><div class="line"><span class="keyword">import</span> android.widget.ImageView;</div><div class="line"> </div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ForegroundImageView</span> <span class="keyword">extends</span> <span class="title">ImageView</span> </span>&#123;</div><div class="line">  <span class="keyword">private</span> Drawable foreground;</div><div class="line"> </div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="title">ForegroundImageView</span><span class="params">(Context context)</span> </span>&#123;</div><div class="line">    <span class="keyword">this</span>(context, <span class="keyword">null</span>);</div><div class="line">  &#125; </div><div class="line"> </div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="title">ForegroundImageView</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;</div><div class="line">    <span class="keyword">super</span>(context, attrs);</div><div class="line"> </div><div class="line">    TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.ForegroundImageView);</div><div class="line">    Drawable foreground = a.getDrawable(R.styleable.ForegroundImageView_android_foreground);</div><div class="line">    <span class="keyword">if</span> (foreground != <span class="keyword">null</span>) &#123;</div><div class="line">      setForeground(foreground);</div><div class="line">    &#125; </div><div class="line">    a.recycle();</div><div class="line">  &#125; </div><div class="line"> </div><div class="line">  <span class="comment">/** </span></div><div class="line">   * Supply a drawable resource that is to be rendered on top of all of the child </div><div class="line">   * views in the frame layout. </div><div class="line">   * </div><div class="line">   * <span class="doctag">@param</span> drawableResId The drawable resource to be drawn on top of the children. </div><div class="line">   */ </div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setForegroundResource</span><span class="params">(<span class="keyword">int</span> drawableResId)</span> </span>&#123;</div><div class="line">    setForeground(getContext().getResources().getDrawable(drawableResId));</div><div class="line">  &#125; </div><div class="line"> </div><div class="line">  <span class="comment">/** </span></div><div class="line">   * Supply a Drawable that is to be rendered on top of all of the child </div><div class="line">   * views in the frame layout. </div><div class="line">   * </div><div class="line">   * <span class="doctag">@param</span> drawable The Drawable to be drawn on top of the children. </div><div class="line">   */ </div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setForeground</span><span class="params">(Drawable drawable)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (foreground == drawable) &#123;</div><div class="line">      <span class="keyword">return</span>; </div><div class="line">    &#125; </div><div class="line">    <span class="keyword">if</span> (foreground != <span class="keyword">null</span>) &#123;</div><div class="line">      foreground.setCallback(<span class="keyword">null</span>);</div><div class="line">      unscheduleDrawable(foreground);</div><div class="line">    &#125; </div><div class="line"> </div><div class="line">    foreground = drawable;</div><div class="line"> </div><div class="line">    <span class="keyword">if</span> (drawable != <span class="keyword">null</span>) &#123;</div><div class="line">      drawable.setCallback(<span class="keyword">this</span>);</div><div class="line">      <span class="keyword">if</span> (drawable.isStateful()) &#123;</div><div class="line">        drawable.setState(getDrawableState());</div><div class="line">      &#125; </div><div class="line">    &#125; </div><div class="line">    requestLayout();</div><div class="line">    invalidate();</div><div class="line">  &#125; </div><div class="line"> </div><div class="line">  <span class="meta">@Override</span> <span class="function"><span class="keyword">protected</span> <span class="keyword">boolean</span> <span class="title">verifyDrawable</span><span class="params">(Drawable who)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">super</span>.verifyDrawable(who) || who == foreground;</div><div class="line">  &#125; </div><div class="line"> </div><div class="line">  <span class="meta">@Override</span> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">jumpDrawablesToCurrentState</span><span class="params">()</span> </span>&#123; </div><div class="line">    <span class="keyword">super</span>.jumpDrawablesToCurrentState(); </div><div class="line">    <span class="keyword">if</span> (foreground != <span class="keyword">null</span>) foreground.jumpToCurrentState();</div><div class="line">  &#125; </div><div class="line"> </div><div class="line">  <span class="meta">@Override</span> <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">drawableStateChanged</span><span class="params">()</span> </span>&#123; </div><div class="line">    <span class="keyword">super</span>.drawableStateChanged(); </div><div class="line">    <span class="keyword">if</span> (foreground != <span class="keyword">null</span> &amp;&amp; foreground.isStateful()) &#123;</div><div class="line">      foreground.setState(getDrawableState());</div><div class="line">    &#125; </div><div class="line">  &#125; </div><div class="line"> </div><div class="line">  <span class="meta">@Override</span> <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onMeasure</span><span class="params">(<span class="keyword">int</span> widthMeasureSpec, <span class="keyword">int</span> heightMeasureSpec)</span> </span>&#123;</div><div class="line">    <span class="keyword">super</span>.onMeasure(widthMeasureSpec, heightMeasureSpec);</div><div class="line">    <span class="keyword">if</span> (foreground != <span class="keyword">null</span>) &#123;</div><div class="line">      foreground.setBounds(<span class="number">0</span>, <span class="number">0</span>, getMeasuredWidth(), getMeasuredHeight());</div><div class="line">      invalidate();</div><div class="line">    &#125; </div><div class="line">  &#125; </div><div class="line"> </div><div class="line">  <span class="meta">@Override</span> <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onSizeChanged</span><span class="params">(<span class="keyword">int</span> w, <span class="keyword">int</span> h, <span class="keyword">int</span> oldw, <span class="keyword">int</span> oldh)</span> </span>&#123;</div><div class="line">    <span class="keyword">super</span>.onSizeChanged(w, h, oldw, oldh);</div><div class="line">    <span class="keyword">if</span> (foreground != <span class="keyword">null</span>) &#123;</div><div class="line">      foreground.setBounds(<span class="number">0</span>, <span class="number">0</span>, w, h);</div><div class="line">      invalidate();</div><div class="line">    &#125; </div><div class="line">  &#125; </div><div class="line"> </div><div class="line">  <span class="meta">@Override</span> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">(Canvas canvas)</span> </span>&#123;</div><div class="line">    <span class="keyword">super</span>.draw(canvas);</div><div class="line"> </div><div class="line">    <span class="keyword">if</span> (foreground != <span class="keyword">null</span>) &#123;</div><div class="line">      foreground.draw(canvas);</div><div class="line">    &#125; </div><div class="line">  &#125; </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p>最后，还有人给出据说更好的<a href="https://github.com/cesards/ForegroundViews" target="_blank" rel="external">解决方案</a><br>没有测试过，不了解</p>
<p>##reference</p>
<ul>
<li><a href="https://www.youtube.com/watch?v=TIHXGwRTMWI" target="_blank" rel="external">Android themes and styles demisfied</a> 关于Theme和Style的区别的很好的学习资料</li>
<li><a href="https://plus.google.com/108967384991768947849/posts/aHPVDtr6mcp" target="_blank" rel="external">Chris Banes G+ post</a> 评论很精彩</li>
<li><a href="https://gist.github.com/shakalaca/6199283" target="_blank" rel="external">RelativeLayout with foreGround</a> 没测试过</li>
<li><a href="https://github.com/traex/RippleEffect" target="_blank" rel="external">Ripple Effect</a> 将Ripple的动画兼容到API 9+ ，很出色的一个库。之前项目中用过，就是一个继承自RelativeLayout的自定义ViewGroup。</li>
</ul>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2016/09/23/selectableItemBackground-foreground/" class="archive-article-date">
  	<time datetime="2016-09-23T11:56:39.000Z" itemprop="datePublished"><i class="icon-clock"></i>2016-09-23</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/android/">android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/foreground/">foreground</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/随笔/">随笔</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<i class="icon-price-tags"></i>
	<a class="article-category-link" href="/categories/技术/">技术</a>
	</div>


      <div class="clearfix"></div>
    </div>
  </div>
</article>

  
<nav id="article-nav">
  
    <a href="/2016/09/27/activity-transition-pre-and-post-lollipop/" id="article-nav-newer" class="article-nav-link-wrap">
      <i class="icon-circle-left"></i>
      <div class="article-nav-title">
        
          activity transition pre and post lollipop
        
      </div>
    </a>
  
  
    <a href="/2016/09/22/replace-butterKnife-with-databinding/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">replace butterKnife with databinding</div>
      <i class="icon-circle-right"></i>
    </a>
  
</nav>




<div class="share_jia">
	<!-- JiaThis Button BEGIN -->
	<div class="jiathis_style">
		<span class="jiathis_txt">Share to: &nbsp; </span>
		<a class="jiathis_button_facebook"></a> 
	    <a class="jiathis_button_twitter"></a>
	    <a class="jiathis_button_plus"></a> 
	    <a class="jiathis_button_tsina"></a>
		<a class="jiathis_button_cqq"></a>
		<a class="jiathis_button_douban"></a>
		<a class="jiathis_button_weixin"></a>
		<a class="jiathis_button_tumblr"></a>
    <a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a>
	</div>
	<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=1405949716054953" charset="utf-8"></script>
	<!-- JiaThis Button END -->
</div>









      </div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2016 Haldir
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    <script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: false,
		animate: false,
		isHome: false,
		isPost: true,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: true,
		root: "/"
	}
</script>

<script src="/./main.js"></script>





    
<div class="tools-col">
  <ul class="btn-wrap">
    
      <li class="chose" data-hook="tools-section-all"><span class="text">全部</span><i class="icon-book"></i></li>
    
    
      <li data-hook="tools-section-tag"><span class="text">标签</span><i class="icon-price-tags"></i></li>
    
    
      <li data-hook="tools-section-friends"><span class="text">友链</span><i class="icon-link"></i></li>
    
    
      <li data-hook="tools-section-me"><span class="text">我</span><i class="icon-smile"></i></li>
    
  </ul>
  <div class="tools-wrap">
    
    	<section class="tools-section tools-section-all chose">
    	</section>
    

    
    	<section class="tools-section tools-section-tag">
    			<div class="widget tagcloud" id="js-tagcloud">
    				<a href="/tags/Butterknife/" style="font-size: 10px;">Butterknife</a> <a href="/tags/android/" style="font-size: 20px;">android</a> <a href="/tags/databinding/" style="font-size: 10px;">databinding</a> <a href="/tags/foreground/" style="font-size: 10px;">foreground</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/service/" style="font-size: 10px;">service</a> <a href="/tags/transition/" style="font-size: 10px;">transition</a> <a href="/tags/随笔/" style="font-size: 10px;">随笔</a>
    			</div>
    	</section>
    

    
    	<section class="tools-section tools-section-friends">
  		
  			<div class="friends-wrap" id="js-friends">
  			
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">友情链接1</a>
  	        
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">友情链接2</a>
  	        
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">友情链接3</a>
  	        
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">友情链接4</a>
  	        
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">友情链接5</a>
  	        
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">友情链接6</a>
  	        
  	        </div>
  		
    	</section>
    

    
    	<section class="tools-section tools-section-me">
  	  	
  	  		<div class="aboutme-wrap" id="js-aboutme">很惭愧&lt;br&gt;&lt;br&gt;只做了一点微小的工作&lt;br&gt;谢谢大家</div>
  	  	
    	</section>
    
  </div>
  
</div>
    <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>
  </div>
</body>
</html>