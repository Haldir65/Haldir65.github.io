{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"source/favicon.png","path":"favicon.png","modified":0,"renderable":0},{"_id":"themes/yilia/source/slider.445162.js","path":"slider.445162.js","modified":0,"renderable":1},{"_id":"themes/yilia/source/main.b3331d.css","path":"main.b3331d.css","modified":0,"renderable":1},{"_id":"themes/yilia/source/mobile.8d90af.js","path":"mobile.8d90af.js","modified":0,"renderable":1},{"_id":"themes/yilia/source/main.b3331d.js","path":"main.b3331d.js","modified":0,"renderable":1},{"_id":"source/assets/blogImg/zhangzhe.jpg","path":"assets/blogImg/zhangzhe.jpg","modified":0,"renderable":0},{"_id":"themes/yilia/source/fonts/default-skin.b257fa.svg","path":"fonts/default-skin.b257fa.svg","modified":0,"renderable":1},{"_id":"themes/yilia/source/fonts/iconfont.6e162c.woff","path":"fonts/iconfont.6e162c.woff","modified":0,"renderable":1},{"_id":"themes/yilia/source/fonts/tooltip.4004ff.svg","path":"fonts/tooltip.4004ff.svg","modified":0,"renderable":1},{"_id":"themes/yilia/source/fonts/iconfont.9abe9f.svg","path":"fonts/iconfont.9abe9f.svg","modified":0,"renderable":1},{"_id":"themes/yilia/source/img/default-skin.png","path":"img/default-skin.png","modified":0,"renderable":1},{"_id":"themes/yilia/source/fonts/iconfont.d0da7e.ttf","path":"fonts/iconfont.d0da7e.ttf","modified":0,"renderable":1},{"_id":"themes/yilia/source/img/preloader.gif","path":"img/preloader.gif","modified":0,"renderable":1},{"_id":"themes/yilia/source/fonts/iconfont.3a9902.eot","path":"fonts/iconfont.3a9902.eot","modified":0,"renderable":1},{"_id":"source/assets/blogImg/service_binding_tree_lifecycle.png","path":"assets/blogImg/service_binding_tree_lifecycle.png","modified":0,"renderable":0},{"_id":"source/assets/blogImg/getX.png","path":"assets/blogImg/getX.png","modified":0,"renderable":0},{"_id":"source/assets/blogImg/service_lifecycle.png","path":"assets/blogImg/service_lifecycle.png","modified":0,"renderable":0},{"_id":"themes/yilia/source/img/scrollbar_arrow.png","path":"img/scrollbar_arrow.png","modified":0,"renderable":1},{"_id":"source/assets/blogImg/cat.jpg","path":"assets/blogImg/cat.jpg","modified":0,"renderable":0},{"_id":"source/assets/blogImg/colorAccent.jpg","path":"assets/blogImg/colorAccent.jpg","modified":0,"renderable":0}],"Cache":[{"_id":"themes/yilia/.eslintrc.js","hash":"303d25adf02ad65720e537a16a4a137d14bb755f","modified":1483801970358},{"_id":"source/favicon.png","hash":"12f8cb4e7a7f19abacb2f972df6166a804669327","modified":1483838532000},{"_id":"themes/yilia/.gitignore","hash":"d5fc575329853ff620b50fc62ad4b18fa09a308a","modified":1474160201663},{"_id":"themes/yilia/.gitattributes","hash":"758cfbecfa7919e99abddf3297f37cde7e3d8d4e","modified":1483801970361},{"_id":"themes/yilia/README.md","hash":"8444a63c50d8a7e40bb3f1f10e549a60da94a21f","modified":1496576413762},{"_id":"themes/yilia/_config.yml","hash":"3bba5749f14d46ec5136f032fce32f0238e56b4b","modified":1497754149665},{"_id":"themes/yilia/.eslintignore","hash":"ed9d8911ca08c3dd5072c48dd0be4d06f8897730","modified":1483801970352},{"_id":"themes/yilia/.editorconfig","hash":"daaa8757fac18f8735fadd0a37a42c06f421ca14","modified":1474160201658},{"_id":"themes/yilia/package.json","hash":"ee6aa61f1cb89fd549e3e087c0232207a9c9ee30","modified":1496576413813},{"_id":"themes/yilia/.babelrc","hash":"db600d40e93e6d8023737a65d58d3be7370e5e30","modified":1483801970348},{"_id":"themes/yilia/webpack.config.js","hash":"da7657347109ddb4ab8602b219778117254677fe","modified":1496576413860},{"_id":"source/_posts/2016-10-14-Android-translucent-status-bar.md","hash":"5d54acfe615611181918093d29d6cb2a2e0cf478","modified":1492944613581},{"_id":"source/_posts/2016-10-15-using-loader-in-android-app.md","hash":"908161e4392c10b9ab0f3dca11c2616bda14696a","modified":1492944617675},{"_id":"source/_posts/2016-10-12-How-the-mainThread-work.md","hash":"1c66d3d7ada4ff3f006afdfa78802f23e9ee223e","modified":1492944600563},{"_id":"source/_posts/2016-10-13-Android-coordinate-System.md","hash":"2c5b4b4101ee4d3e236ff4c414b3c90a4e2fa985","modified":1492944609399},{"_id":"source/_posts/2016-10-20-RecyclerViewAnimationStuff.md","hash":"8b151f73a4af8bb8448ab6f5ef626b91a3c3c7f3","modified":1492944629288},{"_id":"source/_posts/2016-10-20-android-dirty-code.md","hash":"c1ae0c44ee2903b666f3cf19bd3926dd4b5d66b0","modified":1492944624549},{"_id":"source/_posts/2016-10-24-a-peek-on-pull-to-refresh.md","hash":"61118e943de0aeb88b3da960797a9b2c039c5fc2","modified":1492944645703},{"_id":"source/_posts/2016-12-24-Python-UnicodeEncodeError.md","hash":"109c4c8f9de9a9b4142a3f21dfaf1d7bbb16183f","modified":1499819763136},{"_id":"source/_posts/2016-10-20-write-your-own-layoutmanager.md","hash":"567bf9d32999a065d502b47934cd28527c438a88","modified":1492944640959},{"_id":"source/_posts/2016-10-31-install-lxml-on-windows.md","hash":"db5b8cd44c4b108386200743ba8a00c5a3b2dc9b","modified":1497541169896},{"_id":"source/_posts/2017-01-08-trouble-shooting-with-my-blog.md","hash":"95b369e2d147f1539e7bf92fc4dc201e206f601c","modified":1499596071061},{"_id":"source/_posts/2016-12-10-adb-command.md","hash":"335f6db66851072edf9fe88c2384de5769d253ff","modified":1497753172366},{"_id":"source/_posts/2016-12-31-Eliminating-BoilPlate-AnnotationProcessor.md","hash":"8eb335c1b5a00f866234d2ee5d85bdb7490da007","modified":1492944682005},{"_id":"source/_posts/2017-01-07-Linux-Basic-Commands.md","hash":"90ea0c179eaadff1446204154857a080e7d23ec8","modified":1499526098560},{"_id":"source/_posts/2016-11-27-the-size-of-wrap-content.md","hash":"d84af5328d49908927c7ef83403c591cc723cea2","modified":1492944655838},{"_id":"source/_posts/2017-03-11-utilizing-the-terminal-in-android-studio.md","hash":"f8eab15e1b8cba077189cfe1e1ebe0f2b0c32e9d","modified":1492944706777},{"_id":"source/_posts/2017-04-30-concurrency-and-beyond.md","hash":"11666a240bbd84e6c522afd5c0556e6a5ac710c9","modified":1497776666928},{"_id":"source/_posts/2017-04-23-rxjava2-for-android.md","hash":"73cc5d4f5b40ede9fd08c9e41e1ba8f8cd81efbc","modified":1499819763172},{"_id":"source/_posts/2017-04-03-properties-of-view.md","hash":"19d28bf1744fb38db0520f5a382bad35ffe6fcdc","modified":1497540022769},{"_id":"source/_posts/2017-01-13-embracing-kotlin.md","hash":"3b65ef84a0972e5863cb08d858a01f5199c318d3","modified":1498402891077},{"_id":"source/_posts/2017-05-01-python-server-test.md","hash":"5e86bce1bf93055f5b1bda242a246873eef7fd10","modified":1498401899886},{"_id":"source/_posts/2017-06-12-Collections-Refuled-by-Stuart-Marks.md","hash":"03c2a75699ee594a11cdeb207988315319d2fbdd","modified":1499596270313},{"_id":"source/_posts/2017-05-07-download-video-from-vps.md","hash":"b26b66a811b6ca53a435203612c936a9307a3e7f","modified":1497762656769},{"_id":"source/_posts/2017-06-25-deploying-flask-app-on-linux-server.md","hash":"ddfc181ec027262dc895d706151ce6f87737788a","modified":1499820385552},{"_id":"source/_posts/2017-06-15-python-networks.md","hash":"ae67c0b25e34343751c6d4fa2895780f2a163d64","modified":1498401785939},{"_id":"source/_posts/2017-06-18-linux-commands-extended.md","hash":"4d5458b9f6d026da088ebfa6c0aa143fb00cdfab","modified":1499526098640},{"_id":"source/_posts/2017-07-12-android-cookbook.md","hash":"241e05abe72308a05b6a0c186563bee27a272d44","modified":1499820520838},{"_id":"source/_posts/2017-07-01-it-began-with-a-few-bits.md","hash":"3e132cf0ec46cece89a620abe09fdf2234c4d5a5","modified":1499347065479},{"_id":"source/_posts/2017-07-12-fragment-decoded.md","hash":"59f240832b7fa3bfc79d878e5ad9093432622425","modified":1499820527963},{"_id":"source/_posts/2017-05-24-jvm-architecture.md","hash":"019aec78d3eddd0ffc18d7765fe518d9af658c7a","modified":1497762651560},{"_id":"source/_posts/2017-06-17-tiny-details-in-java.md","hash":"aef6421d1ac17dc209e70c64c7c844a3518505c2","modified":1499040462213},{"_id":"source/_posts/2017-07-12-scrapy-notes.md","hash":"716547a69d7850159228e700d754db5a3aafaf12","modified":1499820621363},{"_id":"source/_posts/activity-transition-pre-and-post-lollipop.md","hash":"2ff44259a21484a194123b8712eb25710ed5957d","modified":1492944721011},{"_id":"source/_posts/git-manual.md","hash":"82e441821f9f37d274923659461e6af7caf063cd","modified":1497777223447},{"_id":"source/_posts/android-inner-class-leak.md","hash":"6d47bb039c71395fed723ad1546fb67a1fb8c6ef","modified":1497540106986},{"_id":"source/_posts/android-7-0-new-features.md","hash":"aa22a2c97f74d58019cd1daab2dd5cbb8b8c8958","modified":1492944727720},{"_id":"source/_posts/selectableItemBackground-foreground.md","hash":"beee93a15fa19e164b1f4594b5ad489b2bee80b0","modified":1492944747056},{"_id":"source/_posts/replace-butterKnife-with-databinding.md","hash":"bad4b2ea7be53a2d146bf8087d57fd40f24912df","modified":1498925230866},{"_id":"source/_posts/theme-versus-style.md","hash":"42ac5e9f529b1e6d346ad73c236645f7e0fe145c","modified":1492944758816},{"_id":"themes/yilia/.git/HEAD","hash":"acbaef275e46a7f14c1ef456fff2c8bbe8c84724","modified":1496576573797},{"_id":"source/_posts/service-activity-communication.md","hash":"59a4b48e8e91eeec7f3d7e30a31870bac7f45fe7","modified":1492944752678},{"_id":"themes/yilia/.git/config","hash":"316bc92d9936dc739c39161838a28fb4641cbea2","modified":1474160201638},{"_id":"source/_posts/touch-event-distribution.md","hash":"bef1ac98d48db89fcfd1392d1a22ae065869631d","modified":1492944770056},{"_id":"themes/yilia/.git/COMMIT_EDITMSG","hash":"f45b45e75dc7c192cd2d67e90d5f7744185ea60b","modified":1496576914200},{"_id":"themes/yilia/.git/ORIG_HEAD","hash":"89ab87ea9e4463a047b96655a4f4d5bf1547a726","modified":1496577190960},{"_id":"themes/yilia/.git/description","hash":"9635f1b7e12c045212819dd934d809ef07efa2f4","modified":1474160185901},{"_id":"themes/yilia/.git/index","hash":"c738dbb6c6d6ac64a2999aa5dffc7d93ffda2ac2","modified":1496577333422},{"_id":"themes/yilia/.git/packed-refs","hash":"9295e7df400c6b3bc71309059e20d92171362302","modified":1474160201595},{"_id":"themes/yilia/languages/default.yml","hash":"f26a34a7983d4bc17c65c7f0f14da598e62ce66d","modified":1474160201679},{"_id":"themes/yilia/languages/fr.yml","hash":"b4be1c1592a72012e48df2b3ec41cc9685573e50","modified":1474160201684},{"_id":"themes/yilia/languages/nl.yml","hash":"3d82ec703d0b3287739d7cb4750a715ae83bfcb3","modified":1474160201688},{"_id":"themes/yilia/languages/ru.yml","hash":"2a476b4c6e04900914c81378941640ac5d58a1f0","modified":1474160201697},{"_id":"themes/yilia/.git/FETCH_HEAD","hash":"699e6e00432c30e1781533afd65f490dc99187a5","modified":1496576411416},{"_id":"themes/yilia/languages/no.yml","hash":"ddf2035e920a5ecb9076138c184257d9f51896a7","modified":1474160201693},{"_id":"themes/yilia/languages/zh-tw.yml","hash":"f5f0ca88185da7a8457760d84bf221781473bd7c","modified":1474160201706},{"_id":"themes/yilia/layout/archive.ejs","hash":"2703b07cc8ac64ae46d1d263f4653013c7e1666b","modified":1474160201865},{"_id":"themes/yilia/languages/zh-CN.yml","hash":"b057f389c6713010f97d461e48ec959b0b6f3b44","modified":1474160201701},{"_id":"themes/yilia/layout/tag.ejs","hash":"eaa7b4ccb2ca7befb90142e4e68995fb1ea68b2e","modified":1474160201898},{"_id":"themes/yilia/layout/page.ejs","hash":"7d80e4e36b14d30a7cd2ac1f61376d9ebf264e8b","modified":1474160201893},{"_id":"themes/yilia/layout/category.ejs","hash":"765426a9c8236828dc34759e604cc2c52292835a","modified":1474160201865},{"_id":"themes/yilia/layout/index.ejs","hash":"ec498c6c0606acde997ce195dad97b267418d980","modified":1474160201865},{"_id":"themes/yilia/layout/post.ejs","hash":"7d80e4e36b14d30a7cd2ac1f61376d9ebf264e8b","modified":1474160201895},{"_id":"themes/yilia/source/slider.445162.js","hash":"a727717abfd319c5de84b425331f55aa709c9276","modified":1496576413858},{"_id":"themes/yilia/source/main.b3331d.css","hash":"7d0162a4618e8026bd23779f3120c09c83197b9f","modified":1496576413852},{"_id":"themes/yilia/source-src/css.ejs","hash":"cf7eab48d626433120d1ef9697f719a359817018","modified":1486891118374},{"_id":"themes/yilia/layout/layout.ejs","hash":"b471ab706d48e0be3f783eab1c94bf5878ef5a94","modified":1483801970597},{"_id":"themes/yilia/source-src/script.ejs","hash":"28abac2426761d7e715b38aadd86ce6549c8ae77","modified":1486891118457},{"_id":"themes/yilia/source/mobile.8d90af.js","hash":"0873195fea8d34db7233dab3591d41558fb7388b","modified":1496576413856},{"_id":"themes/yilia/source/main.b3331d.js","hash":"5fcc25cc1650f4ebe5d29ac9744f6d2d3a8be677","modified":1496576413854},{"_id":"themes/yilia/.git/info/exclude","hash":"c879df015d97615050afa7b9641e3352a1e701ac","modified":1474160185963},{"_id":"themes/yilia/.git/logs/HEAD","hash":"a931f7a1fc5ff273b08998211c65c02e940e9272","modified":1496577190968},{"_id":"themes/yilia/.git/refs/stash","hash":"09eed3d5c8880e19ed7442ccb82a435bff8f510d","modified":1496576590683},{"_id":"source/assets/blogImg/zhangzhe.jpg","hash":"d5f7cfd5cc970932ecb9e6ee9cd534e7079b08dc","modified":1475744693791},{"_id":"themes/yilia/layout/_partial/archive-post.ejs","hash":"edc0154b30a4127acda10297bec6aacf754b4ac4","modified":1474160201717},{"_id":"themes/yilia/layout/_partial/after-footer.ejs","hash":"61c95c49baa2c1bfd99cf88c55ba205b44bf3d97","modified":1483801970386},{"_id":"themes/yilia/layout/_partial/archive.ejs","hash":"a4eacc2bc1278095a0ef99f904b0634c78f980eb","modified":1474160201736},{"_id":"themes/yilia/layout/_partial/css.ejs","hash":"f8a42263edeeb3ccf6115cea5f96f551ed1e76e5","modified":1496576413768},{"_id":"themes/yilia/layout/_partial/article.ejs","hash":"8bbf5db9e4d3c1037bbeaa16f9d7ea0dc281d23c","modified":1496576413766},{"_id":"themes/yilia/layout/_partial/baidu-analytics.ejs","hash":"155327c23607f69989b58845f24d842a54e504b8","modified":1483801970430},{"_id":"themes/yilia/layout/_partial/head.ejs","hash":"12ca7d8dba56bc767b9309dda9526dcbaffc1614","modified":1483801970454},{"_id":"themes/yilia/layout/_partial/left-col.ejs","hash":"6f3f8c1dc25a9a1ffe4051344b5516fa713f1666","modified":1496576693549},{"_id":"themes/yilia/layout/_partial/google-analytics.ejs","hash":"1ccc627d7697e68fddc367c73ac09920457e5b35","modified":1474160201771},{"_id":"themes/yilia/layout/_partial/footer.ejs","hash":"871f81cacd5d41cb2eb001cd56254217a857dc2f","modified":1474160201765},{"_id":"themes/yilia/layout/_partial/mathjax.ejs","hash":"11550a418921d330e6553be0569a94ab5a217967","modified":1474160201802},{"_id":"themes/yilia/layout/_partial/mobile-nav.ejs","hash":"ccec1fc70f021cb50ac85b524e7949878ab93a18","modified":1483801970484},{"_id":"themes/yilia/source/fonts/default-skin.b257fa.svg","hash":"2ac727c9e092331d35cce95af209ccfac6d4c7c7","modified":1483801971328},{"_id":"themes/yilia/source/fonts/iconfont.6e162c.woff","hash":"709373d566526ad4bdb330757a3915e3c5e37b66","modified":1496576413848},{"_id":"themes/yilia/layout/_partial/viewer.ejs","hash":"cc1c39903aed0a0601d104238d2bbd13ad2a36f3","modified":1483801970581},{"_id":"themes/yilia/layout/_partial/tools.ejs","hash":"0ffcb251b79e8a920c9b4cb6bb7a96a808816165","modified":1496576413811},{"_id":"themes/yilia/source/fonts/tooltip.4004ff.svg","hash":"397fe4b1093bf9b62457dac48aa15dac06b54a3c","modified":1483801971387},{"_id":"themes/yilia/source/fonts/iconfont.9abe9f.svg","hash":"2853b9d8fecd83e26eb032891785afcdaf8b14e2","modified":1496576413849},{"_id":"themes/yilia/source/img/default-skin.png","hash":"ed95a8e40a2c3478c5915376acb8e5f33677f24d","modified":1483801971389},{"_id":"themes/yilia/source/fonts/iconfont.d0da7e.ttf","hash":"53ea5a5027a2fab93bcdad18cad6dc5f1b728726","modified":1496576413851},{"_id":"themes/yilia/source/img/preloader.gif","hash":"6342367c93c82da1b9c620e97c84a389cc43d96d","modified":1483801971390},{"_id":"themes/yilia/source-src/css/_function.scss","hash":"ce227b6f5a9af194fd5d455200630f32c05e151f","modified":1474160201913},{"_id":"themes/yilia/source-src/css/_core.scss","hash":"29ba600e98ed55f7af4ade8038272c84cba21188","modified":1474160201909},{"_id":"themes/yilia/source-src/css/archive.scss","hash":"d6a7dd88404b383b5b94e4c7ec675a410c41f3cc","modified":1496576413816},{"_id":"themes/yilia/source-src/css/article-inner.scss","hash":"f7388f5c11370ef462f7cb913d8f72edf24ecaf9","modified":1496576413818},{"_id":"themes/yilia/source-src/css/article-main.scss","hash":"1577a2336b3ad122f49f60dff2bc1a97d4e7b18b","modified":1483801970616},{"_id":"themes/yilia/source-src/css/article-nav.scss","hash":"8f82fe898ba1c1bd00c24a7d8270feddc7eba3bc","modified":1496576413820},{"_id":"themes/yilia/source-src/css/article.scss","hash":"55d082fec4c6bb341725567acaa29ce37d50320a","modified":1483801970626},{"_id":"themes/yilia/source-src/css/comment.scss","hash":"2d1c70bb606c0d87e4f68ec2e600e08b27f32b99","modified":1496576413821},{"_id":"themes/yilia/source-src/css/fonts.scss","hash":"768e77b775923c53f974a15fe9ab04d0e05198a5","modified":1496576413823},{"_id":"themes/yilia/source-src/css/footer.scss","hash":"7ca837a4cc34db1c35f01baec85eb10ccc64ea86","modified":1474160202005},{"_id":"themes/yilia/source/fonts/iconfont.3a9902.eot","hash":"51d4e8d333ae7867915037983ea5d4b2ad971930","modified":1496576413847},{"_id":"themes/yilia/source-src/css/highlight.scss","hash":"40e5aa5056dc0b3b9f51c5b387370b612e265d4e","modified":1486891118413},{"_id":"themes/yilia/source-src/css/grid.scss","hash":"f53ea8270752b5919ec5d79224d22af91f2eda12","modified":1483801970689},{"_id":"themes/yilia/source-src/css/global.scss","hash":"b4cb4f45a55d4250cd9056f76dab2a3c0dabcec4","modified":1474160202005},{"_id":"themes/yilia/source-src/css/left.scss","hash":"80dac621e43581a254d0152d5df901e4d0b01c09","modified":1496576413835},{"_id":"themes/yilia/source-src/css/main.scss","hash":"1bc3240d693f190f86bf5e258cc5846e09be9ec1","modified":1496576413837},{"_id":"themes/yilia/source-src/css/mobile-slider.scss","hash":"19f10fd2f0c3377aa4b165b3c2291ecf86dd9351","modified":1483801970735},{"_id":"themes/yilia/source-src/css/mobile.scss","hash":"7c24ea86d95c86b82337177559d78ce56d8912e0","modified":1496576413839},{"_id":"themes/yilia/source-src/css/page.scss","hash":"244c4d75c375978ff9edb74acc68825e63c6b235","modified":1474160202052},{"_id":"themes/yilia/source-src/css/scroll.scss","hash":"2495f7e4e3b055735c531f944b5f40a118a351ec","modified":1474160202052},{"_id":"themes/yilia/source-src/css/reward.scss","hash":"a557a9ed244c82b8b71e9da9de3339d92783499f","modified":1483801970936},{"_id":"themes/yilia/source-src/css/share.scss","hash":"9d6f6884f40c191882e56a1e1e1192400944a515","modified":1483801970990},{"_id":"themes/yilia/layout/_partial/header.ejs","hash":"b69855e07b65117769adc515cb64b803932068c9","modified":1483801970461},{"_id":"themes/yilia/source-src/css/tags-cloud.scss","hash":"399744e98e7c67939ed9b23c2670d8baad044eda","modified":1474160202067},{"_id":"themes/yilia/source-src/css/tools.scss","hash":"6932c642bf8191768d7090982a91c8c1f1c4ed1e","modified":1496576413843},{"_id":"themes/yilia/source-src/js/Q.js","hash":"e56d9710afa79b31ca6b9fbd845f6d1895f5214b","modified":1483801971081},{"_id":"themes/yilia/source-src/css/social.scss","hash":"7c4c54bcc4cd0bd69162745ae2a2357dcc54f5cd","modified":1496576413841},{"_id":"themes/yilia/source-src/css/tags.scss","hash":"915c93edd67c5326695cc7dc84b14c5f154dbcc8","modified":1483801971010},{"_id":"themes/yilia/source-src/css/tooltip.scss","hash":"b81cedbe31accca82e597801186911a7b5e6841c","modified":1483801971033},{"_id":"themes/yilia/source-src/js/anm.js","hash":"d18f6276a352b871390a4112d479b9e58b8cdbbe","modified":1483801971105},{"_id":"themes/yilia/source-src/js/fix.js","hash":"0b434b658abad220459b1e3ee962ebfa4f8f88ca","modified":1496576413845},{"_id":"themes/yilia/source-src/js/main.js","hash":"93ca570a646c6087821d7b14cb1646bb2a0274f4","modified":1483801971157},{"_id":"themes/yilia/source-src/js/browser.js","hash":"4dc04845cf27f350922b63f1813a9c82e6e33b05","modified":1483801971125},{"_id":"themes/yilia/source-src/js/report.js","hash":"57680f9a23bd0a1eaafd64ae08cc33e20627ab15","modified":1483801971199},{"_id":"themes/yilia/source-src/js/mobile.js","hash":"461c08ffcbc724d74ec7e0ff38e171eefe0f89fd","modified":1483801971178},{"_id":"themes/yilia/source-src/js/share.js","hash":"d4ccff8266c37363b3904226f5d035b7db882c61","modified":1483801971217},{"_id":"themes/yilia/source-src/js/slider.js","hash":"707842efee006e3ea9b6765d7460f4ef4f08e41f","modified":1486891118432},{"_id":"themes/yilia/source-src/js/util.js","hash":"3bcdeb95072b85600874424e6929e3e22cfddaa0","modified":1483801971260},{"_id":"themes/yilia/source-src/js/viewer.js","hash":"3e0fd4479a40ddbd1571c6c953df7e23637b61f5","modified":1483801971277},{"_id":"source/assets/blogImg/service_binding_tree_lifecycle.png","hash":"eda090eefdd0ad8c9324caa1977d351b7d0633bb","modified":1475744693780},{"_id":"source/assets/blogImg/getX.png","hash":"2bff0efbd620f1911193fe255038939beb001fbf","modified":1475744693777},{"_id":"themes/yilia/.git/hooks/applypatch-msg.sample","hash":"4de88eb95a5e93fd27e78b5fb3b5231a8d8917dd","modified":1474160185916},{"_id":"themes/yilia/.git/hooks/post-update.sample","hash":"b614c2f63da7dca9f1db2e7ade61ef30448fc96c","modified":1474160185932},{"_id":"themes/yilia/.git/hooks/pre-applypatch.sample","hash":"f208287c1a92525de9f5462e905a9d31de1e2d75","modified":1474160185932},{"_id":"source/assets/blogImg/service_lifecycle.png","hash":"8f58fa262d06b6ea8e20ca738da45a6c06d42ecb","modified":1475744693784},{"_id":"themes/yilia/.git/hooks/pre-commit.sample","hash":"36aed8976dcc08b5076844f0ec645b18bc37758f","modified":1474160185932},{"_id":"themes/yilia/.git/hooks/pre-push.sample","hash":"5c8518bfd1d1d3d2c1a7194994c0a16d8a313a41","modified":1474160185948},{"_id":"themes/yilia/.git/hooks/commit-msg.sample","hash":"ee1ed5aad98a435f2020b6de35c173b75d9affac","modified":1474160185916},{"_id":"themes/yilia/.git/hooks/prepare-commit-msg.sample","hash":"2b6275eda365cad50d167fe3a387c9bc9fedd54f","modified":1474160185963},{"_id":"themes/yilia/source/img/scrollbar_arrow.png","hash":"d64a33c4ddfbdb89deeb6f4e3d36eb84dc4777c0","modified":1483801971392},{"_id":"themes/yilia/.git/hooks/pre-rebase.sample","hash":"5885a56ab4fca8075a05a562d005e922cde9853b","modified":1474160185948},{"_id":"themes/yilia/.git/hooks/update.sample","hash":"e729cd61b27c128951d139de8e7c63d1a3758dde","modified":1474160185963},{"_id":"themes/yilia/layout/_partial/script.ejs","hash":"eaa2c1cb8165dee6fb10127a0de8dcfcd1799c2e","modified":1496576413809},{"_id":"themes/yilia/.git/refs/heads/master","hash":"597a0d14c701a189e5d74eaa70341e78e3ad7c80","modified":1496577190963},{"_id":"themes/yilia/.git/logs/refs/stash","hash":"3ddd4e1bffa20abac4713b7f94bfa43b8f1b434f","modified":1496576590683},{"_id":"themes/yilia/.git/objects/05/025ec79ca5adfedc028478dd58557e5043468b","hash":"76d8e2f223039aebc37d53972e6a8ecb5951eaa4","modified":1486743707438},{"_id":"themes/yilia/.git/objects/00/d210706283d552672b60f13c1b5f4a2788dee3","hash":"79e4bda63c6d2439adaa9460fd3cf85fd793bfd3","modified":1496576573443},{"_id":"themes/yilia/.git/objects/06/3dfa9878a9c19e05633e028bcec3814eb470d0","hash":"3b2cdbe822b66dd6af3512e0065f32e70bc53da2","modified":1486743707801},{"_id":"themes/yilia/.git/objects/0f/3a4763bf649cbcf6e6c6ef4bde3e42aa77adf0","hash":"9b60f138dabe89dd7aab0805ee8d296c331117f4","modified":1483801956255},{"_id":"themes/yilia/.git/objects/09/61c12d1b380f5d1517874840d5c82ab47f09cf","hash":"8e424abdcc9379c97b8da8f41552cca8b8bcf078","modified":1486743707530},{"_id":"themes/yilia/.git/objects/11/83f2d3d454c6bbe67b0950599f6c1a04c7ff9a","hash":"b2be8fa9c82665ad541de66060cbd1070e24e551","modified":1486743707904},{"_id":"themes/yilia/.git/objects/0b/fd1471da4da98b4eaf0b412c33fd7753108dff","hash":"6320a32eac886668be8514093849fb20fcb123cf","modified":1486743707912},{"_id":"themes/yilia/.git/objects/10/9ab32b07728319b6c46dc54ccbbdcd485dceb5","hash":"45954493b23333d73c3de150899308de52b27e34","modified":1486743707638},{"_id":"themes/yilia/.git/objects/11/e2487f354cef47abac97cc3e167286bfa42b93","hash":"6ab1d405de64c7bda14122badbcabd3cdc8066eb","modified":1486743707656},{"_id":"themes/yilia/.git/objects/14/42379f0180d8008ad4ed215f7639ebcabe405c","hash":"c4653de6c8d1f91403e8661923cb66f6f81b7214","modified":1483801956110},{"_id":"themes/yilia/.git/objects/22/28034fda3da70a07872c69f318f8455a4fd84b","hash":"e0acb2718ed5135be440a62fb7a297292d04135f","modified":1486743707842},{"_id":"themes/yilia/.git/objects/10/ee4df83a9c5d37e6888bf3a60a680cc6015b80","hash":"7eb1e2da4983d31090375ad8977590ff2a61e0ca","modified":1483801956240},{"_id":"themes/yilia/.git/objects/24/f14ff59246d21f33882004f76c5c2124ec31e2","hash":"803ee79fed803df01449a7f8780a16c0e43185fe","modified":1486891107423},{"_id":"themes/yilia/.git/objects/2a/36a9d491751c872c55726434f73d446d3d9cee","hash":"30176c7f01acfb50d58e397d3fbb80c48433dd50","modified":1486743707479},{"_id":"themes/yilia/.git/objects/2a/03f5bde06c2cfdb34d0a283f2d9a992ae10e26","hash":"05380b6d336928350b26c3e1a52a0135816c4bf0","modified":1486891107383},{"_id":"themes/yilia/.git/objects/25/49187a507493705d53f5587ee1ee0e9fcadd5b","hash":"6c696b75f0f3e1734676f7f6d77bb9c2d093f3e3","modified":1496576414711},{"_id":"themes/yilia/.git/objects/2f/2e30a294975e0daf737e420a036fa1febf1185","hash":"2e4ff622ed5a011bfe5cb283b637daa07808e5b5","modified":1496576414709},{"_id":"themes/yilia/.git/objects/31/66cb4c763f76dedcf34dd5c4de70e40d8791b6","hash":"d484d7f763d279bf5ebb1f5aa2eef074123907e8","modified":1486743707742},{"_id":"themes/yilia/.git/objects/38/75bf4046886d3963f6c7b0438d34bf9ed14116","hash":"38d63375093e900dfb1b2e3b696ad5e90d8b2290","modified":1486743707679},{"_id":"themes/yilia/.git/objects/38/ae77e6a3357cf264d7002c54c1308e6e42a0a1","hash":"a96e0f32f31ce45e9198133d822178ef75f7a18c","modified":1483801955669},{"_id":"themes/yilia/.git/objects/48/001c5fd8fb0652b41234591fd98799f6eba85f","hash":"29a2b87845ec6354ee9422d9129d1042a5f1c379","modified":1486743707396},{"_id":"themes/yilia/.git/objects/48/d135bdfe407a89f76ab0734eb17a0c5cce9d50","hash":"455a19569170606e42753023983ef0bc967669e6","modified":1496576914194},{"_id":"themes/yilia/.git/objects/2d/43e67af6a67697a1b4e36cbda4c68501a4dd89","hash":"7712ac70c3335b1119b0a153ed4155d69d1a19f6","modified":1486743707939},{"_id":"themes/yilia/.git/objects/40/29d31c6bd2a50de5671ce2343c8ebc7e017e20","hash":"ef91720fbdf396a23f811c947b976ee877e1ef69","modified":1486891119761},{"_id":"themes/yilia/.git/objects/3d/6b83835a5c055065f67a8d374c6050fb69d06a","hash":"f329cfad00c916ab9c87f3e1d26766886e0ccb4f","modified":1486743707928},{"_id":"themes/yilia/.git/objects/4d/602011bad3b0b4bc0f0a8c707c94bcc743f135","hash":"18cd53a50ddf9955f4e3f1cef8a2a7d5817aaa65","modified":1486743707412},{"_id":"themes/yilia/.git/objects/4e/2ae7bfd8f5aefbb0e2c2e349033450d278a297","hash":"0f2849682c8a37e6fe67bec6e8233d126fc5a16b","modified":1486743707672},{"_id":"themes/yilia/.git/objects/4b/a44bf39d288008e300a019a4aced136d4b0fbd","hash":"3a09bfe087a02d36d774bbd0bc63de57dca08f7d","modified":1486743707825},{"_id":"themes/yilia/.git/objects/4a/d661b8ce7070eafdb5ff45d63f393b38bbc079","hash":"17235197d81d7db30472308bd3fb8732cd7087ad","modified":1496576914000},{"_id":"themes/yilia/.git/objects/52/0b360c8934af5f1b3f4c96b4d20b627f6d29a8","hash":"0d334d71bf1e51e0bfdf9c96541724ce8d74c819","modified":1496576402828},{"_id":"themes/yilia/.git/objects/41/1f23f1b55f6c32aa77c06fa2540f7875502ce1","hash":"98091c26213db8f203789f18b7bbe80c09b68d75","modified":1496576693000},{"_id":"themes/yilia/.git/objects/54/cfe555508b683a56769d16ab08306be9250938","hash":"5241971b7d22ec98b23a3270cd598afe2d6184fc","modified":1486891119777},{"_id":"themes/yilia/.git/objects/53/96bb299000725cc5650fc494fbdd044d70525c","hash":"c970919e6698e20088951f7a53251fb2689e9042","modified":1483801992058},{"_id":"themes/yilia/.git/objects/3d/2bbdee04e794bcd1181059429961634a1e3561","hash":"d1715a193aac1fbdc34635c84dec9ed6b4eb8a7a","modified":1486743707727},{"_id":"themes/yilia/.git/objects/56/8c99e2f518f08656d668cf5c8f67e0e49886dd","hash":"7dc11de4f1668eadfb6a52bf894235111e8a0322","modified":1486743707489},{"_id":"themes/yilia/.git/objects/4f/c01d68e68d8bce11091bcfd7a5c1d11911e4bf","hash":"593dd9612a6a43e2a298497a23e53a9e6fe14cde","modified":1496576914212},{"_id":"themes/yilia/.git/objects/5a/d1743e3d4d5342ed8525cd68d13cbf22d1f3e7","hash":"c29c11a647e523fb1d93945630996e5f8f0dd1c6","modified":1483801956249},{"_id":"themes/yilia/.git/objects/54/63f0b8bd19c23cfc7616eb6f71e247e3810fbe","hash":"c136390b9e9673f1112a303de6332aa2374b03d6","modified":1496576403207},{"_id":"themes/yilia/.git/objects/5b/c4936212a103a23b15248dea6a33933ad5f5e5","hash":"96bad09ecde105983f22b143cd7909b0c18d4c92","modified":1496576403518},{"_id":"themes/yilia/.git/objects/65/a11aecf014f26951d48ab0c2ade6796bc385ff","hash":"54b78f19afee6e65aed82d9785dcd0ba39489d0b","modified":1486743707771},{"_id":"themes/yilia/.git/objects/5e/f1e9ee8a3ed2d9fd21e56a9cb775b81ebecca7","hash":"6d9692a9484a0882852d7e6b9ccf5bef291e5236","modified":1486743707749},{"_id":"themes/yilia/.git/objects/6b/5c0466179e4754e954341cffd37ea15a17a11e","hash":"713997b8f422f2d9b8829d292a55ab08f8245594","modified":1496576414596},{"_id":"themes/yilia/.git/objects/6d/1ab9bea03ffb649f08c35364047126283d2363","hash":"ca391bcfc472e0e2fde757948a4e02f98d61beb7","modified":1486743707471},{"_id":"themes/yilia/.git/objects/60/23ab1c64378edcb8e94771007c263a76a44215","hash":"e05c7426d5a62a77db7454f43b81780c11d2e29a","modified":1483801956103},{"_id":"themes/yilia/.git/objects/64/bc75993607d1a0bea853e7daa2c181118c786f","hash":"632e6d47147365a0c951ab4986953ce42004141f","modified":1486743707920},{"_id":"themes/yilia/.git/objects/66/d20a0e5a923f25c09dc8266845395086eb3111","hash":"f590b575619d8804741f0d40f6d7d3c986d866ad","modified":1486891107332},{"_id":"themes/yilia/.git/objects/75/8c2b3736197c79a96a6749b89a8e0785bf5ee5","hash":"d84fc0c212cfdbb365b889c3fa2b0d1754576c40","modified":1486743707546},{"_id":"themes/yilia/.git/objects/6f/a2baebf2e6fbf306e471ef993e4ffd7f05b585","hash":"a57d90e35d0c60d9c487cc133729e69bed8fa021","modified":1486743707816},{"_id":"themes/yilia/.git/objects/78/d41a51c0fac47ef4b72f8163e1707fc7007551","hash":"9ae2c05c65d25707d851a111fbca7c337cbc3f2b","modified":1496576414713},{"_id":"themes/yilia/.git/objects/81/34ab3943c88b2bef3f7045a82d6eaa5144581f","hash":"2725d135406f0447e0b87a1109ca8d71b5b4bf50","modified":1496576414599},{"_id":"themes/yilia/.git/objects/79/1f6757defe5ec1f4fb32a2e20c39159363f2b6","hash":"28d45b9f3f63e72626d090b1f219afbd0b8db95b","modified":1486891107391},{"_id":"themes/yilia/.git/objects/83/5bb9c710fbd563419820eba7709c5b797e16b2","hash":"1383b37f3d0dc37d1bb6085088f696f34fdec241","modified":1486743707589},{"_id":"themes/yilia/.git/objects/77/1e3b2bf84dd3d6c29b655cb050ac249ca970b6","hash":"4d7b4124e912e0be5f3a1f98a4398bfc537b2b45","modified":1486743707430},{"_id":"themes/yilia/.git/objects/87/4759aba64a9bddb910fdf76202615a0e496b5b","hash":"d3e6516d07a99d7582d73d5f0731f2c8d3bc0813","modified":1486743707734},{"_id":"themes/yilia/.git/objects/69/b6b1e9ccd684211e2f5dc96384545aafa7f58a","hash":"536f31625fd217bd4f4c31e56de229f3e4d9036f","modified":1486743708014},{"_id":"themes/yilia/.git/objects/73/910c28904210af81a807bc87f5c32eee98b4df","hash":"3aaaa340a9c17d6a0c9bff7ddb18f0e0a0b8db4d","modified":1496576414000},{"_id":"themes/yilia/.git/objects/8a/34e2d5d47c75dcbf4cc06ae84ba9a72a98158c","hash":"dd88baad5ea91e63b574f4a147c62155dafd2881","modified":1486743707520},{"_id":"themes/yilia/.git/objects/8e/af7d5cb4b5a250a09788fcac314418bb07f111","hash":"09f197e16cfd2b973cbda8a8e01f19d3b371e5f0","modified":1486743707597},{"_id":"themes/yilia/.git/objects/86/51d03ccf648e8856134613ecf439feab07b487","hash":"7cd7ccda78a2c047fe08a17ae07afcee5cdaf966","modified":1483801956537},{"_id":"themes/yilia/.git/objects/84/f0154faebaab317b141e2b0c6baa8b44dddaa2","hash":"99b33ea4979599b673d181553cb4625902913545","modified":1496576901146},{"_id":"themes/yilia/.git/objects/8f/f6b52c3adedc5619cd346855611fbea2ac35d1","hash":"f8df1d8a635deb875c136b4bde9bf385876fe815","modified":1486743707380},{"_id":"themes/yilia/.git/objects/9a/89ff73c05630c252ea6c6469d2e02d297173f6","hash":"f9234ef0a6fa146557eaf20a3d752cc7e21c9238","modified":1486743707420},{"_id":"themes/yilia/.git/objects/88/ddf22453bf198599a188d4de4f292bb294ff72","hash":"6f7ac6c82fad4f10fba5e95992dda25905be9156","modified":1486743707895},{"_id":"themes/yilia/.git/objects/98/1d89125a78b6e2d58f24b173417107c5209604","hash":"ca8f13c04063ae195c83e284fc2b55df5c0c09ba","modified":1486743707851},{"_id":"themes/yilia/.git/objects/b1/8588fd602f25aa4de4d37cbd94279327144705","hash":"3428a9db26e8d54830f7344d92d95bab9b52d4ca","modified":1486891119740},{"_id":"themes/yilia/.git/objects/a8/84cdad4c7dca22f1a8c03696e9cf9f87bc093e","hash":"d885ba581a99fbb870a54253340bad6401fc4697","modified":1486743707664},{"_id":"themes/yilia/.git/objects/b1/ef8ee3d83078c8c7ce57d8d09fedc752800fa2","hash":"0bcbc7807a265e5d702dbdb4b391b879abf87960","modified":1486743707554},{"_id":"themes/yilia/.git/objects/ac/4a5bdd32081403d6ca252de1e31660544ed92c","hash":"861d10882f67847a74035cb08c445467dcea900b","modified":1486743707764},{"_id":"themes/yilia/.git/objects/ab/81fb546b29bf20beeafc885d1d58f264c04494","hash":"166630c6914036ec921b25e5b598ef4ad40f8e0b","modified":1496576403315},{"_id":"themes/yilia/.git/objects/b6/39c53065e5d6b2b4c3ae2b5737e8cf0d28eb31","hash":"7cc9e09791ec5264dd9c40211ac370fb569b943e","modified":1496576914000},{"_id":"themes/yilia/.git/objects/b4/bb072930d06b2bdbd262f65e146f764ffd622b","hash":"1496db9b160c38881548195fea4a3b26fa3ead59","modified":1486743707404},{"_id":"themes/yilia/.git/objects/98/d3764cfb1894bdff480de5c3cce0dec3a057f3","hash":"404512a8af64a021251b0d4cc46dd13c922e158e","modified":1483801992076},{"_id":"themes/yilia/.git/objects/ba/ee4fe970d2690e6c9bc17eba91d4c76528d66d","hash":"60f7781c7e897ccfc7a3ca620e36c2900d034e5b","modified":1486743707579},{"_id":"themes/yilia/.git/objects/c4/40551cbbc088c9d8ffa24834b7f5b4be23f85d","hash":"5e31c2c1a3f71a4bb2920aad08c4e500c9bec942","modified":1486743707539},{"_id":"themes/yilia/.git/objects/ba/02ee12137c4545b7a6cec743f92f04fc8e2180","hash":"4f79fc3cf8b967d44983bb94b68d753f5bde3491","modified":1486743707949},{"_id":"themes/yilia/.git/objects/c0/2c66a827b811061271e9bafa82259700b400f7","hash":"de6cbf00e6299d11184392d375a54e7fc9032470","modified":1496576414601},{"_id":"themes/yilia/.git/objects/c5/3ba41ca08f8f57d8714f43df158b2e839a9935","hash":"bc7744b8406db187470c36fa804f87e4fb08ed4d","modified":1496576573428},{"_id":"themes/yilia/.git/objects/b5/a7f05066ff20f7effab133f9b7eaa8175789fb","hash":"1881b4231d5fe44b062461a2856623ac7869470b","modified":1496576414840},{"_id":"themes/yilia/.git/objects/ce/93b026f74fecc44e6e33c4075947c9ded8d70b","hash":"b31a401e7de6f1904051edf730e7dfc3bcb02d6c","modified":1486743707873},{"_id":"themes/yilia/.git/objects/d0/dbe8ca88f1c599ffa705063f43f8dc14e6b65c","hash":"e83981073d7c6bf9d425b0dcfac557be59b38f11","modified":1486743707993},{"_id":"themes/yilia/.git/objects/e3/365ace247b2d64eb046fb3fd441f3214eb84e6","hash":"0b11fc6b49261342cfba245ec9d320b949b6d388","modified":1486743708003},{"_id":"themes/yilia/.git/objects/dc/971b1128be4c963d7f3a7bfed48bc2bda7d8eb","hash":"39b2c0159da1e5c959f4cd65b255598705fc0263","modified":1486743707463},{"_id":"themes/yilia/.git/objects/d5/7b0eae6dada964063006c541f5fba224607ce4","hash":"b07bb055e7d76844b3c355c5ff02796bbbe0570c","modified":1486743707794},{"_id":"themes/yilia/.git/objects/d9/91752461929aa048210155bf03e12a55cf1cef","hash":"769e2fb8be08d70a7bb0ab9089d7bf091f7bff7e","modified":1486743707834},{"_id":"themes/yilia/.git/objects/d5/dac81af164244a12940348fda4566208433fc1","hash":"1619c77c967b00280547c8821b73255f1a8908a0","modified":1496576693391},{"_id":"themes/yilia/.git/objects/e6/6c3ddaedc49103b8a7fc4a4cbfe0080ff76d94","hash":"5655f4ed7a19126bf198a21232a67c476740daaf","modified":1486743707447},{"_id":"themes/yilia/.git/objects/e4/28fe8be69057e1bd61a022da60f9dafea83bd5","hash":"e069b56a99023637b54e6142a93d64e2c85e83fc","modified":1486743707570},{"_id":"themes/yilia/.git/objects/ed/a627ad59997a0a76c0774ca8d488ca11229000","hash":"9bacc2cc1ccc48dc15ea99b2cd28376edcfc086e","modified":1486743707506},{"_id":"themes/yilia/.git/objects/f6/98a183936552664f4cc598543f18332538e5a8","hash":"fd1b25a1a29c797eae2bf74f71ea5afa19e61301","modified":1486743707809},{"_id":"themes/yilia/.git/objects/e9/1d2b6d6dc36e8ad37e2020ea0323425bb8dee3","hash":"2e0afde47f7d93faa6f60d8c726bb670619dea3e","modified":1496576693552},{"_id":"themes/yilia/.git/objects/f8/2cbc282bef56c081f182df7073683c749feef2","hash":"16c9b58ec4d85ae4b118fb5161bcec13808d47bf","modified":1486743707756},{"_id":"themes/yilia/.git/objects/cf/8ac4b4f4903dfb644362e3dde58a189adbca9a","hash":"4bbacfc23add7cd59ae9a62b39382e961e15a681","modified":1486743707981},{"_id":"themes/yilia/.git/objects/pack/pack-738a1f3d6e80940080d7c136fe21fb101c01581f.idx","hash":"1893614a5c7482065b8a04f0ea835eebf32b3e16","modified":1496576395446},{"_id":"themes/yilia/.git/objects/pack/pack-3b74d4d5eacba667205d38a328b396d955aa76f5.idx","hash":"405f48d45c00bfdcad973f9942ddc5bc86a14c77","modified":1483801917334},{"_id":"themes/yilia/.git/objects/pack/pack-f287423bdddd0dae090311153706b8ee09994797.idx","hash":"6a16af275dd353c57c9afec2d28157e5c5453a57","modified":1474160201396},{"_id":"themes/yilia/.git/objects/f8/86801f04cbfd5f42431dde09f9ae3bce74908b","hash":"004549faa179c857e9516eb9f4ad5709c9182738","modified":1486743707454},{"_id":"themes/yilia/.git/objects/f3/b736e430437deee212634d7c70c0d6ac2699b3","hash":"cda62e2c47cb24c4bf707cd28a994648d9f277fa","modified":1496576564584},{"_id":"themes/yilia/.git/objects/fe/16f80a4186284110ed181ab4acb4f6a20dbc9b","hash":"59d6a597f38c3656054a81e5195a5b8c5a6af1ae","modified":1496576684000},{"_id":"themes/yilia/.git/objects/55/08f1da3427819cd9176b8657f4c4645eaadab2","hash":"63e416ec0b5e699880e03159e69a5b4b09c8f224","modified":1486743707497},{"_id":"themes/yilia/.git/objects/55/f5325951b03246222e0e2adea866ab06380263","hash":"15a672ea7f865d7d3dc32ce986983859251fb388","modified":1486743707388},{"_id":"themes/yilia/.git/objects/55/1793c73d63bf32f91b003a72ad1ca5990fcf83","hash":"875653cb02c1a0bfe5a3d9fd4f3112bb9a8ef5a7","modified":1486743707883},{"_id":"themes/yilia/.git/objects/f7/c2ce3af119542aca91b43917eb3885ee9a1de3","hash":"39d5343debe5565e239dbe414989bada799f59a3","modified":1486743707562},{"_id":"themes/yilia/layout/_partial/post/date.ejs","hash":"aae96de18d48cd3b9b7bf6fed0100e15b53cca97","modified":1483801970499},{"_id":"themes/yilia/layout/_partial/post/category.ejs","hash":"f75b236818b6c0ec0e5e6c12a517825d6230d756","modified":1486891118292},{"_id":"themes/yilia/layout/_partial/post/nav.ejs","hash":"b6a97043f9ec37e571aacacfedcda1d4d75e3c7c","modified":1474160201818},{"_id":"themes/yilia/layout/_partial/post/duoshuo.ejs","hash":"f6b4c4eaafb5ac386273354b5f64a26139b7a3b0","modified":1474160201818},{"_id":"themes/yilia/layout/_partial/post/title.ejs","hash":"d4a460a35e2112d0c7414fd5e19b3a16093f1caf","modified":1474160201849},{"_id":"themes/yilia/layout/_partial/post/tag.ejs","hash":"2c4e4ca36c9bb4318506c38aca7127f1f44d827f","modified":1483801970518},{"_id":"themes/yilia/layout/_partial/post/share.ejs","hash":"06a2dd18ac9a43fbc9a59c61e6f795f9326e9927","modified":1483801970509},{"_id":"themes/yilia/source-src/css/core/_animation.scss","hash":"1834c3ed8560716e63bb3a50be94cac87fbbeaf3","modified":1483801970634},{"_id":"themes/yilia/layout/_partial/post/wangyiyun.ejs","hash":"fb022502c741b4a26bad6b2ad37245c10ede3f1a","modified":1496576413806},{"_id":"themes/yilia/layout/_partial/post/changyan.ejs","hash":"cc384aeaed9ffde92efdf192c26db4da3fe5858f","modified":1496576413805},{"_id":"themes/yilia/source-src/css/core/_reset.scss","hash":"398a49913b4a47d928103562b1ce94520be4026a","modified":1474160201976},{"_id":"themes/yilia/source-src/css/core/_media-queries.scss","hash":"262ffcd88775080b7f511db37f58d2bcb1b2bfc7","modified":1474160201963},{"_id":"themes/yilia/source-src/css/core/_variables.scss","hash":"6e75bdaa46de83094ba0873099c6e7d656a22453","modified":1474160201982},{"_id":"themes/yilia/source-src/css/fonts/iconfont.svg","hash":"2853b9d8fecd83e26eb032891785afcdaf8b14e2","modified":1496576413828},{"_id":"themes/yilia/source-src/css/core/_mixin.scss","hash":"91db061c9c17628291a005e5bd4936cf9d35a6c4","modified":1483801970644},{"_id":"themes/yilia/source-src/css/fonts/iconfont.woff","hash":"709373d566526ad4bdb330757a3915e3c5e37b66","modified":1496576413833},{"_id":"themes/yilia/source-src/css/img/checkered-pattern.png","hash":"049262fa0886989d750637b264bed34ab51c23c8","modified":1474160202020},{"_id":"themes/yilia/source-src/css/img/scrollbar_arrow.png","hash":"d64a33c4ddfbdb89deeb6f4e3d36eb84dc4777c0","modified":1474160202036},{"_id":"themes/yilia/source-src/css/img/tooltip.svg","hash":"397fe4b1093bf9b62457dac48aa15dac06b54a3c","modified":1483801970693},{"_id":"themes/yilia/.git/objects/c4/67fc262ce24443b8a3fee09833f4b7f0218c2d","hash":"8929df9363ffd97dff13c09ab249f58af5169ccd","modified":1486891119809},{"_id":"themes/yilia/source-src/css/fonts/iconfont.ttf","hash":"53ea5a5027a2fab93bcdad18cad6dc5f1b728726","modified":1496576413830},{"_id":"themes/yilia/source-src/css/fonts/iconfont.eot","hash":"51d4e8d333ae7867915037983ea5d4b2ad971930","modified":1496576413825},{"_id":"source/assets/blogImg/cat.jpg","hash":"07ec243a561640c379d2d088caedbb0789f3d5b1","modified":1475744693764},{"_id":"themes/yilia/.git/refs/remotes/origin/HEAD","hash":"d9427cda09aba1cdde5c69c2b13c905bddb0bc51","modified":1474160201613},{"_id":"themes/yilia/.git/refs/remotes/origin/master","hash":"597a0d14c701a189e5d74eaa70341e78e3ad7c80","modified":1496576395618},{"_id":"themes/yilia/.git/refs/remotes/origin/myself","hash":"d9893970a3f49fee45d449931381c471db51e5ec","modified":1483801917546},{"_id":"themes/yilia/.git/logs/refs/heads/master","hash":"58df4db931098df2c1dee050092693d155a2f453","modified":1496577190967},{"_id":"themes/yilia/.git/logs/refs/remotes/origin/master","hash":"23299dd467ea84f400ccea1f6e260ea1e913b484","modified":1496576395621},{"_id":"themes/yilia/.git/logs/refs/remotes/origin/myself","hash":"d9ca225efb2648a9df6003eaa2ea26d3097271b6","modified":1483801917551},{"_id":"themes/yilia/.git/logs/refs/remotes/origin/HEAD","hash":"7d87cc956364bc48669ad14fff337d9216febbf2","modified":1474160201609},{"_id":"source/assets/blogImg/colorAccent.jpg","hash":"6712969d1eb8357224faaf2525178d73969d7d05","modified":1475744693772},{"_id":"themes/yilia/.git/objects/pack/pack-738a1f3d6e80940080d7c136fe21fb101c01581f.pack","hash":"63fa7a5f2aed404ec1de3550581eb0bc2fa763c7","modified":1496576914000},{"_id":"themes/yilia/.git/objects/pack/pack-3b74d4d5eacba667205d38a328b396d955aa76f5.pack","hash":"0e1370e63b603ecbfd227d3e2cf1d51ba08b91d6","modified":1496576914000},{"_id":"themes/yilia/.git/objects/pack/pack-f287423bdddd0dae090311153706b8ee09994797.pack","hash":"10edfacb4a22e329c5cd4e6d5826dc65034d84ae","modified":1496576914000},{"_id":"public/atom.xml","hash":"aca49e1904e472e746305d03f02895d836cef8da","modified":1499820679600},{"_id":"public/content.json","hash":"a4fcd9b8c918f6eef860e40f34956e505b6bee15","modified":1499820681272},{"_id":"public/sitemap.xml","hash":"9aa410d9ec47bc2665f802a96972237ccd8c3b04","modified":1499820681408},{"_id":"public/2017/07/01/2017-07-01-it-began-with-a-few-bits/index.html","hash":"ff77dbf202cea96dda4ffb66359867d74158651f","modified":1499820681488},{"_id":"public/2017/06/25/2017-06-12-Collections-Refuled-by-Stuart-Marks/index.html","hash":"0be7146dd811f19f313b480d5656689f8180a87c","modified":1499820681556},{"_id":"public/2017/06/25/2017-06-25-deploying-flask-app-on-linux-server/index.html","hash":"a26718d8245df907cd70a048698da41619911ccc","modified":1499820681564},{"_id":"public/2017/06/18/2017-06-18-linux-commands-extended/index.html","hash":"b766b3b61d6d496be88a7eac7a97efe2dfec4d29","modified":1499820681564},{"_id":"public/2017/06/17/2017-06-17-tiny-details-in-java/index.html","hash":"d5c352af0fbf3d958f57ad62dc833c40f513d261","modified":1499820681564},{"_id":"public/2017/06/15/2017-06-15-python-networks/index.html","hash":"abcd029ee4f7676550d1455fb9e719f06a4cbdb1","modified":1499820681564},{"_id":"public/2017/05/24/2017-05-24-jvm-architecture/index.html","hash":"caf22a681367297995baeb8bf10650de66224d45","modified":1499820681568},{"_id":"public/2017/05/07/2017-05-07-download-video-from-vps/index.html","hash":"18626fa354316b18c69137814d675836c1d998ee","modified":1499820681568},{"_id":"public/2017/05/01/2017-05-01-python-server-test/index.html","hash":"6689b9e890e0a905f36970707043366d97ed5bb8","modified":1499820681568},{"_id":"public/2017/04/30/2017-04-30-concurrency-and-beyond/index.html","hash":"b5ef9e15aa35f92e6d8e74edf85a9980380bf49a","modified":1499820681568},{"_id":"public/2017/04/23/2017-04-23-rxjava2-for-android/index.html","hash":"72b29ee9e6246d2ce51c5ea75a36db3bc87066cc","modified":1499820681568},{"_id":"public/2017/04/03/2017-04-03-properties-of-view/index.html","hash":"33e3dae5dad4e56b1f24d1e97b0b4f64ed936305","modified":1499820681568},{"_id":"public/2017/03/11/2017-03-11-utilizing-the-terminal-in-android-studio/index.html","hash":"05d4a3467cdd83db0a1979dc99c9fa0845903c24","modified":1499820681568},{"_id":"public/2017/01/13/2017-01-13-embracing-kotlin/index.html","hash":"6f267438b43a6f6dce5e25fbf487299d1308595d","modified":1499820681568},{"_id":"public/2017/01/08/2017-01-08-trouble-shooting-with-my-blog/index.html","hash":"e1e4bb0dfbfaad545a6a41185adaaaa9137a36f3","modified":1499820681568},{"_id":"public/2017/01/07/2017-01-07-Linux-Basic-Commands/index.html","hash":"1ce53b55460a2d63ee3ce3abb98da3be41e07a84","modified":1499820681568},{"_id":"public/2016/12/31/2016-12-31-Eliminating-BoilPlate-AnnotationProcessor/index.html","hash":"e24a03bee8f1b2c16153ab9ea2cd8f6fcc283f9c","modified":1499820681572},{"_id":"public/2016/12/24/2016-12-24-Python-UnicodeEncodeError/index.html","hash":"f8e4222bbed9a3cc2fc857b5d6e7c09348d698fa","modified":1499820681572},{"_id":"public/2016/12/10/2016-12-10-adb-command/index.html","hash":"1d6838eb9b9cef4bb2328e48cead9afd706339ff","modified":1499820681572},{"_id":"public/2016/11/27/2016-11-27-the-size-of-wrap-content/index.html","hash":"5f4c839bee162bc1b945a1d9eb620c68c829fbd5","modified":1499820681572},{"_id":"public/2016/10/31/2016-10-31-install-lxml-on-windows/index.html","hash":"8c8fd9bb6d70cb00c3e5f73cfa0a98fab5a92662","modified":1499820681572},{"_id":"public/2016/10/24/2016-10-24-a-peek-on-pull-to-refresh/index.html","hash":"5870d87f328115b811fb0ec0144cc7151ea262eb","modified":1499820681572},{"_id":"public/2016/10/20/2016-10-20-android-dirty-code/index.html","hash":"2c0372531f3b3c63f700a2a985ac1bca94a6b344","modified":1499820681572},{"_id":"public/2016/10/20/2016-10-20-write-your-own-layoutmanager/index.html","hash":"5e4ad05dccaeb79337991de966b15c65ceb15e0e","modified":1499820681572},{"_id":"public/2016/10/20/2016-10-20-RecyclerViewAnimationStuff/index.html","hash":"161fb08b90ef6924787e818b54ecb17c37a6d5b1","modified":1499820681572},{"_id":"public/2016/10/15/2016-10-15-using-loader-in-android-app/index.html","hash":"7467fe011df57a6b9419b19495e07d41d05a945c","modified":1499820681572},{"_id":"public/2016/10/14/2016-10-14-Android-translucent-status-bar/index.html","hash":"e01643b21834e487c25e15fffb933b21494d5e6a","modified":1499820681572},{"_id":"public/2016/10/13/2016-10-13-Android-coordinate-System/index.html","hash":"41ebe434bcc4af87a704b02f4f55db893c3f3150","modified":1499820681572},{"_id":"public/2016/10/12/2016-10-12-How-the-mainThread-work/index.html","hash":"b779859bb50f2999f0f47df4ec5531a24a507f3f","modified":1499820681572},{"_id":"public/2016/10/10/theme-versus-style/index.html","hash":"283e62a8fd4a42f67535c9f1292ec5ec4241c161","modified":1499820681572},{"_id":"public/2016/10/08/android-7-0-new-features/index.html","hash":"9bbcbb02c7e3855d6862e1750ab4e2646aa9ab9d","modified":1499820681572},{"_id":"public/2016/10/06/touch-event-distribution/index.html","hash":"ab8ff088f8810d01e73de87404b9056cb8a048a5","modified":1499820681572},{"_id":"public/2016/09/30/service-activity-communication/index.html","hash":"fdd40f3e07196d39f1e8734c3dd454d8c54e13e3","modified":1499820681572},{"_id":"public/2016/09/27/git-manual/index.html","hash":"dffd321df6cf2d48866f68a5315998b93f856d1c","modified":1499820681572},{"_id":"public/2016/09/27/activity-transition-pre-and-post-lollipop/index.html","hash":"f719b0bcd75ba50a5d5f8719c6c3c581b0684000","modified":1499820681572},{"_id":"public/2016/09/23/selectableItemBackground-foreground/index.html","hash":"ff40d108127b737e2f0f98d95a9e71f225923a92","modified":1499820681572},{"_id":"public/2016/09/22/replace-butterKnife-with-databinding/index.html","hash":"85c9c104b1351159dae942c1c8d960cbb8cd5dd3","modified":1499820681576},{"_id":"public/2016/09/18/android-inner-class-leak/index.html","hash":"f0866d7017f6e7c0f1c3e393d8127531a75049d6","modified":1499820681576},{"_id":"public/categories/blog/index.html","hash":"ed1df9fe63133009e3ba42a94f11e9361277a2ad","modified":1499820681576},{"_id":"public/categories/blog/page/2/index.html","hash":"0e6b8cbee374201bf65c0fc45101a1fa8f2da456","modified":1499820681576},{"_id":"public/categories/blog/page/3/index.html","hash":"72ad92918530f5dff09a11d6e432e19d28924572","modified":1499820681576},{"_id":"public/categories/blog/page/4/index.html","hash":"0f023b4479a819df551551df1414dbb9709688a0","modified":1499820681576},{"_id":"public/categories/blog/page/5/index.html","hash":"2d74c5b0c2d1fc05ffe19c02187a3032187ab493","modified":1499820681576},{"_id":"public/categories/blog/page/6/index.html","hash":"12421d0233593f1ebaafd5e21a077cb160a380ff","modified":1499820681576},{"_id":"public/categories/blog/page/7/index.html","hash":"9ac2b1e14b019062cd7214562c144b4c024319e0","modified":1499820681576},{"_id":"public/categories/blog/page/8/index.html","hash":"380239d816a4bf4b82a4917821fc686218349123","modified":1499820681576},{"_id":"public/categories/blog/page/9/index.html","hash":"4fa9f25f3c8088530cb97453f92a64f4b7e0955f","modified":1499820681576},{"_id":"public/archives/index.html","hash":"c09b0020d70a86283fdc209166c3f291c834071d","modified":1499820681576},{"_id":"public/archives/page/2/index.html","hash":"af7dd02180c1f69d6b70b0e1b8cbf6b64ad5f862","modified":1499820681580},{"_id":"public/archives/page/3/index.html","hash":"9b7ac2645efce4aa7a5163720743b0a87c5bcb49","modified":1499820681580},{"_id":"public/archives/page/4/index.html","hash":"a8b705bb28d52828d8752375e1dff3a68f4e930a","modified":1499820681580},{"_id":"public/archives/page/5/index.html","hash":"b8befc8ec22e02a7ed9eb3e95cd93d6e843f8fe9","modified":1499820681580},{"_id":"public/archives/page/6/index.html","hash":"f9d31857888c1611a3c97dd08ba69091b283eef4","modified":1499820681580},{"_id":"public/archives/page/7/index.html","hash":"b9553242af38bcd667ae8a92f2b3fb208eba0fb6","modified":1499820681580},{"_id":"public/archives/page/8/index.html","hash":"bba1b864d512adeb6ab5b67938dfe83e389723a4","modified":1499820681580},{"_id":"public/archives/page/9/index.html","hash":"74dd3cf27ae265e4b745cb7548fff5d7b50bbe63","modified":1499820681580},{"_id":"public/archives/page/10/index.html","hash":"d241fe0ccc4bda039d2d4055a0e75e5204c1e2b2","modified":1499820681580},{"_id":"public/archives/2016/index.html","hash":"e4bff8da6a0dff5f915853b64058322487b1874b","modified":1499820681580},{"_id":"public/archives/2016/page/2/index.html","hash":"7d8e955c4c258980dccc7464b2ad597e38660743","modified":1499820681580},{"_id":"public/archives/2016/page/3/index.html","hash":"9040815049ebbbba5c80e20a90d92597b7af5c62","modified":1499820681580},{"_id":"public/archives/2016/page/4/index.html","hash":"d57b0bb2cb0c445207fd755f20713bb2a940ac6a","modified":1499820681580},{"_id":"public/archives/2016/page/5/index.html","hash":"474a7ae8655926190c6059f084cefcbf16cd4822","modified":1499820681580},{"_id":"public/archives/2016/page/6/index.html","hash":"06a978df0f9ec16ec3bf8688a1f003ef69729466","modified":1499820681580},{"_id":"public/archives/2016/09/index.html","hash":"d4715b43b8dad64a0685b5ad4291eeb65655b1a7","modified":1499820681580},{"_id":"public/archives/2016/09/page/2/index.html","hash":"616326f1d7b78812cc3ec9366db2edc064a40c33","modified":1499820681580},{"_id":"public/archives/2016/10/index.html","hash":"b0427c96995e1311b433bf1b161c952ba9d9410b","modified":1499820681580},{"_id":"public/archives/2016/10/page/2/index.html","hash":"ad02f9b376e4f2f7861dbd0422e1e7af6b42a7ba","modified":1499820681580},{"_id":"public/archives/2016/10/page/3/index.html","hash":"fe9e5ca33aa89a6d04853e000b73cb800e26f631","modified":1499820681580},{"_id":"public/archives/2016/11/index.html","hash":"726b326880e9db875b3b08cd4e921b6ec9dc2c6c","modified":1499820681580},{"_id":"public/archives/2016/12/index.html","hash":"c9def105ef8cf79685f1ac808510e87a852d930b","modified":1499820681580},{"_id":"public/archives/2017/index.html","hash":"fb5e4eed1b92dcf8051ac9975dddcf8815418ba4","modified":1499820681580},{"_id":"public/archives/2017/page/2/index.html","hash":"686a69a033ad26351c88a632d0bfa0f8bdcc13b5","modified":1499820681580},{"_id":"public/archives/2017/page/3/index.html","hash":"9e105cd31c75e5fce5a8aa63016f4bcedec23404","modified":1499820681584},{"_id":"public/archives/2017/page/4/index.html","hash":"0b9567eccad9317a9d4db9b3c9ee218dce48cbc4","modified":1499820681584},{"_id":"public/archives/2017/01/index.html","hash":"213b3138d9f1f8e3dee1c8b6d72c70256056d4ac","modified":1499820681584},{"_id":"public/archives/2017/03/index.html","hash":"bd6935c82d14e79ab1346d8b1db33ec947f78631","modified":1499820681584},{"_id":"public/archives/2017/04/index.html","hash":"e7ae374bb61f182a10c4c1323a234840cee5dfc4","modified":1499820681584},{"_id":"public/archives/2017/05/index.html","hash":"fae8f492bae11255a0de91f1f3aaa72b4a4a8ed2","modified":1499820681584},{"_id":"public/archives/2017/06/index.html","hash":"4685500add6847b06e60f9cfc17ffc8f4227c51e","modified":1499820681584},{"_id":"public/archives/2017/06/page/2/index.html","hash":"eac9a2053af6420cc5bc305b9a4d333d1902dfe8","modified":1499820681584},{"_id":"public/archives/2017/07/index.html","hash":"a77e0336b98126a3c448f6d5f0513bfa2c706c92","modified":1499820681584},{"_id":"public/index.html","hash":"ffdbda442055eadbbc903727dedd9ba7d12af550","modified":1499820681584},{"_id":"public/page/2/index.html","hash":"cc480575f1fa870457cde30390f97ab766813298","modified":1499820681584},{"_id":"public/page/3/index.html","hash":"af435628c8857c3c139f6477504eb6361ae260c2","modified":1499820681584},{"_id":"public/page/4/index.html","hash":"dc9be57bc9cdad9bc874ec05d000c8224e77dc90","modified":1499820681584},{"_id":"public/page/5/index.html","hash":"15d715db124b96d4f9d9eea925454128f4475393","modified":1499820681584},{"_id":"public/page/6/index.html","hash":"cd4366d6c296256738226215765b760cdfdb751a","modified":1499820681584},{"_id":"public/page/7/index.html","hash":"62d96ce4bde215e2870d687fe64788ca0d1345e8","modified":1499820681584},{"_id":"public/page/8/index.html","hash":"94a4240f1c2e030664415b517c71c86e290d0551","modified":1499820681584},{"_id":"public/page/9/index.html","hash":"7e1eb97983507d6dc1404390aa4f3bd094619ae2","modified":1499820681584},{"_id":"public/page/10/index.html","hash":"1f9dd225c4e0cc11b7987d7d9c74b5d83dee4c6c","modified":1499820681584},{"_id":"public/tags/android/index.html","hash":"a2f7300671d318621bd918c066532ea5fff89a0c","modified":1499820681584},{"_id":"public/tags/android/page/2/index.html","hash":"64952ad6ce1d8f4c18963d30fa8828b79e7c6d4e","modified":1499820681584},{"_id":"public/tags/android/page/4/index.html","hash":"36ffb1c28b6298742c91d9cd03aeccc8855d24c6","modified":1499820681584},{"_id":"public/tags/android/page/3/index.html","hash":"b3345c9954a91f260a44a528b53358e6f62e2c18","modified":1499820681584},{"_id":"public/tags/android/page/5/index.html","hash":"221b3a3353d11eb245effd1339c86c39cd17be70","modified":1499820681584},{"_id":"public/tags/Window/index.html","hash":"7e246e3d8b3d7e631bb9f38323177de0b90ba1db","modified":1499820681584},{"_id":"public/tags/statusBar/index.html","hash":"a67c483ec2af3d4beffbe08a2d167e7c9e68c5d5","modified":1499820681584},{"_id":"public/tags/TouchEvent/index.html","hash":"4ca542dc5f06cb13bcb90e2d7733a9739ec1f896","modified":1499820681584},{"_id":"public/tags/Handler-Message/index.html","hash":"e339a97b553b5a2038a09587ae4a149e3b526067","modified":1499820681584},{"_id":"public/tags/RecyclerView/index.html","hash":"514f51913c4aacf1cd9277c650ad5226a374e06b","modified":1499820681584},{"_id":"public/tags//index.html","hash":"0b473b883365b7ac9d65f9a20ea0060e52c619e9","modified":1499820681584},{"_id":"public/tags/python/index.html","hash":"1712fa4c12e843a7c507c2c150d190a03e257dd4","modified":1499820681584},{"_id":"public/tags/python/page/2/index.html","hash":"2872176aa8767f39a43ca580c57e9b998c14020d","modified":1499820681588},{"_id":"public/tags/hexo/index.html","hash":"6dbd4cf3fab97a978d5cd9cf4bddbdf342afe7cc","modified":1499820681588},{"_id":"public/tags/adb/index.html","hash":"abec3814d48b084e6c60ab29911c7dd7d1f0fa2e","modified":1499820681588},{"_id":"public/tags/annotation/index.html","hash":"b516a59697ca4caa3215b25939e4c67ec551a274","modified":1499820681592},{"_id":"public/tags/linux/index.html","hash":"bf3554042d407a66d90949aea0425e748c85610e","modified":1499820681592},{"_id":"public/tags/notes/index.html","hash":"f970fe37d61020a140da5640fceaff04949f136d","modified":1499820681592},{"_id":"public/tags/concurrency/index.html","hash":"f5d8808f3221b2f28f20a458841f3ae1a889f945","modified":1499820681592},{"_id":"public/tags/rxjava2/index.html","hash":"cf73a27204298c146b785aa2c2243019bb5084e5","modified":1499820681592},{"_id":"public/tags/kotlin/index.html","hash":"f20626a2c1f6695e7941ba07d9f77fe149e70de7","modified":1499820681592},{"_id":"public/tags/java/index.html","hash":"65b10ecdb5c2d05775de0519e8e10c99d31e4d0b","modified":1499820681592},{"_id":"public/tags/Retrofit/index.html","hash":"7702357484f4038cf47e0ed6b38f325b03045968","modified":1499820681592},{"_id":"public/tags/OkHttp/index.html","hash":"15dbc0de9b5d5d7dbd67543b6b9fae2a086f99f0","modified":1499820681592},{"_id":"public/tags/Okio/index.html","hash":"0955f1ea833db639ed4f859c92ce512413910367","modified":1499820681592},{"_id":"public/tags/jvm/index.html","hash":"1f349b9c41f123e58a216320fb400e23b72caf22","modified":1499820681592},{"_id":"public/tags/transition/index.html","hash":"d12e16a11c7fa6e9162b70b0f585573d19b19ea2","modified":1499820681592},{"_id":"public/tags/git/index.html","hash":"2076b2a4603846a660fc6790dbe58a29307734be","modified":1499820681592},{"_id":"public/tags/foreground/index.html","hash":"7fd0c86822f5a9533b0ea3f56530aa97ae4d93f1","modified":1499820681592},{"_id":"public/tags/databinding/index.html","hash":"913c2142e02c66f214ff664b97fc3cc48e444a32","modified":1499820681600},{"_id":"public/tags/Butterknife/index.html","hash":"1a1acabb4c995a3bf16594727db23ccaeabaf958","modified":1499820681600},{"_id":"public/tags/service/index.html","hash":"32f447a03d850f17a7674ac3f91cb690c5508fa1","modified":1499820681600},{"_id":"public/2017/07/12/2017-07-12-android-cookbook/index.html","hash":"475353c288ae5cdf435bcfa17fb078ce6f0c0f28","modified":1499820681608},{"_id":"public/2017/07/12/2017-07-12-scrapy-notes/index.html","hash":"03d58b8bfaf453e32e6c32590968ad4a7115f6ca","modified":1499820681608},{"_id":"public/2017/07/12/2017-07-12-fragment-decoded/index.html","hash":"7090c2b8515577e6a8ffea40f2ff465013205eb1","modified":1499820681608},{"_id":"public/archives/page/11/index.html","hash":"f610638f5ea83916347a9130c620695b440b6750","modified":1499820681608},{"_id":"public/archives/2017/page/5/index.html","hash":"a4bf0c6e3b7515edc8213c9d21416db8d2f00b43","modified":1499820681608},{"_id":"public/page/11/index.html","hash":"6c6f6831ebaeef1bcd26eac73aaaada620b23fbc","modified":1499820681608},{"_id":"public/tags/android/page/6/index.html","hash":"065497d2821624a4c24860b1ee12674ad1068df9","modified":1499820681608}],"Category":[{"name":"blog","_id":"cj50afguj0002i4vriqy0t9ak"}],"Data":[],"Page":[],"Post":[{"title":"fitSystemWindow","date":"2016-10-14T09:15:47.000Z","_content":"api 19KitKatTransitionart runtime,storage access FrameWork()Full-screen immersive modeAppstatusBarstatusBar\"\"match_parent25dp6.024dp<!--more-->\n\n### 1.\n[SystemBarTint](https://github.com/jgilfelt/SystemBarTint)class,java classpackage namestatusBarnew ViewviewsetBackgroundsetBackgroundColor\n```java\nprivate void setupStatusBarView(Context context, ViewGroup decorViewGroup) {//decorViewGroupactivity.getWindow()\n        mStatusBarTintView = new View(context);\n        LayoutParams params = new LayoutParams(LayoutParams.MATCH_PARENT, mConfig.getStatusBarHeight());\n        params.gravity = Gravity.TOP;\n        if (mNavBarAvailable && !mConfig.isNavigationAtBottom()) {\n            params.rightMargin = mConfig.getNavigationBarWidth();\n        }\n        mStatusBarTintView.setLayoutParams(params);\n        mStatusBarTintView.setBackgroundColor(DEFAULT_TINT_COLOR);\n        mStatusBarTintView.setVisibility(View.GONE);\n        decorViewGroup.addView(mStatusBarTintView);\n    }\n```\n\n\n### 2. fitSystemWindow = ture\nCoordinatelayoutCollapingToolbarLayout24.45.0Toolbarpadding\n</br>  \n  ![trying stuff utill it work](http://odzl05jxx.bkt.clouddn.com/Trying%20stuff%20Untill%20it%20work.jpg?imageView2/2/w/600)\n\n### 3. CollapsingToolbarLayout\n1. 5.0\n```xml\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n    <android.support.design.widget.CoordinatorLayout\n        xmlns:android=\"http://schemas.android.com/apk/res/android\"\n        xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n        android:id=\"@+id/coordinateLayout\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:background=\"@android:color/background_light\"\n        android:fitsSystemWindows=\"true\"\n        >\n\n        <android.support.design.widget.AppBarLayout\n            android:id=\"@+id/appbarLayout\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"300dp\"\n            android:theme=\"@style/ThemeOverlay.AppCompat.Dark.ActionBar\"\n            android:fitsSystemWindows=\"true\"\n            >\n\n            <android.support.design.widget.CollapsingToolbarLayout\n                android:id=\"@+id/collapsingToolbarLayout\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"match_parent\"\n                app:contentScrim=\"?attr/colorPrimary\"\n                app:expandedTitleMarginEnd=\"64dp\"\n                app:expandedTitleMarginStart=\"48dp\"\n                app:layout_scrollFlags=\"scroll|exitUntilCollapsed\"\n                >\n\n                <ImageView\n                    android:id=\"@+id/backdrop\"\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n                    android:scaleType=\"centerCrop\"\n                    android:src=\"@drawable/image_19\"\n                    app:layout_collapseMode=\"parallax\"\n                    android:fitsSystemWindows=\"true\"\n                    />\n\n                <android.support.v7.widget.Toolbar\n                    android:id=\"@+id/toolbar\"\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"?attr/actionBarSize\"\n                    app:layout_collapseMode=\"pin\"\n                    app:popupTheme=\"@style/ThemeOverlay.AppCompat.Light\"\n                    />\n            </android.support.design.widget.CollapsingToolbarLayout>\n        </android.support.design.widget.AppBarLayout>\n\n        <android.support.v4.widget.NestedScrollView\n            android:id=\"@+id/nestedScrollView\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\"\n            app:layout_behavior=\"@string/appbar_scrolling_view_behavior\"\n            >\n\n            <TextView\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"wrap_content\"\n                android:lineSpacingExtra=\"8dp\"\n                android:padding=\"@dimen/activity_horizontal_margin\"\n                android:text=\"@string/newsBody\"\n                android:textSize=\"20sp\"\n                />\n        </android.support.v4.widget.NestedScrollView>\n\n        <android.support.design.widget.FloatingActionButton\n            android:id=\"@+id/fab\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:layout_margin=\"@dimen/activity_horizontal_margin\"\n            android:src=\"@android:drawable/ic_menu_slideshow\"\n            app:layout_anchor=\"@id/appbarLayout\"\n            app:layout_anchorGravity=\"bottom|right|end\"\n            />\n    </android.support.design.widget.CoordinatorLayout>\n```\nCoordinateLayoutAppBarLayoutCollapsingToolbarLayoutxmlandroid:fitSystemWindow = \"true\"\njava\n> getWindow().addFlags(WindowManager.LayoutParams.FLAG_TRANSLUCENT_STATUS); //\n\nActivityvalues-v19 styles <item name=\"android:windowTranslucentStatus\">true</item>\nstatusBarToolbarstatusBar4.4statusBarstatusBar\n\n### 4. fitSystemWindow\nfitSystemWindows \n: \nBoolean internal attribute to adjust view layout based on system windows such as the status bar. If true, adjusts the padding of this view to leave space for the system windows. Will only take effect if this view is in a non-embedded activity. \ntrue,statusbarpadding.\n:\nLinearLayout(fitSystemWindow = false),includetoolbar(fitSystemWindow = true )\n4.44.4-5.05.0,(Appcompat ThemecolorPrimaryDarkstatusBar)\n\n\nCoordinateLayout>  AppBarLyout>  CollapsingToolbarLayout>  Toolbar & ImageView\nToolbar25dppaddingfitSystemWindow = true[fitSystemWindowpadding](https://medium.com/google-developers/why-would-i-want-to-fitssystemwindows-4e26d9ce1eec#.vx75v2c9p),ImageViewstatusBarfitSystemWindow = false\ntoolbarxmlfitSystemWindow5.1ToolbarstatusBarToolbar25dp()\n\n### 5. \n :\n\n 1. SystemBarTintandroid.R.id.contentView View\n ```java\n ViewGroup.LayoutParams statusViewLp = new ViewGroup.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT,\n                    getStatusBarHeight());\ncontentView.addView(statusBarView,layoutParams)\n ```\n ActivityPhoneWindowPhoneWindowViewDecorViewFrameLayoutDecorViewLinearLayoutLinearLayoutFrameLayoutActionBarNoActionBarViewStubContentViewLinearLayoutViewContentView[](http://www.jianshu.com/p/140be70b84cd?utm_source=tuicool&utm_medium=referral)\n xmlfitSystemWindowView\n\n\n2. android.R.id.contentViewView,xmlfitSystemWindows\n\n3. android.R.id.contentViewparentView,xmlfitSystemWindows\n\n\n### 6.4.4,5.1\n**statusBar**\nimageViewstatusBar\nToolbarstatusBar\ntoolbarpadding  >>\ntoolbarmargin   >>>> \n\nxmlfitSystemWindowstyle-v19\nonCreate\n```java\nsetSupportActionBar(binding.toolbar);\ngetSupportActionBar().setDisplayHomeAsUpEnabled(true);  //parentActivity\ngetSupportActionBar().setTitle(\"\");\nCollapsingToolbarLayout.LayoutParams params = (CollapsingToolbarLayout.LayoutParams) binding.toolbar.getLayoutParams();\nparams.setMargins(0, Utils.getStatusBarHeight(), 0, 0); //margin\nbinding.toolbar.setLayoutParams(params);\n```\n\n\n5.1:  \n  ![5.1](http://odzl05jxx.bkt.clouddn.com/statusbar_5.0_expanded.png?imageView2/2/w/300)  \n\n5.1:  \n  ![5.1](http://odzl05jxx.bkt.clouddn.com/statusbar_5.0_collapsed.png?imageView2/2/w/300)  \n\n4.4:  \n  ![4.4](http://odzl05jxx.bkt.clouddn.com/statusbar_4.4_expanded.png?imageView2/2/w/300)  \n\n4.4:\n  ![4.4](http://odzl05jxx.bkt.clouddn.com/statusbar_4.4_collapsed.png?imageView2/2/w/300)  \n\n\nstatusBarToolbar[](http://www.jcodecraeer.com/a/anzhuokaifa/androidkaifa/2016/0330/4104.html)contentViewchildViewmarginTop\n\n\n### 7.onCreatefitSystemWindowsContentView.\nfitSystemWindows = trueActivityonCreateViewCompat.setfitSystems(rootView,false)onCreateonClicksetFitSystemWindowsRootViewfitSystem = falseFrameLayout.LayoutParamsTopMargin()rootViewgetTop,MarginTopTop!=0\nfitSystemWindowsFitSystemWindowLinearLayoutPaddingMarginChild ContentFrameLayout\nfitSystemWindows = falsestatusBarMargin\n\n\n\n\n### 8. \n- Theme\n```xml\n<item name=\"android:fitsSystemWindows\">true</item>\n```\nToastfitSystemWinow = truexml\n\n- windowTranslucentStatusv21colorPrimaryDark(AppCompat)v19(AppCompatstatusBar)\n\n- 6.0statusBar\n\n- Ian LakemediumfitSystemWindow\n\n\n### 9. window\nfitsSystemWindows,  View ,  true ,.\nContentView,  ContentFrameLayout,  dispatchFitSystemWindows ,  fitsSystemWindows .\nContentParent,  FitWindowsLinearLayout,  View  ViewStubCompat,  title , inflate . View  ContentView.\n\n\n### Reference\n1. [Android-transulcent-status-bar](http://www.jcodecraeer.com/a/anzhuokaifa/androidkaifa/2016/0330/4104.html)\n2. [](http://www.jianshu.com/p/140be70b84cd?utm_source=tuicool&utm_medium=referral)\n3. [AndroidTranslucent System Bar ](http://www.jianshu.com/p/0acc12c29c1b)\n4. [Why would I want to fitsSystemWindows](https://medium.com/google-developers/why-would-i-want-to-fitssystemwindows-4e26d9ce1eec)","source":"_posts/2016-10-14-Android-translucent-status-bar.md","raw":"---\ntitle: fitSystemWindow\ndate: 2016-10-14 17:15:47\ncategories: blog\ntags: [android,Window,statusBar]\n---\napi 19KitKatTransitionart runtime,storage access FrameWork()Full-screen immersive modeAppstatusBarstatusBar\"\"match_parent25dp6.024dp<!--more-->\n\n### 1.\n[SystemBarTint](https://github.com/jgilfelt/SystemBarTint)class,java classpackage namestatusBarnew ViewviewsetBackgroundsetBackgroundColor\n```java\nprivate void setupStatusBarView(Context context, ViewGroup decorViewGroup) {//decorViewGroupactivity.getWindow()\n        mStatusBarTintView = new View(context);\n        LayoutParams params = new LayoutParams(LayoutParams.MATCH_PARENT, mConfig.getStatusBarHeight());\n        params.gravity = Gravity.TOP;\n        if (mNavBarAvailable && !mConfig.isNavigationAtBottom()) {\n            params.rightMargin = mConfig.getNavigationBarWidth();\n        }\n        mStatusBarTintView.setLayoutParams(params);\n        mStatusBarTintView.setBackgroundColor(DEFAULT_TINT_COLOR);\n        mStatusBarTintView.setVisibility(View.GONE);\n        decorViewGroup.addView(mStatusBarTintView);\n    }\n```\n\n\n### 2. fitSystemWindow = ture\nCoordinatelayoutCollapingToolbarLayout24.45.0Toolbarpadding\n</br>  \n  ![trying stuff utill it work](http://odzl05jxx.bkt.clouddn.com/Trying%20stuff%20Untill%20it%20work.jpg?imageView2/2/w/600)\n\n### 3. CollapsingToolbarLayout\n1. 5.0\n```xml\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n    <android.support.design.widget.CoordinatorLayout\n        xmlns:android=\"http://schemas.android.com/apk/res/android\"\n        xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n        android:id=\"@+id/coordinateLayout\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:background=\"@android:color/background_light\"\n        android:fitsSystemWindows=\"true\"\n        >\n\n        <android.support.design.widget.AppBarLayout\n            android:id=\"@+id/appbarLayout\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"300dp\"\n            android:theme=\"@style/ThemeOverlay.AppCompat.Dark.ActionBar\"\n            android:fitsSystemWindows=\"true\"\n            >\n\n            <android.support.design.widget.CollapsingToolbarLayout\n                android:id=\"@+id/collapsingToolbarLayout\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"match_parent\"\n                app:contentScrim=\"?attr/colorPrimary\"\n                app:expandedTitleMarginEnd=\"64dp\"\n                app:expandedTitleMarginStart=\"48dp\"\n                app:layout_scrollFlags=\"scroll|exitUntilCollapsed\"\n                >\n\n                <ImageView\n                    android:id=\"@+id/backdrop\"\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"match_parent\"\n                    android:scaleType=\"centerCrop\"\n                    android:src=\"@drawable/image_19\"\n                    app:layout_collapseMode=\"parallax\"\n                    android:fitsSystemWindows=\"true\"\n                    />\n\n                <android.support.v7.widget.Toolbar\n                    android:id=\"@+id/toolbar\"\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"?attr/actionBarSize\"\n                    app:layout_collapseMode=\"pin\"\n                    app:popupTheme=\"@style/ThemeOverlay.AppCompat.Light\"\n                    />\n            </android.support.design.widget.CollapsingToolbarLayout>\n        </android.support.design.widget.AppBarLayout>\n\n        <android.support.v4.widget.NestedScrollView\n            android:id=\"@+id/nestedScrollView\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\"\n            app:layout_behavior=\"@string/appbar_scrolling_view_behavior\"\n            >\n\n            <TextView\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"wrap_content\"\n                android:lineSpacingExtra=\"8dp\"\n                android:padding=\"@dimen/activity_horizontal_margin\"\n                android:text=\"@string/newsBody\"\n                android:textSize=\"20sp\"\n                />\n        </android.support.v4.widget.NestedScrollView>\n\n        <android.support.design.widget.FloatingActionButton\n            android:id=\"@+id/fab\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:layout_margin=\"@dimen/activity_horizontal_margin\"\n            android:src=\"@android:drawable/ic_menu_slideshow\"\n            app:layout_anchor=\"@id/appbarLayout\"\n            app:layout_anchorGravity=\"bottom|right|end\"\n            />\n    </android.support.design.widget.CoordinatorLayout>\n```\nCoordinateLayoutAppBarLayoutCollapsingToolbarLayoutxmlandroid:fitSystemWindow = \"true\"\njava\n> getWindow().addFlags(WindowManager.LayoutParams.FLAG_TRANSLUCENT_STATUS); //\n\nActivityvalues-v19 styles <item name=\"android:windowTranslucentStatus\">true</item>\nstatusBarToolbarstatusBar4.4statusBarstatusBar\n\n### 4. fitSystemWindow\nfitSystemWindows \n: \nBoolean internal attribute to adjust view layout based on system windows such as the status bar. If true, adjusts the padding of this view to leave space for the system windows. Will only take effect if this view is in a non-embedded activity. \ntrue,statusbarpadding.\n:\nLinearLayout(fitSystemWindow = false),includetoolbar(fitSystemWindow = true )\n4.44.4-5.05.0,(Appcompat ThemecolorPrimaryDarkstatusBar)\n\n\nCoordinateLayout>  AppBarLyout>  CollapsingToolbarLayout>  Toolbar & ImageView\nToolbar25dppaddingfitSystemWindow = true[fitSystemWindowpadding](https://medium.com/google-developers/why-would-i-want-to-fitssystemwindows-4e26d9ce1eec#.vx75v2c9p),ImageViewstatusBarfitSystemWindow = false\ntoolbarxmlfitSystemWindow5.1ToolbarstatusBarToolbar25dp()\n\n### 5. \n :\n\n 1. SystemBarTintandroid.R.id.contentView View\n ```java\n ViewGroup.LayoutParams statusViewLp = new ViewGroup.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT,\n                    getStatusBarHeight());\ncontentView.addView(statusBarView,layoutParams)\n ```\n ActivityPhoneWindowPhoneWindowViewDecorViewFrameLayoutDecorViewLinearLayoutLinearLayoutFrameLayoutActionBarNoActionBarViewStubContentViewLinearLayoutViewContentView[](http://www.jianshu.com/p/140be70b84cd?utm_source=tuicool&utm_medium=referral)\n xmlfitSystemWindowView\n\n\n2. android.R.id.contentViewView,xmlfitSystemWindows\n\n3. android.R.id.contentViewparentView,xmlfitSystemWindows\n\n\n### 6.4.4,5.1\n**statusBar**\nimageViewstatusBar\nToolbarstatusBar\ntoolbarpadding  >>\ntoolbarmargin   >>>> \n\nxmlfitSystemWindowstyle-v19\nonCreate\n```java\nsetSupportActionBar(binding.toolbar);\ngetSupportActionBar().setDisplayHomeAsUpEnabled(true);  //parentActivity\ngetSupportActionBar().setTitle(\"\");\nCollapsingToolbarLayout.LayoutParams params = (CollapsingToolbarLayout.LayoutParams) binding.toolbar.getLayoutParams();\nparams.setMargins(0, Utils.getStatusBarHeight(), 0, 0); //margin\nbinding.toolbar.setLayoutParams(params);\n```\n\n\n5.1:  \n  ![5.1](http://odzl05jxx.bkt.clouddn.com/statusbar_5.0_expanded.png?imageView2/2/w/300)  \n\n5.1:  \n  ![5.1](http://odzl05jxx.bkt.clouddn.com/statusbar_5.0_collapsed.png?imageView2/2/w/300)  \n\n4.4:  \n  ![4.4](http://odzl05jxx.bkt.clouddn.com/statusbar_4.4_expanded.png?imageView2/2/w/300)  \n\n4.4:\n  ![4.4](http://odzl05jxx.bkt.clouddn.com/statusbar_4.4_collapsed.png?imageView2/2/w/300)  \n\n\nstatusBarToolbar[](http://www.jcodecraeer.com/a/anzhuokaifa/androidkaifa/2016/0330/4104.html)contentViewchildViewmarginTop\n\n\n### 7.onCreatefitSystemWindowsContentView.\nfitSystemWindows = trueActivityonCreateViewCompat.setfitSystems(rootView,false)onCreateonClicksetFitSystemWindowsRootViewfitSystem = falseFrameLayout.LayoutParamsTopMargin()rootViewgetTop,MarginTopTop!=0\nfitSystemWindowsFitSystemWindowLinearLayoutPaddingMarginChild ContentFrameLayout\nfitSystemWindows = falsestatusBarMargin\n\n\n\n\n### 8. \n- Theme\n```xml\n<item name=\"android:fitsSystemWindows\">true</item>\n```\nToastfitSystemWinow = truexml\n\n- windowTranslucentStatusv21colorPrimaryDark(AppCompat)v19(AppCompatstatusBar)\n\n- 6.0statusBar\n\n- Ian LakemediumfitSystemWindow\n\n\n### 9. window\nfitsSystemWindows,  View ,  true ,.\nContentView,  ContentFrameLayout,  dispatchFitSystemWindows ,  fitsSystemWindows .\nContentParent,  FitWindowsLinearLayout,  View  ViewStubCompat,  title , inflate . View  ContentView.\n\n\n### Reference\n1. [Android-transulcent-status-bar](http://www.jcodecraeer.com/a/anzhuokaifa/androidkaifa/2016/0330/4104.html)\n2. [](http://www.jianshu.com/p/140be70b84cd?utm_source=tuicool&utm_medium=referral)\n3. [AndroidTranslucent System Bar ](http://www.jianshu.com/p/0acc12c29c1b)\n4. [Why would I want to fitsSystemWindows](https://medium.com/google-developers/why-would-i-want-to-fitssystemwindows-4e26d9ce1eec)","slug":"2016-10-14-Android-translucent-status-bar","published":1,"updated":"2017-04-23T10:50:13.581Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj50afgu40000i4vrs8wji6k6","content":"<p>api 19KitKatTransitionart runtime,storage access FrameWork()Full-screen immersive modeAppstatusBarstatusBarmatch_parent25dp6.024dp<a id=\"more\"></a></p>\n<h3 id=\"1-\"><a href=\"#1-\" class=\"headerlink\" title=\"1.\"></a>1.</h3><p><a href=\"https://github.com/jgilfelt/SystemBarTint\">SystemBarTint</a>class,java classpackage namestatusBarnew ViewviewsetBackgroundsetBackgroundColor<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">setupStatusBarView</span><span class=\"params\">(Context context, ViewGroup decorViewGroup)</span> </span>&#123;<span class=\"comment\">//decorViewGroupactivity.getWindow()</span></div><div class=\"line\">        mStatusBarTintView = <span class=\"keyword\">new</span> View(context);</div><div class=\"line\">        LayoutParams params = <span class=\"keyword\">new</span> LayoutParams(LayoutParams.MATCH_PARENT, mConfig.getStatusBarHeight());</div><div class=\"line\">        params.gravity = Gravity.TOP;</div><div class=\"line\">        <span class=\"keyword\">if</span> (mNavBarAvailable &amp;&amp; !mConfig.isNavigationAtBottom()) &#123;</div><div class=\"line\">            params.rightMargin = mConfig.getNavigationBarWidth();</div><div class=\"line\">        &#125;</div><div class=\"line\">        mStatusBarTintView.setLayoutParams(params);</div><div class=\"line\">        mStatusBarTintView.setBackgroundColor(DEFAULT_TINT_COLOR);</div><div class=\"line\">        mStatusBarTintView.setVisibility(View.GONE);</div><div class=\"line\">        decorViewGroup.addView(mStatusBarTintView);</div><div class=\"line\">    &#125;</div></pre></td></tr></table></figure></p>\n<p></p>\n<h3 id=\"2-fitSystemWindow-ture\"><a href=\"#2-fitSystemWindow-ture\" class=\"headerlink\" title=\"2. fitSystemWindow = ture\"></a>2. fitSystemWindow = ture</h3><p>CoordinatelayoutCollapingToolbarLayout24.45.0Toolbarpadding<br></br><br>  <img src=\"http://odzl05jxx.bkt.clouddn.com/Trying%20stuff%20Untill%20it%20work.jpg?imageView2/2/w/600\" alt=\"trying stuff utill it work\"></p>\n<h3 id=\"3-CollapsingToolbarLayout\"><a href=\"#3-CollapsingToolbarLayout\" class=\"headerlink\" title=\"3. CollapsingToolbarLayout\"></a>3. CollapsingToolbarLayout</h3><ol>\n<li>5.0<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;</div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">android.support.design.widget.CoordinatorLayout</span></div><div class=\"line\">        <span class=\"attr\">xmlns:android</span>=<span class=\"string\">\"http://schemas.android.com/apk/res/android\"</span></div><div class=\"line\">        <span class=\"attr\">xmlns:app</span>=<span class=\"string\">\"http://schemas.android.com/apk/res-auto\"</span></div><div class=\"line\">        <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/coordinateLayout\"</span></div><div class=\"line\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">        <span class=\"attr\">android:background</span>=<span class=\"string\">\"@android:color/background_light\"</span></div><div class=\"line\">        <span class=\"attr\">android:fitsSystemWindows</span>=<span class=\"string\">\"true\"</span></div><div class=\"line\">        &gt;</span></div><div class=\"line\"></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">android.support.design.widget.AppBarLayout</span></div><div class=\"line\">            <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/appbarLayout\"</span></div><div class=\"line\">            <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">            <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"300dp\"</span></div><div class=\"line\">            <span class=\"attr\">android:theme</span>=<span class=\"string\">\"@style/ThemeOverlay.AppCompat.Dark.ActionBar\"</span></div><div class=\"line\">            <span class=\"attr\">android:fitsSystemWindows</span>=<span class=\"string\">\"true\"</span></div><div class=\"line\">            &gt;</span></div><div class=\"line\"></div><div class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">android.support.design.widget.CollapsingToolbarLayout</span></div><div class=\"line\">                <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/collapsingToolbarLayout\"</span></div><div class=\"line\">                <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">                <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">                <span class=\"attr\">app:contentScrim</span>=<span class=\"string\">\"?attr/colorPrimary\"</span></div><div class=\"line\">                <span class=\"attr\">app:expandedTitleMarginEnd</span>=<span class=\"string\">\"64dp\"</span></div><div class=\"line\">                <span class=\"attr\">app:expandedTitleMarginStart</span>=<span class=\"string\">\"48dp\"</span></div><div class=\"line\">                <span class=\"attr\">app:layout_scrollFlags</span>=<span class=\"string\">\"scroll|exitUntilCollapsed\"</span></div><div class=\"line\">                &gt;</span></div><div class=\"line\"></div><div class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">ImageView</span></div><div class=\"line\">                    <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/backdrop\"</span></div><div class=\"line\">                    <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">                    <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">                    <span class=\"attr\">android:scaleType</span>=<span class=\"string\">\"centerCrop\"</span></div><div class=\"line\">                    <span class=\"attr\">android:src</span>=<span class=\"string\">\"@drawable/image_19\"</span></div><div class=\"line\">                    <span class=\"attr\">app:layout_collapseMode</span>=<span class=\"string\">\"parallax\"</span></div><div class=\"line\">                    <span class=\"attr\">android:fitsSystemWindows</span>=<span class=\"string\">\"true\"</span></div><div class=\"line\">                    /&gt;</span></div><div class=\"line\"></div><div class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">android.support.v7.widget.Toolbar</span></div><div class=\"line\">                    <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/toolbar\"</span></div><div class=\"line\">                    <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">                    <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"?attr/actionBarSize\"</span></div><div class=\"line\">                    <span class=\"attr\">app:layout_collapseMode</span>=<span class=\"string\">\"pin\"</span></div><div class=\"line\">                    <span class=\"attr\">app:popupTheme</span>=<span class=\"string\">\"@style/ThemeOverlay.AppCompat.Light\"</span></div><div class=\"line\">                    /&gt;</span></div><div class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">android.support.design.widget.CollapsingToolbarLayout</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">android.support.design.widget.AppBarLayout</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">android.support.v4.widget.NestedScrollView</span></div><div class=\"line\">            <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/nestedScrollView\"</span></div><div class=\"line\">            <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">            <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">            <span class=\"attr\">app:layout_behavior</span>=<span class=\"string\">\"@string/appbar_scrolling_view_behavior\"</span></div><div class=\"line\">            &gt;</span></div><div class=\"line\"></div><div class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">TextView</span></div><div class=\"line\">                <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">                <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"wrap_content\"</span></div><div class=\"line\">                <span class=\"attr\">android:lineSpacingExtra</span>=<span class=\"string\">\"8dp\"</span></div><div class=\"line\">                <span class=\"attr\">android:padding</span>=<span class=\"string\">\"@dimen/activity_horizontal_margin\"</span></div><div class=\"line\">                <span class=\"attr\">android:text</span>=<span class=\"string\">\"@string/newsBody\"</span></div><div class=\"line\">                <span class=\"attr\">android:textSize</span>=<span class=\"string\">\"20sp\"</span></div><div class=\"line\">                /&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">android.support.v4.widget.NestedScrollView</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">android.support.design.widget.FloatingActionButton</span></div><div class=\"line\">            <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/fab\"</span></div><div class=\"line\">            <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"wrap_content\"</span></div><div class=\"line\">            <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"wrap_content\"</span></div><div class=\"line\">            <span class=\"attr\">android:layout_margin</span>=<span class=\"string\">\"@dimen/activity_horizontal_margin\"</span></div><div class=\"line\">            <span class=\"attr\">android:src</span>=<span class=\"string\">\"@android:drawable/ic_menu_slideshow\"</span></div><div class=\"line\">            <span class=\"attr\">app:layout_anchor</span>=<span class=\"string\">\"@id/appbarLayout\"</span></div><div class=\"line\">            <span class=\"attr\">app:layout_anchorGravity</span>=<span class=\"string\">\"bottom|right|end\"</span></div><div class=\"line\">            /&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">android.support.design.widget.CoordinatorLayout</span>&gt;</span></div></pre></td></tr></table></figure>\n</li>\n</ol>\n<p>CoordinateLayoutAppBarLayoutCollapsingToolbarLayoutxmlandroid:fitSystemWindow = true<br>java</p>\n<blockquote>\n<p>getWindow().addFlags(WindowManager.LayoutParams.FLAG_TRANSLUCENT_STATUS); //</p>\n</blockquote>\n<p>Activityvalues-v19 styles <item name=\"android:windowTranslucentStatus\">true</item><br>statusBarToolbarstatusBar4.4statusBarstatusBar</p>\n<h3 id=\"4-fitSystemWindow\"><a href=\"#4-fitSystemWindow\" class=\"headerlink\" title=\"4. fitSystemWindow\"></a>4. fitSystemWindow</h3><p>fitSystemWindows<br>:<br>Boolean internal attribute to adjust view layout based on system windows such as the status bar. If true, adjusts the padding of this view to leave space for the system windows. Will only take effect if this view is in a non-embedded activity.<br>true,statusbarpadding.<br>:<br>LinearLayout(fitSystemWindow = false),includetoolbar(fitSystemWindow = true )<br>4.44.4-5.05.0,(Appcompat ThemecolorPrimaryDarkstatusBar)</p>\n<p><br>CoordinateLayout&gt;  AppBarLyout&gt;  CollapsingToolbarLayout&gt;  Toolbar &amp; ImageView<br>Toolbar25dppaddingfitSystemWindow = true<a href=\"https://medium.com/google-developers/why-would-i-want-to-fitssystemwindows-4e26d9ce1eec#.vx75v2c9p\">fitSystemWindowpadding</a>,ImageViewstatusBarfitSystemWindow = false<br>toolbarxmlfitSystemWindow5.1ToolbarstatusBarToolbar25dp()</p>\n<h3 id=\"5-\"><a href=\"#5-\" class=\"headerlink\" title=\"5. \"></a>5. </h3><p> :</p>\n<ol>\n<li><p>SystemBarTintandroid.R.id.contentView View</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"> ViewGroup.LayoutParams statusViewLp = <span class=\"keyword\">new</span> ViewGroup.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT,</div><div class=\"line\">                    getStatusBarHeight());</div><div class=\"line\">contentView.addView(statusBarView,layoutParams)</div></pre></td></tr></table></figure>\n<p>ActivityPhoneWindowPhoneWindowViewDecorViewFrameLayoutDecorViewLinearLayoutLinearLayoutFrameLayoutActionBarNoActionBarViewStubContentViewLinearLayoutViewContentView<a href=\"http://www.jianshu.com/p/140be70b84cd?utm_source=tuicool&amp;utm_medium=referral\"></a><br>xmlfitSystemWindowView</p>\n</li>\n</ol>\n<ol>\n<li><p>android.R.id.contentViewView,xmlfitSystemWindows</p>\n</li>\n<li><p>android.R.id.contentViewparentView,xmlfitSystemWindows</p>\n</li>\n</ol>\n<h3 id=\"6-4-4-5-1\"><a href=\"#6-4-4-5-1\" class=\"headerlink\" title=\"6.4.4,5.1\"></a>6.4.4,5.1</h3><p><strong>statusBar</strong><br>imageViewstatusBar<br>ToolbarstatusBar<br>toolbarpadding  &gt;&gt;<br>toolbarmargin   &gt;&gt;&gt;&gt; </p>\n<p>xmlfitSystemWindowstyle-v19<br>onCreate<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">setSupportActionBar(binding.toolbar);</div><div class=\"line\">getSupportActionBar().setDisplayHomeAsUpEnabled(<span class=\"keyword\">true</span>);  <span class=\"comment\">//parentActivity</span></div><div class=\"line\">getSupportActionBar().setTitle(<span class=\"string\">\"\"</span>);</div><div class=\"line\">CollapsingToolbarLayout.LayoutParams params = (CollapsingToolbarLayout.LayoutParams) binding.toolbar.getLayoutParams();</div><div class=\"line\">params.setMargins(<span class=\"number\">0</span>, Utils.getStatusBarHeight(), <span class=\"number\">0</span>, <span class=\"number\">0</span>); <span class=\"comment\">//margin</span></div><div class=\"line\">binding.toolbar.setLayoutParams(params);</div></pre></td></tr></table></figure></p>\n<p><br><br>5.1:<br>  <img src=\"http://odzl05jxx.bkt.clouddn.com/statusbar_5.0_expanded.png?imageView2/2/w/300\" alt=\"5.1\">  </p>\n<p>5.1:<br>  <img src=\"http://odzl05jxx.bkt.clouddn.com/statusbar_5.0_collapsed.png?imageView2/2/w/300\" alt=\"5.1\">  </p>\n<p>4.4:<br>  <img src=\"http://odzl05jxx.bkt.clouddn.com/statusbar_4.4_expanded.png?imageView2/2/w/300\" alt=\"4.4\">  </p>\n<p>4.4:<br>  <img src=\"http://odzl05jxx.bkt.clouddn.com/statusbar_4.4_collapsed.png?imageView2/2/w/300\" alt=\"4.4\">  </p>\n<p>statusBarToolbar<a href=\"http://www.jcodecraeer.com/a/anzhuokaifa/androidkaifa/2016/0330/4104.html\"></a>contentViewchildViewmarginTop</p>\n<h3 id=\"7-onCreatefitSystemWindowsContentView\"><a href=\"#7-onCreatefitSystemWindowsContentView\" class=\"headerlink\" title=\"7.onCreatefitSystemWindowsContentView.\"></a>7.onCreatefitSystemWindowsContentView.</h3><p>fitSystemWindows = trueActivityonCreateViewCompat.setfitSystems(rootView,false)onCreateonClicksetFitSystemWindowsRootViewfitSystem = falseFrameLayout.LayoutParamsTopMargin()rootViewgetTop,MarginTopTop!=0<br>fitSystemWindowsFitSystemWindowLinearLayoutPaddingMarginChild ContentFrameLayout<br>fitSystemWindows = falsestatusBarMargin</p>\n<h3 id=\"8-\"><a href=\"#8-\" class=\"headerlink\" title=\"8. \"></a>8. </h3><ul>\n<li>Theme<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">\"android:fitsSystemWindows\"</span>&gt;</span>true<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>ToastfitSystemWinow = truexml</p>\n<ul>\n<li><p>windowTranslucentStatusv21colorPrimaryDark(AppCompat)v19(AppCompatstatusBar)</p>\n</li>\n<li><p>6.0statusBar</p>\n</li>\n<li><p>Ian LakemediumfitSystemWindow</p>\n</li>\n</ul>\n<h3 id=\"9-window\"><a href=\"#9-window\" class=\"headerlink\" title=\"9. window\"></a>9. window</h3><p>fitsSystemWindows,  View ,  true ,.<br>ContentView,  ContentFrameLayout,  dispatchFitSystemWindows ,  fitsSystemWindows .<br>ContentParent,  FitWindowsLinearLayout,  View  ViewStubCompat,  title , inflate . View  ContentView.<br></p>\n<h3 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h3><ol>\n<li><a href=\"http://www.jcodecraeer.com/a/anzhuokaifa/androidkaifa/2016/0330/4104.html\">Android-transulcent-status-bar</a></li>\n<li><a href=\"http://www.jianshu.com/p/140be70b84cd?utm_source=tuicool&amp;utm_medium=referral\"></a></li>\n<li><a href=\"http://www.jianshu.com/p/0acc12c29c1b\">AndroidTranslucent System Bar </a></li>\n<li><a href=\"https://medium.com/google-developers/why-would-i-want-to-fitssystemwindows-4e26d9ce1eec\">Why would I want to fitsSystemWindows</a></li>\n</ol>\n","excerpt":"<p>api 19KitKatTransitionart runtime,storage access FrameWork()Full-screen immersive modeAppstatusBarstatusBarmatch_parent25dp6.024dp","more":"</p>\n<h3 id=\"1-\"><a href=\"#1-\" class=\"headerlink\" title=\"1.\"></a>1.</h3><p><a href=\"https://github.com/jgilfelt/SystemBarTint\">SystemBarTint</a>class,java classpackage namestatusBarnew ViewviewsetBackgroundsetBackgroundColor<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">setupStatusBarView</span><span class=\"params\">(Context context, ViewGroup decorViewGroup)</span> </span>&#123;<span class=\"comment\">//decorViewGroupactivity.getWindow()</span></div><div class=\"line\">        mStatusBarTintView = <span class=\"keyword\">new</span> View(context);</div><div class=\"line\">        LayoutParams params = <span class=\"keyword\">new</span> LayoutParams(LayoutParams.MATCH_PARENT, mConfig.getStatusBarHeight());</div><div class=\"line\">        params.gravity = Gravity.TOP;</div><div class=\"line\">        <span class=\"keyword\">if</span> (mNavBarAvailable &amp;&amp; !mConfig.isNavigationAtBottom()) &#123;</div><div class=\"line\">            params.rightMargin = mConfig.getNavigationBarWidth();</div><div class=\"line\">        &#125;</div><div class=\"line\">        mStatusBarTintView.setLayoutParams(params);</div><div class=\"line\">        mStatusBarTintView.setBackgroundColor(DEFAULT_TINT_COLOR);</div><div class=\"line\">        mStatusBarTintView.setVisibility(View.GONE);</div><div class=\"line\">        decorViewGroup.addView(mStatusBarTintView);</div><div class=\"line\">    &#125;</div></pre></td></tr></table></figure></p>\n<p></p>\n<h3 id=\"2-fitSystemWindow-ture\"><a href=\"#2-fitSystemWindow-ture\" class=\"headerlink\" title=\"2. fitSystemWindow = ture\"></a>2. fitSystemWindow = ture</h3><p>CoordinatelayoutCollapingToolbarLayout24.45.0Toolbarpadding<br></br><br>  <img src=\"http://odzl05jxx.bkt.clouddn.com/Trying%20stuff%20Untill%20it%20work.jpg?imageView2/2/w/600\" alt=\"trying stuff utill it work\"></p>\n<h3 id=\"3-CollapsingToolbarLayout\"><a href=\"#3-CollapsingToolbarLayout\" class=\"headerlink\" title=\"3. CollapsingToolbarLayout\"></a>3. CollapsingToolbarLayout</h3><ol>\n<li>5.0<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;</div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">android.support.design.widget.CoordinatorLayout</span></div><div class=\"line\">        <span class=\"attr\">xmlns:android</span>=<span class=\"string\">\"http://schemas.android.com/apk/res/android\"</span></div><div class=\"line\">        <span class=\"attr\">xmlns:app</span>=<span class=\"string\">\"http://schemas.android.com/apk/res-auto\"</span></div><div class=\"line\">        <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/coordinateLayout\"</span></div><div class=\"line\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">        <span class=\"attr\">android:background</span>=<span class=\"string\">\"@android:color/background_light\"</span></div><div class=\"line\">        <span class=\"attr\">android:fitsSystemWindows</span>=<span class=\"string\">\"true\"</span></div><div class=\"line\">        &gt;</span></div><div class=\"line\"></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">android.support.design.widget.AppBarLayout</span></div><div class=\"line\">            <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/appbarLayout\"</span></div><div class=\"line\">            <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">            <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"300dp\"</span></div><div class=\"line\">            <span class=\"attr\">android:theme</span>=<span class=\"string\">\"@style/ThemeOverlay.AppCompat.Dark.ActionBar\"</span></div><div class=\"line\">            <span class=\"attr\">android:fitsSystemWindows</span>=<span class=\"string\">\"true\"</span></div><div class=\"line\">            &gt;</span></div><div class=\"line\"></div><div class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">android.support.design.widget.CollapsingToolbarLayout</span></div><div class=\"line\">                <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/collapsingToolbarLayout\"</span></div><div class=\"line\">                <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">                <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">                <span class=\"attr\">app:contentScrim</span>=<span class=\"string\">\"?attr/colorPrimary\"</span></div><div class=\"line\">                <span class=\"attr\">app:expandedTitleMarginEnd</span>=<span class=\"string\">\"64dp\"</span></div><div class=\"line\">                <span class=\"attr\">app:expandedTitleMarginStart</span>=<span class=\"string\">\"48dp\"</span></div><div class=\"line\">                <span class=\"attr\">app:layout_scrollFlags</span>=<span class=\"string\">\"scroll|exitUntilCollapsed\"</span></div><div class=\"line\">                &gt;</span></div><div class=\"line\"></div><div class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">ImageView</span></div><div class=\"line\">                    <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/backdrop\"</span></div><div class=\"line\">                    <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">                    <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">                    <span class=\"attr\">android:scaleType</span>=<span class=\"string\">\"centerCrop\"</span></div><div class=\"line\">                    <span class=\"attr\">android:src</span>=<span class=\"string\">\"@drawable/image_19\"</span></div><div class=\"line\">                    <span class=\"attr\">app:layout_collapseMode</span>=<span class=\"string\">\"parallax\"</span></div><div class=\"line\">                    <span class=\"attr\">android:fitsSystemWindows</span>=<span class=\"string\">\"true\"</span></div><div class=\"line\">                    /&gt;</span></div><div class=\"line\"></div><div class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">android.support.v7.widget.Toolbar</span></div><div class=\"line\">                    <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/toolbar\"</span></div><div class=\"line\">                    <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">                    <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"?attr/actionBarSize\"</span></div><div class=\"line\">                    <span class=\"attr\">app:layout_collapseMode</span>=<span class=\"string\">\"pin\"</span></div><div class=\"line\">                    <span class=\"attr\">app:popupTheme</span>=<span class=\"string\">\"@style/ThemeOverlay.AppCompat.Light\"</span></div><div class=\"line\">                    /&gt;</span></div><div class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">android.support.design.widget.CollapsingToolbarLayout</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">android.support.design.widget.AppBarLayout</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">android.support.v4.widget.NestedScrollView</span></div><div class=\"line\">            <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/nestedScrollView\"</span></div><div class=\"line\">            <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">            <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">            <span class=\"attr\">app:layout_behavior</span>=<span class=\"string\">\"@string/appbar_scrolling_view_behavior\"</span></div><div class=\"line\">            &gt;</span></div><div class=\"line\"></div><div class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">TextView</span></div><div class=\"line\">                <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">                <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"wrap_content\"</span></div><div class=\"line\">                <span class=\"attr\">android:lineSpacingExtra</span>=<span class=\"string\">\"8dp\"</span></div><div class=\"line\">                <span class=\"attr\">android:padding</span>=<span class=\"string\">\"@dimen/activity_horizontal_margin\"</span></div><div class=\"line\">                <span class=\"attr\">android:text</span>=<span class=\"string\">\"@string/newsBody\"</span></div><div class=\"line\">                <span class=\"attr\">android:textSize</span>=<span class=\"string\">\"20sp\"</span></div><div class=\"line\">                /&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">android.support.v4.widget.NestedScrollView</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">android.support.design.widget.FloatingActionButton</span></div><div class=\"line\">            <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/fab\"</span></div><div class=\"line\">            <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"wrap_content\"</span></div><div class=\"line\">            <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"wrap_content\"</span></div><div class=\"line\">            <span class=\"attr\">android:layout_margin</span>=<span class=\"string\">\"@dimen/activity_horizontal_margin\"</span></div><div class=\"line\">            <span class=\"attr\">android:src</span>=<span class=\"string\">\"@android:drawable/ic_menu_slideshow\"</span></div><div class=\"line\">            <span class=\"attr\">app:layout_anchor</span>=<span class=\"string\">\"@id/appbarLayout\"</span></div><div class=\"line\">            <span class=\"attr\">app:layout_anchorGravity</span>=<span class=\"string\">\"bottom|right|end\"</span></div><div class=\"line\">            /&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">android.support.design.widget.CoordinatorLayout</span>&gt;</span></div></pre></td></tr></table></figure>\n</li>\n</ol>\n<p>CoordinateLayoutAppBarLayoutCollapsingToolbarLayoutxmlandroid:fitSystemWindow = true<br>java</p>\n<blockquote>\n<p>getWindow().addFlags(WindowManager.LayoutParams.FLAG_TRANSLUCENT_STATUS); //</p>\n</blockquote>\n<p>Activityvalues-v19 styles <item name=\"android:windowTranslucentStatus\">true</item><br>statusBarToolbarstatusBar4.4statusBarstatusBar</p>\n<h3 id=\"4-fitSystemWindow\"><a href=\"#4-fitSystemWindow\" class=\"headerlink\" title=\"4. fitSystemWindow\"></a>4. fitSystemWindow</h3><p>fitSystemWindows<br>:<br>Boolean internal attribute to adjust view layout based on system windows such as the status bar. If true, adjusts the padding of this view to leave space for the system windows. Will only take effect if this view is in a non-embedded activity.<br>true,statusbarpadding.<br>:<br>LinearLayout(fitSystemWindow = false),includetoolbar(fitSystemWindow = true )<br>4.44.4-5.05.0,(Appcompat ThemecolorPrimaryDarkstatusBar)</p>\n<p><br>CoordinateLayout&gt;  AppBarLyout&gt;  CollapsingToolbarLayout&gt;  Toolbar &amp; ImageView<br>Toolbar25dppaddingfitSystemWindow = true<a href=\"https://medium.com/google-developers/why-would-i-want-to-fitssystemwindows-4e26d9ce1eec#.vx75v2c9p\">fitSystemWindowpadding</a>,ImageViewstatusBarfitSystemWindow = false<br>toolbarxmlfitSystemWindow5.1ToolbarstatusBarToolbar25dp()</p>\n<h3 id=\"5-\"><a href=\"#5-\" class=\"headerlink\" title=\"5. \"></a>5. </h3><p> :</p>\n<ol>\n<li><p>SystemBarTintandroid.R.id.contentView View</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"> ViewGroup.LayoutParams statusViewLp = <span class=\"keyword\">new</span> ViewGroup.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT,</div><div class=\"line\">                    getStatusBarHeight());</div><div class=\"line\">contentView.addView(statusBarView,layoutParams)</div></pre></td></tr></table></figure>\n<p>ActivityPhoneWindowPhoneWindowViewDecorViewFrameLayoutDecorViewLinearLayoutLinearLayoutFrameLayoutActionBarNoActionBarViewStubContentViewLinearLayoutViewContentView<a href=\"http://www.jianshu.com/p/140be70b84cd?utm_source=tuicool&amp;utm_medium=referral\"></a><br>xmlfitSystemWindowView</p>\n</li>\n</ol>\n<ol>\n<li><p>android.R.id.contentViewView,xmlfitSystemWindows</p>\n</li>\n<li><p>android.R.id.contentViewparentView,xmlfitSystemWindows</p>\n</li>\n</ol>\n<h3 id=\"6-4-4-5-1\"><a href=\"#6-4-4-5-1\" class=\"headerlink\" title=\"6.4.4,5.1\"></a>6.4.4,5.1</h3><p><strong>statusBar</strong><br>imageViewstatusBar<br>ToolbarstatusBar<br>toolbarpadding  &gt;&gt;<br>toolbarmargin   &gt;&gt;&gt;&gt; </p>\n<p>xmlfitSystemWindowstyle-v19<br>onCreate<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">setSupportActionBar(binding.toolbar);</div><div class=\"line\">getSupportActionBar().setDisplayHomeAsUpEnabled(<span class=\"keyword\">true</span>);  <span class=\"comment\">//parentActivity</span></div><div class=\"line\">getSupportActionBar().setTitle(<span class=\"string\">\"\"</span>);</div><div class=\"line\">CollapsingToolbarLayout.LayoutParams params = (CollapsingToolbarLayout.LayoutParams) binding.toolbar.getLayoutParams();</div><div class=\"line\">params.setMargins(<span class=\"number\">0</span>, Utils.getStatusBarHeight(), <span class=\"number\">0</span>, <span class=\"number\">0</span>); <span class=\"comment\">//margin</span></div><div class=\"line\">binding.toolbar.setLayoutParams(params);</div></pre></td></tr></table></figure></p>\n<p><br><br>5.1:<br>  <img src=\"http://odzl05jxx.bkt.clouddn.com/statusbar_5.0_expanded.png?imageView2/2/w/300\" alt=\"5.1\">  </p>\n<p>5.1:<br>  <img src=\"http://odzl05jxx.bkt.clouddn.com/statusbar_5.0_collapsed.png?imageView2/2/w/300\" alt=\"5.1\">  </p>\n<p>4.4:<br>  <img src=\"http://odzl05jxx.bkt.clouddn.com/statusbar_4.4_expanded.png?imageView2/2/w/300\" alt=\"4.4\">  </p>\n<p>4.4:<br>  <img src=\"http://odzl05jxx.bkt.clouddn.com/statusbar_4.4_collapsed.png?imageView2/2/w/300\" alt=\"4.4\">  </p>\n<p>statusBarToolbar<a href=\"http://www.jcodecraeer.com/a/anzhuokaifa/androidkaifa/2016/0330/4104.html\"></a>contentViewchildViewmarginTop</p>\n<h3 id=\"7-onCreatefitSystemWindowsContentView\"><a href=\"#7-onCreatefitSystemWindowsContentView\" class=\"headerlink\" title=\"7.onCreatefitSystemWindowsContentView.\"></a>7.onCreatefitSystemWindowsContentView.</h3><p>fitSystemWindows = trueActivityonCreateViewCompat.setfitSystems(rootView,false)onCreateonClicksetFitSystemWindowsRootViewfitSystem = falseFrameLayout.LayoutParamsTopMargin()rootViewgetTop,MarginTopTop!=0<br>fitSystemWindowsFitSystemWindowLinearLayoutPaddingMarginChild ContentFrameLayout<br>fitSystemWindows = falsestatusBarMargin</p>\n<h3 id=\"8-\"><a href=\"#8-\" class=\"headerlink\" title=\"8. \"></a>8. </h3><ul>\n<li>Theme<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">\"android:fitsSystemWindows\"</span>&gt;</span>true<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>ToastfitSystemWinow = truexml</p>\n<ul>\n<li><p>windowTranslucentStatusv21colorPrimaryDark(AppCompat)v19(AppCompatstatusBar)</p>\n</li>\n<li><p>6.0statusBar</p>\n</li>\n<li><p>Ian LakemediumfitSystemWindow</p>\n</li>\n</ul>\n<h3 id=\"9-window\"><a href=\"#9-window\" class=\"headerlink\" title=\"9. window\"></a>9. window</h3><p>fitsSystemWindows,  View ,  true ,.<br>ContentView,  ContentFrameLayout,  dispatchFitSystemWindows ,  fitsSystemWindows .<br>ContentParent,  FitWindowsLinearLayout,  View  ViewStubCompat,  title , inflate . View  ContentView.<br></p>\n<h3 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h3><ol>\n<li><a href=\"http://www.jcodecraeer.com/a/anzhuokaifa/androidkaifa/2016/0330/4104.html\">Android-transulcent-status-bar</a></li>\n<li><a href=\"http://www.jianshu.com/p/140be70b84cd?utm_source=tuicool&amp;utm_medium=referral\"></a></li>\n<li><a href=\"http://www.jianshu.com/p/0acc12c29c1b\">AndroidTranslucent System Bar </a></li>\n<li><a href=\"https://medium.com/google-developers/why-would-i-want-to-fitssystemwindows-4e26d9ce1eec\">Why would I want to fitsSystemWindows</a></li>\n</ol>"},{"title":"Loader","date":"2016-10-15T11:12:22.000Z","_content":"App:\n\nandroidLoaderLaoderAndroid DevelopersLoaders[](https://www.youtube.com/watch?v=s4eAtMHU5gI&index=8&list=PLWz5rJ2EKKc9CBxr3BVjPTPoDPLdPIFCE)LoaderLoader\n1. ActivityActivityleak\n2. activityViewViewView\n3. \n<!--more-->\n\n### 1. Loader(Cache)\nLoaderAsyncTaskLoaderAppListViewDemoAppV4Loader,\nAppListLoader\n\n```java\npublic class AppListLoader extends AsyncTaskLoader<List<AppEntry>> { //AsynTaskLoaderAppEntryApp\n    private List<AppEntry> mApps;\n    //App\n    final PackageManager mPm;\n    private boolean DEBUG = true;\n    public static final String TAG = AppListLoader.class.getSimpleName();\n\n    //\n    public AppListLoader(Context ctx) {\n        // Loaders may be used across multiple Activitys (assuming they aren't\n        // bound to the LoaderManager), so NEVER hold a reference to the context\n        // directly. Doing so will cause you to leak an entire Activity's context.\n        // The superclass constructor will store a reference to the Application\n        // Context instead, and can be retrieved with a call to getContext().\n        super(ctx);\n        //\n        //context(ActivityApplicationContext)\n        mPm = getContext().getPackageManager();//getContext()ApplicationContext\n    }\n\n    @Override\n    public List<AppEntry> loadInBackground() {\n        if (DEBUG) Log.i(TAG, \"+++ loadInBackground() called! +++\");\n        LogUtil.p(\"\");// ,\n        // Retrieve all installed applications.\n        List<ApplicationInfo> apps = mPm.getInstalledApplications(0);//PackageManager\n        if (apps == null) {\n            apps = new ArrayList<ApplicationInfo>();\n        }\n        // Create corresponding array of entries and load their labels.\n        List<AppEntry> entries = new ArrayList<AppEntry>(apps.size());\n        for (int i = 0; i < apps.size(); i++) {\n            AppEntry entry = new AppEntry(this, apps.get(i));\n            entry.loadLabel(getContext());\n            entries.add(entry);\n        }\n        // Sort the list.\n        Collections.sort(entries, ALPHA_COMPARATOR);\n        return entries;\n    }\n\n    @Override\n    public void deliverResult(List<AppEntry> apps) {\n        //\n        if (isReset()) {//AsyncTaskonPostExecute\n            if (DEBUG)\n                Log.w(TAG, \"+++ Warning! An async query came in while the Loader was reset! +++\");\n            // The Loader has been reset; ignore the result and invalidate the data.\n            // This can happen when the Loader is reset while an asynchronous query\n            // is working in the background. That is, when the background thread\n            // finishes its work and attempts to deliver the results to the client,\n            // it will see here that the Loader has been reset and discard any\n            // resources associated with the new data as necessary.\n            if (apps != null) {\n                releaseResources(apps);\n                return;\n            }\n        }//reset()\n        // Hold a reference to the old data so it doesn't get garbage collected.\n        // We must protect it until the new data has been delivered.\n        List<AppEntry> oldApps = mApps;\n        mApps = apps;\n        if (isStarted()) {// startLoadingstopLoadingreset\n            if (DEBUG) Log.i(TAG, \"+++ Delivering results to the LoaderManager for\" +\n                    \" the ListFragment to display! +++\");\n            // If the Loader is in a started state, have the superclass deliver the\n            // results to the client.\n            super.deliverResult(apps);\n        }\n        // Invalidate the old data as we don't need it any more.\n        if (oldApps != null && oldApps != apps) {\n            if (DEBUG) Log.i(TAG, \"+++ Releasing any old data associated with this Loader. +++\");\n            releaseResources(oldApps);\n        }\n    }\n}\n```\nServerisReset()isStarted()ServerClient\n\n### 2. LoaderManagerLoader\nLoaderManagerActivityFragmentLoaderonCreateonActivityCreated:\n> getSupportedLoaderManager.initLoader()//Activity\n> getLoaderManager() //Fragment\n\nFragmentLoaderActivity,FragmentChild Fragment\nv4LoaderLoaderAndroid3.0FrameWorkv4LoadderAPIv4 Loaderv4release stepv4bug\nmedium[](https://medium.com/google-developers/making-loading-data-on-android-lifecycle-aware-897e12760832#.wrh1ciyts) \n\n>  public abstract <D> Loader<D> initLoader(int id, Bundle args,\n            LoaderManager.LoaderCallbacks<D> callback);\n\t\t\t\n\nDemoFragment\n>  // Initialize a Loader with id '1'. If the Loader with this id already\n            // exists, then the LoaderManager will reuse the existing Loader.\n            getLoaderManager().initLoader(LOADER_ID, null, this);\t\t\t\n\t\t\t\nFragmentimplements  LoaderManager.LoaderCallbacks<List<AppEntry>> //\n\n```java\n public interface LoaderCallbacks<D> {\n       \n        public Loader<D> onCreateLoader(int id, Bundle args);\n\n       \n        public void onLoadFinished(Loader<D> loader, D data);\n\n       \n        public void onLoaderReset(Loader<D> loader);\n    }\n```\t\t\t\nDemo\n```java\n   @Override\n        public android.support.v4.content.Loader<List<AppEntry>> onCreateLoader(int id, Bundle args) {\n            if (DEBUG) Log.i(TAG, \"+++ onCreateLoader() called! +++\");\n            return new AppListLoader(getActivity());\n        }\n\n        @Override\n        public void onLoadFinished(android.support.v4.content.Loader<List<AppEntry>> loader, List<AppEntry> data) {\n            if (DEBUG) Log.i(TAG, \"+++ onLoadFinished() called! +++\");\n            mAdapter.setData(data);//UI\n\n            if (isResumed()) {\n                setListShown(true);\n            } else {\n                setListShownNoAnimation(true);\n            } \n        }\n\n        @Override\n        public void onLoaderReset(android.support.v4.content.Loader<List<AppEntry>> loader) {\n            if (DEBUG) Log.i(TAG, \"+++ onLoadReset() called! +++\");\n            mAdapter.setData(null);//loaderresetUILoaderLoader\n        }\n```\nUI\n\n### 3. Activity\nserver(Loader),AsyncTaskLoaderabstract classloadInBackground\n```java\n @Override\n    protected void onStartLoading() {\n        /* Subclasses must implement this to take care of loading their data,\n          as per {@link #startLoading()}.  This is not called by clients directly,\n          but as a result of a call to {@link #startLoading()}.*/\n        //deliverResults\n    }\n\n    @Override\n    protected void onStopLoading() {\n          /*Subclasses must implement this to take care of stopping their loader,\n          as per {@link #stopLoading()}.  This is not called by clients directly,\n          but as a result of a call to {@link #stopLoading()}.\n          This will always be called from the process's main thread.*/\n    }\n\n    @Override\n    protected void onReset() {\n        /* Subclasses must implement this to take care of resetting their loader,\n         as per {@link #reset()}.  This is not called by clients directly,\n         but as a result of a call to {@link #reset()}.\n         This will always be called from the process's main thread.\n         destoryLoaderLoaderActivity/Fragmentdestory\n         DemoonResetonStopLoading*/\n    }\n\n    @Override\n    public void onCanceled(List<AppEntry> apps) {\n         /* Called if the task was canceled before it was completed.  Gives the class a chance\n          to clean up post-cancellation and to properly dispose of the result.\n         \n          @param data The value that was returned by {@link #loadInBackground}, or null\n          if the task threw {@link OperationCanceledException}.*/\n        //\n    }\n\n    @Override\n    public void forceLoad() {\n        /*Force an asynchronous load. Unlike {@link #startLoading()} this will ignore a previously\n        loaded data set and load a new one.  This simply calls through to the\n        implementation's {@link #onForceLoad()}.  You generally should only call this\n        when the loader is started -- that is, {@link #isStarted()} returns true.\n        Must be called from the process's main thread.*/\n        //startLoadingonConfigurationchangeActivityLoaderisStartedtrue\n    }\n```\nAppApponReceive\n>     mLoader.onContentChanged();\n//forceLoadLoaderstartedtakeContentChangedtrue\n> onStartLoadingtrueforceLoad\n//loadInBackground,deliverResult\ndeliverResultActivitydestoryed(),isStarted(stopLoadingreset)super.deliverResult\n\nLoaderisReset,isStarted\nLoaderCursorLoaderAppMedium\n\n### 4. \nAsyncTaskLoaderAsyncTaskAsyncTaskAsyncTaskLoaderAsyncTaskexecute:\n>  mTask.executeOnExecutor(mExecutor, (Void[]) null);\n\nmExecutor:\n\n> public static final Executor THREAD_POOL_EXECUTOR\n            = new ThreadPoolExecutor(CORE_POOL_SIZE, MAXIMUM_POOL_SIZE, KEEP_ALIVE,\n                    TimeUnit.SECONDS, sPoolWorkQueue, sThreadFactory); \nCORE_POOL_SIZE = 5\n\nrxjavarxjavaloader\n\n### Reference\n\n1. [rxLoader](http://huxian99.github.io/2015/10/28/RxJava%E7%9A%84Android%E5%BC%80%E5%8F%91%E4%B9%8B%E8%B7%AF-RxJava%E5%AE%9E%E6%88%98-%E4%BA%8C/)\n2. [making loading data on android lifecycle aware](https://medium.com/google-developers/making-loading-data-on-android-lifecycle-aware-897e12760832#.btjs9ady6)\n3. [AppListLoader](https://github.com/alexjlockwood/adp-applistloader)","source":"_posts/2016-10-15-using-loader-in-android-app.md","raw":"---\ntitle: Loader\ndate: 2016-10-15 19:12:22\ncategories: blog  \ntags: [android]\n---\nApp:\n\nandroidLoaderLaoderAndroid DevelopersLoaders[](https://www.youtube.com/watch?v=s4eAtMHU5gI&index=8&list=PLWz5rJ2EKKc9CBxr3BVjPTPoDPLdPIFCE)LoaderLoader\n1. ActivityActivityleak\n2. activityViewViewView\n3. \n<!--more-->\n\n### 1. Loader(Cache)\nLoaderAsyncTaskLoaderAppListViewDemoAppV4Loader,\nAppListLoader\n\n```java\npublic class AppListLoader extends AsyncTaskLoader<List<AppEntry>> { //AsynTaskLoaderAppEntryApp\n    private List<AppEntry> mApps;\n    //App\n    final PackageManager mPm;\n    private boolean DEBUG = true;\n    public static final String TAG = AppListLoader.class.getSimpleName();\n\n    //\n    public AppListLoader(Context ctx) {\n        // Loaders may be used across multiple Activitys (assuming they aren't\n        // bound to the LoaderManager), so NEVER hold a reference to the context\n        // directly. Doing so will cause you to leak an entire Activity's context.\n        // The superclass constructor will store a reference to the Application\n        // Context instead, and can be retrieved with a call to getContext().\n        super(ctx);\n        //\n        //context(ActivityApplicationContext)\n        mPm = getContext().getPackageManager();//getContext()ApplicationContext\n    }\n\n    @Override\n    public List<AppEntry> loadInBackground() {\n        if (DEBUG) Log.i(TAG, \"+++ loadInBackground() called! +++\");\n        LogUtil.p(\"\");// ,\n        // Retrieve all installed applications.\n        List<ApplicationInfo> apps = mPm.getInstalledApplications(0);//PackageManager\n        if (apps == null) {\n            apps = new ArrayList<ApplicationInfo>();\n        }\n        // Create corresponding array of entries and load their labels.\n        List<AppEntry> entries = new ArrayList<AppEntry>(apps.size());\n        for (int i = 0; i < apps.size(); i++) {\n            AppEntry entry = new AppEntry(this, apps.get(i));\n            entry.loadLabel(getContext());\n            entries.add(entry);\n        }\n        // Sort the list.\n        Collections.sort(entries, ALPHA_COMPARATOR);\n        return entries;\n    }\n\n    @Override\n    public void deliverResult(List<AppEntry> apps) {\n        //\n        if (isReset()) {//AsyncTaskonPostExecute\n            if (DEBUG)\n                Log.w(TAG, \"+++ Warning! An async query came in while the Loader was reset! +++\");\n            // The Loader has been reset; ignore the result and invalidate the data.\n            // This can happen when the Loader is reset while an asynchronous query\n            // is working in the background. That is, when the background thread\n            // finishes its work and attempts to deliver the results to the client,\n            // it will see here that the Loader has been reset and discard any\n            // resources associated with the new data as necessary.\n            if (apps != null) {\n                releaseResources(apps);\n                return;\n            }\n        }//reset()\n        // Hold a reference to the old data so it doesn't get garbage collected.\n        // We must protect it until the new data has been delivered.\n        List<AppEntry> oldApps = mApps;\n        mApps = apps;\n        if (isStarted()) {// startLoadingstopLoadingreset\n            if (DEBUG) Log.i(TAG, \"+++ Delivering results to the LoaderManager for\" +\n                    \" the ListFragment to display! +++\");\n            // If the Loader is in a started state, have the superclass deliver the\n            // results to the client.\n            super.deliverResult(apps);\n        }\n        // Invalidate the old data as we don't need it any more.\n        if (oldApps != null && oldApps != apps) {\n            if (DEBUG) Log.i(TAG, \"+++ Releasing any old data associated with this Loader. +++\");\n            releaseResources(oldApps);\n        }\n    }\n}\n```\nServerisReset()isStarted()ServerClient\n\n### 2. LoaderManagerLoader\nLoaderManagerActivityFragmentLoaderonCreateonActivityCreated:\n> getSupportedLoaderManager.initLoader()//Activity\n> getLoaderManager() //Fragment\n\nFragmentLoaderActivity,FragmentChild Fragment\nv4LoaderLoaderAndroid3.0FrameWorkv4LoadderAPIv4 Loaderv4release stepv4bug\nmedium[](https://medium.com/google-developers/making-loading-data-on-android-lifecycle-aware-897e12760832#.wrh1ciyts) \n\n>  public abstract <D> Loader<D> initLoader(int id, Bundle args,\n            LoaderManager.LoaderCallbacks<D> callback);\n\t\t\t\n\nDemoFragment\n>  // Initialize a Loader with id '1'. If the Loader with this id already\n            // exists, then the LoaderManager will reuse the existing Loader.\n            getLoaderManager().initLoader(LOADER_ID, null, this);\t\t\t\n\t\t\t\nFragmentimplements  LoaderManager.LoaderCallbacks<List<AppEntry>> //\n\n```java\n public interface LoaderCallbacks<D> {\n       \n        public Loader<D> onCreateLoader(int id, Bundle args);\n\n       \n        public void onLoadFinished(Loader<D> loader, D data);\n\n       \n        public void onLoaderReset(Loader<D> loader);\n    }\n```\t\t\t\nDemo\n```java\n   @Override\n        public android.support.v4.content.Loader<List<AppEntry>> onCreateLoader(int id, Bundle args) {\n            if (DEBUG) Log.i(TAG, \"+++ onCreateLoader() called! +++\");\n            return new AppListLoader(getActivity());\n        }\n\n        @Override\n        public void onLoadFinished(android.support.v4.content.Loader<List<AppEntry>> loader, List<AppEntry> data) {\n            if (DEBUG) Log.i(TAG, \"+++ onLoadFinished() called! +++\");\n            mAdapter.setData(data);//UI\n\n            if (isResumed()) {\n                setListShown(true);\n            } else {\n                setListShownNoAnimation(true);\n            } \n        }\n\n        @Override\n        public void onLoaderReset(android.support.v4.content.Loader<List<AppEntry>> loader) {\n            if (DEBUG) Log.i(TAG, \"+++ onLoadReset() called! +++\");\n            mAdapter.setData(null);//loaderresetUILoaderLoader\n        }\n```\nUI\n\n### 3. Activity\nserver(Loader),AsyncTaskLoaderabstract classloadInBackground\n```java\n @Override\n    protected void onStartLoading() {\n        /* Subclasses must implement this to take care of loading their data,\n          as per {@link #startLoading()}.  This is not called by clients directly,\n          but as a result of a call to {@link #startLoading()}.*/\n        //deliverResults\n    }\n\n    @Override\n    protected void onStopLoading() {\n          /*Subclasses must implement this to take care of stopping their loader,\n          as per {@link #stopLoading()}.  This is not called by clients directly,\n          but as a result of a call to {@link #stopLoading()}.\n          This will always be called from the process's main thread.*/\n    }\n\n    @Override\n    protected void onReset() {\n        /* Subclasses must implement this to take care of resetting their loader,\n         as per {@link #reset()}.  This is not called by clients directly,\n         but as a result of a call to {@link #reset()}.\n         This will always be called from the process's main thread.\n         destoryLoaderLoaderActivity/Fragmentdestory\n         DemoonResetonStopLoading*/\n    }\n\n    @Override\n    public void onCanceled(List<AppEntry> apps) {\n         /* Called if the task was canceled before it was completed.  Gives the class a chance\n          to clean up post-cancellation and to properly dispose of the result.\n         \n          @param data The value that was returned by {@link #loadInBackground}, or null\n          if the task threw {@link OperationCanceledException}.*/\n        //\n    }\n\n    @Override\n    public void forceLoad() {\n        /*Force an asynchronous load. Unlike {@link #startLoading()} this will ignore a previously\n        loaded data set and load a new one.  This simply calls through to the\n        implementation's {@link #onForceLoad()}.  You generally should only call this\n        when the loader is started -- that is, {@link #isStarted()} returns true.\n        Must be called from the process's main thread.*/\n        //startLoadingonConfigurationchangeActivityLoaderisStartedtrue\n    }\n```\nAppApponReceive\n>     mLoader.onContentChanged();\n//forceLoadLoaderstartedtakeContentChangedtrue\n> onStartLoadingtrueforceLoad\n//loadInBackground,deliverResult\ndeliverResultActivitydestoryed(),isStarted(stopLoadingreset)super.deliverResult\n\nLoaderisReset,isStarted\nLoaderCursorLoaderAppMedium\n\n### 4. \nAsyncTaskLoaderAsyncTaskAsyncTaskAsyncTaskLoaderAsyncTaskexecute:\n>  mTask.executeOnExecutor(mExecutor, (Void[]) null);\n\nmExecutor:\n\n> public static final Executor THREAD_POOL_EXECUTOR\n            = new ThreadPoolExecutor(CORE_POOL_SIZE, MAXIMUM_POOL_SIZE, KEEP_ALIVE,\n                    TimeUnit.SECONDS, sPoolWorkQueue, sThreadFactory); \nCORE_POOL_SIZE = 5\n\nrxjavarxjavaloader\n\n### Reference\n\n1. [rxLoader](http://huxian99.github.io/2015/10/28/RxJava%E7%9A%84Android%E5%BC%80%E5%8F%91%E4%B9%8B%E8%B7%AF-RxJava%E5%AE%9E%E6%88%98-%E4%BA%8C/)\n2. [making loading data on android lifecycle aware](https://medium.com/google-developers/making-loading-data-on-android-lifecycle-aware-897e12760832#.btjs9ady6)\n3. [AppListLoader](https://github.com/alexjlockwood/adp-applistloader)","slug":"2016-10-15-using-loader-in-android-app","published":1,"updated":"2017-04-23T10:50:17.675Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj50afgu40001i4vrnwoilyof","content":"<p>App:<br><br>androidLoaderLaoderAndroid DevelopersLoaders<a href=\"https://www.youtube.com/watch?v=s4eAtMHU5gI&amp;index=8&amp;list=PLWz5rJ2EKKc9CBxr3BVjPTPoDPLdPIFCE\"></a>LoaderLoader</p>\n<ol>\n<li>ActivityActivityleak</li>\n<li>activityViewViewView</li>\n<li><a id=\"more\"></a>\n</li>\n</ol>\n<h3 id=\"1-Loader-Cache\"><a href=\"#1-Loader-Cache\" class=\"headerlink\" title=\"1. Loader(Cache)\"></a>1. Loader(Cache)</h3><p>LoaderAsyncTaskLoaderAppListViewDemoAppV4Loader,<br>AppListLoader</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AppListLoader</span> <span class=\"keyword\">extends</span> <span class=\"title\">AsyncTaskLoader</span>&lt;<span class=\"title\">List</span>&lt;<span class=\"title\">AppEntry</span>&gt;&gt; </span>&#123; <span class=\"comment\">//AsynTaskLoaderAppEntryApp</span></div><div class=\"line\">    <span class=\"keyword\">private</span> List&lt;AppEntry&gt; mApps;</div><div class=\"line\">    <span class=\"comment\">//App</span></div><div class=\"line\">    <span class=\"keyword\">final</span> PackageManager mPm;</div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">boolean</span> DEBUG = <span class=\"keyword\">true</span>;</div><div class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String TAG = AppListLoader.class.getSimpleName();</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">//</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">AppListLoader</span><span class=\"params\">(Context ctx)</span> </span>&#123;</div><div class=\"line\">        <span class=\"comment\">// Loaders may be used across multiple Activitys (assuming they aren't</span></div><div class=\"line\">        <span class=\"comment\">// bound to the LoaderManager), so NEVER hold a reference to the context</span></div><div class=\"line\">        <span class=\"comment\">// directly. Doing so will cause you to leak an entire Activity's context.</span></div><div class=\"line\">        <span class=\"comment\">// The superclass constructor will store a reference to the Application</span></div><div class=\"line\">        <span class=\"comment\">// Context instead, and can be retrieved with a call to getContext().</span></div><div class=\"line\">        <span class=\"keyword\">super</span>(ctx);</div><div class=\"line\">        <span class=\"comment\">//</span></div><div class=\"line\">        <span class=\"comment\">//context(ActivityApplicationContext)</span></div><div class=\"line\">        mPm = getContext().getPackageManager();<span class=\"comment\">//getContext()ApplicationContext</span></div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> List&lt;AppEntry&gt; <span class=\"title\">loadInBackground</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (DEBUG) Log.i(TAG, <span class=\"string\">\"+++ loadInBackground() called! +++\"</span>);</div><div class=\"line\">        LogUtil.p(<span class=\"string\">\"\"</span>);<span class=\"comment\">// ,</span></div><div class=\"line\">        <span class=\"comment\">// Retrieve all installed applications.</span></div><div class=\"line\">        List&lt;ApplicationInfo&gt; apps = mPm.getInstalledApplications(<span class=\"number\">0</span>);<span class=\"comment\">//PackageManager</span></div><div class=\"line\">        <span class=\"keyword\">if</span> (apps == <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">            apps = <span class=\"keyword\">new</span> ArrayList&lt;ApplicationInfo&gt;();</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"comment\">// Create corresponding array of entries and load their labels.</span></div><div class=\"line\">        List&lt;AppEntry&gt; entries = <span class=\"keyword\">new</span> ArrayList&lt;AppEntry&gt;(apps.size());</div><div class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; apps.size(); i++) &#123;</div><div class=\"line\">            AppEntry entry = <span class=\"keyword\">new</span> AppEntry(<span class=\"keyword\">this</span>, apps.get(i));</div><div class=\"line\">            entry.loadLabel(getContext());</div><div class=\"line\">            entries.add(entry);</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"comment\">// Sort the list.</span></div><div class=\"line\">        Collections.sort(entries, ALPHA_COMPARATOR);</div><div class=\"line\">        <span class=\"keyword\">return</span> entries;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">deliverResult</span><span class=\"params\">(List&lt;AppEntry&gt; apps)</span> </span>&#123;</div><div class=\"line\">        <span class=\"comment\">//</span></div><div class=\"line\">        <span class=\"keyword\">if</span> (isReset()) &#123;<span class=\"comment\">//AsyncTaskonPostExecute</span></div><div class=\"line\">            <span class=\"keyword\">if</span> (DEBUG)</div><div class=\"line\">                Log.w(TAG, <span class=\"string\">\"+++ Warning! An async query came in while the Loader was reset! +++\"</span>);</div><div class=\"line\">            <span class=\"comment\">// The Loader has been reset; ignore the result and invalidate the data.</span></div><div class=\"line\">            <span class=\"comment\">// This can happen when the Loader is reset while an asynchronous query</span></div><div class=\"line\">            <span class=\"comment\">// is working in the background. That is, when the background thread</span></div><div class=\"line\">            <span class=\"comment\">// finishes its work and attempts to deliver the results to the client,</span></div><div class=\"line\">            <span class=\"comment\">// it will see here that the Loader has been reset and discard any</span></div><div class=\"line\">            <span class=\"comment\">// resources associated with the new data as necessary.</span></div><div class=\"line\">            <span class=\"keyword\">if</span> (apps != <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">                releaseResources(apps);</div><div class=\"line\">                <span class=\"keyword\">return</span>;</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;<span class=\"comment\">//reset()</span></div><div class=\"line\">        <span class=\"comment\">// Hold a reference to the old data so it doesn't get garbage collected.</span></div><div class=\"line\">        <span class=\"comment\">// We must protect it until the new data has been delivered.</span></div><div class=\"line\">        List&lt;AppEntry&gt; oldApps = mApps;</div><div class=\"line\">        mApps = apps;</div><div class=\"line\">        <span class=\"keyword\">if</span> (isStarted()) &#123;<span class=\"comment\">// startLoadingstopLoadingreset</span></div><div class=\"line\">            <span class=\"keyword\">if</span> (DEBUG) Log.i(TAG, <span class=\"string\">\"+++ Delivering results to the LoaderManager for\"</span> +</div><div class=\"line\">                    <span class=\"string\">\" the ListFragment to display! +++\"</span>);</div><div class=\"line\">            <span class=\"comment\">// If the Loader is in a started state, have the superclass deliver the</span></div><div class=\"line\">            <span class=\"comment\">// results to the client.</span></div><div class=\"line\">            <span class=\"keyword\">super</span>.deliverResult(apps);</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"comment\">// Invalidate the old data as we don't need it any more.</span></div><div class=\"line\">        <span class=\"keyword\">if</span> (oldApps != <span class=\"keyword\">null</span> &amp;&amp; oldApps != apps) &#123;</div><div class=\"line\">            <span class=\"keyword\">if</span> (DEBUG) Log.i(TAG, <span class=\"string\">\"+++ Releasing any old data associated with this Loader. +++\"</span>);</div><div class=\"line\">            releaseResources(oldApps);</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>ServerisReset()isStarted()ServerClient</p>\n<h3 id=\"2-LoaderManagerLoader\"><a href=\"#2-LoaderManagerLoader\" class=\"headerlink\" title=\"2. LoaderManagerLoader\"></a>2. LoaderManagerLoader</h3><p>LoaderManagerActivityFragmentLoaderonCreateonActivityCreated:</p>\n<blockquote>\n<p>getSupportedLoaderManager.initLoader()//Activity<br>getLoaderManager() //Fragment</p>\n</blockquote>\n<p>FragmentLoaderActivity,FragmentChild Fragment<br>v4LoaderLoaderAndroid3.0FrameWorkv4LoadderAPIv4 Loaderv4release stepv4bug<br>medium<a href=\"https://medium.com/google-developers/making-loading-data-on-android-lifecycle-aware-897e12760832#.wrh1ciyts\"></a> <br></p>\n<blockquote>\n<p> public abstract <D> Loader<D> initLoader(int id, Bundle args,<br>            LoaderManager.LoaderCallbacks<D> callback);</p>\n</blockquote>\n<p>DemoFragment</p>\n<blockquote>\n<p> // Initialize a Loader with id 1. If the Loader with this id already<br>            // exists, then the LoaderManager will reuse the existing Loader.<br>            getLoaderManager().initLoader(LOADER_ID, null, this);            </p>\n</blockquote>\n<p>Fragmentimplements  LoaderManager.LoaderCallbacks<List<AppEntry>&gt; //<br><br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div></pre></td><td class=\"code\"><pre><div class=\"line\"> <span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">LoaderCallbacks</span>&lt;<span class=\"title\">D</span>&gt; </span>&#123;</div><div class=\"line\">       </div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> Loader&lt;D&gt; <span class=\"title\">onCreateLoader</span><span class=\"params\">(<span class=\"keyword\">int</span> id, Bundle args)</span></span>;</div><div class=\"line\"></div><div class=\"line\">       </div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onLoadFinished</span><span class=\"params\">(Loader&lt;D&gt; loader, D data)</span></span>;</div><div class=\"line\"></div><div class=\"line\">       </div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onLoaderReset</span><span class=\"params\">(Loader&lt;D&gt; loader)</span></span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">```\t\t\t</div><div class=\"line\">Demo</div><div class=\"line\">```java</div><div class=\"line\">   <span class=\"meta\">@Override</span></div><div class=\"line\">        <span class=\"keyword\">public</span> android.support.v4.content.Loader&lt;List&lt;AppEntry&gt;&gt; onCreateLoader(<span class=\"keyword\">int</span> id, Bundle args) &#123;</div><div class=\"line\">            <span class=\"keyword\">if</span> (DEBUG) Log.i(TAG, <span class=\"string\">\"+++ onCreateLoader() called! +++\"</span>);</div><div class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> AppListLoader(getActivity());</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"meta\">@Override</span></div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onLoadFinished</span><span class=\"params\">(android.support.v4.content.Loader&lt;List&lt;AppEntry&gt;&gt; loader, List&lt;AppEntry&gt; data)</span> </span>&#123;</div><div class=\"line\">            <span class=\"keyword\">if</span> (DEBUG) Log.i(TAG, <span class=\"string\">\"+++ onLoadFinished() called! +++\"</span>);</div><div class=\"line\">            mAdapter.setData(data);<span class=\"comment\">//UI</span></div><div class=\"line\"></div><div class=\"line\">            <span class=\"keyword\">if</span> (isResumed()) &#123;</div><div class=\"line\">                setListShown(<span class=\"keyword\">true</span>);</div><div class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">                setListShownNoAnimation(<span class=\"keyword\">true</span>);</div><div class=\"line\">            &#125; </div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"meta\">@Override</span></div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onLoaderReset</span><span class=\"params\">(android.support.v4.content.Loader&lt;List&lt;AppEntry&gt;&gt; loader)</span> </span>&#123;</div><div class=\"line\">            <span class=\"keyword\">if</span> (DEBUG) Log.i(TAG, <span class=\"string\">\"+++ onLoadReset() called! +++\"</span>);</div><div class=\"line\">            mAdapter.setData(<span class=\"keyword\">null</span>);<span class=\"comment\">//loaderresetUILoaderLoader</span></div><div class=\"line\">        &#125;</div></pre></td></tr></table></figure></p>\n<p>UI</p>\n<h3 id=\"3-Activity\"><a href=\"#3-Activity\" class=\"headerlink\" title=\"3. Activity\"></a>3. Activity</h3><p>server(Loader),AsyncTaskLoaderabstract classloadInBackground<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">@Override</span></div><div class=\"line\">   <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onStartLoading</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">       <span class=\"comment\">/* Subclasses must implement this to take care of loading their data,</div><div class=\"line\">         as per &#123;@link #startLoading()&#125;.  This is not called by clients directly,</div><div class=\"line\">         but as a result of a call to &#123;@link #startLoading()&#125;.*/</span></div><div class=\"line\">       <span class=\"comment\">//deliverResults</span></div><div class=\"line\">   &#125;</div><div class=\"line\"></div><div class=\"line\">   <span class=\"meta\">@Override</span></div><div class=\"line\">   <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onStopLoading</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">         <span class=\"comment\">/*Subclasses must implement this to take care of stopping their loader,</div><div class=\"line\">         as per &#123;@link #stopLoading()&#125;.  This is not called by clients directly,</div><div class=\"line\">         but as a result of a call to &#123;@link #stopLoading()&#125;.</div><div class=\"line\">         This will always be called from the process's main thread.*/</span></div><div class=\"line\">   &#125;</div><div class=\"line\"></div><div class=\"line\">   <span class=\"meta\">@Override</span></div><div class=\"line\">   <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onReset</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">       <span class=\"comment\">/* Subclasses must implement this to take care of resetting their loader,</div><div class=\"line\">        as per &#123;@link #reset()&#125;.  This is not called by clients directly,</div><div class=\"line\">        but as a result of a call to &#123;@link #reset()&#125;.</div><div class=\"line\">        This will always be called from the process's main thread.</div><div class=\"line\">        destoryLoaderLoaderActivity/Fragmentdestory</div><div class=\"line\">        DemoonResetonStopLoading*/</span></div><div class=\"line\">   &#125;</div><div class=\"line\"></div><div class=\"line\">   <span class=\"meta\">@Override</span></div><div class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onCanceled</span><span class=\"params\">(List&lt;AppEntry&gt; apps)</span> </span>&#123;</div><div class=\"line\">        <span class=\"comment\">/* Called if the task was canceled before it was completed.  Gives the class a chance</div><div class=\"line\">         to clean up post-cancellation and to properly dispose of the result.</div><div class=\"line\">        </div><div class=\"line\">         @param data The value that was returned by &#123;@link #loadInBackground&#125;, or null</div><div class=\"line\">         if the task threw &#123;@link OperationCanceledException&#125;.*/</span></div><div class=\"line\">       <span class=\"comment\">//</span></div><div class=\"line\">   &#125;</div><div class=\"line\"></div><div class=\"line\">   <span class=\"meta\">@Override</span></div><div class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">forceLoad</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">       <span class=\"comment\">/*Force an asynchronous load. Unlike &#123;@link #startLoading()&#125; this will ignore a previously</div><div class=\"line\">       loaded data set and load a new one.  This simply calls through to the</div><div class=\"line\">       implementation's &#123;@link #onForceLoad()&#125;.  You generally should only call this</div><div class=\"line\">       when the loader is started -- that is, &#123;@link #isStarted()&#125; returns true.</div><div class=\"line\">       Must be called from the process's main thread.*/</span></div><div class=\"line\">       <span class=\"comment\">//startLoadingonConfigurationchangeActivityLoaderisStartedtrue</span></div><div class=\"line\">   &#125;</div></pre></td></tr></table></figure></p>\n<p>AppApponReceive</p>\n<blockquote>\n<pre><code>mLoader.onContentChanged();\n</code></pre><p>//forceLoadLoaderstartedtakeContentChangedtrue<br>onStartLoadingtrueforceLoad<br>//loadInBackground,deliverResult<br>deliverResultActivitydestoryed(),isStarted(stopLoadingreset)super.deliverResult</p>\n</blockquote>\n<p>LoaderisReset,isStarted<br>LoaderCursorLoaderAppMedium</p>\n<h3 id=\"4-\"><a href=\"#4-\" class=\"headerlink\" title=\"4. \"></a>4. </h3><p>AsyncTaskLoaderAsyncTaskAsyncTaskAsyncTaskLoaderAsyncTaskexecute:</p>\n<blockquote>\n<p> mTask.executeOnExecutor(mExecutor, (Void[]) null);</p>\n</blockquote>\n<p>mExecutor:</p>\n<blockquote>\n<p>public static final Executor THREAD_POOL_EXECUTOR<br>            = new ThreadPoolExecutor(CORE_POOL_SIZE, MAXIMUM_POOL_SIZE, KEEP_ALIVE,<br>                    TimeUnit.SECONDS, sPoolWorkQueue, sThreadFactory);<br>CORE_POOL_SIZE = 5<br><br>rxjavarxjavaloader</p>\n</blockquote>\n<h3 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h3><ol>\n<li><a href=\"http://huxian99.github.io/2015/10/28/RxJava%E7%9A%84Android%E5%BC%80%E5%8F%91%E4%B9%8B%E8%B7%AF-RxJava%E5%AE%9E%E6%88%98-%E4%BA%8C/\">rxLoader</a></li>\n<li><a href=\"https://medium.com/google-developers/making-loading-data-on-android-lifecycle-aware-897e12760832#.btjs9ady6\">making loading data on android lifecycle aware</a></li>\n<li><a href=\"https://github.com/alexjlockwood/adp-applistloader\">AppListLoader</a></li>\n</ol>\n","excerpt":"<p>App:<br><br>androidLoaderLaoderAndroid DevelopersLoaders<a href=\"https://www.youtube.com/watch?v=s4eAtMHU5gI&amp;index=8&amp;list=PLWz5rJ2EKKc9CBxr3BVjPTPoDPLdPIFCE\"></a>LoaderLoader</p>\n<ol>\n<li>ActivityActivityleak</li>\n<li>activityViewViewView</li>\n<li>","more":"</li>\n</ol>\n<h3 id=\"1-Loader-Cache\"><a href=\"#1-Loader-Cache\" class=\"headerlink\" title=\"1. Loader(Cache)\"></a>1. Loader(Cache)</h3><p>LoaderAsyncTaskLoaderAppListViewDemoAppV4Loader,<br>AppListLoader</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AppListLoader</span> <span class=\"keyword\">extends</span> <span class=\"title\">AsyncTaskLoader</span>&lt;<span class=\"title\">List</span>&lt;<span class=\"title\">AppEntry</span>&gt;&gt; </span>&#123; <span class=\"comment\">//AsynTaskLoaderAppEntryApp</span></div><div class=\"line\">    <span class=\"keyword\">private</span> List&lt;AppEntry&gt; mApps;</div><div class=\"line\">    <span class=\"comment\">//App</span></div><div class=\"line\">    <span class=\"keyword\">final</span> PackageManager mPm;</div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">boolean</span> DEBUG = <span class=\"keyword\">true</span>;</div><div class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String TAG = AppListLoader.class.getSimpleName();</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">//</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">AppListLoader</span><span class=\"params\">(Context ctx)</span> </span>&#123;</div><div class=\"line\">        <span class=\"comment\">// Loaders may be used across multiple Activitys (assuming they aren't</span></div><div class=\"line\">        <span class=\"comment\">// bound to the LoaderManager), so NEVER hold a reference to the context</span></div><div class=\"line\">        <span class=\"comment\">// directly. Doing so will cause you to leak an entire Activity's context.</span></div><div class=\"line\">        <span class=\"comment\">// The superclass constructor will store a reference to the Application</span></div><div class=\"line\">        <span class=\"comment\">// Context instead, and can be retrieved with a call to getContext().</span></div><div class=\"line\">        <span class=\"keyword\">super</span>(ctx);</div><div class=\"line\">        <span class=\"comment\">//</span></div><div class=\"line\">        <span class=\"comment\">//context(ActivityApplicationContext)</span></div><div class=\"line\">        mPm = getContext().getPackageManager();<span class=\"comment\">//getContext()ApplicationContext</span></div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> List&lt;AppEntry&gt; <span class=\"title\">loadInBackground</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (DEBUG) Log.i(TAG, <span class=\"string\">\"+++ loadInBackground() called! +++\"</span>);</div><div class=\"line\">        LogUtil.p(<span class=\"string\">\"\"</span>);<span class=\"comment\">// ,</span></div><div class=\"line\">        <span class=\"comment\">// Retrieve all installed applications.</span></div><div class=\"line\">        List&lt;ApplicationInfo&gt; apps = mPm.getInstalledApplications(<span class=\"number\">0</span>);<span class=\"comment\">//PackageManager</span></div><div class=\"line\">        <span class=\"keyword\">if</span> (apps == <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">            apps = <span class=\"keyword\">new</span> ArrayList&lt;ApplicationInfo&gt;();</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"comment\">// Create corresponding array of entries and load their labels.</span></div><div class=\"line\">        List&lt;AppEntry&gt; entries = <span class=\"keyword\">new</span> ArrayList&lt;AppEntry&gt;(apps.size());</div><div class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; apps.size(); i++) &#123;</div><div class=\"line\">            AppEntry entry = <span class=\"keyword\">new</span> AppEntry(<span class=\"keyword\">this</span>, apps.get(i));</div><div class=\"line\">            entry.loadLabel(getContext());</div><div class=\"line\">            entries.add(entry);</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"comment\">// Sort the list.</span></div><div class=\"line\">        Collections.sort(entries, ALPHA_COMPARATOR);</div><div class=\"line\">        <span class=\"keyword\">return</span> entries;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">deliverResult</span><span class=\"params\">(List&lt;AppEntry&gt; apps)</span> </span>&#123;</div><div class=\"line\">        <span class=\"comment\">//</span></div><div class=\"line\">        <span class=\"keyword\">if</span> (isReset()) &#123;<span class=\"comment\">//AsyncTaskonPostExecute</span></div><div class=\"line\">            <span class=\"keyword\">if</span> (DEBUG)</div><div class=\"line\">                Log.w(TAG, <span class=\"string\">\"+++ Warning! An async query came in while the Loader was reset! +++\"</span>);</div><div class=\"line\">            <span class=\"comment\">// The Loader has been reset; ignore the result and invalidate the data.</span></div><div class=\"line\">            <span class=\"comment\">// This can happen when the Loader is reset while an asynchronous query</span></div><div class=\"line\">            <span class=\"comment\">// is working in the background. That is, when the background thread</span></div><div class=\"line\">            <span class=\"comment\">// finishes its work and attempts to deliver the results to the client,</span></div><div class=\"line\">            <span class=\"comment\">// it will see here that the Loader has been reset and discard any</span></div><div class=\"line\">            <span class=\"comment\">// resources associated with the new data as necessary.</span></div><div class=\"line\">            <span class=\"keyword\">if</span> (apps != <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">                releaseResources(apps);</div><div class=\"line\">                <span class=\"keyword\">return</span>;</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;<span class=\"comment\">//reset()</span></div><div class=\"line\">        <span class=\"comment\">// Hold a reference to the old data so it doesn't get garbage collected.</span></div><div class=\"line\">        <span class=\"comment\">// We must protect it until the new data has been delivered.</span></div><div class=\"line\">        List&lt;AppEntry&gt; oldApps = mApps;</div><div class=\"line\">        mApps = apps;</div><div class=\"line\">        <span class=\"keyword\">if</span> (isStarted()) &#123;<span class=\"comment\">// startLoadingstopLoadingreset</span></div><div class=\"line\">            <span class=\"keyword\">if</span> (DEBUG) Log.i(TAG, <span class=\"string\">\"+++ Delivering results to the LoaderManager for\"</span> +</div><div class=\"line\">                    <span class=\"string\">\" the ListFragment to display! +++\"</span>);</div><div class=\"line\">            <span class=\"comment\">// If the Loader is in a started state, have the superclass deliver the</span></div><div class=\"line\">            <span class=\"comment\">// results to the client.</span></div><div class=\"line\">            <span class=\"keyword\">super</span>.deliverResult(apps);</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"comment\">// Invalidate the old data as we don't need it any more.</span></div><div class=\"line\">        <span class=\"keyword\">if</span> (oldApps != <span class=\"keyword\">null</span> &amp;&amp; oldApps != apps) &#123;</div><div class=\"line\">            <span class=\"keyword\">if</span> (DEBUG) Log.i(TAG, <span class=\"string\">\"+++ Releasing any old data associated with this Loader. +++\"</span>);</div><div class=\"line\">            releaseResources(oldApps);</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>ServerisReset()isStarted()ServerClient</p>\n<h3 id=\"2-LoaderManagerLoader\"><a href=\"#2-LoaderManagerLoader\" class=\"headerlink\" title=\"2. LoaderManagerLoader\"></a>2. LoaderManagerLoader</h3><p>LoaderManagerActivityFragmentLoaderonCreateonActivityCreated:</p>\n<blockquote>\n<p>getSupportedLoaderManager.initLoader()//Activity<br>getLoaderManager() //Fragment</p>\n</blockquote>\n<p>FragmentLoaderActivity,FragmentChild Fragment<br>v4LoaderLoaderAndroid3.0FrameWorkv4LoadderAPIv4 Loaderv4release stepv4bug<br>medium<a href=\"https://medium.com/google-developers/making-loading-data-on-android-lifecycle-aware-897e12760832#.wrh1ciyts\"></a> <br></p>\n<blockquote>\n<p> public abstract <D> Loader<D> initLoader(int id, Bundle args,<br>            LoaderManager.LoaderCallbacks<D> callback);</p>\n</blockquote>\n<p>DemoFragment</p>\n<blockquote>\n<p> // Initialize a Loader with id 1. If the Loader with this id already<br>            // exists, then the LoaderManager will reuse the existing Loader.<br>            getLoaderManager().initLoader(LOADER_ID, null, this);            </p>\n</blockquote>\n<p>Fragmentimplements  LoaderManager.LoaderCallbacks<List<AppEntry>&gt; //<br><br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div></pre></td><td class=\"code\"><pre><div class=\"line\"> <span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">LoaderCallbacks</span>&lt;<span class=\"title\">D</span>&gt; </span>&#123;</div><div class=\"line\">       </div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> Loader&lt;D&gt; <span class=\"title\">onCreateLoader</span><span class=\"params\">(<span class=\"keyword\">int</span> id, Bundle args)</span></span>;</div><div class=\"line\"></div><div class=\"line\">       </div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onLoadFinished</span><span class=\"params\">(Loader&lt;D&gt; loader, D data)</span></span>;</div><div class=\"line\"></div><div class=\"line\">       </div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onLoaderReset</span><span class=\"params\">(Loader&lt;D&gt; loader)</span></span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">```\t\t\t</div><div class=\"line\">Demo</div><div class=\"line\">```java</div><div class=\"line\">   <span class=\"meta\">@Override</span></div><div class=\"line\">        <span class=\"keyword\">public</span> android.support.v4.content.Loader&lt;List&lt;AppEntry&gt;&gt; onCreateLoader(<span class=\"keyword\">int</span> id, Bundle args) &#123;</div><div class=\"line\">            <span class=\"keyword\">if</span> (DEBUG) Log.i(TAG, <span class=\"string\">\"+++ onCreateLoader() called! +++\"</span>);</div><div class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> AppListLoader(getActivity());</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"meta\">@Override</span></div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onLoadFinished</span><span class=\"params\">(android.support.v4.content.Loader&lt;List&lt;AppEntry&gt;&gt; loader, List&lt;AppEntry&gt; data)</span> </span>&#123;</div><div class=\"line\">            <span class=\"keyword\">if</span> (DEBUG) Log.i(TAG, <span class=\"string\">\"+++ onLoadFinished() called! +++\"</span>);</div><div class=\"line\">            mAdapter.setData(data);<span class=\"comment\">//UI</span></div><div class=\"line\"></div><div class=\"line\">            <span class=\"keyword\">if</span> (isResumed()) &#123;</div><div class=\"line\">                setListShown(<span class=\"keyword\">true</span>);</div><div class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">                setListShownNoAnimation(<span class=\"keyword\">true</span>);</div><div class=\"line\">            &#125; </div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"meta\">@Override</span></div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onLoaderReset</span><span class=\"params\">(android.support.v4.content.Loader&lt;List&lt;AppEntry&gt;&gt; loader)</span> </span>&#123;</div><div class=\"line\">            <span class=\"keyword\">if</span> (DEBUG) Log.i(TAG, <span class=\"string\">\"+++ onLoadReset() called! +++\"</span>);</div><div class=\"line\">            mAdapter.setData(<span class=\"keyword\">null</span>);<span class=\"comment\">//loaderresetUILoaderLoader</span></div><div class=\"line\">        &#125;</div></pre></td></tr></table></figure></p>\n<p>UI</p>\n<h3 id=\"3-Activity\"><a href=\"#3-Activity\" class=\"headerlink\" title=\"3. Activity\"></a>3. Activity</h3><p>server(Loader),AsyncTaskLoaderabstract classloadInBackground<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">@Override</span></div><div class=\"line\">   <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onStartLoading</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">       <span class=\"comment\">/* Subclasses must implement this to take care of loading their data,</div><div class=\"line\">         as per &#123;@link #startLoading()&#125;.  This is not called by clients directly,</div><div class=\"line\">         but as a result of a call to &#123;@link #startLoading()&#125;.*/</span></div><div class=\"line\">       <span class=\"comment\">//deliverResults</span></div><div class=\"line\">   &#125;</div><div class=\"line\"></div><div class=\"line\">   <span class=\"meta\">@Override</span></div><div class=\"line\">   <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onStopLoading</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">         <span class=\"comment\">/*Subclasses must implement this to take care of stopping their loader,</div><div class=\"line\">         as per &#123;@link #stopLoading()&#125;.  This is not called by clients directly,</div><div class=\"line\">         but as a result of a call to &#123;@link #stopLoading()&#125;.</div><div class=\"line\">         This will always be called from the process's main thread.*/</span></div><div class=\"line\">   &#125;</div><div class=\"line\"></div><div class=\"line\">   <span class=\"meta\">@Override</span></div><div class=\"line\">   <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onReset</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">       <span class=\"comment\">/* Subclasses must implement this to take care of resetting their loader,</div><div class=\"line\">        as per &#123;@link #reset()&#125;.  This is not called by clients directly,</div><div class=\"line\">        but as a result of a call to &#123;@link #reset()&#125;.</div><div class=\"line\">        This will always be called from the process's main thread.</div><div class=\"line\">        destoryLoaderLoaderActivity/Fragmentdestory</div><div class=\"line\">        DemoonResetonStopLoading*/</span></div><div class=\"line\">   &#125;</div><div class=\"line\"></div><div class=\"line\">   <span class=\"meta\">@Override</span></div><div class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onCanceled</span><span class=\"params\">(List&lt;AppEntry&gt; apps)</span> </span>&#123;</div><div class=\"line\">        <span class=\"comment\">/* Called if the task was canceled before it was completed.  Gives the class a chance</div><div class=\"line\">         to clean up post-cancellation and to properly dispose of the result.</div><div class=\"line\">        </div><div class=\"line\">         @param data The value that was returned by &#123;@link #loadInBackground&#125;, or null</div><div class=\"line\">         if the task threw &#123;@link OperationCanceledException&#125;.*/</span></div><div class=\"line\">       <span class=\"comment\">//</span></div><div class=\"line\">   &#125;</div><div class=\"line\"></div><div class=\"line\">   <span class=\"meta\">@Override</span></div><div class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">forceLoad</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">       <span class=\"comment\">/*Force an asynchronous load. Unlike &#123;@link #startLoading()&#125; this will ignore a previously</div><div class=\"line\">       loaded data set and load a new one.  This simply calls through to the</div><div class=\"line\">       implementation's &#123;@link #onForceLoad()&#125;.  You generally should only call this</div><div class=\"line\">       when the loader is started -- that is, &#123;@link #isStarted()&#125; returns true.</div><div class=\"line\">       Must be called from the process's main thread.*/</span></div><div class=\"line\">       <span class=\"comment\">//startLoadingonConfigurationchangeActivityLoaderisStartedtrue</span></div><div class=\"line\">   &#125;</div></pre></td></tr></table></figure></p>\n<p>AppApponReceive</p>\n<blockquote>\n<pre><code>mLoader.onContentChanged();\n</code></pre><p>//forceLoadLoaderstartedtakeContentChangedtrue<br>onStartLoadingtrueforceLoad<br>//loadInBackground,deliverResult<br>deliverResultActivitydestoryed(),isStarted(stopLoadingreset)super.deliverResult</p>\n</blockquote>\n<p>LoaderisReset,isStarted<br>LoaderCursorLoaderAppMedium</p>\n<h3 id=\"4-\"><a href=\"#4-\" class=\"headerlink\" title=\"4. \"></a>4. </h3><p>AsyncTaskLoaderAsyncTaskAsyncTaskAsyncTaskLoaderAsyncTaskexecute:</p>\n<blockquote>\n<p> mTask.executeOnExecutor(mExecutor, (Void[]) null);</p>\n</blockquote>\n<p>mExecutor:</p>\n<blockquote>\n<p>public static final Executor THREAD_POOL_EXECUTOR<br>            = new ThreadPoolExecutor(CORE_POOL_SIZE, MAXIMUM_POOL_SIZE, KEEP_ALIVE,<br>                    TimeUnit.SECONDS, sPoolWorkQueue, sThreadFactory);<br>CORE_POOL_SIZE = 5<br><br>rxjavarxjavaloader</p>\n</blockquote>\n<h3 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h3><ol>\n<li><a href=\"http://huxian99.github.io/2015/10/28/RxJava%E7%9A%84Android%E5%BC%80%E5%8F%91%E4%B9%8B%E8%B7%AF-RxJava%E5%AE%9E%E6%88%98-%E4%BA%8C/\">rxLoader</a></li>\n<li><a href=\"https://medium.com/google-developers/making-loading-data-on-android-lifecycle-aware-897e12760832#.btjs9ady6\">making loading data on android lifecycle aware</a></li>\n<li><a href=\"https://github.com/alexjlockwood/adp-applistloader\">AppListLoader</a></li>\n</ol>"},{"title":"","date":"2016-10-12T08:47:42.000Z","_content":"\n![](http://odzl05jxx.bkt.clouddn.com/writing%20code%20that%20nobody%20else%20can%20read.jpg)\n\n\t: \"HandlerpostDelayed\"Handler<!--more-->\n\n### 1. Thread\nProcess, AndroidUIcallback(onResume,onCreate,onStartCommand,onDraw, etc) AppProcessProcess\nAndroid?\nZygote Process forkProcessActivityThread main\n```java\n public static void main(String[] args) {\n //\n        Looper.prepareMainLooper();\n        ActivityThread thread = new ActivityThread();\n        thread.attach(false);\n        if (sMainThreadHandler == null) {\n            sMainThreadHandler = thread.getHandler();\n        }\n        // End of event ActivityThreadMain.\n        Looper.loop();\n        throw new RuntimeException(\"Main thread loop unexpectedly exited\");//Looper.loop\n    }\n```\nLooper.prepareMainLooper()\n```java\n\n    /**\n     * Initialize the current thread as a looper, marking it as an\n     * application's main looper. The main looper for your application\n     * is created by the Android environment, so you should never need\n     * to call this function yourself.  See also: {@link #prepare()}\n     */\n    public static void prepareMainLooper() {\n        prepare(false);\n        synchronized (Looper.class) {\n            if (sMainLooper != null) {\n                throw new IllegalStateException(\"The main Looper has already been prepared.\");\n            }\n            sMainLooper = myLooper();\n        }\n    }\n```\nThreadLooper\nLooper.javaclass**Threadmessage loop**ThreadLooperLooper.prepare()Looper.loop()message LoopHandler\n```java\nclass LooperThread extends Thread {\n  *      public Handler mHandler;\n  *\n  *      public void run() {\n  *          Looper.prepare();\n  *\n  *          mHandler = new Handler() {\n  *              public void handleMessage(Message msg) {\n  *                  // \n  *              }\n  *          };\n  *\t\n  *          Looper.loop();\n    \t\t//\n  *      }\n  *  }\n```\nLooperMessageQueue()Looper\nLooper.loop()\n```java\n  /** \n     * Run the message queue in this thread. Be sure to call\n     * {@link #quit()} to end the loop.\n     */\n    public static void loop() {\n        final Looper me = myLooper();//LooperException\n        if (me == null) {\n            throw new RuntimeException(\"No Looper; Looper.prepare() wasn't called on this thread.\");\n        }\n        final MessageQueue queue = me.mQueue;\n        for (;;) {\n            Message msg = queue.next(); // might block\n            if (msg == null) {\n                // No message indicates that the message queue is quitting.\n                return;\n            }\n            try {\n                msg.target.dispatchMessage(msg);\n            } finally {\n               ....\n            }\n        }\n    }\n```\n(msg)msg.target.dispatchMessage(msg)\ntrargetHandler\nHandlerdispatchMessage\n```java\n /**\n     * Handle system messages here.\n     */\n    public void dispatchMessage(Message msg) {\n        if (msg.callback != null) {\n            handleCallback(msg);\n        } else {\n            if (mCallback != null) {\n                if (mCallback.handleMessage(msg)) {\n                    return;\n                }\n            }\n            handleMessage(msg);\n        }\n    }\n```\neither or \nMessageRunnable callbackmessagecallbackrunnablehandler.callBack.handleMessage\n```java\nHandler handler = new Handler(){\n            @Override\n            public void handleMessage(Message msg) {\n                super.handleMessage(msg);\n            }\n        };\n```\n\nMessagenewobtainrelease\nMessageQueuenext()\n> message that should be processed. Will not return message that will be processed at future times.\n> MessagelongMessage.whenSystemClock.uptimeMills()message, next()blockSystemClock.uptimeMillsCPUcpusleepsleeppostDelayed10scpu5s10s\n\n### 2. Handler\nHandler\n1. add message to the messageQueue of the Looper it's associated with\n- post()  //\n- postDelayed()/postAtTime() //\n- postAtFrontOfQueue() // @piwai \n2. Handle message when this message doesn't have callback\n   Handler7,Looper\n   Handler handler = new Handler() LooperHandler,Looper.Prepare\n   \n> Handler (Looper.getMainLooper()) //Looper\n> Hanlder(Looper.myLooper()) //Looper\n\n### Choreographer\nAndroid studioLogcat info:\n> Skipped 60 frames! The application may be doing too much work on its main thread\n\nlogChreographer :\nSystem Events , Input Events ,Application callback ,Services, Alarm ,UI Drawing....Animation16msDraw a FrameChoregrapherHandlerFrame\n\n```java\nFrameHandler mHandler = new FrameHandler(Looper.myLooper());\nMessage msg = mHandler.obtainMessage(MSG_DO_FRAME);\nmsg.setAsynchronous(true);\nmHandler.sendMessageAtTime(msg,nextFrameTime)\n\n private final class FrameHandler extends Handler {\n        public FrameHandler(Looper looper) {\n            super(looper);\n        }\n\n        @Override\n        public void handleMessage(Message msg) {\n            switch (msg.what) {\n                case MSG_DO_FRAME:\n                    doFrame(System.nanoTime(), 0);\n                    break;\n                case MSG_DO_SCHEDULE_VSYNC:\n                    doScheduleVsync();\n                    break;\n                case MSG_DO_SCHEDULE_CALLBACK:\n                    doScheduleCallback(msg.arg1);\n                    break;\n            }\n        }\n    }\n```\nonMeasure,onLayout,onDrawChoregrapherFrame1ms16ms()Frame\n\n### 3. (IO)StrictMode\n```java\nif (BuildConfig.DEBUG) {\n            StrictMode.setThreadPolicy(new StrictMode.ThreadPolicy.Builder()\n                    .detectDiskReads()\n                    .detectDiskWrites()\n                    .detectNetwork()   // or .detectAll() for all detectable problems\n                    .penaltyLog()\n                    .build());\n            StrictMode.setVmPolicy(new StrictMode.VmPolicy.Builder()\n                    .detectLeakedSqlLiteObjects()\n                    .detectLeakedClosableObjects()\n                    .penaltyLog()\n                    .penaltyDeath()\n                    .build());\n        }\n```\n### 4 .Activity LifeCycle Events\n- Activity LifeCycle Events(startActivity(), finishi()) go out of your process through Binder IPC to the ActivityManager //startActivityActivityProcess,\n- Then back on to your main queue in the form of lifeCycle callbacks(onCreate(),onDestory() et_al) // \n\n\n\nHandler.postDelay\n[](http://www.dss886.com/android/2016/08/17/17-18)\npostDelayedLooper\n> Message msg = queue.next();  // might block\n\nnext:\n```java\n    Message next() {\n    .....\n        for (;;) {\n            if (nextPollTimeoutMillis != 0) {\n                Binder.flushPendingCommands();\n            }\n\n            nativePollOnce(ptr, nextPollTimeoutMillis);\n\n            synchronized (this) {\n                // Try to retrieve the next message.  Return if found.\n                final long now = SystemClock.uptimeMillis();\n                Message prevMsg = null;\n                Message msg = mMessages;\n                if (msg != null && msg.target == null) {\n                    // Stalled by a barrier.  Find the next asynchronous message in the queue.\n                    do {\n                        prevMsg = msg;\n                        msg = msg.next;\n                    } while (msg != null && !msg.isAsynchronous());\n                }\n                if (msg != null) {\n                    if (now < msg.when) {\n                        // Next message is not ready.  Set a timeout to wake up when it is ready.\n                        nextPollTimeoutMillis = (int) Math.min(msg.when - now, Integer.MAX_VALUE);\n                    } else {\n                        // Got a message.\n                        mBlocked = false;\n                        if (prevMsg != null) {\n                            prevMsg.next = msg.next;\n                        } else {\n                            mMessages = msg.next;\n                        }\n                        msg.next = null;\n                        msg.markInUse();\n                        return msg;\n                    }\n                } else {\n                    // No more messages.\n                    nextPollTimeoutMillis = -1;\n                }\n\t....\n```\n nativePollOnce(ptr,nextPollTimeoutMillis);\nnativewaitNativenativequeue.nextreturnMessage\n\n>  // Next message is not ready.  Set a timeout to wake up when it is ready.       \n>  nextPollTimeoutMillis = (int) Math.min(msg.when - now, Integer.MAX_VALUE);\n\nblockedpostDelayed(r,10)10ms(queue.next)\nPostDelayedenqueMessage:\n```java\n\n        synchronized (this) {\n            if (mQuitting) {\n                IllegalStateException e = new IllegalStateException(\n                        msg.target + \" sending message to a Handler on a dead thread\");\n                Log.w(TAG, e.getMessage(), e);\n                msg.recycle();\n                return false;\n            }\n\n            msg.markInUse();\n            msg.when = when;\n            Message p = mMessages;\n            boolean needWake;\n            if (p == null || when == 0 || when < p.when) {\n                // New head, wake up the event queue if blocked.\n                msg.next = p;\n                mMessages = msg;\n                needWake = mBlocked;\n            } else {\n                // Inserted within the middle of the queue.  Usually we don't have to wake\n                // up the event queue unless there is a barrier at the head of the queue\n                // and the message is the earliest asynchronous message in the queue.\n                needWake = mBlocked && p.target == null && msg.isAsynchronous();\n                Message prev;\n                for (;;) {\n                    prev = p;\n                    p = p.next;\n                    if (p == null || when < p.when) {\n                        break;\n                    }\n                    if (needWake && p.isAsynchronous()) {\n                        needWake = false;\n                    }\n                }\n                msg.next = p; // invariant: p == prev.next\n                prev.next = msg;\n            }\n\n            // We can assume mPtr != 0 because mQuitting is false.\n            if (needWake) {\n                nativeWake(mPtr);\n            }\n        }\n```\nnativeWake\npostDelayedmessageMessageQueueclass\n\n#### :\n\nThreadLooperLooperMessageQueueMessageMessgaecallbackHandlerhandleMessage\n\n### Reference\n1. [Handler.postDelayed()](http://www.dss886.com/android/2016/08/17/17-18)\n2. [How the Main Thread works](https://www.youtube.com/watch?v=aFGbv9Ih9qQ)\n3. [Looper](http://www.cnblogs.com/linguanh/p/6412042.html)\n","source":"_posts/2016-10-12-How-the-mainThread-work.md","raw":"---\ntitle: \ndate: 2016-10-12 16:47:42\ntag: \n    Handler\n    Message\ncategories: blog\n---\n\n![](http://odzl05jxx.bkt.clouddn.com/writing%20code%20that%20nobody%20else%20can%20read.jpg)\n\n\t: \"HandlerpostDelayed\"Handler<!--more-->\n\n### 1. Thread\nProcess, AndroidUIcallback(onResume,onCreate,onStartCommand,onDraw, etc) AppProcessProcess\nAndroid?\nZygote Process forkProcessActivityThread main\n```java\n public static void main(String[] args) {\n //\n        Looper.prepareMainLooper();\n        ActivityThread thread = new ActivityThread();\n        thread.attach(false);\n        if (sMainThreadHandler == null) {\n            sMainThreadHandler = thread.getHandler();\n        }\n        // End of event ActivityThreadMain.\n        Looper.loop();\n        throw new RuntimeException(\"Main thread loop unexpectedly exited\");//Looper.loop\n    }\n```\nLooper.prepareMainLooper()\n```java\n\n    /**\n     * Initialize the current thread as a looper, marking it as an\n     * application's main looper. The main looper for your application\n     * is created by the Android environment, so you should never need\n     * to call this function yourself.  See also: {@link #prepare()}\n     */\n    public static void prepareMainLooper() {\n        prepare(false);\n        synchronized (Looper.class) {\n            if (sMainLooper != null) {\n                throw new IllegalStateException(\"The main Looper has already been prepared.\");\n            }\n            sMainLooper = myLooper();\n        }\n    }\n```\nThreadLooper\nLooper.javaclass**Threadmessage loop**ThreadLooperLooper.prepare()Looper.loop()message LoopHandler\n```java\nclass LooperThread extends Thread {\n  *      public Handler mHandler;\n  *\n  *      public void run() {\n  *          Looper.prepare();\n  *\n  *          mHandler = new Handler() {\n  *              public void handleMessage(Message msg) {\n  *                  // \n  *              }\n  *          };\n  *\t\n  *          Looper.loop();\n    \t\t//\n  *      }\n  *  }\n```\nLooperMessageQueue()Looper\nLooper.loop()\n```java\n  /** \n     * Run the message queue in this thread. Be sure to call\n     * {@link #quit()} to end the loop.\n     */\n    public static void loop() {\n        final Looper me = myLooper();//LooperException\n        if (me == null) {\n            throw new RuntimeException(\"No Looper; Looper.prepare() wasn't called on this thread.\");\n        }\n        final MessageQueue queue = me.mQueue;\n        for (;;) {\n            Message msg = queue.next(); // might block\n            if (msg == null) {\n                // No message indicates that the message queue is quitting.\n                return;\n            }\n            try {\n                msg.target.dispatchMessage(msg);\n            } finally {\n               ....\n            }\n        }\n    }\n```\n(msg)msg.target.dispatchMessage(msg)\ntrargetHandler\nHandlerdispatchMessage\n```java\n /**\n     * Handle system messages here.\n     */\n    public void dispatchMessage(Message msg) {\n        if (msg.callback != null) {\n            handleCallback(msg);\n        } else {\n            if (mCallback != null) {\n                if (mCallback.handleMessage(msg)) {\n                    return;\n                }\n            }\n            handleMessage(msg);\n        }\n    }\n```\neither or \nMessageRunnable callbackmessagecallbackrunnablehandler.callBack.handleMessage\n```java\nHandler handler = new Handler(){\n            @Override\n            public void handleMessage(Message msg) {\n                super.handleMessage(msg);\n            }\n        };\n```\n\nMessagenewobtainrelease\nMessageQueuenext()\n> message that should be processed. Will not return message that will be processed at future times.\n> MessagelongMessage.whenSystemClock.uptimeMills()message, next()blockSystemClock.uptimeMillsCPUcpusleepsleeppostDelayed10scpu5s10s\n\n### 2. Handler\nHandler\n1. add message to the messageQueue of the Looper it's associated with\n- post()  //\n- postDelayed()/postAtTime() //\n- postAtFrontOfQueue() // @piwai \n2. Handle message when this message doesn't have callback\n   Handler7,Looper\n   Handler handler = new Handler() LooperHandler,Looper.Prepare\n   \n> Handler (Looper.getMainLooper()) //Looper\n> Hanlder(Looper.myLooper()) //Looper\n\n### Choreographer\nAndroid studioLogcat info:\n> Skipped 60 frames! The application may be doing too much work on its main thread\n\nlogChreographer :\nSystem Events , Input Events ,Application callback ,Services, Alarm ,UI Drawing....Animation16msDraw a FrameChoregrapherHandlerFrame\n\n```java\nFrameHandler mHandler = new FrameHandler(Looper.myLooper());\nMessage msg = mHandler.obtainMessage(MSG_DO_FRAME);\nmsg.setAsynchronous(true);\nmHandler.sendMessageAtTime(msg,nextFrameTime)\n\n private final class FrameHandler extends Handler {\n        public FrameHandler(Looper looper) {\n            super(looper);\n        }\n\n        @Override\n        public void handleMessage(Message msg) {\n            switch (msg.what) {\n                case MSG_DO_FRAME:\n                    doFrame(System.nanoTime(), 0);\n                    break;\n                case MSG_DO_SCHEDULE_VSYNC:\n                    doScheduleVsync();\n                    break;\n                case MSG_DO_SCHEDULE_CALLBACK:\n                    doScheduleCallback(msg.arg1);\n                    break;\n            }\n        }\n    }\n```\nonMeasure,onLayout,onDrawChoregrapherFrame1ms16ms()Frame\n\n### 3. (IO)StrictMode\n```java\nif (BuildConfig.DEBUG) {\n            StrictMode.setThreadPolicy(new StrictMode.ThreadPolicy.Builder()\n                    .detectDiskReads()\n                    .detectDiskWrites()\n                    .detectNetwork()   // or .detectAll() for all detectable problems\n                    .penaltyLog()\n                    .build());\n            StrictMode.setVmPolicy(new StrictMode.VmPolicy.Builder()\n                    .detectLeakedSqlLiteObjects()\n                    .detectLeakedClosableObjects()\n                    .penaltyLog()\n                    .penaltyDeath()\n                    .build());\n        }\n```\n### 4 .Activity LifeCycle Events\n- Activity LifeCycle Events(startActivity(), finishi()) go out of your process through Binder IPC to the ActivityManager //startActivityActivityProcess,\n- Then back on to your main queue in the form of lifeCycle callbacks(onCreate(),onDestory() et_al) // \n\n\n\nHandler.postDelay\n[](http://www.dss886.com/android/2016/08/17/17-18)\npostDelayedLooper\n> Message msg = queue.next();  // might block\n\nnext:\n```java\n    Message next() {\n    .....\n        for (;;) {\n            if (nextPollTimeoutMillis != 0) {\n                Binder.flushPendingCommands();\n            }\n\n            nativePollOnce(ptr, nextPollTimeoutMillis);\n\n            synchronized (this) {\n                // Try to retrieve the next message.  Return if found.\n                final long now = SystemClock.uptimeMillis();\n                Message prevMsg = null;\n                Message msg = mMessages;\n                if (msg != null && msg.target == null) {\n                    // Stalled by a barrier.  Find the next asynchronous message in the queue.\n                    do {\n                        prevMsg = msg;\n                        msg = msg.next;\n                    } while (msg != null && !msg.isAsynchronous());\n                }\n                if (msg != null) {\n                    if (now < msg.when) {\n                        // Next message is not ready.  Set a timeout to wake up when it is ready.\n                        nextPollTimeoutMillis = (int) Math.min(msg.when - now, Integer.MAX_VALUE);\n                    } else {\n                        // Got a message.\n                        mBlocked = false;\n                        if (prevMsg != null) {\n                            prevMsg.next = msg.next;\n                        } else {\n                            mMessages = msg.next;\n                        }\n                        msg.next = null;\n                        msg.markInUse();\n                        return msg;\n                    }\n                } else {\n                    // No more messages.\n                    nextPollTimeoutMillis = -1;\n                }\n\t....\n```\n nativePollOnce(ptr,nextPollTimeoutMillis);\nnativewaitNativenativequeue.nextreturnMessage\n\n>  // Next message is not ready.  Set a timeout to wake up when it is ready.       \n>  nextPollTimeoutMillis = (int) Math.min(msg.when - now, Integer.MAX_VALUE);\n\nblockedpostDelayed(r,10)10ms(queue.next)\nPostDelayedenqueMessage:\n```java\n\n        synchronized (this) {\n            if (mQuitting) {\n                IllegalStateException e = new IllegalStateException(\n                        msg.target + \" sending message to a Handler on a dead thread\");\n                Log.w(TAG, e.getMessage(), e);\n                msg.recycle();\n                return false;\n            }\n\n            msg.markInUse();\n            msg.when = when;\n            Message p = mMessages;\n            boolean needWake;\n            if (p == null || when == 0 || when < p.when) {\n                // New head, wake up the event queue if blocked.\n                msg.next = p;\n                mMessages = msg;\n                needWake = mBlocked;\n            } else {\n                // Inserted within the middle of the queue.  Usually we don't have to wake\n                // up the event queue unless there is a barrier at the head of the queue\n                // and the message is the earliest asynchronous message in the queue.\n                needWake = mBlocked && p.target == null && msg.isAsynchronous();\n                Message prev;\n                for (;;) {\n                    prev = p;\n                    p = p.next;\n                    if (p == null || when < p.when) {\n                        break;\n                    }\n                    if (needWake && p.isAsynchronous()) {\n                        needWake = false;\n                    }\n                }\n                msg.next = p; // invariant: p == prev.next\n                prev.next = msg;\n            }\n\n            // We can assume mPtr != 0 because mQuitting is false.\n            if (needWake) {\n                nativeWake(mPtr);\n            }\n        }\n```\nnativeWake\npostDelayedmessageMessageQueueclass\n\n#### :\n\nThreadLooperLooperMessageQueueMessageMessgaecallbackHandlerhandleMessage\n\n### Reference\n1. [Handler.postDelayed()](http://www.dss886.com/android/2016/08/17/17-18)\n2. [How the Main Thread works](https://www.youtube.com/watch?v=aFGbv9Ih9qQ)\n3. [Looper](http://www.cnblogs.com/linguanh/p/6412042.html)\n","slug":"2016-10-12-How-the-mainThread-work","published":1,"updated":"2017-04-23T10:50:00.563Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj50afguj0004i4vr3ny0qsqb","content":"<p><img src=\"http://odzl05jxx.bkt.clouddn.com/writing%20code%20that%20nobody%20else%20can%20read.jpg\" alt=\"\"></p>\n<p>    : HandlerpostDelayedHandler<a id=\"more\"></a></p>\n<h3 id=\"1-Thread\"><a href=\"#1-Thread\" class=\"headerlink\" title=\"1. Thread\"></a>1. Thread</h3><p>Process, AndroidUIcallback(onResume,onCreate,onStartCommand,onDraw, etc) AppProcessProcess<br>Android?<br>Zygote Process forkProcessActivityThread main<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</div><div class=\"line\"><span class=\"comment\">//</span></div><div class=\"line\">       Looper.prepareMainLooper();</div><div class=\"line\">       ActivityThread thread = <span class=\"keyword\">new</span> ActivityThread();</div><div class=\"line\">       thread.attach(<span class=\"keyword\">false</span>);</div><div class=\"line\">       <span class=\"keyword\">if</span> (sMainThreadHandler == <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">           sMainThreadHandler = thread.getHandler();</div><div class=\"line\">       &#125;</div><div class=\"line\">       <span class=\"comment\">// End of event ActivityThreadMain.</span></div><div class=\"line\">       Looper.loop();</div><div class=\"line\">       <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> RuntimeException(<span class=\"string\">\"Main thread loop unexpectedly exited\"</span>);<span class=\"comment\">//Looper.loop</span></div><div class=\"line\">   &#125;</div></pre></td></tr></table></figure></p>\n<p>Looper.prepareMainLooper()<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">/**</div><div class=\"line\"> * Initialize the current thread as a looper, marking it as an</div><div class=\"line\"> * application's main looper. The main looper for your application</div><div class=\"line\"> * is created by the Android environment, so you should never need</div><div class=\"line\"> * to call this function yourself.  See also: &#123;<span class=\"doctag\">@link</span> #prepare()&#125;</div><div class=\"line\"> */</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">prepareMainLooper</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    prepare(<span class=\"keyword\">false</span>);</div><div class=\"line\">    <span class=\"keyword\">synchronized</span> (Looper.class) &#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (sMainLooper != <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> IllegalStateException(<span class=\"string\">\"The main Looper has already been prepared.\"</span>);</div><div class=\"line\">        &#125;</div><div class=\"line\">        sMainLooper = myLooper();</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>ThreadLooper<br>Looper.javaclass<strong>Threadmessage loop</strong>ThreadLooperLooper.prepare()Looper.loop()message LoopHandler<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">LooperThread</span> <span class=\"keyword\">extends</span> <span class=\"title\">Thread</span> </span>&#123;</div><div class=\"line\">  *      <span class=\"keyword\">public</span> Handler mHandler;</div><div class=\"line\">  *</div><div class=\"line\">  *      <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">  *          Looper.prepare();</div><div class=\"line\">  *</div><div class=\"line\">  *          mHandler = <span class=\"keyword\">new</span> Handler() &#123;</div><div class=\"line\">  *              <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">handleMessage</span><span class=\"params\">(Message msg)</span> </span>&#123;</div><div class=\"line\">  *                  <span class=\"comment\">// </span></div><div class=\"line\">  *              &#125;</div><div class=\"line\">  *          &#125;;</div><div class=\"line\">  *\t</div><div class=\"line\">  *          Looper.loop();</div><div class=\"line\">    \t\t<span class=\"comment\">//</span></div><div class=\"line\">  *      &#125;</div><div class=\"line\">  *  &#125;</div></pre></td></tr></table></figure></p>\n<p>LooperMessageQueue()Looper<br>Looper.loop()<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/** </div><div class=\"line\">   * Run the message queue in this thread. Be sure to call</div><div class=\"line\">   * &#123;<span class=\"doctag\">@link</span> #quit()&#125; to end the loop.</div><div class=\"line\">   */</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">loop</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">final</span> Looper me = myLooper();<span class=\"comment\">//LooperException</span></div><div class=\"line\">      <span class=\"keyword\">if</span> (me == <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">          <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> RuntimeException(<span class=\"string\">\"No Looper; Looper.prepare() wasn't called on this thread.\"</span>);</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">final</span> MessageQueue queue = me.mQueue;</div><div class=\"line\">      <span class=\"keyword\">for</span> (;;) &#123;</div><div class=\"line\">          Message msg = queue.next(); <span class=\"comment\">// might block</span></div><div class=\"line\">          <span class=\"keyword\">if</span> (msg == <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">              <span class=\"comment\">// No message indicates that the message queue is quitting.</span></div><div class=\"line\">              <span class=\"keyword\">return</span>;</div><div class=\"line\">          &#125;</div><div class=\"line\">          <span class=\"keyword\">try</span> &#123;</div><div class=\"line\">              msg.target.dispatchMessage(msg);</div><div class=\"line\">          &#125; <span class=\"keyword\">finally</span> &#123;</div><div class=\"line\">             ....</div><div class=\"line\">          &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\">  &#125;</div></pre></td></tr></table></figure></p>\n<p>(msg)msg.target.dispatchMessage(msg)<br>trargetHandler<br>HandlerdispatchMessage<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/**</div><div class=\"line\">    * Handle system messages here.</div><div class=\"line\">    */</span></div><div class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">dispatchMessage</span><span class=\"params\">(Message msg)</span> </span>&#123;</div><div class=\"line\">       <span class=\"keyword\">if</span> (msg.callback != <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">           handleCallback(msg);</div><div class=\"line\">       &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">           <span class=\"keyword\">if</span> (mCallback != <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">               <span class=\"keyword\">if</span> (mCallback.handleMessage(msg)) &#123;</div><div class=\"line\">                   <span class=\"keyword\">return</span>;</div><div class=\"line\">               &#125;</div><div class=\"line\">           &#125;</div><div class=\"line\">           handleMessage(msg);</div><div class=\"line\">       &#125;</div><div class=\"line\">   &#125;</div></pre></td></tr></table></figure></p>\n<p>either or <br>MessageRunnable callbackmessagecallbackrunnablehandler.callBack.handleMessage<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">Handler handler = <span class=\"keyword\">new</span> Handler()&#123;</div><div class=\"line\">            <span class=\"meta\">@Override</span></div><div class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">handleMessage</span><span class=\"params\">(Message msg)</span> </span>&#123;</div><div class=\"line\">                <span class=\"keyword\">super</span>.handleMessage(msg);</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;;</div></pre></td></tr></table></figure></p>\n<p><br>Messagenewobtainrelease<br>MessageQueuenext()</p>\n<blockquote>\n<p>message that should be processed. Will not return message that will be processed at future times.<br>MessagelongMessage.whenSystemClock.uptimeMills()message, next()blockSystemClock.uptimeMillsCPUcpusleepsleeppostDelayed10scpu5s10s</p>\n</blockquote>\n<h3 id=\"2-Handler\"><a href=\"#2-Handler\" class=\"headerlink\" title=\"2. Handler\"></a>2. Handler</h3><p>Handler</p>\n<ol>\n<li>add message to the messageQueue of the Looper its associated with</li>\n</ol>\n<ul>\n<li>post()  //</li>\n<li>postDelayed()/postAtTime() //</li>\n<li>postAtFrontOfQueue() // @piwai </li>\n</ul>\n<ol>\n<li>Handle message when this message doesnt have callback<br>Handler7,Looper<br>Handler handler = new Handler() LooperHandler,Looper.Prepare<br><blockquote>\n<p>Handler (Looper.getMainLooper()) //Looper<br>Hanlder(Looper.myLooper()) //Looper</p>\n</blockquote>\n</li>\n</ol>\n<h3 id=\"Choreographer\"><a href=\"#Choreographer\" class=\"headerlink\" title=\"Choreographer\"></a>Choreographer</h3><p>Android studioLogcat info:</p>\n<blockquote>\n<p>Skipped 60 frames! The application may be doing too much work on its main thread</p>\n</blockquote>\n<p>logChreographer :<br>System Events , Input Events ,Application callback ,Services, Alarm ,UI Drawing.Animation16msDraw a FrameChoregrapherHandlerFrame</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div></pre></td><td class=\"code\"><pre><div class=\"line\">FrameHandler mHandler = <span class=\"keyword\">new</span> FrameHandler(Looper.myLooper());</div><div class=\"line\">Message msg = mHandler.obtainMessage(MSG_DO_FRAME);</div><div class=\"line\">msg.setAsynchronous(<span class=\"keyword\">true</span>);</div><div class=\"line\">mHandler.sendMessageAtTime(msg,nextFrameTime)</div><div class=\"line\"></div><div class=\"line\"> <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FrameHandler</span> <span class=\"keyword\">extends</span> <span class=\"title\">Handler</span> </span>&#123;</div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">FrameHandler</span><span class=\"params\">(Looper looper)</span> </span>&#123;</div><div class=\"line\">            <span class=\"keyword\">super</span>(looper);</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"meta\">@Override</span></div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">handleMessage</span><span class=\"params\">(Message msg)</span> </span>&#123;</div><div class=\"line\">            <span class=\"keyword\">switch</span> (msg.what) &#123;</div><div class=\"line\">                <span class=\"keyword\">case</span> MSG_DO_FRAME:</div><div class=\"line\">                    doFrame(System.nanoTime(), <span class=\"number\">0</span>);</div><div class=\"line\">                    <span class=\"keyword\">break</span>;</div><div class=\"line\">                <span class=\"keyword\">case</span> MSG_DO_SCHEDULE_VSYNC:</div><div class=\"line\">                    doScheduleVsync();</div><div class=\"line\">                    <span class=\"keyword\">break</span>;</div><div class=\"line\">                <span class=\"keyword\">case</span> MSG_DO_SCHEDULE_CALLBACK:</div><div class=\"line\">                    doScheduleCallback(msg.arg1);</div><div class=\"line\">                    <span class=\"keyword\">break</span>;</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div></pre></td></tr></table></figure>\n<p>onMeasure,onLayout,onDrawChoregrapherFrame1ms16ms()Frame</p>\n<h3 id=\"3--IO-StrictMode\"><a href=\"#3--IO-StrictMode\" class=\"headerlink\" title=\"3. (IO)StrictMode\"></a>3. (IO)StrictMode</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">if</span> (BuildConfig.DEBUG) &#123;</div><div class=\"line\">            StrictMode.setThreadPolicy(<span class=\"keyword\">new</span> StrictMode.ThreadPolicy.Builder()</div><div class=\"line\">                    .detectDiskReads()</div><div class=\"line\">                    .detectDiskWrites()</div><div class=\"line\">                    .detectNetwork()   <span class=\"comment\">// or .detectAll() for all detectable problems</span></div><div class=\"line\">                    .penaltyLog()</div><div class=\"line\">                    .build());</div><div class=\"line\">            StrictMode.setVmPolicy(<span class=\"keyword\">new</span> StrictMode.VmPolicy.Builder()</div><div class=\"line\">                    .detectLeakedSqlLiteObjects()</div><div class=\"line\">                    .detectLeakedClosableObjects()</div><div class=\"line\">                    .penaltyLog()</div><div class=\"line\">                    .penaltyDeath()</div><div class=\"line\">                    .build());</div><div class=\"line\">        &#125;</div></pre></td></tr></table></figure>\n<h3 id=\"4-Activity-LifeCycle-Events\"><a href=\"#4-Activity-LifeCycle-Events\" class=\"headerlink\" title=\"4 .Activity LifeCycle Events\"></a>4 .Activity LifeCycle Events</h3><ul>\n<li>Activity LifeCycle Events(startActivity(), finishi()) go out of your process through Binder IPC to the ActivityManager //startActivityActivityProcess,</li>\n<li>Then back on to your main queue in the form of lifeCycle callbacks(onCreate(),onDestory() et_al) // </li>\n</ul>\n<p>Handler.postDelay<br><a href=\"http://www.dss886.com/android/2016/08/17/17-18\"></a><br>postDelayedLooper</p>\n<blockquote>\n<p>Message msg = queue.next();  // might block</p>\n</blockquote>\n<p>next:<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div></pre></td><td class=\"code\"><pre><div class=\"line\">   <span class=\"function\">Message <span class=\"title\">next</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">   .....</div><div class=\"line\">       <span class=\"keyword\">for</span> (;;) &#123;</div><div class=\"line\">           <span class=\"keyword\">if</span> (nextPollTimeoutMillis != <span class=\"number\">0</span>) &#123;</div><div class=\"line\">               Binder.flushPendingCommands();</div><div class=\"line\">           &#125;</div><div class=\"line\"></div><div class=\"line\">           nativePollOnce(ptr, nextPollTimeoutMillis);</div><div class=\"line\"></div><div class=\"line\">           <span class=\"keyword\">synchronized</span> (<span class=\"keyword\">this</span>) &#123;</div><div class=\"line\">               <span class=\"comment\">// Try to retrieve the next message.  Return if found.</span></div><div class=\"line\">               <span class=\"keyword\">final</span> <span class=\"keyword\">long</span> now = SystemClock.uptimeMillis();</div><div class=\"line\">               Message prevMsg = <span class=\"keyword\">null</span>;</div><div class=\"line\">               Message msg = mMessages;</div><div class=\"line\">               <span class=\"keyword\">if</span> (msg != <span class=\"keyword\">null</span> &amp;&amp; msg.target == <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">                   <span class=\"comment\">// Stalled by a barrier.  Find the next asynchronous message in the queue.</span></div><div class=\"line\">                   do &#123;</div><div class=\"line\">                       prevMsg = msg;</div><div class=\"line\">                       msg = msg.next;</div><div class=\"line\">                   &#125; <span class=\"keyword\">while</span> (msg != <span class=\"keyword\">null</span> &amp;&amp; !msg.isAsynchronous());</div><div class=\"line\">               &#125;</div><div class=\"line\">               <span class=\"keyword\">if</span> (msg != <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">                   <span class=\"keyword\">if</span> (now &lt; msg.when) &#123;</div><div class=\"line\">                       <span class=\"comment\">// Next message is not ready.  Set a timeout to wake up when it is ready.</span></div><div class=\"line\">                       nextPollTimeoutMillis = (<span class=\"keyword\">int</span>) Math.min(msg.when - now, Integer.MAX_VALUE);</div><div class=\"line\">                   &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">                       <span class=\"comment\">// Got a message.</span></div><div class=\"line\">                       mBlocked = <span class=\"keyword\">false</span>;</div><div class=\"line\">                       <span class=\"keyword\">if</span> (prevMsg != <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">                           prevMsg.next = msg.next;</div><div class=\"line\">                       &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">                           mMessages = msg.next;</div><div class=\"line\">                       &#125;</div><div class=\"line\">                       msg.next = <span class=\"keyword\">null</span>;</div><div class=\"line\">                       msg.markInUse();</div><div class=\"line\">                       <span class=\"keyword\">return</span> msg;</div><div class=\"line\">                   &#125;</div><div class=\"line\">               &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">                   <span class=\"comment\">// No more messages.</span></div><div class=\"line\">                   nextPollTimeoutMillis = -<span class=\"number\">1</span>;</div><div class=\"line\">               &#125;</div><div class=\"line\">....</div></pre></td></tr></table></figure></p>\n<p> nativePollOnce(ptr,nextPollTimeoutMillis);<br>nativewaitNativenativequeue.nextreturnMessage<br></p>\n<blockquote>\n<p> // Next message is not ready.  Set a timeout to wake up when it is ready.<br> nextPollTimeoutMillis = (int) Math.min(msg.when - now, Integer.MAX_VALUE);</p>\n</blockquote>\n<p>blockedpostDelayed(r,10)10ms(queue.next)<br>PostDelayedenqueMessage:<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">synchronized</span> (<span class=\"keyword\">this</span>) &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (mQuitting) &#123;</div><div class=\"line\">        IllegalStateException e = <span class=\"keyword\">new</span> IllegalStateException(</div><div class=\"line\">                msg.target + <span class=\"string\">\" sending message to a Handler on a dead thread\"</span>);</div><div class=\"line\">        Log.w(TAG, e.getMessage(), e);</div><div class=\"line\">        msg.recycle();</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    msg.markInUse();</div><div class=\"line\">    msg.when = when;</div><div class=\"line\">    Message p = mMessages;</div><div class=\"line\">    <span class=\"keyword\">boolean</span> needWake;</div><div class=\"line\">    <span class=\"keyword\">if</span> (p == <span class=\"keyword\">null</span> || when == <span class=\"number\">0</span> || when &lt; p.when) &#123;</div><div class=\"line\">        <span class=\"comment\">// New head, wake up the event queue if blocked.</span></div><div class=\"line\">        msg.next = p;</div><div class=\"line\">        mMessages = msg;</div><div class=\"line\">        needWake = mBlocked;</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">        <span class=\"comment\">// Inserted within the middle of the queue.  Usually we don't have to wake</span></div><div class=\"line\">        <span class=\"comment\">// up the event queue unless there is a barrier at the head of the queue</span></div><div class=\"line\">        <span class=\"comment\">// and the message is the earliest asynchronous message in the queue.</span></div><div class=\"line\">        needWake = mBlocked &amp;&amp; p.target == <span class=\"keyword\">null</span> &amp;&amp; msg.isAsynchronous();</div><div class=\"line\">        Message prev;</div><div class=\"line\">        <span class=\"keyword\">for</span> (;;) &#123;</div><div class=\"line\">            prev = p;</div><div class=\"line\">            p = p.next;</div><div class=\"line\">            <span class=\"keyword\">if</span> (p == <span class=\"keyword\">null</span> || when &lt; p.when) &#123;</div><div class=\"line\">                <span class=\"keyword\">break</span>;</div><div class=\"line\">            &#125;</div><div class=\"line\">            <span class=\"keyword\">if</span> (needWake &amp;&amp; p.isAsynchronous()) &#123;</div><div class=\"line\">                needWake = <span class=\"keyword\">false</span>;</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;</div><div class=\"line\">        msg.next = p; <span class=\"comment\">// invariant: p == prev.next</span></div><div class=\"line\">        prev.next = msg;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// We can assume mPtr != 0 because mQuitting is false.</span></div><div class=\"line\">    <span class=\"keyword\">if</span> (needWake) &#123;</div><div class=\"line\">        nativeWake(mPtr);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>nativeWake<br>postDelayedmessageMessageQueueclass</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\":\"></a>:</h4><p>ThreadLooperLooperMessageQueueMessageMessgaecallbackHandlerhandleMessage</p>\n<h3 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h3><ol>\n<li><a href=\"http://www.dss886.com/android/2016/08/17/17-18\">Handler.postDelayed()</a></li>\n<li><a href=\"https://www.youtube.com/watch?v=aFGbv9Ih9qQ\">How the Main Thread works</a></li>\n<li><a href=\"http://www.cnblogs.com/linguanh/p/6412042.html\">Looper</a></li>\n</ol>\n","excerpt":"<p><img src=\"http://odzl05jxx.bkt.clouddn.com/writing%20code%20that%20nobody%20else%20can%20read.jpg\" alt=\"\"></p>\n<p>    : HandlerpostDelayedHandler","more":"</p>\n<h3 id=\"1-Thread\"><a href=\"#1-Thread\" class=\"headerlink\" title=\"1. Thread\"></a>1. Thread</h3><p>Process, AndroidUIcallback(onResume,onCreate,onStartCommand,onDraw, etc) AppProcessProcess<br>Android?<br>Zygote Process forkProcessActivityThread main<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</div><div class=\"line\"><span class=\"comment\">//</span></div><div class=\"line\">       Looper.prepareMainLooper();</div><div class=\"line\">       ActivityThread thread = <span class=\"keyword\">new</span> ActivityThread();</div><div class=\"line\">       thread.attach(<span class=\"keyword\">false</span>);</div><div class=\"line\">       <span class=\"keyword\">if</span> (sMainThreadHandler == <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">           sMainThreadHandler = thread.getHandler();</div><div class=\"line\">       &#125;</div><div class=\"line\">       <span class=\"comment\">// End of event ActivityThreadMain.</span></div><div class=\"line\">       Looper.loop();</div><div class=\"line\">       <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> RuntimeException(<span class=\"string\">\"Main thread loop unexpectedly exited\"</span>);<span class=\"comment\">//Looper.loop</span></div><div class=\"line\">   &#125;</div></pre></td></tr></table></figure></p>\n<p>Looper.prepareMainLooper()<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">/**</div><div class=\"line\"> * Initialize the current thread as a looper, marking it as an</div><div class=\"line\"> * application's main looper. The main looper for your application</div><div class=\"line\"> * is created by the Android environment, so you should never need</div><div class=\"line\"> * to call this function yourself.  See also: &#123;<span class=\"doctag\">@link</span> #prepare()&#125;</div><div class=\"line\"> */</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">prepareMainLooper</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    prepare(<span class=\"keyword\">false</span>);</div><div class=\"line\">    <span class=\"keyword\">synchronized</span> (Looper.class) &#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (sMainLooper != <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> IllegalStateException(<span class=\"string\">\"The main Looper has already been prepared.\"</span>);</div><div class=\"line\">        &#125;</div><div class=\"line\">        sMainLooper = myLooper();</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>ThreadLooper<br>Looper.javaclass<strong>Threadmessage loop</strong>ThreadLooperLooper.prepare()Looper.loop()message LoopHandler<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">LooperThread</span> <span class=\"keyword\">extends</span> <span class=\"title\">Thread</span> </span>&#123;</div><div class=\"line\">  *      <span class=\"keyword\">public</span> Handler mHandler;</div><div class=\"line\">  *</div><div class=\"line\">  *      <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">  *          Looper.prepare();</div><div class=\"line\">  *</div><div class=\"line\">  *          mHandler = <span class=\"keyword\">new</span> Handler() &#123;</div><div class=\"line\">  *              <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">handleMessage</span><span class=\"params\">(Message msg)</span> </span>&#123;</div><div class=\"line\">  *                  <span class=\"comment\">// </span></div><div class=\"line\">  *              &#125;</div><div class=\"line\">  *          &#125;;</div><div class=\"line\">  *\t</div><div class=\"line\">  *          Looper.loop();</div><div class=\"line\">    \t\t<span class=\"comment\">//</span></div><div class=\"line\">  *      &#125;</div><div class=\"line\">  *  &#125;</div></pre></td></tr></table></figure></p>\n<p>LooperMessageQueue()Looper<br>Looper.loop()<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/** </div><div class=\"line\">   * Run the message queue in this thread. Be sure to call</div><div class=\"line\">   * &#123;<span class=\"doctag\">@link</span> #quit()&#125; to end the loop.</div><div class=\"line\">   */</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">loop</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">final</span> Looper me = myLooper();<span class=\"comment\">//LooperException</span></div><div class=\"line\">      <span class=\"keyword\">if</span> (me == <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">          <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> RuntimeException(<span class=\"string\">\"No Looper; Looper.prepare() wasn't called on this thread.\"</span>);</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">final</span> MessageQueue queue = me.mQueue;</div><div class=\"line\">      <span class=\"keyword\">for</span> (;;) &#123;</div><div class=\"line\">          Message msg = queue.next(); <span class=\"comment\">// might block</span></div><div class=\"line\">          <span class=\"keyword\">if</span> (msg == <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">              <span class=\"comment\">// No message indicates that the message queue is quitting.</span></div><div class=\"line\">              <span class=\"keyword\">return</span>;</div><div class=\"line\">          &#125;</div><div class=\"line\">          <span class=\"keyword\">try</span> &#123;</div><div class=\"line\">              msg.target.dispatchMessage(msg);</div><div class=\"line\">          &#125; <span class=\"keyword\">finally</span> &#123;</div><div class=\"line\">             ....</div><div class=\"line\">          &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\">  &#125;</div></pre></td></tr></table></figure></p>\n<p>(msg)msg.target.dispatchMessage(msg)<br>trargetHandler<br>HandlerdispatchMessage<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/**</div><div class=\"line\">    * Handle system messages here.</div><div class=\"line\">    */</span></div><div class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">dispatchMessage</span><span class=\"params\">(Message msg)</span> </span>&#123;</div><div class=\"line\">       <span class=\"keyword\">if</span> (msg.callback != <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">           handleCallback(msg);</div><div class=\"line\">       &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">           <span class=\"keyword\">if</span> (mCallback != <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">               <span class=\"keyword\">if</span> (mCallback.handleMessage(msg)) &#123;</div><div class=\"line\">                   <span class=\"keyword\">return</span>;</div><div class=\"line\">               &#125;</div><div class=\"line\">           &#125;</div><div class=\"line\">           handleMessage(msg);</div><div class=\"line\">       &#125;</div><div class=\"line\">   &#125;</div></pre></td></tr></table></figure></p>\n<p>either or <br>MessageRunnable callbackmessagecallbackrunnablehandler.callBack.handleMessage<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">Handler handler = <span class=\"keyword\">new</span> Handler()&#123;</div><div class=\"line\">            <span class=\"meta\">@Override</span></div><div class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">handleMessage</span><span class=\"params\">(Message msg)</span> </span>&#123;</div><div class=\"line\">                <span class=\"keyword\">super</span>.handleMessage(msg);</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;;</div></pre></td></tr></table></figure></p>\n<p><br>Messagenewobtainrelease<br>MessageQueuenext()</p>\n<blockquote>\n<p>message that should be processed. Will not return message that will be processed at future times.<br>MessagelongMessage.whenSystemClock.uptimeMills()message, next()blockSystemClock.uptimeMillsCPUcpusleepsleeppostDelayed10scpu5s10s</p>\n</blockquote>\n<h3 id=\"2-Handler\"><a href=\"#2-Handler\" class=\"headerlink\" title=\"2. Handler\"></a>2. Handler</h3><p>Handler</p>\n<ol>\n<li>add message to the messageQueue of the Looper its associated with</li>\n</ol>\n<ul>\n<li>post()  //</li>\n<li>postDelayed()/postAtTime() //</li>\n<li>postAtFrontOfQueue() // @piwai </li>\n</ul>\n<ol>\n<li>Handle message when this message doesnt have callback<br>Handler7,Looper<br>Handler handler = new Handler() LooperHandler,Looper.Prepare<br><blockquote>\n<p>Handler (Looper.getMainLooper()) //Looper<br>Hanlder(Looper.myLooper()) //Looper</p>\n</blockquote>\n</li>\n</ol>\n<h3 id=\"Choreographer\"><a href=\"#Choreographer\" class=\"headerlink\" title=\"Choreographer\"></a>Choreographer</h3><p>Android studioLogcat info:</p>\n<blockquote>\n<p>Skipped 60 frames! The application may be doing too much work on its main thread</p>\n</blockquote>\n<p>logChreographer :<br>System Events , Input Events ,Application callback ,Services, Alarm ,UI Drawing.Animation16msDraw a FrameChoregrapherHandlerFrame</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div></pre></td><td class=\"code\"><pre><div class=\"line\">FrameHandler mHandler = <span class=\"keyword\">new</span> FrameHandler(Looper.myLooper());</div><div class=\"line\">Message msg = mHandler.obtainMessage(MSG_DO_FRAME);</div><div class=\"line\">msg.setAsynchronous(<span class=\"keyword\">true</span>);</div><div class=\"line\">mHandler.sendMessageAtTime(msg,nextFrameTime)</div><div class=\"line\"></div><div class=\"line\"> <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FrameHandler</span> <span class=\"keyword\">extends</span> <span class=\"title\">Handler</span> </span>&#123;</div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">FrameHandler</span><span class=\"params\">(Looper looper)</span> </span>&#123;</div><div class=\"line\">            <span class=\"keyword\">super</span>(looper);</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"meta\">@Override</span></div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">handleMessage</span><span class=\"params\">(Message msg)</span> </span>&#123;</div><div class=\"line\">            <span class=\"keyword\">switch</span> (msg.what) &#123;</div><div class=\"line\">                <span class=\"keyword\">case</span> MSG_DO_FRAME:</div><div class=\"line\">                    doFrame(System.nanoTime(), <span class=\"number\">0</span>);</div><div class=\"line\">                    <span class=\"keyword\">break</span>;</div><div class=\"line\">                <span class=\"keyword\">case</span> MSG_DO_SCHEDULE_VSYNC:</div><div class=\"line\">                    doScheduleVsync();</div><div class=\"line\">                    <span class=\"keyword\">break</span>;</div><div class=\"line\">                <span class=\"keyword\">case</span> MSG_DO_SCHEDULE_CALLBACK:</div><div class=\"line\">                    doScheduleCallback(msg.arg1);</div><div class=\"line\">                    <span class=\"keyword\">break</span>;</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div></pre></td></tr></table></figure>\n<p>onMeasure,onLayout,onDrawChoregrapherFrame1ms16ms()Frame</p>\n<h3 id=\"3--IO-StrictMode\"><a href=\"#3--IO-StrictMode\" class=\"headerlink\" title=\"3. (IO)StrictMode\"></a>3. (IO)StrictMode</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">if</span> (BuildConfig.DEBUG) &#123;</div><div class=\"line\">            StrictMode.setThreadPolicy(<span class=\"keyword\">new</span> StrictMode.ThreadPolicy.Builder()</div><div class=\"line\">                    .detectDiskReads()</div><div class=\"line\">                    .detectDiskWrites()</div><div class=\"line\">                    .detectNetwork()   <span class=\"comment\">// or .detectAll() for all detectable problems</span></div><div class=\"line\">                    .penaltyLog()</div><div class=\"line\">                    .build());</div><div class=\"line\">            StrictMode.setVmPolicy(<span class=\"keyword\">new</span> StrictMode.VmPolicy.Builder()</div><div class=\"line\">                    .detectLeakedSqlLiteObjects()</div><div class=\"line\">                    .detectLeakedClosableObjects()</div><div class=\"line\">                    .penaltyLog()</div><div class=\"line\">                    .penaltyDeath()</div><div class=\"line\">                    .build());</div><div class=\"line\">        &#125;</div></pre></td></tr></table></figure>\n<h3 id=\"4-Activity-LifeCycle-Events\"><a href=\"#4-Activity-LifeCycle-Events\" class=\"headerlink\" title=\"4 .Activity LifeCycle Events\"></a>4 .Activity LifeCycle Events</h3><ul>\n<li>Activity LifeCycle Events(startActivity(), finishi()) go out of your process through Binder IPC to the ActivityManager //startActivityActivityProcess,</li>\n<li>Then back on to your main queue in the form of lifeCycle callbacks(onCreate(),onDestory() et_al) // </li>\n</ul>\n<p>Handler.postDelay<br><a href=\"http://www.dss886.com/android/2016/08/17/17-18\"></a><br>postDelayedLooper</p>\n<blockquote>\n<p>Message msg = queue.next();  // might block</p>\n</blockquote>\n<p>next:<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div></pre></td><td class=\"code\"><pre><div class=\"line\">   <span class=\"function\">Message <span class=\"title\">next</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">   .....</div><div class=\"line\">       <span class=\"keyword\">for</span> (;;) &#123;</div><div class=\"line\">           <span class=\"keyword\">if</span> (nextPollTimeoutMillis != <span class=\"number\">0</span>) &#123;</div><div class=\"line\">               Binder.flushPendingCommands();</div><div class=\"line\">           &#125;</div><div class=\"line\"></div><div class=\"line\">           nativePollOnce(ptr, nextPollTimeoutMillis);</div><div class=\"line\"></div><div class=\"line\">           <span class=\"keyword\">synchronized</span> (<span class=\"keyword\">this</span>) &#123;</div><div class=\"line\">               <span class=\"comment\">// Try to retrieve the next message.  Return if found.</span></div><div class=\"line\">               <span class=\"keyword\">final</span> <span class=\"keyword\">long</span> now = SystemClock.uptimeMillis();</div><div class=\"line\">               Message prevMsg = <span class=\"keyword\">null</span>;</div><div class=\"line\">               Message msg = mMessages;</div><div class=\"line\">               <span class=\"keyword\">if</span> (msg != <span class=\"keyword\">null</span> &amp;&amp; msg.target == <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">                   <span class=\"comment\">// Stalled by a barrier.  Find the next asynchronous message in the queue.</span></div><div class=\"line\">                   do &#123;</div><div class=\"line\">                       prevMsg = msg;</div><div class=\"line\">                       msg = msg.next;</div><div class=\"line\">                   &#125; <span class=\"keyword\">while</span> (msg != <span class=\"keyword\">null</span> &amp;&amp; !msg.isAsynchronous());</div><div class=\"line\">               &#125;</div><div class=\"line\">               <span class=\"keyword\">if</span> (msg != <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">                   <span class=\"keyword\">if</span> (now &lt; msg.when) &#123;</div><div class=\"line\">                       <span class=\"comment\">// Next message is not ready.  Set a timeout to wake up when it is ready.</span></div><div class=\"line\">                       nextPollTimeoutMillis = (<span class=\"keyword\">int</span>) Math.min(msg.when - now, Integer.MAX_VALUE);</div><div class=\"line\">                   &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">                       <span class=\"comment\">// Got a message.</span></div><div class=\"line\">                       mBlocked = <span class=\"keyword\">false</span>;</div><div class=\"line\">                       <span class=\"keyword\">if</span> (prevMsg != <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">                           prevMsg.next = msg.next;</div><div class=\"line\">                       &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">                           mMessages = msg.next;</div><div class=\"line\">                       &#125;</div><div class=\"line\">                       msg.next = <span class=\"keyword\">null</span>;</div><div class=\"line\">                       msg.markInUse();</div><div class=\"line\">                       <span class=\"keyword\">return</span> msg;</div><div class=\"line\">                   &#125;</div><div class=\"line\">               &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">                   <span class=\"comment\">// No more messages.</span></div><div class=\"line\">                   nextPollTimeoutMillis = -<span class=\"number\">1</span>;</div><div class=\"line\">               &#125;</div><div class=\"line\">....</div></pre></td></tr></table></figure></p>\n<p> nativePollOnce(ptr,nextPollTimeoutMillis);<br>nativewaitNativenativequeue.nextreturnMessage<br></p>\n<blockquote>\n<p> // Next message is not ready.  Set a timeout to wake up when it is ready.<br> nextPollTimeoutMillis = (int) Math.min(msg.when - now, Integer.MAX_VALUE);</p>\n</blockquote>\n<p>blockedpostDelayed(r,10)10ms(queue.next)<br>PostDelayedenqueMessage:<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">synchronized</span> (<span class=\"keyword\">this</span>) &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (mQuitting) &#123;</div><div class=\"line\">        IllegalStateException e = <span class=\"keyword\">new</span> IllegalStateException(</div><div class=\"line\">                msg.target + <span class=\"string\">\" sending message to a Handler on a dead thread\"</span>);</div><div class=\"line\">        Log.w(TAG, e.getMessage(), e);</div><div class=\"line\">        msg.recycle();</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    msg.markInUse();</div><div class=\"line\">    msg.when = when;</div><div class=\"line\">    Message p = mMessages;</div><div class=\"line\">    <span class=\"keyword\">boolean</span> needWake;</div><div class=\"line\">    <span class=\"keyword\">if</span> (p == <span class=\"keyword\">null</span> || when == <span class=\"number\">0</span> || when &lt; p.when) &#123;</div><div class=\"line\">        <span class=\"comment\">// New head, wake up the event queue if blocked.</span></div><div class=\"line\">        msg.next = p;</div><div class=\"line\">        mMessages = msg;</div><div class=\"line\">        needWake = mBlocked;</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">        <span class=\"comment\">// Inserted within the middle of the queue.  Usually we don't have to wake</span></div><div class=\"line\">        <span class=\"comment\">// up the event queue unless there is a barrier at the head of the queue</span></div><div class=\"line\">        <span class=\"comment\">// and the message is the earliest asynchronous message in the queue.</span></div><div class=\"line\">        needWake = mBlocked &amp;&amp; p.target == <span class=\"keyword\">null</span> &amp;&amp; msg.isAsynchronous();</div><div class=\"line\">        Message prev;</div><div class=\"line\">        <span class=\"keyword\">for</span> (;;) &#123;</div><div class=\"line\">            prev = p;</div><div class=\"line\">            p = p.next;</div><div class=\"line\">            <span class=\"keyword\">if</span> (p == <span class=\"keyword\">null</span> || when &lt; p.when) &#123;</div><div class=\"line\">                <span class=\"keyword\">break</span>;</div><div class=\"line\">            &#125;</div><div class=\"line\">            <span class=\"keyword\">if</span> (needWake &amp;&amp; p.isAsynchronous()) &#123;</div><div class=\"line\">                needWake = <span class=\"keyword\">false</span>;</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;</div><div class=\"line\">        msg.next = p; <span class=\"comment\">// invariant: p == prev.next</span></div><div class=\"line\">        prev.next = msg;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// We can assume mPtr != 0 because mQuitting is false.</span></div><div class=\"line\">    <span class=\"keyword\">if</span> (needWake) &#123;</div><div class=\"line\">        nativeWake(mPtr);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>nativeWake<br>postDelayedmessageMessageQueueclass</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\":\"></a>:</h4><p>ThreadLooperLooperMessageQueueMessageMessgaecallbackHandlerhandleMessage</p>\n<h3 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h3><ol>\n<li><a href=\"http://www.dss886.com/android/2016/08/17/17-18\">Handler.postDelayed()</a></li>\n<li><a href=\"https://www.youtube.com/watch?v=aFGbv9Ih9qQ\">How the Main Thread works</a></li>\n<li><a href=\"http://www.cnblogs.com/linguanh/p/6412042.html\">Looper</a></li>\n</ol>"},{"title":"","date":"2016-10-13T10:17:02.000Z","_content":"AndroidView\n\n![](http://odzl05jxx.bkt.clouddn.com/minion.jpg?imageView2/2/w/400)\n<!--more-->\n\nScrollToScrollBygetVisibleRect\n\n![](http://odzl05jxx.bkt.clouddn.com/android_screen_coordinate_system.png?imageView2/2/w/500)\nTouchEventMotionEvent.getX()getY()\n### 1. \nstatusBar\nXYZ(5.0)\n\n\n### 2. Left,Top,Right,Bottom\nTopleftbottom,downViewwidth = getRight()-getLeft() ,View height = getBottom()-getTop()\nview.getHeight()mBottom-mTop.\n\n\n### 3. X , Y\nXViewY\nX = left + getTranslationX  \nY = Top + getTranslationY\nsetTranslationXleftx, y\n\n### 4. Rect\nView\n>  W/ViewAnimationActivity.java: [32 | onWindowFocusChanged]statusBarHeight = 75\n>  W/ViewAnimationActivity.java: [35 | onWindowFocusChanged]getLocationInWindow  x = 0 y = 75 \n>  W/ViewAnimationActivity.java: [38 | onWindowFocusChanged]getLocationOnScreen x = 0 y = 75\nViewstackoverFlow[](http://stackoverflow.com/questions/17672891/getlocationonscreen-vs-getlocationinwindow)\n\n```java\nView.getLocationInWindow(pos); //window\nView.getLocationOnScreen(pos); //statusBar\nView.getLocalVisibleRect()  \n//view\n//(0,0,xxx,xxx)View\nView.getGlobalVisibleRect()  // \n```\nonCreate0ActivityonWindowFocusChanged(true)\nwindowDecorViewFrameLayoutView\nLinearLayoutchild\n\nsetContentViewCoordinateLayout,Hierarchy View\n\n![](http://odzl05jxx.bkt.clouddn.com/view_hirearchy_1013.png)\n\nViewHirearchyActivityView\n\n> PhoneWindow$DecorViewchild,LinearLayoutView(id/statusBarBackground)View(id/navigationBarBackground)\n> LinearLayout\n> FrameLayout\n> FitWindowsLinearLayout\n> ContentFrameLayout(id/android.R.id.content) //\n> setContentViewview\n\nwindowDecorWindowViewView\n[](http://blog.csdn.net/qibin0506/article/details/49245601)\nsetContentViewactiviy_main.xmlinflateview\nandroid.R.id.contentViewGroupContentFrameLayoutchildsetContentViewView\n\n### 5. View\n> offsetLeftAndRight(int offset) //leftrightView\n> offsetTopAndBottom(int offset) \n\n> scrollTo(int x,int y)  // ViewparentView\nscrollTo(-100,0) \n\n> scrollBy(int x, int y)\n\nscrollBy:\n```java\n  public void scrollBy(int x, int y) {\n        scrollTo(mScrollX + x, mScrollY + y);\n    }\n```\n\n```java\npublic void setScrollX(int value) {\n        scrollTo(value, mScrollY);\n    }\n```\n\n### 6. LayoutParamsmarginView\n\n```java\nMarginLayoutParams params = (MarginLayoutParams)mTextView.getLayoutParams(); //null\nparams.leftMargin + = 100;\nmTextView.setLayoutParams();// requestLayout\n```\n\n\n### 7.AnimationView\n[](https://developer.android.com/guide/topics/graphics/overview.html)AndroidAnimation: \n> Property Animation\n> View Animation(Tween animation, Frame animation)\n\npackage\nandroid.animationpackageObjectAnimatorValueAnimator\nViewandroid.view.animationpackageTranslateA,AlphaAnimation\n\nView AnimationR.anim,\n```java\nImageView image = (ImageView) findViewById(R.id.image);\nAnimation hyperspaceJump = AnimationUtils.loadAnimation(this, R.anim.hyperspace_jump);\nimage.startAnimation(hyperspaceJump);\n```\nR.animator,:\n```java\nAnimatorSet set = (AnimatorSet) AnimatorInflater.loadAnimator(myContext,\n    R.anim.property_animator);\nset.setTarget(myObject);\nset.start();\n```\nViewPropertyAnimatorandroid.viewclassUtil,API 12 ,API 14\nViewCompat.animate() ViewPropertyAnimator\n\n```java\nViewCompat.animate(view).x(500).y(500).setDuration(5000).setInterpolator(new DecelaratorInterpolator());  //start()\n```\nGoogle,DevByte\nGoogleAppDecelaratorInterpolator\n\n### 8.ScrollersmoothScroll\nViewcomputeScroll(),\n```java\nScroller scroller = new Scroller(mContext);\n \n private void smoothScrollTo(int dstX, int dstY) {\n      int scrollX = getScrollX();\n      int delta = dstX - scrollX;\n      scroller.startScroll(scrollX, 0, delta, 0, 1000);\n      invalidate();\n }\n  \n @Override\n public void computeScroll() {\n     if (scroller.computeScrollOffset()) {\n         scrollTo(scroller.getCurrX(), scroller.getCurY());\n         postInvalidate();\n     }\n }\n```\n\n### 9. \nView.canScrollVertically(int)\n```java\n public static boolean canChildScrollUp(View view) {\n        if (android.os.Build.VERSION.SDK_INT < 14) {\n            if (view instanceof AbsListView) {\n                final AbsListView absListView = (AbsListView) view;\n                return absListView.getChildCount() > 0\n                        && (absListView.getFirstVisiblePosition() > 0 || absListView.getChildAt(0)\n                        .getTop() < absListView.getPaddingTop());\n            } else {\n                return view.getScrollY() > 0;\n            }\n        } else {\n            return view.canScrollVertically(-1);\n        }\n    }\n```\nandroid-ultra-pulltorefreshLoggetVisibleRect\n\nv4ViewCompat.canScrollVerticallyv4(10k+)\nsupportLibrary65536\n![pic](http://odzl05jxx.bkt.clouddn.com/support_lib_methods_summary.jpg)\n\n\n\n### \n- getLocalVisibleRectview\n- scrollBy,setScrollXscrollToScrollTo\n\n\n\n\n### Reference\n1. [Android](http://blog.csdn.net/yanbober/article/details/50419117)\n2. [ViewView.getLocationInWindow()](http://blog.csdn.net/imyfriend/article/details/8564781\n3. [AndroidView](http://www.cnblogs.com/absfree/p/5352258.html)","source":"_posts/2016-10-13-Android-coordinate-System.md","raw":"---\ntitle: \ndate: 2016-10-13 18:17:02\ncategories: blog\ntags: [android,TouchEvent]\n---\nAndroidView\n\n![](http://odzl05jxx.bkt.clouddn.com/minion.jpg?imageView2/2/w/400)\n<!--more-->\n\nScrollToScrollBygetVisibleRect\n\n![](http://odzl05jxx.bkt.clouddn.com/android_screen_coordinate_system.png?imageView2/2/w/500)\nTouchEventMotionEvent.getX()getY()\n### 1. \nstatusBar\nXYZ(5.0)\n\n\n### 2. Left,Top,Right,Bottom\nTopleftbottom,downViewwidth = getRight()-getLeft() ,View height = getBottom()-getTop()\nview.getHeight()mBottom-mTop.\n\n\n### 3. X , Y\nXViewY\nX = left + getTranslationX  \nY = Top + getTranslationY\nsetTranslationXleftx, y\n\n### 4. Rect\nView\n>  W/ViewAnimationActivity.java: [32 | onWindowFocusChanged]statusBarHeight = 75\n>  W/ViewAnimationActivity.java: [35 | onWindowFocusChanged]getLocationInWindow  x = 0 y = 75 \n>  W/ViewAnimationActivity.java: [38 | onWindowFocusChanged]getLocationOnScreen x = 0 y = 75\nViewstackoverFlow[](http://stackoverflow.com/questions/17672891/getlocationonscreen-vs-getlocationinwindow)\n\n```java\nView.getLocationInWindow(pos); //window\nView.getLocationOnScreen(pos); //statusBar\nView.getLocalVisibleRect()  \n//view\n//(0,0,xxx,xxx)View\nView.getGlobalVisibleRect()  // \n```\nonCreate0ActivityonWindowFocusChanged(true)\nwindowDecorViewFrameLayoutView\nLinearLayoutchild\n\nsetContentViewCoordinateLayout,Hierarchy View\n\n![](http://odzl05jxx.bkt.clouddn.com/view_hirearchy_1013.png)\n\nViewHirearchyActivityView\n\n> PhoneWindow$DecorViewchild,LinearLayoutView(id/statusBarBackground)View(id/navigationBarBackground)\n> LinearLayout\n> FrameLayout\n> FitWindowsLinearLayout\n> ContentFrameLayout(id/android.R.id.content) //\n> setContentViewview\n\nwindowDecorWindowViewView\n[](http://blog.csdn.net/qibin0506/article/details/49245601)\nsetContentViewactiviy_main.xmlinflateview\nandroid.R.id.contentViewGroupContentFrameLayoutchildsetContentViewView\n\n### 5. View\n> offsetLeftAndRight(int offset) //leftrightView\n> offsetTopAndBottom(int offset) \n\n> scrollTo(int x,int y)  // ViewparentView\nscrollTo(-100,0) \n\n> scrollBy(int x, int y)\n\nscrollBy:\n```java\n  public void scrollBy(int x, int y) {\n        scrollTo(mScrollX + x, mScrollY + y);\n    }\n```\n\n```java\npublic void setScrollX(int value) {\n        scrollTo(value, mScrollY);\n    }\n```\n\n### 6. LayoutParamsmarginView\n\n```java\nMarginLayoutParams params = (MarginLayoutParams)mTextView.getLayoutParams(); //null\nparams.leftMargin + = 100;\nmTextView.setLayoutParams();// requestLayout\n```\n\n\n### 7.AnimationView\n[](https://developer.android.com/guide/topics/graphics/overview.html)AndroidAnimation: \n> Property Animation\n> View Animation(Tween animation, Frame animation)\n\npackage\nandroid.animationpackageObjectAnimatorValueAnimator\nViewandroid.view.animationpackageTranslateA,AlphaAnimation\n\nView AnimationR.anim,\n```java\nImageView image = (ImageView) findViewById(R.id.image);\nAnimation hyperspaceJump = AnimationUtils.loadAnimation(this, R.anim.hyperspace_jump);\nimage.startAnimation(hyperspaceJump);\n```\nR.animator,:\n```java\nAnimatorSet set = (AnimatorSet) AnimatorInflater.loadAnimator(myContext,\n    R.anim.property_animator);\nset.setTarget(myObject);\nset.start();\n```\nViewPropertyAnimatorandroid.viewclassUtil,API 12 ,API 14\nViewCompat.animate() ViewPropertyAnimator\n\n```java\nViewCompat.animate(view).x(500).y(500).setDuration(5000).setInterpolator(new DecelaratorInterpolator());  //start()\n```\nGoogle,DevByte\nGoogleAppDecelaratorInterpolator\n\n### 8.ScrollersmoothScroll\nViewcomputeScroll(),\n```java\nScroller scroller = new Scroller(mContext);\n \n private void smoothScrollTo(int dstX, int dstY) {\n      int scrollX = getScrollX();\n      int delta = dstX - scrollX;\n      scroller.startScroll(scrollX, 0, delta, 0, 1000);\n      invalidate();\n }\n  \n @Override\n public void computeScroll() {\n     if (scroller.computeScrollOffset()) {\n         scrollTo(scroller.getCurrX(), scroller.getCurY());\n         postInvalidate();\n     }\n }\n```\n\n### 9. \nView.canScrollVertically(int)\n```java\n public static boolean canChildScrollUp(View view) {\n        if (android.os.Build.VERSION.SDK_INT < 14) {\n            if (view instanceof AbsListView) {\n                final AbsListView absListView = (AbsListView) view;\n                return absListView.getChildCount() > 0\n                        && (absListView.getFirstVisiblePosition() > 0 || absListView.getChildAt(0)\n                        .getTop() < absListView.getPaddingTop());\n            } else {\n                return view.getScrollY() > 0;\n            }\n        } else {\n            return view.canScrollVertically(-1);\n        }\n    }\n```\nandroid-ultra-pulltorefreshLoggetVisibleRect\n\nv4ViewCompat.canScrollVerticallyv4(10k+)\nsupportLibrary65536\n![pic](http://odzl05jxx.bkt.clouddn.com/support_lib_methods_summary.jpg)\n\n\n\n### \n- getLocalVisibleRectview\n- scrollBy,setScrollXscrollToScrollTo\n\n\n\n\n### Reference\n1. [Android](http://blog.csdn.net/yanbober/article/details/50419117)\n2. [ViewView.getLocationInWindow()](http://blog.csdn.net/imyfriend/article/details/8564781\n3. [AndroidView](http://www.cnblogs.com/absfree/p/5352258.html)","slug":"2016-10-13-Android-coordinate-System","published":1,"updated":"2017-04-23T10:50:09.399Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj50afguj0005i4vriok52p3k","content":"<p>AndroidView</p>\n<p><img src=\"http://odzl05jxx.bkt.clouddn.com/minion.jpg?imageView2/2/w/400\" alt=\"\"><br><a id=\"more\"></a></p>\n<p>ScrollToScrollBygetVisibleRect<br><br><img src=\"http://odzl05jxx.bkt.clouddn.com/android_screen_coordinate_system.png?imageView2/2/w/500\" alt=\"\"><br>TouchEventMotionEvent.getX()getY()</p>\n<h3 id=\"1-\"><a href=\"#1-\" class=\"headerlink\" title=\"1. \"></a>1. </h3><p>statusBar<br>XYZ(5.0)</p>\n<h3 id=\"2-Left-Top-Right-Bottom\"><a href=\"#2-Left-Top-Right-Bottom\" class=\"headerlink\" title=\"2. Left,Top,Right,Bottom\"></a>2. Left,Top,Right,Bottom</h3><p>Topleftbottom,downViewwidth = getRight()-getLeft() ,View height = getBottom()-getTop()<br>view.getHeight()mBottom-mTop.</p>\n<h3 id=\"3-X-Y\"><a href=\"#3-X-Y\" class=\"headerlink\" title=\"3. X , Y\"></a>3. X , Y</h3><p>XViewY<br>X = left + getTranslationX<br>Y = Top + getTranslationY<br>setTranslationXleftx, y</p>\n<h3 id=\"4-Rect\"><a href=\"#4-Rect\" class=\"headerlink\" title=\"4. Rect\"></a>4. Rect</h3><p>View</p>\n<blockquote>\n<p> W/ViewAnimationActivity.java: [32 | onWindowFocusChanged]statusBarHeight = 75<br> W/ViewAnimationActivity.java: [35 | onWindowFocusChanged]getLocationInWindow  x = 0 y = 75<br> W/ViewAnimationActivity.java: [38 | onWindowFocusChanged]getLocationOnScreen x = 0 y = 75<br>ViewstackoverFlow<a href=\"http://stackoverflow.com/questions/17672891/getlocationonscreen-vs-getlocationinwindow\"></a></p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">View.getLocationInWindow(pos); <span class=\"comment\">//window</span></div><div class=\"line\">View.getLocationOnScreen(pos); <span class=\"comment\">//statusBar</span></div><div class=\"line\">View.getLocalVisibleRect()  </div><div class=\"line\"><span class=\"comment\">//view</span></div><div class=\"line\"><span class=\"comment\">//(0,0,xxx,xxx)View</span></div><div class=\"line\">View.getGlobalVisibleRect()  <span class=\"comment\">// </span></div></pre></td></tr></table></figure>\n<p>onCreate0ActivityonWindowFocusChanged(true)<br>windowDecorViewFrameLayoutView<br>LinearLayoutchild</p>\n<p>setContentViewCoordinateLayout,Hierarchy View<br><br><img src=\"http://odzl05jxx.bkt.clouddn.com/view_hirearchy_1013.png\" alt=\"\"></p>\n<p>ViewHirearchyActivityView</p>\n<blockquote>\n<p>PhoneWindow$DecorViewchild,LinearLayoutView(id/statusBarBackground)View(id/navigationBarBackground)<br>LinearLayout<br>FrameLayout<br>FitWindowsLinearLayout<br>ContentFrameLayout(id/android.R.id.content) //<br>setContentViewview</p>\n</blockquote>\n<p>windowDecorWindowViewView<br><a href=\"http://blog.csdn.net/qibin0506/article/details/49245601\"></a><br>setContentViewactiviy_main.xmlinflateview<br>android.R.id.contentViewGroupContentFrameLayoutchildsetContentViewView</p>\n<h3 id=\"5-View\"><a href=\"#5-View\" class=\"headerlink\" title=\"5. View\"></a>5. View</h3><blockquote>\n<p>offsetLeftAndRight(int offset) //leftrightView<br>offsetTopAndBottom(int offset) </p>\n<p>scrollTo(int x,int y)  // ViewparentView<br>scrollTo(-100,0) </p>\n<p>scrollBy(int x, int y)</p>\n</blockquote>\n<p>scrollBy:<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">scrollBy</span><span class=\"params\">(<span class=\"keyword\">int</span> x, <span class=\"keyword\">int</span> y)</span> </span>&#123;</div><div class=\"line\">      scrollTo(mScrollX + x, mScrollY + y);</div><div class=\"line\">  &#125;</div></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setScrollX</span><span class=\"params\">(<span class=\"keyword\">int</span> value)</span> </span>&#123;</div><div class=\"line\">        scrollTo(value, mScrollY);</div><div class=\"line\">    &#125;</div></pre></td></tr></table></figure></p>\n<h3 id=\"6-LayoutParamsmarginView\"><a href=\"#6-LayoutParamsmarginView\" class=\"headerlink\" title=\"6. LayoutParamsmarginView\"></a>6. LayoutParamsmarginView</h3><p><br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">MarginLayoutParams params = (MarginLayoutParams)mTextView.getLayoutParams(); <span class=\"comment\">//null</span></div><div class=\"line\">params.leftMargin + = <span class=\"number\">100</span>;</div><div class=\"line\">mTextView.setLayoutParams();<span class=\"comment\">// requestLayout</span></div></pre></td></tr></table></figure></p>\n<h3 id=\"7-AnimationView\"><a href=\"#7-AnimationView\" class=\"headerlink\" title=\"7.AnimationView\"></a>7.AnimationView</h3><p><a href=\"https://developer.android.com/guide/topics/graphics/overview.html\"></a>AndroidAnimation: </p>\n<blockquote>\n<p>Property Animation<br>View Animation(Tween animation, Frame animation)</p>\n</blockquote>\n<p>package<br>android.animationpackageObjectAnimatorValueAnimator<br>Viewandroid.view.animationpackageTranslateA,AlphaAnimation</p>\n<p>View AnimationR.anim,<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">ImageView image = (ImageView) findViewById(R.id.image);</div><div class=\"line\">Animation hyperspaceJump = AnimationUtils.loadAnimation(<span class=\"keyword\">this</span>, R.anim.hyperspace_jump);</div><div class=\"line\">image.startAnimation(hyperspaceJump);</div></pre></td></tr></table></figure></p>\n<p>R.animator,:<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">AnimatorSet set = (AnimatorSet) AnimatorInflater.loadAnimator(myContext,</div><div class=\"line\">    R.anim.property_animator);</div><div class=\"line\">set.setTarget(myObject);</div><div class=\"line\">set.start();</div></pre></td></tr></table></figure></p>\n<p>ViewPropertyAnimatorandroid.viewclassUtil,API 12 ,API 14<br>ViewCompat.animate() ViewPropertyAnimator<br><br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">ViewCompat.animate(view).x(<span class=\"number\">500</span>).y(<span class=\"number\">500</span>).setDuration(<span class=\"number\">5000</span>).setInterpolator(<span class=\"keyword\">new</span> DecelaratorInterpolator());  <span class=\"comment\">//start()</span></div></pre></td></tr></table></figure></p>\n<p>Google,DevByte<br>GoogleAppDecelaratorInterpolator</p>\n<h3 id=\"8-ScrollersmoothScroll\"><a href=\"#8-ScrollersmoothScroll\" class=\"headerlink\" title=\"8.ScrollersmoothScroll\"></a>8.ScrollersmoothScroll</h3><p>ViewcomputeScroll(),<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\">Scroller scroller = <span class=\"keyword\">new</span> Scroller(mContext);</div><div class=\"line\"> </div><div class=\"line\"> <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">smoothScrollTo</span><span class=\"params\">(<span class=\"keyword\">int</span> dstX, <span class=\"keyword\">int</span> dstY)</span> </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">int</span> scrollX = getScrollX();</div><div class=\"line\">      <span class=\"keyword\">int</span> delta = dstX - scrollX;</div><div class=\"line\">      scroller.startScroll(scrollX, <span class=\"number\">0</span>, delta, <span class=\"number\">0</span>, <span class=\"number\">1000</span>);</div><div class=\"line\">      invalidate();</div><div class=\"line\"> &#125;</div><div class=\"line\">  </div><div class=\"line\"> <span class=\"meta\">@Override</span></div><div class=\"line\"> <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">computeScroll</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">     <span class=\"keyword\">if</span> (scroller.computeScrollOffset()) &#123;</div><div class=\"line\">         scrollTo(scroller.getCurrX(), scroller.getCurY());</div><div class=\"line\">         postInvalidate();</div><div class=\"line\">     &#125;</div><div class=\"line\"> &#125;</div></pre></td></tr></table></figure></p>\n<h3 id=\"9-\"><a href=\"#9-\" class=\"headerlink\" title=\"9. \"></a>9. </h3><p>View.canScrollVertically(int)<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">boolean</span> <span class=\"title\">canChildScrollUp</span><span class=\"params\">(View view)</span> </span>&#123;</div><div class=\"line\">       <span class=\"keyword\">if</span> (android.os.Build.VERSION.SDK_INT &lt; <span class=\"number\">14</span>) &#123;</div><div class=\"line\">           <span class=\"keyword\">if</span> (view <span class=\"keyword\">instanceof</span> AbsListView) &#123;</div><div class=\"line\">               <span class=\"keyword\">final</span> AbsListView absListView = (AbsListView) view;</div><div class=\"line\">               <span class=\"keyword\">return</span> absListView.getChildCount() &gt; <span class=\"number\">0</span></div><div class=\"line\">                       &amp;&amp; (absListView.getFirstVisiblePosition() &gt; <span class=\"number\">0</span> || absListView.getChildAt(<span class=\"number\">0</span>)</div><div class=\"line\">                       .getTop() &lt; absListView.getPaddingTop());</div><div class=\"line\">           &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">               <span class=\"keyword\">return</span> view.getScrollY() &gt; <span class=\"number\">0</span>;</div><div class=\"line\">           &#125;</div><div class=\"line\">       &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">           <span class=\"keyword\">return</span> view.canScrollVertically(-<span class=\"number\">1</span>);</div><div class=\"line\">       &#125;</div><div class=\"line\">   &#125;</div></pre></td></tr></table></figure></p>\n<p>android-ultra-pulltorefreshLoggetVisibleRect<br><br>v4ViewCompat.canScrollVerticallyv4(10k+)<br>supportLibrary65536<br><img src=\"http://odzl05jxx.bkt.clouddn.com/support_lib_methods_summary.jpg\" alt=\"pic\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li>getLocalVisibleRectview</li>\n<li>scrollBy,setScrollXscrollToScrollTo</li>\n</ul>\n<h3 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h3><ol>\n<li><a href=\"http://blog.csdn.net/yanbober/article/details/50419117\">Android</a></li>\n<li>[ViewView.getLocationInWindow()](<a href=\"http://blog.csdn.net/imyfriend/article/details/8564781\">http://blog.csdn.net/imyfriend/article/details/8564781</a></li>\n<li><a href=\"http://www.cnblogs.com/absfree/p/5352258.html\">AndroidView</a></li>\n</ol>\n","excerpt":"<p>AndroidView</p>\n<p><img src=\"http://odzl05jxx.bkt.clouddn.com/minion.jpg?imageView2/2/w/400\" alt=\"\"><br>","more":"</p>\n<p>ScrollToScrollBygetVisibleRect<br><br><img src=\"http://odzl05jxx.bkt.clouddn.com/android_screen_coordinate_system.png?imageView2/2/w/500\" alt=\"\"><br>TouchEventMotionEvent.getX()getY()</p>\n<h3 id=\"1-\"><a href=\"#1-\" class=\"headerlink\" title=\"1. \"></a>1. </h3><p>statusBar<br>XYZ(5.0)</p>\n<h3 id=\"2-Left-Top-Right-Bottom\"><a href=\"#2-Left-Top-Right-Bottom\" class=\"headerlink\" title=\"2. Left,Top,Right,Bottom\"></a>2. Left,Top,Right,Bottom</h3><p>Topleftbottom,downViewwidth = getRight()-getLeft() ,View height = getBottom()-getTop()<br>view.getHeight()mBottom-mTop.</p>\n<h3 id=\"3-X-Y\"><a href=\"#3-X-Y\" class=\"headerlink\" title=\"3. X , Y\"></a>3. X , Y</h3><p>XViewY<br>X = left + getTranslationX<br>Y = Top + getTranslationY<br>setTranslationXleftx, y</p>\n<h3 id=\"4-Rect\"><a href=\"#4-Rect\" class=\"headerlink\" title=\"4. Rect\"></a>4. Rect</h3><p>View</p>\n<blockquote>\n<p> W/ViewAnimationActivity.java: [32 | onWindowFocusChanged]statusBarHeight = 75<br> W/ViewAnimationActivity.java: [35 | onWindowFocusChanged]getLocationInWindow  x = 0 y = 75<br> W/ViewAnimationActivity.java: [38 | onWindowFocusChanged]getLocationOnScreen x = 0 y = 75<br>ViewstackoverFlow<a href=\"http://stackoverflow.com/questions/17672891/getlocationonscreen-vs-getlocationinwindow\"></a></p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">View.getLocationInWindow(pos); <span class=\"comment\">//window</span></div><div class=\"line\">View.getLocationOnScreen(pos); <span class=\"comment\">//statusBar</span></div><div class=\"line\">View.getLocalVisibleRect()  </div><div class=\"line\"><span class=\"comment\">//view</span></div><div class=\"line\"><span class=\"comment\">//(0,0,xxx,xxx)View</span></div><div class=\"line\">View.getGlobalVisibleRect()  <span class=\"comment\">// </span></div></pre></td></tr></table></figure>\n<p>onCreate0ActivityonWindowFocusChanged(true)<br>windowDecorViewFrameLayoutView<br>LinearLayoutchild</p>\n<p>setContentViewCoordinateLayout,Hierarchy View<br><br><img src=\"http://odzl05jxx.bkt.clouddn.com/view_hirearchy_1013.png\" alt=\"\"></p>\n<p>ViewHirearchyActivityView</p>\n<blockquote>\n<p>PhoneWindow$DecorViewchild,LinearLayoutView(id/statusBarBackground)View(id/navigationBarBackground)<br>LinearLayout<br>FrameLayout<br>FitWindowsLinearLayout<br>ContentFrameLayout(id/android.R.id.content) //<br>setContentViewview</p>\n</blockquote>\n<p>windowDecorWindowViewView<br><a href=\"http://blog.csdn.net/qibin0506/article/details/49245601\"></a><br>setContentViewactiviy_main.xmlinflateview<br>android.R.id.contentViewGroupContentFrameLayoutchildsetContentViewView</p>\n<h3 id=\"5-View\"><a href=\"#5-View\" class=\"headerlink\" title=\"5. View\"></a>5. View</h3><blockquote>\n<p>offsetLeftAndRight(int offset) //leftrightView<br>offsetTopAndBottom(int offset) </p>\n<p>scrollTo(int x,int y)  // ViewparentView<br>scrollTo(-100,0) </p>\n<p>scrollBy(int x, int y)</p>\n</blockquote>\n<p>scrollBy:<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">scrollBy</span><span class=\"params\">(<span class=\"keyword\">int</span> x, <span class=\"keyword\">int</span> y)</span> </span>&#123;</div><div class=\"line\">      scrollTo(mScrollX + x, mScrollY + y);</div><div class=\"line\">  &#125;</div></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setScrollX</span><span class=\"params\">(<span class=\"keyword\">int</span> value)</span> </span>&#123;</div><div class=\"line\">        scrollTo(value, mScrollY);</div><div class=\"line\">    &#125;</div></pre></td></tr></table></figure></p>\n<h3 id=\"6-LayoutParamsmarginView\"><a href=\"#6-LayoutParamsmarginView\" class=\"headerlink\" title=\"6. LayoutParamsmarginView\"></a>6. LayoutParamsmarginView</h3><p><br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">MarginLayoutParams params = (MarginLayoutParams)mTextView.getLayoutParams(); <span class=\"comment\">//null</span></div><div class=\"line\">params.leftMargin + = <span class=\"number\">100</span>;</div><div class=\"line\">mTextView.setLayoutParams();<span class=\"comment\">// requestLayout</span></div></pre></td></tr></table></figure></p>\n<h3 id=\"7-AnimationView\"><a href=\"#7-AnimationView\" class=\"headerlink\" title=\"7.AnimationView\"></a>7.AnimationView</h3><p><a href=\"https://developer.android.com/guide/topics/graphics/overview.html\"></a>AndroidAnimation: </p>\n<blockquote>\n<p>Property Animation<br>View Animation(Tween animation, Frame animation)</p>\n</blockquote>\n<p>package<br>android.animationpackageObjectAnimatorValueAnimator<br>Viewandroid.view.animationpackageTranslateA,AlphaAnimation</p>\n<p>View AnimationR.anim,<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">ImageView image = (ImageView) findViewById(R.id.image);</div><div class=\"line\">Animation hyperspaceJump = AnimationUtils.loadAnimation(<span class=\"keyword\">this</span>, R.anim.hyperspace_jump);</div><div class=\"line\">image.startAnimation(hyperspaceJump);</div></pre></td></tr></table></figure></p>\n<p>R.animator,:<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">AnimatorSet set = (AnimatorSet) AnimatorInflater.loadAnimator(myContext,</div><div class=\"line\">    R.anim.property_animator);</div><div class=\"line\">set.setTarget(myObject);</div><div class=\"line\">set.start();</div></pre></td></tr></table></figure></p>\n<p>ViewPropertyAnimatorandroid.viewclassUtil,API 12 ,API 14<br>ViewCompat.animate() ViewPropertyAnimator<br><br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">ViewCompat.animate(view).x(<span class=\"number\">500</span>).y(<span class=\"number\">500</span>).setDuration(<span class=\"number\">5000</span>).setInterpolator(<span class=\"keyword\">new</span> DecelaratorInterpolator());  <span class=\"comment\">//start()</span></div></pre></td></tr></table></figure></p>\n<p>Google,DevByte<br>GoogleAppDecelaratorInterpolator</p>\n<h3 id=\"8-ScrollersmoothScroll\"><a href=\"#8-ScrollersmoothScroll\" class=\"headerlink\" title=\"8.ScrollersmoothScroll\"></a>8.ScrollersmoothScroll</h3><p>ViewcomputeScroll(),<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\">Scroller scroller = <span class=\"keyword\">new</span> Scroller(mContext);</div><div class=\"line\"> </div><div class=\"line\"> <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">smoothScrollTo</span><span class=\"params\">(<span class=\"keyword\">int</span> dstX, <span class=\"keyword\">int</span> dstY)</span> </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">int</span> scrollX = getScrollX();</div><div class=\"line\">      <span class=\"keyword\">int</span> delta = dstX - scrollX;</div><div class=\"line\">      scroller.startScroll(scrollX, <span class=\"number\">0</span>, delta, <span class=\"number\">0</span>, <span class=\"number\">1000</span>);</div><div class=\"line\">      invalidate();</div><div class=\"line\"> &#125;</div><div class=\"line\">  </div><div class=\"line\"> <span class=\"meta\">@Override</span></div><div class=\"line\"> <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">computeScroll</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">     <span class=\"keyword\">if</span> (scroller.computeScrollOffset()) &#123;</div><div class=\"line\">         scrollTo(scroller.getCurrX(), scroller.getCurY());</div><div class=\"line\">         postInvalidate();</div><div class=\"line\">     &#125;</div><div class=\"line\"> &#125;</div></pre></td></tr></table></figure></p>\n<h3 id=\"9-\"><a href=\"#9-\" class=\"headerlink\" title=\"9. \"></a>9. </h3><p>View.canScrollVertically(int)<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">boolean</span> <span class=\"title\">canChildScrollUp</span><span class=\"params\">(View view)</span> </span>&#123;</div><div class=\"line\">       <span class=\"keyword\">if</span> (android.os.Build.VERSION.SDK_INT &lt; <span class=\"number\">14</span>) &#123;</div><div class=\"line\">           <span class=\"keyword\">if</span> (view <span class=\"keyword\">instanceof</span> AbsListView) &#123;</div><div class=\"line\">               <span class=\"keyword\">final</span> AbsListView absListView = (AbsListView) view;</div><div class=\"line\">               <span class=\"keyword\">return</span> absListView.getChildCount() &gt; <span class=\"number\">0</span></div><div class=\"line\">                       &amp;&amp; (absListView.getFirstVisiblePosition() &gt; <span class=\"number\">0</span> || absListView.getChildAt(<span class=\"number\">0</span>)</div><div class=\"line\">                       .getTop() &lt; absListView.getPaddingTop());</div><div class=\"line\">           &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">               <span class=\"keyword\">return</span> view.getScrollY() &gt; <span class=\"number\">0</span>;</div><div class=\"line\">           &#125;</div><div class=\"line\">       &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">           <span class=\"keyword\">return</span> view.canScrollVertically(-<span class=\"number\">1</span>);</div><div class=\"line\">       &#125;</div><div class=\"line\">   &#125;</div></pre></td></tr></table></figure></p>\n<p>android-ultra-pulltorefreshLoggetVisibleRect<br><br>v4ViewCompat.canScrollVerticallyv4(10k+)<br>supportLibrary65536<br><img src=\"http://odzl05jxx.bkt.clouddn.com/support_lib_methods_summary.jpg\" alt=\"pic\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li>getLocalVisibleRectview</li>\n<li>scrollBy,setScrollXscrollToScrollTo</li>\n</ul>\n<h3 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h3><ol>\n<li><a href=\"http://blog.csdn.net/yanbober/article/details/50419117\">Android</a></li>\n<li>[ViewView.getLocationInWindow()](<a href=\"http://blog.csdn.net/imyfriend/article/details/8564781\">http://blog.csdn.net/imyfriend/article/details/8564781</a></li>\n<li><a href=\"http://www.cnblogs.com/absfree/p/5352258.html\">AndroidView</a></li>\n</ol>"},{"title":"RecyclerViewAnimation","date":"2016-10-20T08:16:49.000Z","_content":"\nFrom the talk \nRecyclerView Animations and Behind the Scenes\nYigit Biyar & Chet Haase\non Anroid Dev Summit 2015\n\n### 1. RecyclerView\n\nRecyclerView is Flexible , Pluggable and Customizeable\n\n![](http://odzl05jxx.bkt.clouddn.com/snapshot20161020135353.jpg?imageView2/2/w/600)\nChildHelper AdapterHelper RecyclerChild View<!--more-->\n\n\n- ViewHolder\n![](http://odzl05jxx.bkt.clouddn.com/viewHolder_step_1.jpg?imageView2/2/w/600)\n1 .LayoutManagergetViewForPositionRecyclerViewCache(getViewForPosition)LayoutManager,Adapter\n2. CacheRecyclerViewAdptergetViewTypeRecycled PoolgetViewHolderByType\n3. PoolRecyclerViewAdaptercreateViewHolder\n4. PoolTypeViewHolder3viewHolderbindViewHolderLayoutManager\n![](http://odzl05jxx.bkt.clouddn.com/viewHolder_step_2.jpg?imageView2/2/w/600)\n5. LayoutManagerViewUIRecyclerViewonViewAttachedToWindow\n\n\n- ViewHolder(Reserves)\n![](http://odzl05jxx.bkt.clouddn.com/viewHolder_step_3.jpg?imageView2/2/w/600)\n1. LayoutManagerremoveAndRecycleViewRecyclerViewonViewDetachedFromWindow\n2. View.isValidscrollViewValidViewCacheCacheinvalidate oldest oneAdapter(onViewRecycled)\n3. ValidViewPoolAdapteronViewRecycled\n\n- ViewHolder(Fancy Reserves!)\n![](http://odzl05jxx.bkt.clouddn.com/snapshot20161020124442.jpg?imageView2/2/w/600)\n1. LayoutManageronLayoutChildren\n2. LayoutRecyclerViewlayoutRecyclerViewViewViewGroupViewLayoutManager\n3. RecyclerViewaddViewItemAnimator300ms(300ms)onAnimationFinishedRecyclerView.\n4. RecyclerViewAdapter(onViewDetachedFromWindow)\n5. ViewCacheRecycled Pool\n\n- ViewHolder\n![](http://odzl05jxx.bkt.clouddn.com/snapshot20161020124836.jpg?imageView2/2/w/600)\n1. LayoutManagerremoveAndRecycleViewRecyclerViewViewvalid\n2. ValidRecycledPool hasTransientState\n3. ViewAnimationAnimating PoolAdapteronFailedToRecycle(Adapter)\n4. onFailedToRecycle(ViewHolder)truePoolViewTransientStateView()\n\n- ViewHolder\n![](http://odzl05jxx.bkt.clouddn.com/snapshot20161020143554.jpg?imageView2/2/w/600)\nRecyclerViewViewPool(addViewHolderToRecycledViewPool(ViewHolder))PooltypeViewHoldertype xViewHolder5KillView,pool.setMaxRecycledViews(type,count)PoolHolder per type\n\nPoolActivity Context\n\n### 2. LayoutManagerItemAnimatorItemView\n\nperdictiveItemAnimationRecyclerViewlist\nLayoutManager\n> supportPredictiveItemAnimations()true\n\nLinearLayoutManger\n\n```java\n @Override\n    public boolean supportsPredictiveItemAnimations() {\n        return mPendingSavedState == null && mLastStackFromEnd == mStackFromEnd;\n    }\n```\ntrue\n\nonLayoutChildern(ViewViewGroup)\nLinearLayoutManager\n```java\n @Override\n    public void onLayoutChildren(RecyclerView.Recycler recycler, RecyclerView.State state) {\n        // layout algorithm:\n        // 1) by checking children and other variables, find an anchor coordinate and an anchor\n        //  item position.\n        // 2) fill towards start, stacking from bottom\n        // 3) fill towards end, stacking from top\n        // 4) scroll to fulfill requirements like stack from bottom.\n        // create layout state\n        //omitted....\n        }\n```\n:\n\n1. detach and Scrap Views\n2. layoutlistView(View)\n3. layoutView\n\nLayoutManagerItemAnimator\n\n- ItemAnimator\nSimpleItemAnimatorDefaultItemAnimator\n1. DefaultItemAnimator()\n2. Implement SimpleItemAnimator(DeafaultItemAnimator)\n\nAnimator\n```java\nrecord[Pre|Post]LayoutInformation//layout\nanimate[Appearance|Disappearance]\nanimatePersistence()//\nanimateChange()//\n```\nDefaultItemAnimator\n\n> DispatchAnimationFinished(ViewHolder)\n\n:\n```java\n  @NonNull\n        @Override\n        public ItemHolderInfo recordPreLayoutInformation(RecyclerView.State state,\n                RecyclerView.ViewHolder viewHolder, int changeFlags, List<Object> payloads) {\n            ColorTextInfo info = (ColorTextInfo) super.recordPreLayoutInformation(state, viewHolder,\n                    changeFlags, payloads);\n            return getItemHolderInfo((MyViewHolder) viewHolder, info);\n        }\n\n        @NonNull\n        @Override\n        public ItemHolderInfo recordPostLayoutInformation(@NonNull RecyclerView.State state,\n                @NonNull RecyclerView.ViewHolder viewHolder) {\n            ColorTextInfo info = (ColorTextInfo) super.recordPostLayoutInformation(state, viewHolder);\n            return getItemHolderInfo((MyViewHolder) viewHolder, info);\n        }\n\n        @Override\n        public ItemHolderInfo obtainHolderInfo() {\n            return new ColorTextInfo();\n        }\n\n```\n\n\n- canReuseViewHolder:\nnotifyItemChanged(position)viewHolderViewHolderViewHolder\n\n### 3. \n1. mAdapter.notifyItemMoved(1,5)\nonBindViewHolderinvalidate \n\n2. onBindViewHolderonClickListener(,positionfinal),mAdapter.notifyItemMoved(1,5)onBindViewHolderpos 1listenerpos 5\n\n3. RecyclerView.NO_POSITION\nInt-1itemViewremovedViewViewonClickListener\n\n4. mAdapter.notifyItemChanged(position,payload)\nViewHolderpayloadonBindViewHolder(ViewHolder,position,List Payloads)ViewHolder\n\n5. onCreateViewHolder**new ViewHolder\n\n6. RecyclerView.setRecycledViewPool(pool)\npoolcontext(Activity)RecyclerViewViewContextActivityThemeStyle\n\n7. Pro RecyclerView\nyigitrelamrecyclerView\n\n- view:: requestLayoutrequestLayoutnext FrameViewmeasure(onMeasure)layout(onLayout)\nViewrequestLayout,measurecachemeasurelayout\n\n- RecyclerViewitemViewonBIndViewImageLoaderImageViewsetImageBitmapImageViewsetImageBitmaprequestLayoutrecyclerView\n```java\nimageView setImageBitmap\n\nimageView requestLayout\n\nitemView requestLayout\n\nrecyclerView requestLayout \n```\nrecyclerViewrequestLayoutnext Framepositionchild(very expensive!)recyclerViewsetHasFixedSizetruerecyclerViewchildViewresizerecyclerVeiwrequestLayout(RecyclerViewmEatRequestLayoutrequestLayout)childViewImageView(2011)setImageDrawable\n```java\nvoid setImageDrawable(Drawable drawable){\n    if(mDrawable != drawable){\n    int oldWidth = mDrawableWidth;\n    int oldHeight = mDrawableHeight;\n    updateDrawable(drawable)\n        if(oldWidth!=mDrawableWidth||oldHeight!=mDrawableHeight){\n            requestLayout();\n        }\n        invalidate();\n    }\n}\n\n```\nrequestLayoutreDrawTextViewimplementationAPIwidthHeight,AspectRationImageViewPlaceHolderrequestLayout\n\n- SortedListList\n```java\nSortedList<Item> mSortedList = new SortedList<Item>(Item.class,\n    new SortedListAdapterCallback<Item>(mAdapter)){\n    //override\n\n}\nnotifyDataChange\nonNetwokCallback(List<News> news){\n    mSortedList.addAll(news);\n} \n```\nItem\n\n- DiffUtil(added in 24.2.0)List\n```java\nDiffResult result = DiffUtil.calculateDiff(\n    new MyCallback(oldList,newList));\nmAdapter.setItems(newList);\nresult.dispatchTo(mAdapter);\n```\nItemAdapternotifyDiffUtilcallbackItempayload[medium](https://medium.com/@iammert/using-diffutil-in-android-recyclerview-bdca8e4fbb00#.rbtzmmtbg)\n```java\npublic class MyDiffCallback extends DiffUtil.Callback{\n\n    List<Person> oldPersons;\n    List<Person> newPersons;\n\n    public MyDiffCallback(List<Person> newPersons, List<Person> oldPersons) {\n        this.newPersons = newPersons;\n        this.oldPersons = oldPersons;\n    }\n\n    @Override\n    public int getOldListSize() {\n        return oldPersons.size();\n    }\n\n    @Override\n    public int getNewListSize() {\n        return newPersons.size();\n    }\n\n    @Override\n    public boolean areItemsTheSame(int oldItemPosition, int newItemPosition) {\n        return oldPersons.get(oldItemPosition).id == newPersons.get(newItemPosition).id;\n    }\n\n    @Override\n    public boolean areContentsTheSame(int oldItemPosition, int newItemPosition) {\n        return oldPersons.get(oldItemPosition).equals(newPersons.get(newItemPosition));\n    }\n\n    @Nullable\n    @Override\n    public Object getChangePayload(int oldItemPosition, int newItemPosition) {\n        //you can return particular field for changed item.//objectonBindViewHolder\n        return super.getChangePayload(oldItemPosition, newItemPosition);\n    }\n}\n```\nremoveadd\n\n- viewHolder\n```java\nonCreate\nonBindViewHolder(video)\nonViewAttachedToWindow()\nonViewDetachedFromWindow(attachonBind)\nonRecycled(VideoBitmapViewHolderonBind)\n```\n\n- recyclerViewdefer\nrecyclerViewpendingdefernext frameeg:\n```java\nrecyclerView.scrollToPosition(15);\nint x = layoutManager.getFirstVisiblePosition()//x15scrollnextFramelayoutmessagecallback\nonCreate\n```java\nrecyclerView.scrollToPosition(15)\n//netWorkCallbacksetAdapterrecyclerViewpending15 positionrecyclerViewlayoutManageradapternullnullskip layout\n\n- getItemViewTypeR.layout.itemLayout\nonCreateViewHolder(ViewGroup viewParent,int ViewType){\n    View itemView = inflate.inflate(ViewType,parent,false);\n    return XXXHolder(itemView);//aaptR.layout.xxxxunique\n}\n```\n\n- ClickListener\nonCreateViewHoldercallbackonBindViewHolderonBindViewHolderpositionfinalgetAdapterPositonNO_POSITION(-1)RecyclerViewUIdefernext Frameitemposition-1(itempositionlistindexAt-1).\n\n- LayoutManagerLayoutPositionAdapterPosition\nItemsAdapterrecyclerViewonBindViewHolderonBindViewHolderpositionviewHolderbacked by ItemviewHoldergetAdapterPositionItem\n\n\n\n\n\n### 4 . \n- [RecyclerView Animations and Behind the Scenes (Android Dev Summit 2015)](https://www.youtube.com/watch?v=imsr8NrIAMs)\n- [ItemAnimator](https://github.com/wasabeef/recyclerview-animators)\n- [UI ToolKit Demo](https://github.com/google/android-ui-toolkit-demos)\n- [Yigit Boyar: Pro RecyclerView](https://www.youtube.com/watch?v=KhLVD6iiZQs)","source":"_posts/2016-10-20-RecyclerViewAnimationStuff.md","raw":"---\ntitle: RecyclerViewAnimation\ndate: 2016-10-20 16:16:49\ncategories: blog  \ntags: [android,RecyclerView]\n---\n\nFrom the talk \nRecyclerView Animations and Behind the Scenes\nYigit Biyar & Chet Haase\non Anroid Dev Summit 2015\n\n### 1. RecyclerView\n\nRecyclerView is Flexible , Pluggable and Customizeable\n\n![](http://odzl05jxx.bkt.clouddn.com/snapshot20161020135353.jpg?imageView2/2/w/600)\nChildHelper AdapterHelper RecyclerChild View<!--more-->\n\n\n- ViewHolder\n![](http://odzl05jxx.bkt.clouddn.com/viewHolder_step_1.jpg?imageView2/2/w/600)\n1 .LayoutManagergetViewForPositionRecyclerViewCache(getViewForPosition)LayoutManager,Adapter\n2. CacheRecyclerViewAdptergetViewTypeRecycled PoolgetViewHolderByType\n3. PoolRecyclerViewAdaptercreateViewHolder\n4. PoolTypeViewHolder3viewHolderbindViewHolderLayoutManager\n![](http://odzl05jxx.bkt.clouddn.com/viewHolder_step_2.jpg?imageView2/2/w/600)\n5. LayoutManagerViewUIRecyclerViewonViewAttachedToWindow\n\n\n- ViewHolder(Reserves)\n![](http://odzl05jxx.bkt.clouddn.com/viewHolder_step_3.jpg?imageView2/2/w/600)\n1. LayoutManagerremoveAndRecycleViewRecyclerViewonViewDetachedFromWindow\n2. View.isValidscrollViewValidViewCacheCacheinvalidate oldest oneAdapter(onViewRecycled)\n3. ValidViewPoolAdapteronViewRecycled\n\n- ViewHolder(Fancy Reserves!)\n![](http://odzl05jxx.bkt.clouddn.com/snapshot20161020124442.jpg?imageView2/2/w/600)\n1. LayoutManageronLayoutChildren\n2. LayoutRecyclerViewlayoutRecyclerViewViewViewGroupViewLayoutManager\n3. RecyclerViewaddViewItemAnimator300ms(300ms)onAnimationFinishedRecyclerView.\n4. RecyclerViewAdapter(onViewDetachedFromWindow)\n5. ViewCacheRecycled Pool\n\n- ViewHolder\n![](http://odzl05jxx.bkt.clouddn.com/snapshot20161020124836.jpg?imageView2/2/w/600)\n1. LayoutManagerremoveAndRecycleViewRecyclerViewViewvalid\n2. ValidRecycledPool hasTransientState\n3. ViewAnimationAnimating PoolAdapteronFailedToRecycle(Adapter)\n4. onFailedToRecycle(ViewHolder)truePoolViewTransientStateView()\n\n- ViewHolder\n![](http://odzl05jxx.bkt.clouddn.com/snapshot20161020143554.jpg?imageView2/2/w/600)\nRecyclerViewViewPool(addViewHolderToRecycledViewPool(ViewHolder))PooltypeViewHoldertype xViewHolder5KillView,pool.setMaxRecycledViews(type,count)PoolHolder per type\n\nPoolActivity Context\n\n### 2. LayoutManagerItemAnimatorItemView\n\nperdictiveItemAnimationRecyclerViewlist\nLayoutManager\n> supportPredictiveItemAnimations()true\n\nLinearLayoutManger\n\n```java\n @Override\n    public boolean supportsPredictiveItemAnimations() {\n        return mPendingSavedState == null && mLastStackFromEnd == mStackFromEnd;\n    }\n```\ntrue\n\nonLayoutChildern(ViewViewGroup)\nLinearLayoutManager\n```java\n @Override\n    public void onLayoutChildren(RecyclerView.Recycler recycler, RecyclerView.State state) {\n        // layout algorithm:\n        // 1) by checking children and other variables, find an anchor coordinate and an anchor\n        //  item position.\n        // 2) fill towards start, stacking from bottom\n        // 3) fill towards end, stacking from top\n        // 4) scroll to fulfill requirements like stack from bottom.\n        // create layout state\n        //omitted....\n        }\n```\n:\n\n1. detach and Scrap Views\n2. layoutlistView(View)\n3. layoutView\n\nLayoutManagerItemAnimator\n\n- ItemAnimator\nSimpleItemAnimatorDefaultItemAnimator\n1. DefaultItemAnimator()\n2. Implement SimpleItemAnimator(DeafaultItemAnimator)\n\nAnimator\n```java\nrecord[Pre|Post]LayoutInformation//layout\nanimate[Appearance|Disappearance]\nanimatePersistence()//\nanimateChange()//\n```\nDefaultItemAnimator\n\n> DispatchAnimationFinished(ViewHolder)\n\n:\n```java\n  @NonNull\n        @Override\n        public ItemHolderInfo recordPreLayoutInformation(RecyclerView.State state,\n                RecyclerView.ViewHolder viewHolder, int changeFlags, List<Object> payloads) {\n            ColorTextInfo info = (ColorTextInfo) super.recordPreLayoutInformation(state, viewHolder,\n                    changeFlags, payloads);\n            return getItemHolderInfo((MyViewHolder) viewHolder, info);\n        }\n\n        @NonNull\n        @Override\n        public ItemHolderInfo recordPostLayoutInformation(@NonNull RecyclerView.State state,\n                @NonNull RecyclerView.ViewHolder viewHolder) {\n            ColorTextInfo info = (ColorTextInfo) super.recordPostLayoutInformation(state, viewHolder);\n            return getItemHolderInfo((MyViewHolder) viewHolder, info);\n        }\n\n        @Override\n        public ItemHolderInfo obtainHolderInfo() {\n            return new ColorTextInfo();\n        }\n\n```\n\n\n- canReuseViewHolder:\nnotifyItemChanged(position)viewHolderViewHolderViewHolder\n\n### 3. \n1. mAdapter.notifyItemMoved(1,5)\nonBindViewHolderinvalidate \n\n2. onBindViewHolderonClickListener(,positionfinal),mAdapter.notifyItemMoved(1,5)onBindViewHolderpos 1listenerpos 5\n\n3. RecyclerView.NO_POSITION\nInt-1itemViewremovedViewViewonClickListener\n\n4. mAdapter.notifyItemChanged(position,payload)\nViewHolderpayloadonBindViewHolder(ViewHolder,position,List Payloads)ViewHolder\n\n5. onCreateViewHolder**new ViewHolder\n\n6. RecyclerView.setRecycledViewPool(pool)\npoolcontext(Activity)RecyclerViewViewContextActivityThemeStyle\n\n7. Pro RecyclerView\nyigitrelamrecyclerView\n\n- view:: requestLayoutrequestLayoutnext FrameViewmeasure(onMeasure)layout(onLayout)\nViewrequestLayout,measurecachemeasurelayout\n\n- RecyclerViewitemViewonBIndViewImageLoaderImageViewsetImageBitmapImageViewsetImageBitmaprequestLayoutrecyclerView\n```java\nimageView setImageBitmap\n\nimageView requestLayout\n\nitemView requestLayout\n\nrecyclerView requestLayout \n```\nrecyclerViewrequestLayoutnext Framepositionchild(very expensive!)recyclerViewsetHasFixedSizetruerecyclerViewchildViewresizerecyclerVeiwrequestLayout(RecyclerViewmEatRequestLayoutrequestLayout)childViewImageView(2011)setImageDrawable\n```java\nvoid setImageDrawable(Drawable drawable){\n    if(mDrawable != drawable){\n    int oldWidth = mDrawableWidth;\n    int oldHeight = mDrawableHeight;\n    updateDrawable(drawable)\n        if(oldWidth!=mDrawableWidth||oldHeight!=mDrawableHeight){\n            requestLayout();\n        }\n        invalidate();\n    }\n}\n\n```\nrequestLayoutreDrawTextViewimplementationAPIwidthHeight,AspectRationImageViewPlaceHolderrequestLayout\n\n- SortedListList\n```java\nSortedList<Item> mSortedList = new SortedList<Item>(Item.class,\n    new SortedListAdapterCallback<Item>(mAdapter)){\n    //override\n\n}\nnotifyDataChange\nonNetwokCallback(List<News> news){\n    mSortedList.addAll(news);\n} \n```\nItem\n\n- DiffUtil(added in 24.2.0)List\n```java\nDiffResult result = DiffUtil.calculateDiff(\n    new MyCallback(oldList,newList));\nmAdapter.setItems(newList);\nresult.dispatchTo(mAdapter);\n```\nItemAdapternotifyDiffUtilcallbackItempayload[medium](https://medium.com/@iammert/using-diffutil-in-android-recyclerview-bdca8e4fbb00#.rbtzmmtbg)\n```java\npublic class MyDiffCallback extends DiffUtil.Callback{\n\n    List<Person> oldPersons;\n    List<Person> newPersons;\n\n    public MyDiffCallback(List<Person> newPersons, List<Person> oldPersons) {\n        this.newPersons = newPersons;\n        this.oldPersons = oldPersons;\n    }\n\n    @Override\n    public int getOldListSize() {\n        return oldPersons.size();\n    }\n\n    @Override\n    public int getNewListSize() {\n        return newPersons.size();\n    }\n\n    @Override\n    public boolean areItemsTheSame(int oldItemPosition, int newItemPosition) {\n        return oldPersons.get(oldItemPosition).id == newPersons.get(newItemPosition).id;\n    }\n\n    @Override\n    public boolean areContentsTheSame(int oldItemPosition, int newItemPosition) {\n        return oldPersons.get(oldItemPosition).equals(newPersons.get(newItemPosition));\n    }\n\n    @Nullable\n    @Override\n    public Object getChangePayload(int oldItemPosition, int newItemPosition) {\n        //you can return particular field for changed item.//objectonBindViewHolder\n        return super.getChangePayload(oldItemPosition, newItemPosition);\n    }\n}\n```\nremoveadd\n\n- viewHolder\n```java\nonCreate\nonBindViewHolder(video)\nonViewAttachedToWindow()\nonViewDetachedFromWindow(attachonBind)\nonRecycled(VideoBitmapViewHolderonBind)\n```\n\n- recyclerViewdefer\nrecyclerViewpendingdefernext frameeg:\n```java\nrecyclerView.scrollToPosition(15);\nint x = layoutManager.getFirstVisiblePosition()//x15scrollnextFramelayoutmessagecallback\nonCreate\n```java\nrecyclerView.scrollToPosition(15)\n//netWorkCallbacksetAdapterrecyclerViewpending15 positionrecyclerViewlayoutManageradapternullnullskip layout\n\n- getItemViewTypeR.layout.itemLayout\nonCreateViewHolder(ViewGroup viewParent,int ViewType){\n    View itemView = inflate.inflate(ViewType,parent,false);\n    return XXXHolder(itemView);//aaptR.layout.xxxxunique\n}\n```\n\n- ClickListener\nonCreateViewHoldercallbackonBindViewHolderonBindViewHolderpositionfinalgetAdapterPositonNO_POSITION(-1)RecyclerViewUIdefernext Frameitemposition-1(itempositionlistindexAt-1).\n\n- LayoutManagerLayoutPositionAdapterPosition\nItemsAdapterrecyclerViewonBindViewHolderonBindViewHolderpositionviewHolderbacked by ItemviewHoldergetAdapterPositionItem\n\n\n\n\n\n### 4 . \n- [RecyclerView Animations and Behind the Scenes (Android Dev Summit 2015)](https://www.youtube.com/watch?v=imsr8NrIAMs)\n- [ItemAnimator](https://github.com/wasabeef/recyclerview-animators)\n- [UI ToolKit Demo](https://github.com/google/android-ui-toolkit-demos)\n- [Yigit Boyar: Pro RecyclerView](https://www.youtube.com/watch?v=KhLVD6iiZQs)","slug":"2016-10-20-RecyclerViewAnimationStuff","published":1,"updated":"2017-04-23T10:50:29.288Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj50afguz0006i4vrnqz79z8g","content":"<p>From the talk<br>RecyclerView Animations and Behind the Scenes<br>Yigit Biyar &amp; Chet Haase<br>on Anroid Dev Summit 2015</p>\n<h3 id=\"1-RecyclerView\"><a href=\"#1-RecyclerView\" class=\"headerlink\" title=\"1. RecyclerView\"></a>1. RecyclerView</h3><p>RecyclerView is Flexible , Pluggable and Customizeable<br><br><img src=\"http://odzl05jxx.bkt.clouddn.com/snapshot20161020135353.jpg?imageView2/2/w/600\" alt=\"\"><br>ChildHelper AdapterHelper RecyclerChild View<a id=\"more\"></a></p>\n<ul>\n<li>ViewHolder<br><img src=\"http://odzl05jxx.bkt.clouddn.com/viewHolder_step_1.jpg?imageView2/2/w/600\" alt=\"\"><br>1 .LayoutManagergetViewForPositionRecyclerViewCache(getViewForPosition)LayoutManager,Adapter</li>\n</ul>\n<ol>\n<li>CacheRecyclerViewAdptergetViewTypeRecycled PoolgetViewHolderByType</li>\n<li>PoolRecyclerViewAdaptercreateViewHolder</li>\n<li>PoolTypeViewHolder3viewHolderbindViewHolderLayoutManager<br><img src=\"http://odzl05jxx.bkt.clouddn.com/viewHolder_step_2.jpg?imageView2/2/w/600\" alt=\"\"></li>\n<li>LayoutManagerViewUIRecyclerViewonViewAttachedToWindow</li>\n</ol>\n<ul>\n<li>ViewHolder(Reserves)<br><img src=\"http://odzl05jxx.bkt.clouddn.com/viewHolder_step_3.jpg?imageView2/2/w/600\" alt=\"\"></li>\n</ul>\n<ol>\n<li>LayoutManagerremoveAndRecycleViewRecyclerViewonViewDetachedFromWindow</li>\n<li>View.isValidscrollViewValidViewCacheCacheinvalidate oldest oneAdapter(onViewRecycled)</li>\n<li>ValidViewPoolAdapteronViewRecycled</li>\n</ol>\n<ul>\n<li>ViewHolder(Fancy Reserves!)<br><img src=\"http://odzl05jxx.bkt.clouddn.com/snapshot20161020124442.jpg?imageView2/2/w/600\" alt=\"\"></li>\n</ul>\n<ol>\n<li>LayoutManageronLayoutChildren</li>\n<li>LayoutRecyclerViewlayoutRecyclerViewViewViewGroupViewLayoutManager</li>\n<li>RecyclerViewaddViewItemAnimator300ms(300ms)onAnimationFinishedRecyclerView.</li>\n<li>RecyclerViewAdapter(onViewDetachedFromWindow)</li>\n<li>ViewCacheRecycled Pool</li>\n</ol>\n<ul>\n<li>ViewHolder<br><img src=\"http://odzl05jxx.bkt.clouddn.com/snapshot20161020124836.jpg?imageView2/2/w/600\" alt=\"\"></li>\n</ul>\n<ol>\n<li>LayoutManagerremoveAndRecycleViewRecyclerViewViewvalid</li>\n<li>ValidRecycledPool hasTransientState</li>\n<li>ViewAnimationAnimating PoolAdapteronFailedToRecycle(Adapter)</li>\n<li>onFailedToRecycle(ViewHolder)truePoolViewTransientStateView()</li>\n</ol>\n<ul>\n<li>ViewHolder<br><img src=\"http://odzl05jxx.bkt.clouddn.com/snapshot20161020143554.jpg?imageView2/2/w/600\" alt=\"\"><br>RecyclerViewViewPool(addViewHolderToRecycledViewPool(ViewHolder))PooltypeViewHoldertype xViewHolder5KillView,pool.setMaxRecycledViews(type,count)PoolHolder per type</li>\n</ul>\n<p>PoolActivity Context</p>\n<h3 id=\"2-LayoutManagerItemAnimatorItemView\"><a href=\"#2-LayoutManagerItemAnimatorItemView\" class=\"headerlink\" title=\"2. LayoutManagerItemAnimatorItemView\"></a>2. LayoutManagerItemAnimatorItemView</h3><p>perdictiveItemAnimationRecyclerViewlist<br>LayoutManager</p>\n<blockquote>\n<p>supportPredictiveItemAnimations()true</p>\n</blockquote>\n<p>LinearLayoutManger</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">@Override</span></div><div class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">supportsPredictiveItemAnimations</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">       <span class=\"keyword\">return</span> mPendingSavedState == <span class=\"keyword\">null</span> &amp;&amp; mLastStackFromEnd == mStackFromEnd;</div><div class=\"line\">   &#125;</div></pre></td></tr></table></figure>\n<p>true</p>\n<p>onLayoutChildern(ViewViewGroup)<br>LinearLayoutManager<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">@Override</span></div><div class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onLayoutChildren</span><span class=\"params\">(RecyclerView.Recycler recycler, RecyclerView.State state)</span> </span>&#123;</div><div class=\"line\">       <span class=\"comment\">// layout algorithm:</span></div><div class=\"line\">       <span class=\"comment\">// 1) by checking children and other variables, find an anchor coordinate and an anchor</span></div><div class=\"line\">       <span class=\"comment\">//  item position.</span></div><div class=\"line\">       <span class=\"comment\">// 2) fill towards start, stacking from bottom</span></div><div class=\"line\">       <span class=\"comment\">// 3) fill towards end, stacking from top</span></div><div class=\"line\">       <span class=\"comment\">// 4) scroll to fulfill requirements like stack from bottom.</span></div><div class=\"line\">       <span class=\"comment\">// create layout state</span></div><div class=\"line\">       <span class=\"comment\">//omitted....</span></div><div class=\"line\">       &#125;</div></pre></td></tr></table></figure></p>\n<p>:</p>\n<ol>\n<li>detach and Scrap Views</li>\n<li>layoutlistView(View)</li>\n<li>layoutView</li>\n</ol>\n<p>LayoutManagerItemAnimator</p>\n<ul>\n<li>ItemAnimator<br>SimpleItemAnimatorDefaultItemAnimator</li>\n</ul>\n<ol>\n<li>DefaultItemAnimator()</li>\n<li>Implement SimpleItemAnimator(DeafaultItemAnimator)</li>\n</ol>\n<p>Animator<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">record[Pre|Post]LayoutInformation<span class=\"comment\">//layout</span></div><div class=\"line\">animate[Appearance|Disappearance]</div><div class=\"line\">animatePersistence()<span class=\"comment\">//</span></div><div class=\"line\">animateChange()<span class=\"comment\">//</span></div></pre></td></tr></table></figure></p>\n<p>DefaultItemAnimator<br></p>\n<blockquote>\n<p>DispatchAnimationFinished(ViewHolder)</p>\n</blockquote>\n<p>:<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">@NonNull</span></div><div class=\"line\">      <span class=\"meta\">@Override</span></div><div class=\"line\">      <span class=\"function\"><span class=\"keyword\">public</span> ItemHolderInfo <span class=\"title\">recordPreLayoutInformation</span><span class=\"params\">(RecyclerView.State state,</div><div class=\"line\">              RecyclerView.ViewHolder viewHolder, <span class=\"keyword\">int</span> changeFlags, List&lt;Object&gt; payloads)</span> </span>&#123;</div><div class=\"line\">          ColorTextInfo info = (ColorTextInfo) <span class=\"keyword\">super</span>.recordPreLayoutInformation(state, viewHolder,</div><div class=\"line\">                  changeFlags, payloads);</div><div class=\"line\">          <span class=\"keyword\">return</span> getItemHolderInfo((MyViewHolder) viewHolder, info);</div><div class=\"line\">      &#125;</div><div class=\"line\"></div><div class=\"line\">      <span class=\"meta\">@NonNull</span></div><div class=\"line\">      <span class=\"meta\">@Override</span></div><div class=\"line\">      <span class=\"function\"><span class=\"keyword\">public</span> ItemHolderInfo <span class=\"title\">recordPostLayoutInformation</span><span class=\"params\">(@NonNull RecyclerView.State state,</div><div class=\"line\">              @NonNull RecyclerView.ViewHolder viewHolder)</span> </span>&#123;</div><div class=\"line\">          ColorTextInfo info = (ColorTextInfo) <span class=\"keyword\">super</span>.recordPostLayoutInformation(state, viewHolder);</div><div class=\"line\">          <span class=\"keyword\">return</span> getItemHolderInfo((MyViewHolder) viewHolder, info);</div><div class=\"line\">      &#125;</div><div class=\"line\"></div><div class=\"line\">      <span class=\"meta\">@Override</span></div><div class=\"line\">      <span class=\"function\"><span class=\"keyword\">public</span> ItemHolderInfo <span class=\"title\">obtainHolderInfo</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">          <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> ColorTextInfo();</div><div class=\"line\">      &#125;</div></pre></td></tr></table></figure></p>\n<ul>\n<li>canReuseViewHolder:<br>notifyItemChanged(position)viewHolderViewHolderViewHolder</li>\n</ul>\n<h3 id=\"3-\"><a href=\"#3-\" class=\"headerlink\" title=\"3. \"></a>3. </h3><ol>\n<li><p>mAdapter.notifyItemMoved(1,5)<br>onBindViewHolderinvalidate </p>\n</li>\n<li><p>onBindViewHolderonClickListener(,positionfinal),mAdapter.notifyItemMoved(1,5)onBindViewHolderpos 1listenerpos 5</p>\n</li>\n<li><p>RecyclerView.NO_POSITION<br>Int-1itemViewremovedViewViewonClickListener</p>\n</li>\n<li><p>mAdapter.notifyItemChanged(position,payload)<br>ViewHolderpayloadonBindViewHolder(ViewHolder,position,List Payloads)ViewHolder</p>\n</li>\n<li><p>onCreateViewHolder<em></em>new ViewHolder</p>\n</li>\n<li><p>RecyclerView.setRecycledViewPool(pool)<br>poolcontext(Activity)RecyclerViewViewContextActivityThemeStyle</p>\n</li>\n<li><p>Pro RecyclerView<br>yigitrelamrecyclerView</p>\n</li>\n</ol>\n<ul>\n<li><p>view:: requestLayoutrequestLayoutnext FrameViewmeasure(onMeasure)layout(onLayout)<br>ViewrequestLayout,measurecachemeasurelayout</p>\n</li>\n<li><p>RecyclerViewitemViewonBIndViewImageLoaderImageViewsetImageBitmapImageViewsetImageBitmaprequestLayoutrecyclerView</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">imageView setImageBitmap</div><div class=\"line\"></div><div class=\"line\">imageView requestLayout</div><div class=\"line\"></div><div class=\"line\">itemView requestLayout</div><div class=\"line\"></div><div class=\"line\">recyclerView requestLayout</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>recyclerViewrequestLayoutnext Framepositionchild(very expensive!)recyclerViewsetHasFixedSizetruerecyclerViewchildViewresizerecyclerVeiwrequestLayout(RecyclerViewmEatRequestLayoutrequestLayout)childViewImageView(2011)setImageDrawable<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">setImageDrawable</span><span class=\"params\">(Drawable drawable)</span></span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span>(mDrawable != drawable)&#123;</div><div class=\"line\">    <span class=\"keyword\">int</span> oldWidth = mDrawableWidth;</div><div class=\"line\">    <span class=\"keyword\">int</span> oldHeight = mDrawableHeight;</div><div class=\"line\">    updateDrawable(drawable)</div><div class=\"line\">        <span class=\"keyword\">if</span>(oldWidth!=mDrawableWidth||oldHeight!=mDrawableHeight)&#123;</div><div class=\"line\">            requestLayout();</div><div class=\"line\">        &#125;</div><div class=\"line\">        invalidate();</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>requestLayoutreDrawTextViewimplementationAPIwidthHeight,AspectRationImageViewPlaceHolderrequestLayout</p>\n<ul>\n<li>SortedListList<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">SortedList&lt;Item&gt; mSortedList = <span class=\"keyword\">new</span> SortedList&lt;Item&gt;(Item.class,</div><div class=\"line\">    <span class=\"keyword\">new</span> SortedListAdapterCallback&lt;Item&gt;(mAdapter))&#123;</div><div class=\"line\">    <span class=\"comment\">//override</span></div><div class=\"line\"></div><div class=\"line\">&#125;</div><div class=\"line\">notifyDataChange</div><div class=\"line\">onNetwokCallback(List&lt;News&gt; news)&#123;</div><div class=\"line\">    mSortedList.addAll(news);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>Item</p>\n<ul>\n<li>DiffUtil(added in 24.2.0)List<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">DiffResult result = DiffUtil.calculateDiff(</div><div class=\"line\">    <span class=\"keyword\">new</span> MyCallback(oldList,newList));</div><div class=\"line\">mAdapter.setItems(newList);</div><div class=\"line\">result.dispatchTo(mAdapter);</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>ItemAdapternotifyDiffUtilcallbackItempayload<a href=\"https://medium.com/@iammert/using-diffutil-in-android-recyclerview-bdca8e4fbb00#.rbtzmmtbg\">medium</a><br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyDiffCallback</span> <span class=\"keyword\">extends</span> <span class=\"title\">DiffUtil</span>.<span class=\"title\">Callback</span></span>&#123;</div><div class=\"line\"></div><div class=\"line\">    List&lt;Person&gt; oldPersons;</div><div class=\"line\">    List&lt;Person&gt; newPersons;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">MyDiffCallback</span><span class=\"params\">(List&lt;Person&gt; newPersons, List&lt;Person&gt; oldPersons)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">this</span>.newPersons = newPersons;</div><div class=\"line\">        <span class=\"keyword\">this</span>.oldPersons = oldPersons;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">getOldListSize</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> oldPersons.size();</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">getNewListSize</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> newPersons.size();</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">areItemsTheSame</span><span class=\"params\">(<span class=\"keyword\">int</span> oldItemPosition, <span class=\"keyword\">int</span> newItemPosition)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> oldPersons.get(oldItemPosition).id == newPersons.get(newItemPosition).id;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">areContentsTheSame</span><span class=\"params\">(<span class=\"keyword\">int</span> oldItemPosition, <span class=\"keyword\">int</span> newItemPosition)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> oldPersons.get(oldItemPosition).equals(newPersons.get(newItemPosition));</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Nullable</span></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Object <span class=\"title\">getChangePayload</span><span class=\"params\">(<span class=\"keyword\">int</span> oldItemPosition, <span class=\"keyword\">int</span> newItemPosition)</span> </span>&#123;</div><div class=\"line\">        <span class=\"comment\">//you can return particular field for changed item.//objectonBindViewHolder</span></div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">super</span>.getChangePayload(oldItemPosition, newItemPosition);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>removeadd</p>\n<ul>\n<li><p>viewHolder</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\">onCreate</div><div class=\"line\"><span class=\"title\">onBindViewHolder</span><span class=\"params\">(video)</span></div><div class=\"line\"><span class=\"title\">onViewAttachedToWindow</span><span class=\"params\">()</span></div><div class=\"line\"><span class=\"title\">onViewDetachedFromWindow</span><span class=\"params\">(attachonBind)</span></div><div class=\"line\"><span class=\"title\">onRecycled</span><span class=\"params\">(VideoBitmapViewHolderonBind)</span></span></div></pre></td></tr></table></figure>\n</li>\n<li><p>recyclerViewdefer<br>recyclerViewpendingdefernext frameeg:</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">recyclerView.scrollToPosition(<span class=\"number\">15</span>);</div><div class=\"line\"><span class=\"keyword\">int</span> x = layoutManager.getFirstVisiblePosition()<span class=\"comment\">//x15scrollnextFramelayoutmessagecallback</span></div><div class=\"line\">onCreate</div><div class=\"line\">```java</div><div class=\"line\">recyclerView.scrollToPosition(<span class=\"number\">15</span>)</div><div class=\"line\"><span class=\"comment\">//netWorkCallbacksetAdapterrecyclerViewpending15 positionrecyclerViewlayoutManageradapternullnullskip layout</span></div><div class=\"line\"></div><div class=\"line\">- getItemViewTypeR.layout.itemLayout</div><div class=\"line\">onCreateViewHolder(ViewGroup viewParent,<span class=\"keyword\">int</span> ViewType)&#123;</div><div class=\"line\">    View itemView = inflate.inflate(ViewType,parent,<span class=\"keyword\">false</span>);</div><div class=\"line\">    <span class=\"keyword\">return</span> XXXHolder(itemView);<span class=\"comment\">//aaptR.layout.xxxxunique</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n</li>\n<li><p>ClickListener<br>onCreateViewHoldercallbackonBindViewHolderonBindViewHolderpositionfinalgetAdapterPositonNO_POSITION(-1)RecyclerViewUIdefernext Frameitemposition-1(itempositionlistindexAt-1).</p>\n</li>\n<li><p>LayoutManagerLayoutPositionAdapterPosition<br>ItemsAdapterrecyclerViewonBindViewHolderonBindViewHolderpositionviewHolderbacked by ItemviewHoldergetAdapterPositionItem</p>\n</li>\n</ul>\n<h3 id=\"4-\"><a href=\"#4-\" class=\"headerlink\" title=\"4 . \"></a>4 . </h3><ul>\n<li><a href=\"https://www.youtube.com/watch?v=imsr8NrIAMs\">RecyclerView Animations and Behind the Scenes (Android Dev Summit 2015)</a></li>\n<li><a href=\"https://github.com/wasabeef/recyclerview-animators\">ItemAnimator</a></li>\n<li><a href=\"https://github.com/google/android-ui-toolkit-demos\">UI ToolKit Demo</a></li>\n<li><a href=\"https://www.youtube.com/watch?v=KhLVD6iiZQs\">Yigit Boyar: Pro RecyclerView</a></li>\n</ul>\n","excerpt":"<p>From the talk<br>RecyclerView Animations and Behind the Scenes<br>Yigit Biyar &amp; Chet Haase<br>on Anroid Dev Summit 2015</p>\n<h3 id=\"1-RecyclerView\"><a href=\"#1-RecyclerView\" class=\"headerlink\" title=\"1. RecyclerView\"></a>1. RecyclerView</h3><p>RecyclerView is Flexible , Pluggable and Customizeable<br><br><img src=\"http://odzl05jxx.bkt.clouddn.com/snapshot20161020135353.jpg?imageView2/2/w/600\" alt=\"\"><br>ChildHelper AdapterHelper RecyclerChild View","more":"</p>\n<ul>\n<li>ViewHolder<br><img src=\"http://odzl05jxx.bkt.clouddn.com/viewHolder_step_1.jpg?imageView2/2/w/600\" alt=\"\"><br>1 .LayoutManagergetViewForPositionRecyclerViewCache(getViewForPosition)LayoutManager,Adapter</li>\n</ul>\n<ol>\n<li>CacheRecyclerViewAdptergetViewTypeRecycled PoolgetViewHolderByType</li>\n<li>PoolRecyclerViewAdaptercreateViewHolder</li>\n<li>PoolTypeViewHolder3viewHolderbindViewHolderLayoutManager<br><img src=\"http://odzl05jxx.bkt.clouddn.com/viewHolder_step_2.jpg?imageView2/2/w/600\" alt=\"\"></li>\n<li>LayoutManagerViewUIRecyclerViewonViewAttachedToWindow</li>\n</ol>\n<ul>\n<li>ViewHolder(Reserves)<br><img src=\"http://odzl05jxx.bkt.clouddn.com/viewHolder_step_3.jpg?imageView2/2/w/600\" alt=\"\"></li>\n</ul>\n<ol>\n<li>LayoutManagerremoveAndRecycleViewRecyclerViewonViewDetachedFromWindow</li>\n<li>View.isValidscrollViewValidViewCacheCacheinvalidate oldest oneAdapter(onViewRecycled)</li>\n<li>ValidViewPoolAdapteronViewRecycled</li>\n</ol>\n<ul>\n<li>ViewHolder(Fancy Reserves!)<br><img src=\"http://odzl05jxx.bkt.clouddn.com/snapshot20161020124442.jpg?imageView2/2/w/600\" alt=\"\"></li>\n</ul>\n<ol>\n<li>LayoutManageronLayoutChildren</li>\n<li>LayoutRecyclerViewlayoutRecyclerViewViewViewGroupViewLayoutManager</li>\n<li>RecyclerViewaddViewItemAnimator300ms(300ms)onAnimationFinishedRecyclerView.</li>\n<li>RecyclerViewAdapter(onViewDetachedFromWindow)</li>\n<li>ViewCacheRecycled Pool</li>\n</ol>\n<ul>\n<li>ViewHolder<br><img src=\"http://odzl05jxx.bkt.clouddn.com/snapshot20161020124836.jpg?imageView2/2/w/600\" alt=\"\"></li>\n</ul>\n<ol>\n<li>LayoutManagerremoveAndRecycleViewRecyclerViewViewvalid</li>\n<li>ValidRecycledPool hasTransientState</li>\n<li>ViewAnimationAnimating PoolAdapteronFailedToRecycle(Adapter)</li>\n<li>onFailedToRecycle(ViewHolder)truePoolViewTransientStateView()</li>\n</ol>\n<ul>\n<li>ViewHolder<br><img src=\"http://odzl05jxx.bkt.clouddn.com/snapshot20161020143554.jpg?imageView2/2/w/600\" alt=\"\"><br>RecyclerViewViewPool(addViewHolderToRecycledViewPool(ViewHolder))PooltypeViewHoldertype xViewHolder5KillView,pool.setMaxRecycledViews(type,count)PoolHolder per type</li>\n</ul>\n<p>PoolActivity Context</p>\n<h3 id=\"2-LayoutManagerItemAnimatorItemView\"><a href=\"#2-LayoutManagerItemAnimatorItemView\" class=\"headerlink\" title=\"2. LayoutManagerItemAnimatorItemView\"></a>2. LayoutManagerItemAnimatorItemView</h3><p>perdictiveItemAnimationRecyclerViewlist<br>LayoutManager</p>\n<blockquote>\n<p>supportPredictiveItemAnimations()true</p>\n</blockquote>\n<p>LinearLayoutManger</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">@Override</span></div><div class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">supportsPredictiveItemAnimations</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">       <span class=\"keyword\">return</span> mPendingSavedState == <span class=\"keyword\">null</span> &amp;&amp; mLastStackFromEnd == mStackFromEnd;</div><div class=\"line\">   &#125;</div></pre></td></tr></table></figure>\n<p>true</p>\n<p>onLayoutChildern(ViewViewGroup)<br>LinearLayoutManager<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">@Override</span></div><div class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onLayoutChildren</span><span class=\"params\">(RecyclerView.Recycler recycler, RecyclerView.State state)</span> </span>&#123;</div><div class=\"line\">       <span class=\"comment\">// layout algorithm:</span></div><div class=\"line\">       <span class=\"comment\">// 1) by checking children and other variables, find an anchor coordinate and an anchor</span></div><div class=\"line\">       <span class=\"comment\">//  item position.</span></div><div class=\"line\">       <span class=\"comment\">// 2) fill towards start, stacking from bottom</span></div><div class=\"line\">       <span class=\"comment\">// 3) fill towards end, stacking from top</span></div><div class=\"line\">       <span class=\"comment\">// 4) scroll to fulfill requirements like stack from bottom.</span></div><div class=\"line\">       <span class=\"comment\">// create layout state</span></div><div class=\"line\">       <span class=\"comment\">//omitted....</span></div><div class=\"line\">       &#125;</div></pre></td></tr></table></figure></p>\n<p>:</p>\n<ol>\n<li>detach and Scrap Views</li>\n<li>layoutlistView(View)</li>\n<li>layoutView</li>\n</ol>\n<p>LayoutManagerItemAnimator</p>\n<ul>\n<li>ItemAnimator<br>SimpleItemAnimatorDefaultItemAnimator</li>\n</ul>\n<ol>\n<li>DefaultItemAnimator()</li>\n<li>Implement SimpleItemAnimator(DeafaultItemAnimator)</li>\n</ol>\n<p>Animator<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">record[Pre|Post]LayoutInformation<span class=\"comment\">//layout</span></div><div class=\"line\">animate[Appearance|Disappearance]</div><div class=\"line\">animatePersistence()<span class=\"comment\">//</span></div><div class=\"line\">animateChange()<span class=\"comment\">//</span></div></pre></td></tr></table></figure></p>\n<p>DefaultItemAnimator<br></p>\n<blockquote>\n<p>DispatchAnimationFinished(ViewHolder)</p>\n</blockquote>\n<p>:<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">@NonNull</span></div><div class=\"line\">      <span class=\"meta\">@Override</span></div><div class=\"line\">      <span class=\"function\"><span class=\"keyword\">public</span> ItemHolderInfo <span class=\"title\">recordPreLayoutInformation</span><span class=\"params\">(RecyclerView.State state,</div><div class=\"line\">              RecyclerView.ViewHolder viewHolder, <span class=\"keyword\">int</span> changeFlags, List&lt;Object&gt; payloads)</span> </span>&#123;</div><div class=\"line\">          ColorTextInfo info = (ColorTextInfo) <span class=\"keyword\">super</span>.recordPreLayoutInformation(state, viewHolder,</div><div class=\"line\">                  changeFlags, payloads);</div><div class=\"line\">          <span class=\"keyword\">return</span> getItemHolderInfo((MyViewHolder) viewHolder, info);</div><div class=\"line\">      &#125;</div><div class=\"line\"></div><div class=\"line\">      <span class=\"meta\">@NonNull</span></div><div class=\"line\">      <span class=\"meta\">@Override</span></div><div class=\"line\">      <span class=\"function\"><span class=\"keyword\">public</span> ItemHolderInfo <span class=\"title\">recordPostLayoutInformation</span><span class=\"params\">(@NonNull RecyclerView.State state,</div><div class=\"line\">              @NonNull RecyclerView.ViewHolder viewHolder)</span> </span>&#123;</div><div class=\"line\">          ColorTextInfo info = (ColorTextInfo) <span class=\"keyword\">super</span>.recordPostLayoutInformation(state, viewHolder);</div><div class=\"line\">          <span class=\"keyword\">return</span> getItemHolderInfo((MyViewHolder) viewHolder, info);</div><div class=\"line\">      &#125;</div><div class=\"line\"></div><div class=\"line\">      <span class=\"meta\">@Override</span></div><div class=\"line\">      <span class=\"function\"><span class=\"keyword\">public</span> ItemHolderInfo <span class=\"title\">obtainHolderInfo</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">          <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> ColorTextInfo();</div><div class=\"line\">      &#125;</div></pre></td></tr></table></figure></p>\n<ul>\n<li>canReuseViewHolder:<br>notifyItemChanged(position)viewHolderViewHolderViewHolder</li>\n</ul>\n<h3 id=\"3-\"><a href=\"#3-\" class=\"headerlink\" title=\"3. \"></a>3. </h3><ol>\n<li><p>mAdapter.notifyItemMoved(1,5)<br>onBindViewHolderinvalidate </p>\n</li>\n<li><p>onBindViewHolderonClickListener(,positionfinal),mAdapter.notifyItemMoved(1,5)onBindViewHolderpos 1listenerpos 5</p>\n</li>\n<li><p>RecyclerView.NO_POSITION<br>Int-1itemViewremovedViewViewonClickListener</p>\n</li>\n<li><p>mAdapter.notifyItemChanged(position,payload)<br>ViewHolderpayloadonBindViewHolder(ViewHolder,position,List Payloads)ViewHolder</p>\n</li>\n<li><p>onCreateViewHolder<em></em>new ViewHolder</p>\n</li>\n<li><p>RecyclerView.setRecycledViewPool(pool)<br>poolcontext(Activity)RecyclerViewViewContextActivityThemeStyle</p>\n</li>\n<li><p>Pro RecyclerView<br>yigitrelamrecyclerView</p>\n</li>\n</ol>\n<ul>\n<li><p>view:: requestLayoutrequestLayoutnext FrameViewmeasure(onMeasure)layout(onLayout)<br>ViewrequestLayout,measurecachemeasurelayout</p>\n</li>\n<li><p>RecyclerViewitemViewonBIndViewImageLoaderImageViewsetImageBitmapImageViewsetImageBitmaprequestLayoutrecyclerView</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">imageView setImageBitmap</div><div class=\"line\"></div><div class=\"line\">imageView requestLayout</div><div class=\"line\"></div><div class=\"line\">itemView requestLayout</div><div class=\"line\"></div><div class=\"line\">recyclerView requestLayout</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>recyclerViewrequestLayoutnext Framepositionchild(very expensive!)recyclerViewsetHasFixedSizetruerecyclerViewchildViewresizerecyclerVeiwrequestLayout(RecyclerViewmEatRequestLayoutrequestLayout)childViewImageView(2011)setImageDrawable<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">setImageDrawable</span><span class=\"params\">(Drawable drawable)</span></span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span>(mDrawable != drawable)&#123;</div><div class=\"line\">    <span class=\"keyword\">int</span> oldWidth = mDrawableWidth;</div><div class=\"line\">    <span class=\"keyword\">int</span> oldHeight = mDrawableHeight;</div><div class=\"line\">    updateDrawable(drawable)</div><div class=\"line\">        <span class=\"keyword\">if</span>(oldWidth!=mDrawableWidth||oldHeight!=mDrawableHeight)&#123;</div><div class=\"line\">            requestLayout();</div><div class=\"line\">        &#125;</div><div class=\"line\">        invalidate();</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>requestLayoutreDrawTextViewimplementationAPIwidthHeight,AspectRationImageViewPlaceHolderrequestLayout</p>\n<ul>\n<li>SortedListList<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">SortedList&lt;Item&gt; mSortedList = <span class=\"keyword\">new</span> SortedList&lt;Item&gt;(Item.class,</div><div class=\"line\">    <span class=\"keyword\">new</span> SortedListAdapterCallback&lt;Item&gt;(mAdapter))&#123;</div><div class=\"line\">    <span class=\"comment\">//override</span></div><div class=\"line\"></div><div class=\"line\">&#125;</div><div class=\"line\">notifyDataChange</div><div class=\"line\">onNetwokCallback(List&lt;News&gt; news)&#123;</div><div class=\"line\">    mSortedList.addAll(news);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>Item</p>\n<ul>\n<li>DiffUtil(added in 24.2.0)List<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">DiffResult result = DiffUtil.calculateDiff(</div><div class=\"line\">    <span class=\"keyword\">new</span> MyCallback(oldList,newList));</div><div class=\"line\">mAdapter.setItems(newList);</div><div class=\"line\">result.dispatchTo(mAdapter);</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>ItemAdapternotifyDiffUtilcallbackItempayload<a href=\"https://medium.com/@iammert/using-diffutil-in-android-recyclerview-bdca8e4fbb00#.rbtzmmtbg\">medium</a><br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyDiffCallback</span> <span class=\"keyword\">extends</span> <span class=\"title\">DiffUtil</span>.<span class=\"title\">Callback</span></span>&#123;</div><div class=\"line\"></div><div class=\"line\">    List&lt;Person&gt; oldPersons;</div><div class=\"line\">    List&lt;Person&gt; newPersons;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">MyDiffCallback</span><span class=\"params\">(List&lt;Person&gt; newPersons, List&lt;Person&gt; oldPersons)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">this</span>.newPersons = newPersons;</div><div class=\"line\">        <span class=\"keyword\">this</span>.oldPersons = oldPersons;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">getOldListSize</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> oldPersons.size();</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">getNewListSize</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> newPersons.size();</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">areItemsTheSame</span><span class=\"params\">(<span class=\"keyword\">int</span> oldItemPosition, <span class=\"keyword\">int</span> newItemPosition)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> oldPersons.get(oldItemPosition).id == newPersons.get(newItemPosition).id;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">areContentsTheSame</span><span class=\"params\">(<span class=\"keyword\">int</span> oldItemPosition, <span class=\"keyword\">int</span> newItemPosition)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> oldPersons.get(oldItemPosition).equals(newPersons.get(newItemPosition));</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Nullable</span></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Object <span class=\"title\">getChangePayload</span><span class=\"params\">(<span class=\"keyword\">int</span> oldItemPosition, <span class=\"keyword\">int</span> newItemPosition)</span> </span>&#123;</div><div class=\"line\">        <span class=\"comment\">//you can return particular field for changed item.//objectonBindViewHolder</span></div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">super</span>.getChangePayload(oldItemPosition, newItemPosition);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>removeadd</p>\n<ul>\n<li><p>viewHolder</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\">onCreate</div><div class=\"line\"><span class=\"title\">onBindViewHolder</span><span class=\"params\">(video)</span></div><div class=\"line\"><span class=\"title\">onViewAttachedToWindow</span><span class=\"params\">()</span></div><div class=\"line\"><span class=\"title\">onViewDetachedFromWindow</span><span class=\"params\">(attachonBind)</span></div><div class=\"line\"><span class=\"title\">onRecycled</span><span class=\"params\">(VideoBitmapViewHolderonBind)</span></span></div></pre></td></tr></table></figure>\n</li>\n<li><p>recyclerViewdefer<br>recyclerViewpendingdefernext frameeg:</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">recyclerView.scrollToPosition(<span class=\"number\">15</span>);</div><div class=\"line\"><span class=\"keyword\">int</span> x = layoutManager.getFirstVisiblePosition()<span class=\"comment\">//x15scrollnextFramelayoutmessagecallback</span></div><div class=\"line\">onCreate</div><div class=\"line\">```java</div><div class=\"line\">recyclerView.scrollToPosition(<span class=\"number\">15</span>)</div><div class=\"line\"><span class=\"comment\">//netWorkCallbacksetAdapterrecyclerViewpending15 positionrecyclerViewlayoutManageradapternullnullskip layout</span></div><div class=\"line\"></div><div class=\"line\">- getItemViewTypeR.layout.itemLayout</div><div class=\"line\">onCreateViewHolder(ViewGroup viewParent,<span class=\"keyword\">int</span> ViewType)&#123;</div><div class=\"line\">    View itemView = inflate.inflate(ViewType,parent,<span class=\"keyword\">false</span>);</div><div class=\"line\">    <span class=\"keyword\">return</span> XXXHolder(itemView);<span class=\"comment\">//aaptR.layout.xxxxunique</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n</li>\n<li><p>ClickListener<br>onCreateViewHoldercallbackonBindViewHolderonBindViewHolderpositionfinalgetAdapterPositonNO_POSITION(-1)RecyclerViewUIdefernext Frameitemposition-1(itempositionlistindexAt-1).</p>\n</li>\n<li><p>LayoutManagerLayoutPositionAdapterPosition<br>ItemsAdapterrecyclerViewonBindViewHolderonBindViewHolderpositionviewHolderbacked by ItemviewHoldergetAdapterPositionItem</p>\n</li>\n</ul>\n<h3 id=\"4-\"><a href=\"#4-\" class=\"headerlink\" title=\"4 . \"></a>4 . </h3><ul>\n<li><a href=\"https://www.youtube.com/watch?v=imsr8NrIAMs\">RecyclerView Animations and Behind the Scenes (Android Dev Summit 2015)</a></li>\n<li><a href=\"https://github.com/wasabeef/recyclerview-animators\">ItemAnimator</a></li>\n<li><a href=\"https://github.com/google/android-ui-toolkit-demos\">UI ToolKit Demo</a></li>\n<li><a href=\"https://www.youtube.com/watch?v=KhLVD6iiZQs\">Yigit Boyar: Pro RecyclerView</a></li>\n</ul>"},{"title":"service","date":"2016-10-20T13:35:10.000Z","_content":"\nV2EXNotification[](http://zhoujianghua.com/2015/07/28/black_technology_in_alipay/)<!--more-->\n\n### 1. \nAndroidProcessProcessLru Listleast recently used DAU\n[](https://developer.android.com/guide/components/processes-and-threads.html),Android Process:\n- \n- \n- \n- \n- \n\n:\n```\n\n Activity Activity  onResume() \n Service Activity\n Service startForeground()\n ServiceonCreate()onStart()  onDestroy()\n onReceive()  BroadcastReceiver\n \n```\nstartForegroundstartForegroundNotification\n\n\n### 2. startForeground?\n```java\nvoid startForeground (int id, \n                Notification notification)\n```\nG+Chris Banes[post](https://plus.google.com/+AndroidDevelopers/posts/NEPWzPwSruR)\n```\nUnfortunately there are a number of applications on Google Play which are using the startForeground() API without passing a valid notification. While this worked in previous versions of Android, it is a loophole which has been fixed in Android 4.3. The system now displays a notifications for you automatically if you do not provide a valid one.\n```\nAPI 18NotificationNotificationAPI<18new Notification()Notification.\nLoophole\nApi 18[ServiceRecord](https://android.googlesource.com/platform/frameworks/base.git/+/android-4.3_r2.1/services/java/com/android/server/am/ServiceRecord.java):\n\n```java\npublic void postNotification() {\n        final int appUid = appInfo.uid;\n        final int appPid = app.pid;\n        if (foregroundId != 0 && foregroundNoti != null) {\n            // Do asynchronous communication with notification manager to\n            // avoid deadlocks.\n            final String localPackageName = packageName;\n            final int localForegroundId = foregroundId;\n            final Notification localForegroundNoti = foregroundNoti;\n            ams.mHandler.post(new Runnable() {\n                public void run() {\n                    NotificationManagerService nm =\n                            (NotificationManagerService) NotificationManager.getService();\n                    if (nm == null) {\n                        return;\n                    }\n                    try {\n                        if (localForegroundNoti.icon == 0) {\n                            // It is not correct for the caller to supply a notification\n                            // icon, but this used to be able to slip through, so for\n                            // those dirty apps give it the app's icon.\n                            localForegroundNoti.icon = appInfo.icon;\n                            // Do not allow apps to present a sneaky invisible content view either.\n                            localForegroundNoti.contentView = null;\n                            localForegroundNoti.bigContentView = null;\n                            CharSequence appName = appInfo.loadLabel(\n                                    ams.mContext.getPackageManager());\n                            if (appName == null) {\n                                appName = appInfo.packageName;\n                            }\n                            Context ctx = null;\n                            try {\n                                ctx = ams.mContext.createPackageContext(\n                                        appInfo.packageName, 0);\n                                Intent runningIntent = new Intent(\n                                        Settings.ACTION_APPLICATION_DETAILS_SETTINGS);\n                                runningIntent.setData(Uri.fromParts(\"package\",\n                                        appInfo.packageName, null));\n                                PendingIntent pi = PendingIntent.getActivity(ams.mContext, 0,\n                                        runningIntent, PendingIntent.FLAG_UPDATE_CURRENT);\n                                localForegroundNoti.setLatestEventInfo(ctx,\n                                        ams.mContext.getString(\n                                                com.android.internal.R.string\n                                                        .app_running_notification_title,\n                                                appName),\n                                        ams.mContext.getString(\n                                                com.android.internal.R.string\n                                                        .app_running_notification_text,\n                                                appName),\n                                        pi);\n                            } catch (PackageManager.NameNotFoundException e) {\n                                localForegroundNoti.icon = 0;\n                            }\n                        }\n                        if (localForegroundNoti.icon == 0) {\n                            // Notifications whose icon is 0 are defined to not show\n                            // a notification, silently ignoring it.  We don't want to\n                            // just ignore it, we want to prevent the service from\n                            // being foreground.\n                            throw new RuntimeException(\"icon must be non-zero\");\n                        }\n                        int[] outId = new int[1];\n                        nm.enqueueNotificationInternal(localPackageName, localPackageName,\n                                appUid, appPid, null, localForegroundId, localForegroundNoti,\n                                outId, userId);\n                    } catch (RuntimeException e) {\n                        Slog.w(ActivityManagerService.TAG,\n                                \"Error showing notification for service\", e);\n                        // If it gave us a garbage notification, it doesn't\n                        // get to be foreground.\n                        ams.setServiceForeground(name, ServiceRecord.this,\n                                0, null, true);\n                        ams.crashApplication(appUid, appPid, localPackageName,\n                                \"Bad notification for startForeground: \" + e);\n                    }\n                }\n            });\n        }\n    }\n```\nAndroidNotificationAppIconApi 18Notification\n\nAPI 18:\n[](http://blog.csdn.net/wxx614817/article/details/50669420)ServiceService\nStart A Service onCreate bind B Service\nonServiceConnectedA service startForeground(processId,notification)\nB service startForeground(processId,notification)\nB service stopForeGround(true)\nNotificationidA serviceForeground ServiceNotification\n\n\n### 3.\nAPI 18Notification(new Notification())API 18ServiceB ServiceNotification\nApp\n\n\n\n![](http://odzl05jxx.bkt.clouddn.com/blamingtheuser-big.png?imageView2/2/w/600)\n\n\n\n### Reference\n- [](http://zhoujianghua.com/2015/07/28/black_technology_in_alipay/)\n- [AndroidstartForegroundService](http://blog.csdn.net/wxx614817/article/details/50669420)\n\n\n","source":"_posts/2016-10-20-android-dirty-code.md","raw":"---\ntitle: service\ndate: 2016-10-20 21:35:10\ncategories: blog\ntags: [android]\n---\n\nV2EXNotification[](http://zhoujianghua.com/2015/07/28/black_technology_in_alipay/)<!--more-->\n\n### 1. \nAndroidProcessProcessLru Listleast recently used DAU\n[](https://developer.android.com/guide/components/processes-and-threads.html),Android Process:\n- \n- \n- \n- \n- \n\n:\n```\n\n Activity Activity  onResume() \n Service Activity\n Service startForeground()\n ServiceonCreate()onStart()  onDestroy()\n onReceive()  BroadcastReceiver\n \n```\nstartForegroundstartForegroundNotification\n\n\n### 2. startForeground?\n```java\nvoid startForeground (int id, \n                Notification notification)\n```\nG+Chris Banes[post](https://plus.google.com/+AndroidDevelopers/posts/NEPWzPwSruR)\n```\nUnfortunately there are a number of applications on Google Play which are using the startForeground() API without passing a valid notification. While this worked in previous versions of Android, it is a loophole which has been fixed in Android 4.3. The system now displays a notifications for you automatically if you do not provide a valid one.\n```\nAPI 18NotificationNotificationAPI<18new Notification()Notification.\nLoophole\nApi 18[ServiceRecord](https://android.googlesource.com/platform/frameworks/base.git/+/android-4.3_r2.1/services/java/com/android/server/am/ServiceRecord.java):\n\n```java\npublic void postNotification() {\n        final int appUid = appInfo.uid;\n        final int appPid = app.pid;\n        if (foregroundId != 0 && foregroundNoti != null) {\n            // Do asynchronous communication with notification manager to\n            // avoid deadlocks.\n            final String localPackageName = packageName;\n            final int localForegroundId = foregroundId;\n            final Notification localForegroundNoti = foregroundNoti;\n            ams.mHandler.post(new Runnable() {\n                public void run() {\n                    NotificationManagerService nm =\n                            (NotificationManagerService) NotificationManager.getService();\n                    if (nm == null) {\n                        return;\n                    }\n                    try {\n                        if (localForegroundNoti.icon == 0) {\n                            // It is not correct for the caller to supply a notification\n                            // icon, but this used to be able to slip through, so for\n                            // those dirty apps give it the app's icon.\n                            localForegroundNoti.icon = appInfo.icon;\n                            // Do not allow apps to present a sneaky invisible content view either.\n                            localForegroundNoti.contentView = null;\n                            localForegroundNoti.bigContentView = null;\n                            CharSequence appName = appInfo.loadLabel(\n                                    ams.mContext.getPackageManager());\n                            if (appName == null) {\n                                appName = appInfo.packageName;\n                            }\n                            Context ctx = null;\n                            try {\n                                ctx = ams.mContext.createPackageContext(\n                                        appInfo.packageName, 0);\n                                Intent runningIntent = new Intent(\n                                        Settings.ACTION_APPLICATION_DETAILS_SETTINGS);\n                                runningIntent.setData(Uri.fromParts(\"package\",\n                                        appInfo.packageName, null));\n                                PendingIntent pi = PendingIntent.getActivity(ams.mContext, 0,\n                                        runningIntent, PendingIntent.FLAG_UPDATE_CURRENT);\n                                localForegroundNoti.setLatestEventInfo(ctx,\n                                        ams.mContext.getString(\n                                                com.android.internal.R.string\n                                                        .app_running_notification_title,\n                                                appName),\n                                        ams.mContext.getString(\n                                                com.android.internal.R.string\n                                                        .app_running_notification_text,\n                                                appName),\n                                        pi);\n                            } catch (PackageManager.NameNotFoundException e) {\n                                localForegroundNoti.icon = 0;\n                            }\n                        }\n                        if (localForegroundNoti.icon == 0) {\n                            // Notifications whose icon is 0 are defined to not show\n                            // a notification, silently ignoring it.  We don't want to\n                            // just ignore it, we want to prevent the service from\n                            // being foreground.\n                            throw new RuntimeException(\"icon must be non-zero\");\n                        }\n                        int[] outId = new int[1];\n                        nm.enqueueNotificationInternal(localPackageName, localPackageName,\n                                appUid, appPid, null, localForegroundId, localForegroundNoti,\n                                outId, userId);\n                    } catch (RuntimeException e) {\n                        Slog.w(ActivityManagerService.TAG,\n                                \"Error showing notification for service\", e);\n                        // If it gave us a garbage notification, it doesn't\n                        // get to be foreground.\n                        ams.setServiceForeground(name, ServiceRecord.this,\n                                0, null, true);\n                        ams.crashApplication(appUid, appPid, localPackageName,\n                                \"Bad notification for startForeground: \" + e);\n                    }\n                }\n            });\n        }\n    }\n```\nAndroidNotificationAppIconApi 18Notification\n\nAPI 18:\n[](http://blog.csdn.net/wxx614817/article/details/50669420)ServiceService\nStart A Service onCreate bind B Service\nonServiceConnectedA service startForeground(processId,notification)\nB service startForeground(processId,notification)\nB service stopForeGround(true)\nNotificationidA serviceForeground ServiceNotification\n\n\n### 3.\nAPI 18Notification(new Notification())API 18ServiceB ServiceNotification\nApp\n\n\n\n![](http://odzl05jxx.bkt.clouddn.com/blamingtheuser-big.png?imageView2/2/w/600)\n\n\n\n### Reference\n- [](http://zhoujianghua.com/2015/07/28/black_technology_in_alipay/)\n- [AndroidstartForegroundService](http://blog.csdn.net/wxx614817/article/details/50669420)\n\n\n","slug":"2016-10-20-android-dirty-code","published":1,"updated":"2017-04-23T10:50:24.549Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj50afguz0009i4vr0g6lldz4","content":"<p>V2EXNotification<a href=\"http://zhoujianghua.com/2015/07/28/black_technology_in_alipay/\"></a><a id=\"more\"></a></p>\n<h3 id=\"1-\"><a href=\"#1-\" class=\"headerlink\" title=\"1. \"></a>1. </h3><p>AndroidProcessProcessLru Listleast recently used DAU<br><a href=\"https://developer.android.com/guide/components/processes-and-threads.html\"></a>,Android Process:</p>\n<ul>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n<p>:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"> Activity Activity  onResume() </div><div class=\"line\"> Service Activity</div><div class=\"line\"> Service startForeground()</div><div class=\"line\"> ServiceonCreate()onStart()  onDestroy()</div><div class=\"line\"> onReceive()  BroadcastReceiver</div><div class=\"line\"> </div></pre></td></tr></table></figure></p>\n<p>startForegroundstartForegroundNotification</p>\n<h3 id=\"2-startForeground\"><a href=\"#2-startForeground\" class=\"headerlink\" title=\"2. startForeground?\"></a>2. startForeground?</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">startForeground</span> <span class=\"params\">(<span class=\"keyword\">int</span> id, </div><div class=\"line\">                Notification notification)</span></span></div></pre></td></tr></table></figure>\n<p>G+Chris Banes<a href=\"https://plus.google.com/+AndroidDevelopers/posts/NEPWzPwSruR\">post</a><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">Unfortunately there are a number of applications on Google Play which are using the startForeground() API without passing a valid notification. While this worked in previous versions of Android, it is a loophole which has been fixed in Android 4.3. The system now displays a notifications for you automatically if you do not provide a valid one.</div></pre></td></tr></table></figure></p>\n<p>API 18NotificationNotificationAPI&lt;18new Notification()Notification.<br>Loophole<br>Api 18<a href=\"https://android.googlesource.com/platform/frameworks/base.git/+/android-4.3_r2.1/services/java/com/android/server/am/ServiceRecord.java\">ServiceRecord</a>:</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">postNotification</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> appUid = appInfo.uid;</div><div class=\"line\">        <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> appPid = app.pid;</div><div class=\"line\">        <span class=\"keyword\">if</span> (foregroundId != <span class=\"number\">0</span> &amp;&amp; foregroundNoti != <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">            <span class=\"comment\">// Do asynchronous communication with notification manager to</span></div><div class=\"line\">            <span class=\"comment\">// avoid deadlocks.</span></div><div class=\"line\">            <span class=\"keyword\">final</span> String localPackageName = packageName;</div><div class=\"line\">            <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> localForegroundId = foregroundId;</div><div class=\"line\">            <span class=\"keyword\">final</span> Notification localForegroundNoti = foregroundNoti;</div><div class=\"line\">            ams.mHandler.post(<span class=\"keyword\">new</span> Runnable() &#123;</div><div class=\"line\">                <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">                    NotificationManagerService nm =</div><div class=\"line\">                            (NotificationManagerService) NotificationManager.getService();</div><div class=\"line\">                    <span class=\"keyword\">if</span> (nm == <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">                        <span class=\"keyword\">return</span>;</div><div class=\"line\">                    &#125;</div><div class=\"line\">                    <span class=\"keyword\">try</span> &#123;</div><div class=\"line\">                        <span class=\"keyword\">if</span> (localForegroundNoti.icon == <span class=\"number\">0</span>) &#123;</div><div class=\"line\">                            <span class=\"comment\">// It is not correct for the caller to supply a notification</span></div><div class=\"line\">                            <span class=\"comment\">// icon, but this used to be able to slip through, so for</span></div><div class=\"line\">                            <span class=\"comment\">// those dirty apps give it the app's icon.</span></div><div class=\"line\">                            localForegroundNoti.icon = appInfo.icon;</div><div class=\"line\">                            <span class=\"comment\">// Do not allow apps to present a sneaky invisible content view either.</span></div><div class=\"line\">                            localForegroundNoti.contentView = <span class=\"keyword\">null</span>;</div><div class=\"line\">                            localForegroundNoti.bigContentView = <span class=\"keyword\">null</span>;</div><div class=\"line\">                            CharSequence appName = appInfo.loadLabel(</div><div class=\"line\">                                    ams.mContext.getPackageManager());</div><div class=\"line\">                            <span class=\"keyword\">if</span> (appName == <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">                                appName = appInfo.packageName;</div><div class=\"line\">                            &#125;</div><div class=\"line\">                            Context ctx = <span class=\"keyword\">null</span>;</div><div class=\"line\">                            <span class=\"keyword\">try</span> &#123;</div><div class=\"line\">                                ctx = ams.mContext.createPackageContext(</div><div class=\"line\">                                        appInfo.packageName, <span class=\"number\">0</span>);</div><div class=\"line\">                                Intent runningIntent = <span class=\"keyword\">new</span> Intent(</div><div class=\"line\">                                        Settings.ACTION_APPLICATION_DETAILS_SETTINGS);</div><div class=\"line\">                                runningIntent.setData(Uri.fromParts(<span class=\"string\">\"package\"</span>,</div><div class=\"line\">                                        appInfo.packageName, <span class=\"keyword\">null</span>));</div><div class=\"line\">                                PendingIntent pi = PendingIntent.getActivity(ams.mContext, <span class=\"number\">0</span>,</div><div class=\"line\">                                        runningIntent, PendingIntent.FLAG_UPDATE_CURRENT);</div><div class=\"line\">                                localForegroundNoti.setLatestEventInfo(ctx,</div><div class=\"line\">                                        ams.mContext.getString(</div><div class=\"line\">                                                com.android.internal.R.string</div><div class=\"line\">                                                        .app_running_notification_title,</div><div class=\"line\">                                                appName),</div><div class=\"line\">                                        ams.mContext.getString(</div><div class=\"line\">                                                com.android.internal.R.string</div><div class=\"line\">                                                        .app_running_notification_text,</div><div class=\"line\">                                                appName),</div><div class=\"line\">                                        pi);</div><div class=\"line\">                            &#125; <span class=\"keyword\">catch</span> (PackageManager.NameNotFoundException e) &#123;</div><div class=\"line\">                                localForegroundNoti.icon = <span class=\"number\">0</span>;</div><div class=\"line\">                            &#125;</div><div class=\"line\">                        &#125;</div><div class=\"line\">                        <span class=\"keyword\">if</span> (localForegroundNoti.icon == <span class=\"number\">0</span>) &#123;</div><div class=\"line\">                            <span class=\"comment\">// Notifications whose icon is 0 are defined to not show</span></div><div class=\"line\">                            <span class=\"comment\">// a notification, silently ignoring it.  We don't want to</span></div><div class=\"line\">                            <span class=\"comment\">// just ignore it, we want to prevent the service from</span></div><div class=\"line\">                            <span class=\"comment\">// being foreground.</span></div><div class=\"line\">                            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> RuntimeException(<span class=\"string\">\"icon must be non-zero\"</span>);</div><div class=\"line\">                        &#125;</div><div class=\"line\">                        <span class=\"keyword\">int</span>[] outId = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[<span class=\"number\">1</span>];</div><div class=\"line\">                        nm.enqueueNotificationInternal(localPackageName, localPackageName,</div><div class=\"line\">                                appUid, appPid, <span class=\"keyword\">null</span>, localForegroundId, localForegroundNoti,</div><div class=\"line\">                                outId, userId);</div><div class=\"line\">                    &#125; <span class=\"keyword\">catch</span> (RuntimeException e) &#123;</div><div class=\"line\">                        Slog.w(ActivityManagerService.TAG,</div><div class=\"line\">                                <span class=\"string\">\"Error showing notification for service\"</span>, e);</div><div class=\"line\">                        <span class=\"comment\">// If it gave us a garbage notification, it doesn't</span></div><div class=\"line\">                        <span class=\"comment\">// get to be foreground.</span></div><div class=\"line\">                        ams.setServiceForeground(name, ServiceRecord.<span class=\"keyword\">this</span>,</div><div class=\"line\">                                <span class=\"number\">0</span>, <span class=\"keyword\">null</span>, <span class=\"keyword\">true</span>);</div><div class=\"line\">                        ams.crashApplication(appUid, appPid, localPackageName,</div><div class=\"line\">                                <span class=\"string\">\"Bad notification for startForeground: \"</span> + e);</div><div class=\"line\">                    &#125;</div><div class=\"line\">                &#125;</div><div class=\"line\">            &#125;);</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div></pre></td></tr></table></figure>\n<p>AndroidNotificationAppIconApi 18Notification</p>\n<p>API 18:<br><a href=\"http://blog.csdn.net/wxx614817/article/details/50669420\"></a>ServiceService<br>Start A Service onCreate bind B Service<br>onServiceConnectedA service startForeground(processId,notification)<br>B service startForeground(processId,notification)<br>B service stopForeGround(true)<br>NotificationidA serviceForeground ServiceNotification</p>\n<h3 id=\"3-\"><a href=\"#3-\" class=\"headerlink\" title=\"3.\"></a>3.</h3><p>API 18Notification(new Notification())API 18ServiceB ServiceNotification<br>App<br><br></p>\n<p><img src=\"http://odzl05jxx.bkt.clouddn.com/blamingtheuser-big.png?imageView2/2/w/600\" alt=\"\"></p>\n<h3 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h3><ul>\n<li><a href=\"http://zhoujianghua.com/2015/07/28/black_technology_in_alipay/\"></a></li>\n<li><a href=\"http://blog.csdn.net/wxx614817/article/details/50669420\">AndroidstartForegroundService</a></li>\n</ul>\n","excerpt":"<p>V2EXNotification<a href=\"http://zhoujianghua.com/2015/07/28/black_technology_in_alipay/\"></a>","more":"</p>\n<h3 id=\"1-\"><a href=\"#1-\" class=\"headerlink\" title=\"1. \"></a>1. </h3><p>AndroidProcessProcessLru Listleast recently used DAU<br><a href=\"https://developer.android.com/guide/components/processes-and-threads.html\"></a>,Android Process:</p>\n<ul>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n<p>:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"> Activity Activity  onResume() </div><div class=\"line\"> Service Activity</div><div class=\"line\"> Service startForeground()</div><div class=\"line\"> ServiceonCreate()onStart()  onDestroy()</div><div class=\"line\"> onReceive()  BroadcastReceiver</div><div class=\"line\"> </div></pre></td></tr></table></figure></p>\n<p>startForegroundstartForegroundNotification</p>\n<h3 id=\"2-startForeground\"><a href=\"#2-startForeground\" class=\"headerlink\" title=\"2. startForeground?\"></a>2. startForeground?</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">startForeground</span> <span class=\"params\">(<span class=\"keyword\">int</span> id, </div><div class=\"line\">                Notification notification)</span></span></div></pre></td></tr></table></figure>\n<p>G+Chris Banes<a href=\"https://plus.google.com/+AndroidDevelopers/posts/NEPWzPwSruR\">post</a><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">Unfortunately there are a number of applications on Google Play which are using the startForeground() API without passing a valid notification. While this worked in previous versions of Android, it is a loophole which has been fixed in Android 4.3. The system now displays a notifications for you automatically if you do not provide a valid one.</div></pre></td></tr></table></figure></p>\n<p>API 18NotificationNotificationAPI&lt;18new Notification()Notification.<br>Loophole<br>Api 18<a href=\"https://android.googlesource.com/platform/frameworks/base.git/+/android-4.3_r2.1/services/java/com/android/server/am/ServiceRecord.java\">ServiceRecord</a>:</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">postNotification</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> appUid = appInfo.uid;</div><div class=\"line\">        <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> appPid = app.pid;</div><div class=\"line\">        <span class=\"keyword\">if</span> (foregroundId != <span class=\"number\">0</span> &amp;&amp; foregroundNoti != <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">            <span class=\"comment\">// Do asynchronous communication with notification manager to</span></div><div class=\"line\">            <span class=\"comment\">// avoid deadlocks.</span></div><div class=\"line\">            <span class=\"keyword\">final</span> String localPackageName = packageName;</div><div class=\"line\">            <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> localForegroundId = foregroundId;</div><div class=\"line\">            <span class=\"keyword\">final</span> Notification localForegroundNoti = foregroundNoti;</div><div class=\"line\">            ams.mHandler.post(<span class=\"keyword\">new</span> Runnable() &#123;</div><div class=\"line\">                <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">                    NotificationManagerService nm =</div><div class=\"line\">                            (NotificationManagerService) NotificationManager.getService();</div><div class=\"line\">                    <span class=\"keyword\">if</span> (nm == <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">                        <span class=\"keyword\">return</span>;</div><div class=\"line\">                    &#125;</div><div class=\"line\">                    <span class=\"keyword\">try</span> &#123;</div><div class=\"line\">                        <span class=\"keyword\">if</span> (localForegroundNoti.icon == <span class=\"number\">0</span>) &#123;</div><div class=\"line\">                            <span class=\"comment\">// It is not correct for the caller to supply a notification</span></div><div class=\"line\">                            <span class=\"comment\">// icon, but this used to be able to slip through, so for</span></div><div class=\"line\">                            <span class=\"comment\">// those dirty apps give it the app's icon.</span></div><div class=\"line\">                            localForegroundNoti.icon = appInfo.icon;</div><div class=\"line\">                            <span class=\"comment\">// Do not allow apps to present a sneaky invisible content view either.</span></div><div class=\"line\">                            localForegroundNoti.contentView = <span class=\"keyword\">null</span>;</div><div class=\"line\">                            localForegroundNoti.bigContentView = <span class=\"keyword\">null</span>;</div><div class=\"line\">                            CharSequence appName = appInfo.loadLabel(</div><div class=\"line\">                                    ams.mContext.getPackageManager());</div><div class=\"line\">                            <span class=\"keyword\">if</span> (appName == <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">                                appName = appInfo.packageName;</div><div class=\"line\">                            &#125;</div><div class=\"line\">                            Context ctx = <span class=\"keyword\">null</span>;</div><div class=\"line\">                            <span class=\"keyword\">try</span> &#123;</div><div class=\"line\">                                ctx = ams.mContext.createPackageContext(</div><div class=\"line\">                                        appInfo.packageName, <span class=\"number\">0</span>);</div><div class=\"line\">                                Intent runningIntent = <span class=\"keyword\">new</span> Intent(</div><div class=\"line\">                                        Settings.ACTION_APPLICATION_DETAILS_SETTINGS);</div><div class=\"line\">                                runningIntent.setData(Uri.fromParts(<span class=\"string\">\"package\"</span>,</div><div class=\"line\">                                        appInfo.packageName, <span class=\"keyword\">null</span>));</div><div class=\"line\">                                PendingIntent pi = PendingIntent.getActivity(ams.mContext, <span class=\"number\">0</span>,</div><div class=\"line\">                                        runningIntent, PendingIntent.FLAG_UPDATE_CURRENT);</div><div class=\"line\">                                localForegroundNoti.setLatestEventInfo(ctx,</div><div class=\"line\">                                        ams.mContext.getString(</div><div class=\"line\">                                                com.android.internal.R.string</div><div class=\"line\">                                                        .app_running_notification_title,</div><div class=\"line\">                                                appName),</div><div class=\"line\">                                        ams.mContext.getString(</div><div class=\"line\">                                                com.android.internal.R.string</div><div class=\"line\">                                                        .app_running_notification_text,</div><div class=\"line\">                                                appName),</div><div class=\"line\">                                        pi);</div><div class=\"line\">                            &#125; <span class=\"keyword\">catch</span> (PackageManager.NameNotFoundException e) &#123;</div><div class=\"line\">                                localForegroundNoti.icon = <span class=\"number\">0</span>;</div><div class=\"line\">                            &#125;</div><div class=\"line\">                        &#125;</div><div class=\"line\">                        <span class=\"keyword\">if</span> (localForegroundNoti.icon == <span class=\"number\">0</span>) &#123;</div><div class=\"line\">                            <span class=\"comment\">// Notifications whose icon is 0 are defined to not show</span></div><div class=\"line\">                            <span class=\"comment\">// a notification, silently ignoring it.  We don't want to</span></div><div class=\"line\">                            <span class=\"comment\">// just ignore it, we want to prevent the service from</span></div><div class=\"line\">                            <span class=\"comment\">// being foreground.</span></div><div class=\"line\">                            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> RuntimeException(<span class=\"string\">\"icon must be non-zero\"</span>);</div><div class=\"line\">                        &#125;</div><div class=\"line\">                        <span class=\"keyword\">int</span>[] outId = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[<span class=\"number\">1</span>];</div><div class=\"line\">                        nm.enqueueNotificationInternal(localPackageName, localPackageName,</div><div class=\"line\">                                appUid, appPid, <span class=\"keyword\">null</span>, localForegroundId, localForegroundNoti,</div><div class=\"line\">                                outId, userId);</div><div class=\"line\">                    &#125; <span class=\"keyword\">catch</span> (RuntimeException e) &#123;</div><div class=\"line\">                        Slog.w(ActivityManagerService.TAG,</div><div class=\"line\">                                <span class=\"string\">\"Error showing notification for service\"</span>, e);</div><div class=\"line\">                        <span class=\"comment\">// If it gave us a garbage notification, it doesn't</span></div><div class=\"line\">                        <span class=\"comment\">// get to be foreground.</span></div><div class=\"line\">                        ams.setServiceForeground(name, ServiceRecord.<span class=\"keyword\">this</span>,</div><div class=\"line\">                                <span class=\"number\">0</span>, <span class=\"keyword\">null</span>, <span class=\"keyword\">true</span>);</div><div class=\"line\">                        ams.crashApplication(appUid, appPid, localPackageName,</div><div class=\"line\">                                <span class=\"string\">\"Bad notification for startForeground: \"</span> + e);</div><div class=\"line\">                    &#125;</div><div class=\"line\">                &#125;</div><div class=\"line\">            &#125;);</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div></pre></td></tr></table></figure>\n<p>AndroidNotificationAppIconApi 18Notification</p>\n<p>API 18:<br><a href=\"http://blog.csdn.net/wxx614817/article/details/50669420\"></a>ServiceService<br>Start A Service onCreate bind B Service<br>onServiceConnectedA service startForeground(processId,notification)<br>B service startForeground(processId,notification)<br>B service stopForeGround(true)<br>NotificationidA serviceForeground ServiceNotification</p>\n<h3 id=\"3-\"><a href=\"#3-\" class=\"headerlink\" title=\"3.\"></a>3.</h3><p>API 18Notification(new Notification())API 18ServiceB ServiceNotification<br>App<br><br></p>\n<p><img src=\"http://odzl05jxx.bkt.clouddn.com/blamingtheuser-big.png?imageView2/2/w/600\" alt=\"\"></p>\n<h3 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h3><ul>\n<li><a href=\"http://zhoujianghua.com/2015/07/28/black_technology_in_alipay/\"></a></li>\n<li><a href=\"http://blog.csdn.net/wxx614817/article/details/50669420\">AndroidstartForegroundService</a></li>\n</ul>"},{"title":"android-Ultra-pull-to-refresh","date":"2016-10-24T02:25:35.000Z","_content":" Chris Banes[Pull-To-Refresh](https://github.com/chrisbanes/Android-PullToRefresh)Deprecated[android-Ultra-pull-toRefresh](https://github.com/liaohuqiu/android-Ultra-Pull-To-Refresh)\n\n ![fork](http://odzl05jxx.bkt.clouddn.com/687474703a2f2f692e696d6775722e636f6d2f4766746846417a2e706e67.png)\n\n DemoswipeRefreshLayout[android-Ultra-pulltoRefresh](https://github.com/liaohuqiu/android-Ultra-Pull-To-Refresh)\n <!--more-->\n\n ### 1. Demo\ngithub clonegradlecompile sdk versionDemo.\nMainActivity PtrDemoHomeFragment,onCreateViewViewxml\nfragment_ptr_home.xml\n```xml\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:orientation=\"vertical\">\n\n    <in.srain.cube.views.ptr.PtrFrameLayout\n        android:id=\"@+id/fragment_ptr_home_ptr_frame\"\n        xmlns:cube_ptr=\"http://schemas.android.com/apk/res-auto\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        cube_ptr:ptr_duration_to_close=\"200\"\n        cube_ptr:ptr_duration_to_close_header=\"1000\"\n        cube_ptr:ptr_keep_header_when_refresh=\"true\"\n        cube_ptr:ptr_pull_to_fresh=\"false\"\n        cube_ptr:ptr_ratio_of_header_height_to_refresh=\"1.2\"\n        cube_ptr:ptr_resistance=\"1.7\">\n        <ScrollView\n            android:id=\"@+id/fragment_block_menu_scroll_view\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\"\n            android:background=\"@color/cube_mints_white\">\n\n            <in.srain.cube.views.block.BlockListView\n                android:id=\"@+id/fragment_block_menu_block_list\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"wrap_content\"\n                android:padding=\"@dimen/cube_mints_content_view_padding\" />\n        </ScrollView>\n    </in.srain.cube.views.ptr.PtrFrameLayout>\n</LinearLayout>\n```\nptrFrameLayout\n\n\n### 2. PtrFrameLayout\n \n> This layout view for \"Pull to Refresh(Ptr)\" support all of the view, you can contain everything you want.\n  support: pull to refresh / release to refresh / auto refresh / keep header view while refreshing / hide header view while refreshing\n  It defines {@link in.srain.cube.views.ptr.PtrUIHandler}, which allows you customize the UI easily.\n\nView\n\n\n\n1. ****\n\n```java\npublic class PtrFrameLayout extends ViewGroup {\n\n public PtrFrameLayout(Context context, AttributeSet attrs, int defStyle) {\n        super(context, attrs, defStyle);\n        //\n        TypedArray arr = context.obtainStyledAttributes(attrs, R.styleable.PtrFrameLayout, 0, 0);\n        if (arr != null) {\n            mHeaderId = arr.getResourceId(R.styleable.PtrFrameLayout_ptr_header, mHeaderId); // HeaderViewlayoutid\n            mContainerId = arr.getResourceId(R.styleable.PtrFrameLayout_ptr_content, mContainerId); // contentViewlayoutid\n            mDurationToClose = arr.getInt(R.styleable.PtrFrameLayout_ptr_duration_to_close, mDurationToClose);// HeaderView\n            mDurationToCloseHeader = arr.getInt(R.styleable.PtrFrameLayout_ptr_duration_to_close_header, mDurationToCloseHeader);\n            float ratio = mPtrIndicator.getRatioOfHeaderToHeightRefresh();\n            ratio = arr.getFloat(R.styleable.PtrFrameLayout_ptr_ratio_of_header_height_to_refresh, ratio);\n            mKeepHeaderWhenRefresh = arr.getBoolean(R.styleable.PtrFrameLayout_ptr_keep_header_when_refresh, mKeepHeaderWhenRefresh);\n            mPullToRefresh = arr.getBoolean(R.styleable.PtrFrameLayout_ptr_pull_to_fresh, mPullToRefresh);\n            arr.recycle();\n        }\n        //ViewConfigurationmTouchSlop\n        final ViewConfiguration conf = ViewConfiguration.get(getContext());\n        mPagingTouchSlop = conf.getScaledTouchSlop() * 2;\n    }\n\n}\n```\n\nxml\n\n2. **onFinishInflate**\n inflate xmlchildView\n PtrFrameLayout\n- ChildViewchildCount >2 \n- child(childCount=2)\n```java\n//\nif (child1 instanceof PtrUIHandler) {\n                    mHeaderView = child1;\n                    mContent = child2;\n                } else if (child2 instanceof PtrUIHandler) {\n                    mHeaderView = child2;\n                    mContent = child1;\n                } \n//                \n```\nptrUIHandler\n```java\npublic interface PtrUIHandler {\n\n    /**\n     * When the content view has reached top and refresh has been completed, view will be reset.\n     *\n     * @param frame\n     */\n    public void onUIReset(PtrFrameLayout frame);\n\n    /**\n     * prepare for loading\n     *\n     * @param frame\n     */\n    public void onUIRefreshPrepare(PtrFrameLayout frame);\n\n    /**\n     * perform refreshing UI\n     */\n    public void onUIRefreshBegin(PtrFrameLayout frame);\n\n    /**\n     * perform UI after refresh\n     */\n    public void onUIRefreshComplete(PtrFrameLayout frame);\n\n    public void onUIPositionChange(PtrFrameLayout frame, boolean isUnderTouch, byte status, PtrIndicator ptrIndicator);\n}\n```\n(View)\n\n3. **onMeasure**\n```java\n @Override\n    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {\n        super.onMeasure(widthMeasureSpec, heightMeasureSpec);\n        //...\n         measureContentView(mContent, widthMeasureSpec, heightMeasureSpec);\n    }\n\n\n     private void measureContentView(View child,\n                                    int parentWidthMeasureSpec,\n                                    int parentHeightMeasureSpec) {\n        final MarginLayoutParams lp = (MarginLayoutParams) child.getLayoutParams();\n\n        final int childWidthMeasureSpec = getChildMeasureSpec(parentWidthMeasureSpec,\n                getPaddingLeft() + getPaddingRight() + lp.leftMargin + lp.rightMargin, lp.width);\n        final int childHeightMeasureSpec = getChildMeasureSpec(parentHeightMeasureSpec,\n                getPaddingTop() + getPaddingBottom() + lp.topMargin, lp.height);\n\n        child.measure(childWidthMeasureSpec, childHeightMeasureSpec);\n    }\n```\nmeasureContentView\n\n4. **onLayout**\nLayoutParamsmargin,Top\n>  int offset = mPtrIndicator.getCurrentPosY();\n\nmPterIndicator\nptr\n\n\n5. **dispatchTouchEvent**\nTouchEvent\n:\n> ViewGroup.dispatchTouchEvent----ViewGroup.onInterceptTouchEvent---View.dispatchTouchEvent----- etc \n\nTouchEvent[](http://www.jianshu.com/p/e99b5e8bd67b)\n\n```java\n @Override\n    public boolean dispatchTouchEvent(MotionEvent e) {\n    \t//.....\n        switch (action) {\n            case MotionEvent.ACTION_UP:\n            case MotionEvent.ACTION_CANCEL:\n                if (mPtrIndicator.hasLeftStartPosition()) {\n                    onRelease(false); //\n                    // ......\n                    return dispatchTouchEventSupper(e);\n                } else {\n                    return dispatchTouchEventSupper(e);\n                }\n\n            case MotionEvent.ACTION_DOWN:\n            \t//Scroller\n                // The cancel event will be sent once the position is moved.\n                // So let the event pass to children.\n                // fix #93, #102\n                dispatchTouchEventSupper(e);\n                return true;//truechildACTION_CANCEL\n\n            case MotionEvent.ACTION_MOVE:\n                mLastMoveEvent = e; //\n                mPtrIndicator.onMove(e.getX(), e.getY());\n                float offsetX = mPtrIndicator.getOffsetX();\n                float offsetY = mPtrIndicator.getOffsetY();\n               \n\n                boolean moveDown = offsetY > 0;\n                boolean moveUp = !moveDown;\n                boolean canMoveUp = mPtrIndicator.hasLeftStartPosition();\n\n                // disable move when header not reach top\n                if (moveDown && mPtrHandler != null && !mPtrHandler.checkCanDoRefresh(this, mContent, mHeaderView)) {\n                    return dispatchTouchEventSupper(e);\n                }\n\n                if ((moveUp && canMoveUp) || moveDown) {\n                    movePos(offsetY); //\n                    return true;// ACTION_UP\n                }\n        }\n        return dispatchTouchEventSupper(e);\n    }\n\n```\n\n\n**ACTION_DOWN** : TouchEventmPtrIndicatorptrACTION_DOWNEvent.getYposition(0contentViewACTION_DOWNgetY)Scroller mScroller.forceFinished(true)()onRelease(true)onReleaseACTION_UP\n\n**ACTION_MOVE** : mPtrIndicatormPtrIndicatorget(mDisableWhenHorizontalMoveViewPagerreturn super)\n\n```java\n\tboolean moveDown = offsetY > 0; EventymptrIndicatoryoffset >0,moveDown\n\tboolean moveUp = !moveDown;\n\tboolean canMoveUp = mPtrIndicator.hasLeftStartPosition()// Eventy0\n```\nmPtrHandlerDoRefresh,ChildView\n\n>  return PtrDefaultHandler.checkContentCanBePulledDown(frame, content, header);\n\nViewCompat.canScollVerticallyAbstractListViewgetFirstVisiblePositionAdapterView\ntrueView:\n(moveUp && canMoveUp)(moveDown),return trueACTION_MOVE_ACTION_UPdispatchTouchEvent\n\n```java\n  private void updatePos(int change) {\n       \n\n        boolean isUnderTouch = mPtrIndicator.isUnderTouch();\n\n        // once moved, cancel event will be sent to child\n        if (isUnderTouch && !mHasSendCancelEvent && mPtrIndicator.hasMovedAfterPressedDown()) {\n            mHasSendCancelEvent = true;\n            sendCancelEvent();\n        }\n\n        // leave initiated position or just refresh complete\n        if ((mPtrIndicator.hasJustLeftStartPosition() && mStatus == PTR_STATUS_INIT) ||\n                (mPtrIndicator.goDownCrossFinishPosition() && mStatus == PTR_STATUS_COMPLETE && isEnabledNextPtrAtOnce())) {\n\n            mStatus = PTR_STATUS_PREPARE;\n            mPtrUIHandlerHolder.onUIRefreshPrepare(this);//0HolderHolderUIHandlerHolder(next)(Message)HolderUIHanlder(addHandler)\n            //**0STATUS_PREPARED**\n        }\n\n        // back to initiated position\n        if (mPtrIndicator.hasJustBackToStartPosition()) {\n            tryToNotifyReset();\n            //**0UIHandleronUIReset(),STATUS_INIT**\n            //\n            // recover event to childrenACTION_MOVEACTION_DOWN\n            if (isUnderTouch) {\n                sendDownEvent();\n            }\n        }\n\n        // Pull to Refresh\n        if (mStatus == PTR_STATUS_PREPARE) {//0   HeadView\n            // reach fresh height while moving from top to bottom\n            if (isUnderTouch && !isAutoRefresh() && mPullToRefresh  // ptr\n                    && mPtrIndicator.crossRefreshLineFromTopToBottom()) {\n                tryToPerformRefresh();\n            }\n            // reach header height while auto refresh\n            if (performAutoRefreshButLater() && mPtrIndicator.hasJustReachedHeaderHeightFromTopToBottom()) {//headerView\n                tryToPerformRefresh();\n            }\n        }\n        //tryToPerformRefresh()mPtrIndicator.isOverOffsetToRefresh()STATUS_LOADINGrun mPtrUIHandlerHolder.onUIRefreshBegin(this);mPtrHandler.onRefreshBegin(this);UIHandleronInFlateFinishHolderUIHandler,HanldleUIfacade\n\n\n        // ViewViewX,Y(X = left+translationX;Y = top+translationY) \n        mHeaderView.offsetTopAndBottom(change);\n        if (!isPinContent()) {\n            mContent.offsetTopAndBottom(change);\n        }\n        invalidate();??\n\n        //UIHandlerHoldermUIHandlermContentmHeaderView\n        if (mPtrUIHandlerHolder.hasHandler()) {\n            mPtrUIHandlerHolder.onUIPositionChange(this, isUnderTouch, mStatus, mPtrIndicator);\n        }\n        onPositionChange(isUnderTouch, mStatus, mPtrIndicator);//onPositionChange\n    }\n```\nACTION_MOVESTATUSMOVEptrstatusptrheadrViewchildViewUIHanlderptrcontentViewxmlresistance**statusSTATUS_PREPAREDSTATUS_LOADING**\n\n\n**ACTION_UP** mPtrIndicatormPressedfalse>0contentView\"\"onRelease(false)false(git log)OnRelease:\n```java\n  private void onRelease(boolean stayForLoading) {\n\n        tryToPerformRefresh();//status!=STATUS_PREPAREDreturn falseperformRefreshptr\n\n        if (mStatus == PTR_STATUS_LOADING) {\n            // keep header for fresh\n            if (mKeepHeaderWhenRefresh) {\n                // scroll header back\n                if (mPtrIndicator.isOverOffsetToKeepHeaderWhileLoading() && !stayForLoading) {//statyForLoadingfalse\n                    mScrollChecker.tryToScrollTo(mPtrIndicator.getOffsetToKeepHeaderWhileLoading(), mDurationToClose);//postrunnablerunACTION_MOVEmovePosUIHandlerUIHandlerHolder\n                } else {\n                    // do nothing\n                }\n            } else {\n                tryScrollBackToTopWhileLoading();//0updatPosSTATUSSTATUS_INITSTATUS_PREPARED\n            }\n        } else {\n            if (mStatus == PTR_STATUS_COMPLETE) {//STATUS_COMPLETErefreshComplete public SwipeRefreshLayoutsetRefreshing()\n                notifyUIRefreshComplete(false);\n            } else {\n                tryScrollBackToTopAbortRefresh();\n            }\n        }\n    }\n```\n\nptrgettersetterDemo\n\n\n### 3. \nptrViewGroupdispatchTouchEventgettersetterView\n\n\n\n\n\n","source":"_posts/2016-10-24-a-peek-on-pull-to-refresh.md","raw":"---\ntitle: android-Ultra-pull-to-refresh\ndate: 2016-10-24 10:25:35\ncategories: blog\ntags: []\n\n\n---\n Chris Banes[Pull-To-Refresh](https://github.com/chrisbanes/Android-PullToRefresh)Deprecated[android-Ultra-pull-toRefresh](https://github.com/liaohuqiu/android-Ultra-Pull-To-Refresh)\n\n ![fork](http://odzl05jxx.bkt.clouddn.com/687474703a2f2f692e696d6775722e636f6d2f4766746846417a2e706e67.png)\n\n DemoswipeRefreshLayout[android-Ultra-pulltoRefresh](https://github.com/liaohuqiu/android-Ultra-Pull-To-Refresh)\n <!--more-->\n\n ### 1. Demo\ngithub clonegradlecompile sdk versionDemo.\nMainActivity PtrDemoHomeFragment,onCreateViewViewxml\nfragment_ptr_home.xml\n```xml\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:orientation=\"vertical\">\n\n    <in.srain.cube.views.ptr.PtrFrameLayout\n        android:id=\"@+id/fragment_ptr_home_ptr_frame\"\n        xmlns:cube_ptr=\"http://schemas.android.com/apk/res-auto\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        cube_ptr:ptr_duration_to_close=\"200\"\n        cube_ptr:ptr_duration_to_close_header=\"1000\"\n        cube_ptr:ptr_keep_header_when_refresh=\"true\"\n        cube_ptr:ptr_pull_to_fresh=\"false\"\n        cube_ptr:ptr_ratio_of_header_height_to_refresh=\"1.2\"\n        cube_ptr:ptr_resistance=\"1.7\">\n        <ScrollView\n            android:id=\"@+id/fragment_block_menu_scroll_view\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\"\n            android:background=\"@color/cube_mints_white\">\n\n            <in.srain.cube.views.block.BlockListView\n                android:id=\"@+id/fragment_block_menu_block_list\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"wrap_content\"\n                android:padding=\"@dimen/cube_mints_content_view_padding\" />\n        </ScrollView>\n    </in.srain.cube.views.ptr.PtrFrameLayout>\n</LinearLayout>\n```\nptrFrameLayout\n\n\n### 2. PtrFrameLayout\n \n> This layout view for \"Pull to Refresh(Ptr)\" support all of the view, you can contain everything you want.\n  support: pull to refresh / release to refresh / auto refresh / keep header view while refreshing / hide header view while refreshing\n  It defines {@link in.srain.cube.views.ptr.PtrUIHandler}, which allows you customize the UI easily.\n\nView\n\n\n\n1. ****\n\n```java\npublic class PtrFrameLayout extends ViewGroup {\n\n public PtrFrameLayout(Context context, AttributeSet attrs, int defStyle) {\n        super(context, attrs, defStyle);\n        //\n        TypedArray arr = context.obtainStyledAttributes(attrs, R.styleable.PtrFrameLayout, 0, 0);\n        if (arr != null) {\n            mHeaderId = arr.getResourceId(R.styleable.PtrFrameLayout_ptr_header, mHeaderId); // HeaderViewlayoutid\n            mContainerId = arr.getResourceId(R.styleable.PtrFrameLayout_ptr_content, mContainerId); // contentViewlayoutid\n            mDurationToClose = arr.getInt(R.styleable.PtrFrameLayout_ptr_duration_to_close, mDurationToClose);// HeaderView\n            mDurationToCloseHeader = arr.getInt(R.styleable.PtrFrameLayout_ptr_duration_to_close_header, mDurationToCloseHeader);\n            float ratio = mPtrIndicator.getRatioOfHeaderToHeightRefresh();\n            ratio = arr.getFloat(R.styleable.PtrFrameLayout_ptr_ratio_of_header_height_to_refresh, ratio);\n            mKeepHeaderWhenRefresh = arr.getBoolean(R.styleable.PtrFrameLayout_ptr_keep_header_when_refresh, mKeepHeaderWhenRefresh);\n            mPullToRefresh = arr.getBoolean(R.styleable.PtrFrameLayout_ptr_pull_to_fresh, mPullToRefresh);\n            arr.recycle();\n        }\n        //ViewConfigurationmTouchSlop\n        final ViewConfiguration conf = ViewConfiguration.get(getContext());\n        mPagingTouchSlop = conf.getScaledTouchSlop() * 2;\n    }\n\n}\n```\n\nxml\n\n2. **onFinishInflate**\n inflate xmlchildView\n PtrFrameLayout\n- ChildViewchildCount >2 \n- child(childCount=2)\n```java\n//\nif (child1 instanceof PtrUIHandler) {\n                    mHeaderView = child1;\n                    mContent = child2;\n                } else if (child2 instanceof PtrUIHandler) {\n                    mHeaderView = child2;\n                    mContent = child1;\n                } \n//                \n```\nptrUIHandler\n```java\npublic interface PtrUIHandler {\n\n    /**\n     * When the content view has reached top and refresh has been completed, view will be reset.\n     *\n     * @param frame\n     */\n    public void onUIReset(PtrFrameLayout frame);\n\n    /**\n     * prepare for loading\n     *\n     * @param frame\n     */\n    public void onUIRefreshPrepare(PtrFrameLayout frame);\n\n    /**\n     * perform refreshing UI\n     */\n    public void onUIRefreshBegin(PtrFrameLayout frame);\n\n    /**\n     * perform UI after refresh\n     */\n    public void onUIRefreshComplete(PtrFrameLayout frame);\n\n    public void onUIPositionChange(PtrFrameLayout frame, boolean isUnderTouch, byte status, PtrIndicator ptrIndicator);\n}\n```\n(View)\n\n3. **onMeasure**\n```java\n @Override\n    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {\n        super.onMeasure(widthMeasureSpec, heightMeasureSpec);\n        //...\n         measureContentView(mContent, widthMeasureSpec, heightMeasureSpec);\n    }\n\n\n     private void measureContentView(View child,\n                                    int parentWidthMeasureSpec,\n                                    int parentHeightMeasureSpec) {\n        final MarginLayoutParams lp = (MarginLayoutParams) child.getLayoutParams();\n\n        final int childWidthMeasureSpec = getChildMeasureSpec(parentWidthMeasureSpec,\n                getPaddingLeft() + getPaddingRight() + lp.leftMargin + lp.rightMargin, lp.width);\n        final int childHeightMeasureSpec = getChildMeasureSpec(parentHeightMeasureSpec,\n                getPaddingTop() + getPaddingBottom() + lp.topMargin, lp.height);\n\n        child.measure(childWidthMeasureSpec, childHeightMeasureSpec);\n    }\n```\nmeasureContentView\n\n4. **onLayout**\nLayoutParamsmargin,Top\n>  int offset = mPtrIndicator.getCurrentPosY();\n\nmPterIndicator\nptr\n\n\n5. **dispatchTouchEvent**\nTouchEvent\n:\n> ViewGroup.dispatchTouchEvent----ViewGroup.onInterceptTouchEvent---View.dispatchTouchEvent----- etc \n\nTouchEvent[](http://www.jianshu.com/p/e99b5e8bd67b)\n\n```java\n @Override\n    public boolean dispatchTouchEvent(MotionEvent e) {\n    \t//.....\n        switch (action) {\n            case MotionEvent.ACTION_UP:\n            case MotionEvent.ACTION_CANCEL:\n                if (mPtrIndicator.hasLeftStartPosition()) {\n                    onRelease(false); //\n                    // ......\n                    return dispatchTouchEventSupper(e);\n                } else {\n                    return dispatchTouchEventSupper(e);\n                }\n\n            case MotionEvent.ACTION_DOWN:\n            \t//Scroller\n                // The cancel event will be sent once the position is moved.\n                // So let the event pass to children.\n                // fix #93, #102\n                dispatchTouchEventSupper(e);\n                return true;//truechildACTION_CANCEL\n\n            case MotionEvent.ACTION_MOVE:\n                mLastMoveEvent = e; //\n                mPtrIndicator.onMove(e.getX(), e.getY());\n                float offsetX = mPtrIndicator.getOffsetX();\n                float offsetY = mPtrIndicator.getOffsetY();\n               \n\n                boolean moveDown = offsetY > 0;\n                boolean moveUp = !moveDown;\n                boolean canMoveUp = mPtrIndicator.hasLeftStartPosition();\n\n                // disable move when header not reach top\n                if (moveDown && mPtrHandler != null && !mPtrHandler.checkCanDoRefresh(this, mContent, mHeaderView)) {\n                    return dispatchTouchEventSupper(e);\n                }\n\n                if ((moveUp && canMoveUp) || moveDown) {\n                    movePos(offsetY); //\n                    return true;// ACTION_UP\n                }\n        }\n        return dispatchTouchEventSupper(e);\n    }\n\n```\n\n\n**ACTION_DOWN** : TouchEventmPtrIndicatorptrACTION_DOWNEvent.getYposition(0contentViewACTION_DOWNgetY)Scroller mScroller.forceFinished(true)()onRelease(true)onReleaseACTION_UP\n\n**ACTION_MOVE** : mPtrIndicatormPtrIndicatorget(mDisableWhenHorizontalMoveViewPagerreturn super)\n\n```java\n\tboolean moveDown = offsetY > 0; EventymptrIndicatoryoffset >0,moveDown\n\tboolean moveUp = !moveDown;\n\tboolean canMoveUp = mPtrIndicator.hasLeftStartPosition()// Eventy0\n```\nmPtrHandlerDoRefresh,ChildView\n\n>  return PtrDefaultHandler.checkContentCanBePulledDown(frame, content, header);\n\nViewCompat.canScollVerticallyAbstractListViewgetFirstVisiblePositionAdapterView\ntrueView:\n(moveUp && canMoveUp)(moveDown),return trueACTION_MOVE_ACTION_UPdispatchTouchEvent\n\n```java\n  private void updatePos(int change) {\n       \n\n        boolean isUnderTouch = mPtrIndicator.isUnderTouch();\n\n        // once moved, cancel event will be sent to child\n        if (isUnderTouch && !mHasSendCancelEvent && mPtrIndicator.hasMovedAfterPressedDown()) {\n            mHasSendCancelEvent = true;\n            sendCancelEvent();\n        }\n\n        // leave initiated position or just refresh complete\n        if ((mPtrIndicator.hasJustLeftStartPosition() && mStatus == PTR_STATUS_INIT) ||\n                (mPtrIndicator.goDownCrossFinishPosition() && mStatus == PTR_STATUS_COMPLETE && isEnabledNextPtrAtOnce())) {\n\n            mStatus = PTR_STATUS_PREPARE;\n            mPtrUIHandlerHolder.onUIRefreshPrepare(this);//0HolderHolderUIHandlerHolder(next)(Message)HolderUIHanlder(addHandler)\n            //**0STATUS_PREPARED**\n        }\n\n        // back to initiated position\n        if (mPtrIndicator.hasJustBackToStartPosition()) {\n            tryToNotifyReset();\n            //**0UIHandleronUIReset(),STATUS_INIT**\n            //\n            // recover event to childrenACTION_MOVEACTION_DOWN\n            if (isUnderTouch) {\n                sendDownEvent();\n            }\n        }\n\n        // Pull to Refresh\n        if (mStatus == PTR_STATUS_PREPARE) {//0   HeadView\n            // reach fresh height while moving from top to bottom\n            if (isUnderTouch && !isAutoRefresh() && mPullToRefresh  // ptr\n                    && mPtrIndicator.crossRefreshLineFromTopToBottom()) {\n                tryToPerformRefresh();\n            }\n            // reach header height while auto refresh\n            if (performAutoRefreshButLater() && mPtrIndicator.hasJustReachedHeaderHeightFromTopToBottom()) {//headerView\n                tryToPerformRefresh();\n            }\n        }\n        //tryToPerformRefresh()mPtrIndicator.isOverOffsetToRefresh()STATUS_LOADINGrun mPtrUIHandlerHolder.onUIRefreshBegin(this);mPtrHandler.onRefreshBegin(this);UIHandleronInFlateFinishHolderUIHandler,HanldleUIfacade\n\n\n        // ViewViewX,Y(X = left+translationX;Y = top+translationY) \n        mHeaderView.offsetTopAndBottom(change);\n        if (!isPinContent()) {\n            mContent.offsetTopAndBottom(change);\n        }\n        invalidate();??\n\n        //UIHandlerHoldermUIHandlermContentmHeaderView\n        if (mPtrUIHandlerHolder.hasHandler()) {\n            mPtrUIHandlerHolder.onUIPositionChange(this, isUnderTouch, mStatus, mPtrIndicator);\n        }\n        onPositionChange(isUnderTouch, mStatus, mPtrIndicator);//onPositionChange\n    }\n```\nACTION_MOVESTATUSMOVEptrstatusptrheadrViewchildViewUIHanlderptrcontentViewxmlresistance**statusSTATUS_PREPAREDSTATUS_LOADING**\n\n\n**ACTION_UP** mPtrIndicatormPressedfalse>0contentView\"\"onRelease(false)false(git log)OnRelease:\n```java\n  private void onRelease(boolean stayForLoading) {\n\n        tryToPerformRefresh();//status!=STATUS_PREPAREDreturn falseperformRefreshptr\n\n        if (mStatus == PTR_STATUS_LOADING) {\n            // keep header for fresh\n            if (mKeepHeaderWhenRefresh) {\n                // scroll header back\n                if (mPtrIndicator.isOverOffsetToKeepHeaderWhileLoading() && !stayForLoading) {//statyForLoadingfalse\n                    mScrollChecker.tryToScrollTo(mPtrIndicator.getOffsetToKeepHeaderWhileLoading(), mDurationToClose);//postrunnablerunACTION_MOVEmovePosUIHandlerUIHandlerHolder\n                } else {\n                    // do nothing\n                }\n            } else {\n                tryScrollBackToTopWhileLoading();//0updatPosSTATUSSTATUS_INITSTATUS_PREPARED\n            }\n        } else {\n            if (mStatus == PTR_STATUS_COMPLETE) {//STATUS_COMPLETErefreshComplete public SwipeRefreshLayoutsetRefreshing()\n                notifyUIRefreshComplete(false);\n            } else {\n                tryScrollBackToTopAbortRefresh();\n            }\n        }\n    }\n```\n\nptrgettersetterDemo\n\n\n### 3. \nptrViewGroupdispatchTouchEventgettersetterView\n\n\n\n\n\n","slug":"2016-10-24-a-peek-on-pull-to-refresh","published":1,"updated":"2017-04-23T10:50:45.703Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj50afgvf000bi4vrjn3mqp4b","content":"<p> Chris Banes<a href=\"https://github.com/chrisbanes/Android-PullToRefresh\">Pull-To-Refresh</a>Deprecated<a href=\"https://github.com/liaohuqiu/android-Ultra-Pull-To-Refresh\">android-Ultra-pull-toRefresh</a></p>\n<p> <img src=\"http://odzl05jxx.bkt.clouddn.com/687474703a2f2f692e696d6775722e636f6d2f4766746846417a2e706e67.png\" alt=\"fork\"></p>\n<p> DemoswipeRefreshLayout<a href=\"https://github.com/liaohuqiu/android-Ultra-Pull-To-Refresh\">android-Ultra-pulltoRefresh</a><br> <a id=\"more\"></a></p>\n<h3 id=\"1-Demo\"><a href=\"#1-Demo\" class=\"headerlink\" title=\"1. Demo\"></a>1. Demo</h3><p>github clonegradlecompile sdk versionDemo.<br>MainActivity PtrDemoHomeFragment,onCreateViewViewxml<br>fragment_ptr_home.xml<br><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">LinearLayout</span> <span class=\"attr\">xmlns:android</span>=<span class=\"string\">\"http://schemas.android.com/apk/res/android\"</span></div><div class=\"line\">    <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">    <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">    <span class=\"attr\">android:orientation</span>=<span class=\"string\">\"vertical\"</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">in.srain.cube.views.ptr.PtrFrameLayout</span></div><div class=\"line\">        <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/fragment_ptr_home_ptr_frame\"</span></div><div class=\"line\">        <span class=\"attr\">xmlns:cube_ptr</span>=<span class=\"string\">\"http://schemas.android.com/apk/res-auto\"</span></div><div class=\"line\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">        <span class=\"attr\">cube_ptr:ptr_duration_to_close</span>=<span class=\"string\">\"200\"</span></div><div class=\"line\">        <span class=\"attr\">cube_ptr:ptr_duration_to_close_header</span>=<span class=\"string\">\"1000\"</span></div><div class=\"line\">        <span class=\"attr\">cube_ptr:ptr_keep_header_when_refresh</span>=<span class=\"string\">\"true\"</span></div><div class=\"line\">        <span class=\"attr\">cube_ptr:ptr_pull_to_fresh</span>=<span class=\"string\">\"false\"</span></div><div class=\"line\">        <span class=\"attr\">cube_ptr:ptr_ratio_of_header_height_to_refresh</span>=<span class=\"string\">\"1.2\"</span></div><div class=\"line\">        <span class=\"attr\">cube_ptr:ptr_resistance</span>=<span class=\"string\">\"1.7\"</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">ScrollView</span></div><div class=\"line\">            <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/fragment_block_menu_scroll_view\"</span></div><div class=\"line\">            <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">            <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">            <span class=\"attr\">android:background</span>=<span class=\"string\">\"@color/cube_mints_white\"</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">in.srain.cube.views.block.BlockListView</span></div><div class=\"line\">                <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/fragment_block_menu_block_list\"</span></div><div class=\"line\">                <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">                <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"wrap_content\"</span></div><div class=\"line\">                <span class=\"attr\">android:padding</span>=<span class=\"string\">\"@dimen/cube_mints_content_view_padding\"</span> /&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">ScrollView</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">in.srain.cube.views.ptr.PtrFrameLayout</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">LinearLayout</span>&gt;</span></div></pre></td></tr></table></figure></p>\n<p>ptrFrameLayout</p>\n<h3 id=\"2-PtrFrameLayout\"><a href=\"#2-PtrFrameLayout\" class=\"headerlink\" title=\"2. PtrFrameLayout\"></a>2. PtrFrameLayout</h3><p> </p>\n<blockquote>\n<p>This layout view for Pull to Refresh(Ptr) support all of the view, you can contain everything you want.<br>  support: pull to refresh / release to refresh / auto refresh / keep header view while refreshing / hide header view while refreshing<br>  It defines {@link in.srain.cube.views.ptr.PtrUIHandler}, which allows you customize the UI easily.</p>\n</blockquote>\n<p>View</p>\n<p></p>\n<ol>\n<li><strong></strong></li>\n</ol>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PtrFrameLayout</span> <span class=\"keyword\">extends</span> <span class=\"title\">ViewGroup</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\"> <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">PtrFrameLayout</span><span class=\"params\">(Context context, AttributeSet attrs, <span class=\"keyword\">int</span> defStyle)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>(context, attrs, defStyle);</div><div class=\"line\">        <span class=\"comment\">//</span></div><div class=\"line\">        TypedArray arr = context.obtainStyledAttributes(attrs, R.styleable.PtrFrameLayout, <span class=\"number\">0</span>, <span class=\"number\">0</span>);</div><div class=\"line\">        <span class=\"keyword\">if</span> (arr != <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">            mHeaderId = arr.getResourceId(R.styleable.PtrFrameLayout_ptr_header, mHeaderId); <span class=\"comment\">// HeaderViewlayoutid</span></div><div class=\"line\">            mContainerId = arr.getResourceId(R.styleable.PtrFrameLayout_ptr_content, mContainerId); <span class=\"comment\">// contentViewlayoutid</span></div><div class=\"line\">            mDurationToClose = arr.getInt(R.styleable.PtrFrameLayout_ptr_duration_to_close, mDurationToClose);<span class=\"comment\">// HeaderView</span></div><div class=\"line\">            mDurationToCloseHeader = arr.getInt(R.styleable.PtrFrameLayout_ptr_duration_to_close_header, mDurationToCloseHeader);</div><div class=\"line\">            <span class=\"keyword\">float</span> ratio = mPtrIndicator.getRatioOfHeaderToHeightRefresh();</div><div class=\"line\">            ratio = arr.getFloat(R.styleable.PtrFrameLayout_ptr_ratio_of_header_height_to_refresh, ratio);</div><div class=\"line\">            mKeepHeaderWhenRefresh = arr.getBoolean(R.styleable.PtrFrameLayout_ptr_keep_header_when_refresh, mKeepHeaderWhenRefresh);</div><div class=\"line\">            mPullToRefresh = arr.getBoolean(R.styleable.PtrFrameLayout_ptr_pull_to_fresh, mPullToRefresh);</div><div class=\"line\">            arr.recycle();</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"comment\">//ViewConfigurationmTouchSlop</span></div><div class=\"line\">        <span class=\"keyword\">final</span> ViewConfiguration conf = ViewConfiguration.get(getContext());</div><div class=\"line\">        mPagingTouchSlop = conf.getScaledTouchSlop() * <span class=\"number\">2</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>xml</p>\n<ol>\n<li><strong>onFinishInflate</strong><br>inflate xmlchildView<br>PtrFrameLayout</li>\n</ol>\n<ul>\n<li>ChildViewchildCount &gt;2 </li>\n<li>child(childCount=2)<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//</span></div><div class=\"line\"><span class=\"keyword\">if</span> (child1 <span class=\"keyword\">instanceof</span> PtrUIHandler) &#123;</div><div class=\"line\">                    mHeaderView = child1;</div><div class=\"line\">                    mContent = child2;</div><div class=\"line\">                &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (child2 <span class=\"keyword\">instanceof</span> PtrUIHandler) &#123;</div><div class=\"line\">                    mHeaderView = child2;</div><div class=\"line\">                    mContent = child1;</div><div class=\"line\">                &#125; </div><div class=\"line\"><span class=\"comment\">//</span></div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>ptrUIHandler<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">PtrUIHandler</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</div><div class=\"line\">     * When the content view has reached top and refresh has been completed, view will be reset.</div><div class=\"line\">     *</div><div class=\"line\">     * <span class=\"doctag\">@param</span> frame</div><div class=\"line\">     */</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onUIReset</span><span class=\"params\">(PtrFrameLayout frame)</span></span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</div><div class=\"line\">     * prepare for loading</div><div class=\"line\">     *</div><div class=\"line\">     * <span class=\"doctag\">@param</span> frame</div><div class=\"line\">     */</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onUIRefreshPrepare</span><span class=\"params\">(PtrFrameLayout frame)</span></span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</div><div class=\"line\">     * perform refreshing UI</div><div class=\"line\">     */</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onUIRefreshBegin</span><span class=\"params\">(PtrFrameLayout frame)</span></span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</div><div class=\"line\">     * perform UI after refresh</div><div class=\"line\">     */</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onUIRefreshComplete</span><span class=\"params\">(PtrFrameLayout frame)</span></span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onUIPositionChange</span><span class=\"params\">(PtrFrameLayout frame, <span class=\"keyword\">boolean</span> isUnderTouch, <span class=\"keyword\">byte</span> status, PtrIndicator ptrIndicator)</span></span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>(View)</p>\n<ol>\n<li><strong>onMeasure</strong><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">@Override</span></div><div class=\"line\">   <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onMeasure</span><span class=\"params\">(<span class=\"keyword\">int</span> widthMeasureSpec, <span class=\"keyword\">int</span> heightMeasureSpec)</span> </span>&#123;</div><div class=\"line\">       <span class=\"keyword\">super</span>.onMeasure(widthMeasureSpec, heightMeasureSpec);</div><div class=\"line\">       <span class=\"comment\">//...</span></div><div class=\"line\">        measureContentView(mContent, widthMeasureSpec, heightMeasureSpec);</div><div class=\"line\">   &#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">measureContentView</span><span class=\"params\">(View child,</div><div class=\"line\">                                   <span class=\"keyword\">int</span> parentWidthMeasureSpec,</div><div class=\"line\">                                   <span class=\"keyword\">int</span> parentHeightMeasureSpec)</span> </span>&#123;</div><div class=\"line\">       <span class=\"keyword\">final</span> MarginLayoutParams lp = (MarginLayoutParams) child.getLayoutParams();</div><div class=\"line\"></div><div class=\"line\">       <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> childWidthMeasureSpec = getChildMeasureSpec(parentWidthMeasureSpec,</div><div class=\"line\">               getPaddingLeft() + getPaddingRight() + lp.leftMargin + lp.rightMargin, lp.width);</div><div class=\"line\">       <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> childHeightMeasureSpec = getChildMeasureSpec(parentHeightMeasureSpec,</div><div class=\"line\">               getPaddingTop() + getPaddingBottom() + lp.topMargin, lp.height);</div><div class=\"line\"></div><div class=\"line\">       child.measure(childWidthMeasureSpec, childHeightMeasureSpec);</div><div class=\"line\">   &#125;</div></pre></td></tr></table></figure>\n</li>\n</ol>\n<p>measureContentView</p>\n<ol>\n<li><strong>onLayout</strong><br>LayoutParamsmargin,Top<blockquote>\n<p> int offset = mPtrIndicator.getCurrentPosY();</p>\n</blockquote>\n</li>\n</ol>\n<p>mPterIndicator<br>ptr</p>\n<ol>\n<li><strong>dispatchTouchEvent</strong><br>TouchEvent<br>:<blockquote>\n<p>ViewGroup.dispatchTouchEvent-ViewGroup.onInterceptTouchEventView.dispatchTouchEvent etc </p>\n</blockquote>\n</li>\n</ol>\n<p>TouchEvent<a href=\"http://www.jianshu.com/p/e99b5e8bd67b\"></a><br><br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">@Override</span></div><div class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">dispatchTouchEvent</span><span class=\"params\">(MotionEvent e)</span> </span>&#123;</div><div class=\"line\">   \t<span class=\"comment\">//.....</span></div><div class=\"line\">       <span class=\"keyword\">switch</span> (action) &#123;</div><div class=\"line\">           <span class=\"keyword\">case</span> MotionEvent.ACTION_UP:</div><div class=\"line\">           <span class=\"keyword\">case</span> MotionEvent.ACTION_CANCEL:</div><div class=\"line\">               <span class=\"keyword\">if</span> (mPtrIndicator.hasLeftStartPosition()) &#123;</div><div class=\"line\">                   onRelease(<span class=\"keyword\">false</span>); <span class=\"comment\">//</span></div><div class=\"line\">                   <span class=\"comment\">// ......</span></div><div class=\"line\">                   <span class=\"keyword\">return</span> dispatchTouchEventSupper(e);</div><div class=\"line\">               &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">                   <span class=\"keyword\">return</span> dispatchTouchEventSupper(e);</div><div class=\"line\">               &#125;</div><div class=\"line\"></div><div class=\"line\">           <span class=\"keyword\">case</span> MotionEvent.ACTION_DOWN:</div><div class=\"line\">           \t<span class=\"comment\">//Scroller</span></div><div class=\"line\">               <span class=\"comment\">// The cancel event will be sent once the position is moved.</span></div><div class=\"line\">               <span class=\"comment\">// So let the event pass to children.</span></div><div class=\"line\">               <span class=\"comment\">// fix #93, #102</span></div><div class=\"line\">               dispatchTouchEventSupper(e);</div><div class=\"line\">               <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;<span class=\"comment\">//truechildACTION_CANCEL</span></div><div class=\"line\"></div><div class=\"line\">           <span class=\"keyword\">case</span> MotionEvent.ACTION_MOVE:</div><div class=\"line\">               mLastMoveEvent = e; <span class=\"comment\">//</span></div><div class=\"line\">               mPtrIndicator.onMove(e.getX(), e.getY());</div><div class=\"line\">               <span class=\"keyword\">float</span> offsetX = mPtrIndicator.getOffsetX();</div><div class=\"line\">               <span class=\"keyword\">float</span> offsetY = mPtrIndicator.getOffsetY();</div><div class=\"line\">              </div><div class=\"line\"></div><div class=\"line\">               <span class=\"keyword\">boolean</span> moveDown = offsetY &gt; <span class=\"number\">0</span>;</div><div class=\"line\">               <span class=\"keyword\">boolean</span> moveUp = !moveDown;</div><div class=\"line\">               <span class=\"keyword\">boolean</span> canMoveUp = mPtrIndicator.hasLeftStartPosition();</div><div class=\"line\"></div><div class=\"line\">               <span class=\"comment\">// disable move when header not reach top</span></div><div class=\"line\">               <span class=\"keyword\">if</span> (moveDown &amp;&amp; mPtrHandler != <span class=\"keyword\">null</span> &amp;&amp; !mPtrHandler.checkCanDoRefresh(<span class=\"keyword\">this</span>, mContent, mHeaderView)) &#123;</div><div class=\"line\">                   <span class=\"keyword\">return</span> dispatchTouchEventSupper(e);</div><div class=\"line\">               &#125;</div><div class=\"line\"></div><div class=\"line\">               <span class=\"keyword\">if</span> ((moveUp &amp;&amp; canMoveUp) || moveDown) &#123;</div><div class=\"line\">                   movePos(offsetY); <span class=\"comment\">//</span></div><div class=\"line\">                   <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;<span class=\"comment\">// ACTION_UP</span></div><div class=\"line\">               &#125;</div><div class=\"line\">       &#125;</div><div class=\"line\">       <span class=\"keyword\">return</span> dispatchTouchEventSupper(e);</div><div class=\"line\">   &#125;</div></pre></td></tr></table></figure></p>\n<p></p>\n<p><strong>ACTION_DOWN</strong> : TouchEventmPtrIndicatorptrACTION_DOWNEvent.getYposition(0contentViewACTION_DOWNgetY)Scroller mScroller.forceFinished(true)()onRelease(true)onReleaseACTION_UP</p>\n<p><strong>ACTION_MOVE</strong> : mPtrIndicatormPtrIndicatorget(mDisableWhenHorizontalMoveViewPagerreturn super)<br><br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">boolean</span> moveDown = offsetY &gt; <span class=\"number\">0</span>; EventymptrIndicatoryoffset &gt;<span class=\"number\">0</span>,moveDown</div><div class=\"line\"><span class=\"keyword\">boolean</span> moveUp = !moveDown;</div><div class=\"line\"><span class=\"keyword\">boolean</span> canMoveUp = mPtrIndicator.hasLeftStartPosition()<span class=\"comment\">// Eventy0</span></div></pre></td></tr></table></figure></p>\n<p>mPtrHandlerDoRefresh,ChildView<br></p>\n<blockquote>\n<p> return PtrDefaultHandler.checkContentCanBePulledDown(frame, content, header);</p>\n</blockquote>\n<p>ViewCompat.canScollVerticallyAbstractListViewgetFirstVisiblePositionAdapterView<br>trueView:<br>(moveUp &amp;&amp; canMoveUp)(moveDown),return trueACTION_MOVE_ACTION_UPdispatchTouchEvent<br><br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">updatePos</span><span class=\"params\">(<span class=\"keyword\">int</span> change)</span> </span>&#123;</div><div class=\"line\">     </div><div class=\"line\"></div><div class=\"line\">      <span class=\"keyword\">boolean</span> isUnderTouch = mPtrIndicator.isUnderTouch();</div><div class=\"line\"></div><div class=\"line\">      <span class=\"comment\">// once moved, cancel event will be sent to child</span></div><div class=\"line\">      <span class=\"keyword\">if</span> (isUnderTouch &amp;&amp; !mHasSendCancelEvent &amp;&amp; mPtrIndicator.hasMovedAfterPressedDown()) &#123;</div><div class=\"line\">          mHasSendCancelEvent = <span class=\"keyword\">true</span>;</div><div class=\"line\">          sendCancelEvent();</div><div class=\"line\">      &#125;</div><div class=\"line\"></div><div class=\"line\">      <span class=\"comment\">// leave initiated position or just refresh complete</span></div><div class=\"line\">      <span class=\"keyword\">if</span> ((mPtrIndicator.hasJustLeftStartPosition() &amp;&amp; mStatus == PTR_STATUS_INIT) ||</div><div class=\"line\">              (mPtrIndicator.goDownCrossFinishPosition() &amp;&amp; mStatus == PTR_STATUS_COMPLETE &amp;&amp; isEnabledNextPtrAtOnce())) &#123;</div><div class=\"line\"></div><div class=\"line\">          mStatus = PTR_STATUS_PREPARE;</div><div class=\"line\">          mPtrUIHandlerHolder.onUIRefreshPrepare(<span class=\"keyword\">this</span>);<span class=\"comment\">//0HolderHolderUIHandlerHolder(next)(Message)HolderUIHanlder(addHandler)</span></div><div class=\"line\">          <span class=\"comment\">//**0STATUS_PREPARED**</span></div><div class=\"line\">      &#125;</div><div class=\"line\"></div><div class=\"line\">      <span class=\"comment\">// back to initiated position</span></div><div class=\"line\">      <span class=\"keyword\">if</span> (mPtrIndicator.hasJustBackToStartPosition()) &#123;</div><div class=\"line\">          tryToNotifyReset();</div><div class=\"line\">          <span class=\"comment\">//**0UIHandleronUIReset(),STATUS_INIT**</span></div><div class=\"line\">          <span class=\"comment\">//</span></div><div class=\"line\">          <span class=\"comment\">// recover event to childrenACTION_MOVEACTION_DOWN</span></div><div class=\"line\">          <span class=\"keyword\">if</span> (isUnderTouch) &#123;</div><div class=\"line\">              sendDownEvent();</div><div class=\"line\">          &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\"></div><div class=\"line\">      <span class=\"comment\">// Pull to Refresh</span></div><div class=\"line\">      <span class=\"keyword\">if</span> (mStatus == PTR_STATUS_PREPARE) &#123;<span class=\"comment\">//0   HeadView</span></div><div class=\"line\">          <span class=\"comment\">// reach fresh height while moving from top to bottom</span></div><div class=\"line\">          <span class=\"keyword\">if</span> (isUnderTouch &amp;&amp; !isAutoRefresh() &amp;&amp; mPullToRefresh  <span class=\"comment\">// ptr</span></div><div class=\"line\">                  &amp;&amp; mPtrIndicator.crossRefreshLineFromTopToBottom()) &#123;</div><div class=\"line\">              tryToPerformRefresh();</div><div class=\"line\">          &#125;</div><div class=\"line\">          <span class=\"comment\">// reach header height while auto refresh</span></div><div class=\"line\">          <span class=\"keyword\">if</span> (performAutoRefreshButLater() &amp;&amp; mPtrIndicator.hasJustReachedHeaderHeightFromTopToBottom()) &#123;<span class=\"comment\">//headerView</span></div><div class=\"line\">              tryToPerformRefresh();</div><div class=\"line\">          &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"comment\">//tryToPerformRefresh()mPtrIndicator.isOverOffsetToRefresh()STATUS_LOADINGrun mPtrUIHandlerHolder.onUIRefreshBegin(this);mPtrHandler.onRefreshBegin(this);UIHandleronInFlateFinishHolderUIHandler,HanldleUIfacade</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">      <span class=\"comment\">// ViewViewX,Y(X = left+translationX;Y = top+translationY) </span></div><div class=\"line\">      mHeaderView.offsetTopAndBottom(change);</div><div class=\"line\">      <span class=\"keyword\">if</span> (!isPinContent()) &#123;</div><div class=\"line\">          mContent.offsetTopAndBottom(change);</div><div class=\"line\">      &#125;</div><div class=\"line\">      invalidate();??</div><div class=\"line\"></div><div class=\"line\">      <span class=\"comment\">//UIHandlerHoldermUIHandlermContentmHeaderView</span></div><div class=\"line\">      <span class=\"keyword\">if</span> (mPtrUIHandlerHolder.hasHandler()) &#123;</div><div class=\"line\">          mPtrUIHandlerHolder.onUIPositionChange(<span class=\"keyword\">this</span>, isUnderTouch, mStatus, mPtrIndicator);</div><div class=\"line\">      &#125;</div><div class=\"line\">      onPositionChange(isUnderTouch, mStatus, mPtrIndicator);<span class=\"comment\">//onPositionChange</span></div><div class=\"line\">  &#125;</div></pre></td></tr></table></figure></p>\n<p>ACTION_MOVESTATUSMOVEptrstatusptrheadrViewchildViewUIHanlderptrcontentViewxmlresistance<strong>statusSTATUS_PREPAREDSTATUS_LOADING</strong></p>\n<p><strong>ACTION_UP</strong> mPtrIndicatormPressedfalse&gt;0contentViewonRelease(false)false(git log)OnRelease:<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">onRelease</span><span class=\"params\">(<span class=\"keyword\">boolean</span> stayForLoading)</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">      tryToPerformRefresh();<span class=\"comment\">//status!=STATUS_PREPAREDreturn falseperformRefreshptr</span></div><div class=\"line\"></div><div class=\"line\">      <span class=\"keyword\">if</span> (mStatus == PTR_STATUS_LOADING) &#123;</div><div class=\"line\">          <span class=\"comment\">// keep header for fresh</span></div><div class=\"line\">          <span class=\"keyword\">if</span> (mKeepHeaderWhenRefresh) &#123;</div><div class=\"line\">              <span class=\"comment\">// scroll header back</span></div><div class=\"line\">              <span class=\"keyword\">if</span> (mPtrIndicator.isOverOffsetToKeepHeaderWhileLoading() &amp;&amp; !stayForLoading) &#123;<span class=\"comment\">//statyForLoadingfalse</span></div><div class=\"line\">                  mScrollChecker.tryToScrollTo(mPtrIndicator.getOffsetToKeepHeaderWhileLoading(), mDurationToClose);<span class=\"comment\">//postrunnablerunACTION_MOVEmovePosUIHandlerUIHandlerHolder</span></div><div class=\"line\">              &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">                  <span class=\"comment\">// do nothing</span></div><div class=\"line\">              &#125;</div><div class=\"line\">          &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">              tryScrollBackToTopWhileLoading();<span class=\"comment\">//0updatPosSTATUSSTATUS_INITSTATUS_PREPARED</span></div><div class=\"line\">          &#125;</div><div class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">          <span class=\"keyword\">if</span> (mStatus == PTR_STATUS_COMPLETE) &#123;<span class=\"comment\">//STATUS_COMPLETErefreshComplete public SwipeRefreshLayoutsetRefreshing()</span></div><div class=\"line\">              notifyUIRefreshComplete(<span class=\"keyword\">false</span>);</div><div class=\"line\">          &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">              tryScrollBackToTopAbortRefresh();</div><div class=\"line\">          &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\">  &#125;</div></pre></td></tr></table></figure></p>\n<p>ptrgettersetterDemo</p>\n<h3 id=\"3-\"><a href=\"#3-\" class=\"headerlink\" title=\"3. \"></a>3. </h3><p>ptrViewGroupdispatchTouchEventgettersetterView</p>\n","excerpt":"<p> Chris Banes<a href=\"https://github.com/chrisbanes/Android-PullToRefresh\">Pull-To-Refresh</a>Deprecated<a href=\"https://github.com/liaohuqiu/android-Ultra-Pull-To-Refresh\">android-Ultra-pull-toRefresh</a></p>\n<p> <img src=\"http://odzl05jxx.bkt.clouddn.com/687474703a2f2f692e696d6775722e636f6d2f4766746846417a2e706e67.png\" alt=\"fork\"></p>\n<p> DemoswipeRefreshLayout<a href=\"https://github.com/liaohuqiu/android-Ultra-Pull-To-Refresh\">android-Ultra-pulltoRefresh</a><br>","more":"</p>\n<h3 id=\"1-Demo\"><a href=\"#1-Demo\" class=\"headerlink\" title=\"1. Demo\"></a>1. Demo</h3><p>github clonegradlecompile sdk versionDemo.<br>MainActivity PtrDemoHomeFragment,onCreateViewViewxml<br>fragment_ptr_home.xml<br><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">LinearLayout</span> <span class=\"attr\">xmlns:android</span>=<span class=\"string\">\"http://schemas.android.com/apk/res/android\"</span></div><div class=\"line\">    <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">    <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">    <span class=\"attr\">android:orientation</span>=<span class=\"string\">\"vertical\"</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">in.srain.cube.views.ptr.PtrFrameLayout</span></div><div class=\"line\">        <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/fragment_ptr_home_ptr_frame\"</span></div><div class=\"line\">        <span class=\"attr\">xmlns:cube_ptr</span>=<span class=\"string\">\"http://schemas.android.com/apk/res-auto\"</span></div><div class=\"line\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">        <span class=\"attr\">cube_ptr:ptr_duration_to_close</span>=<span class=\"string\">\"200\"</span></div><div class=\"line\">        <span class=\"attr\">cube_ptr:ptr_duration_to_close_header</span>=<span class=\"string\">\"1000\"</span></div><div class=\"line\">        <span class=\"attr\">cube_ptr:ptr_keep_header_when_refresh</span>=<span class=\"string\">\"true\"</span></div><div class=\"line\">        <span class=\"attr\">cube_ptr:ptr_pull_to_fresh</span>=<span class=\"string\">\"false\"</span></div><div class=\"line\">        <span class=\"attr\">cube_ptr:ptr_ratio_of_header_height_to_refresh</span>=<span class=\"string\">\"1.2\"</span></div><div class=\"line\">        <span class=\"attr\">cube_ptr:ptr_resistance</span>=<span class=\"string\">\"1.7\"</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">ScrollView</span></div><div class=\"line\">            <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/fragment_block_menu_scroll_view\"</span></div><div class=\"line\">            <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">            <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">            <span class=\"attr\">android:background</span>=<span class=\"string\">\"@color/cube_mints_white\"</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">in.srain.cube.views.block.BlockListView</span></div><div class=\"line\">                <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/fragment_block_menu_block_list\"</span></div><div class=\"line\">                <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">                <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"wrap_content\"</span></div><div class=\"line\">                <span class=\"attr\">android:padding</span>=<span class=\"string\">\"@dimen/cube_mints_content_view_padding\"</span> /&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">ScrollView</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">in.srain.cube.views.ptr.PtrFrameLayout</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">LinearLayout</span>&gt;</span></div></pre></td></tr></table></figure></p>\n<p>ptrFrameLayout</p>\n<h3 id=\"2-PtrFrameLayout\"><a href=\"#2-PtrFrameLayout\" class=\"headerlink\" title=\"2. PtrFrameLayout\"></a>2. PtrFrameLayout</h3><p> </p>\n<blockquote>\n<p>This layout view for Pull to Refresh(Ptr) support all of the view, you can contain everything you want.<br>  support: pull to refresh / release to refresh / auto refresh / keep header view while refreshing / hide header view while refreshing<br>  It defines {@link in.srain.cube.views.ptr.PtrUIHandler}, which allows you customize the UI easily.</p>\n</blockquote>\n<p>View</p>\n<p></p>\n<ol>\n<li><strong></strong></li>\n</ol>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PtrFrameLayout</span> <span class=\"keyword\">extends</span> <span class=\"title\">ViewGroup</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\"> <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">PtrFrameLayout</span><span class=\"params\">(Context context, AttributeSet attrs, <span class=\"keyword\">int</span> defStyle)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>(context, attrs, defStyle);</div><div class=\"line\">        <span class=\"comment\">//</span></div><div class=\"line\">        TypedArray arr = context.obtainStyledAttributes(attrs, R.styleable.PtrFrameLayout, <span class=\"number\">0</span>, <span class=\"number\">0</span>);</div><div class=\"line\">        <span class=\"keyword\">if</span> (arr != <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">            mHeaderId = arr.getResourceId(R.styleable.PtrFrameLayout_ptr_header, mHeaderId); <span class=\"comment\">// HeaderViewlayoutid</span></div><div class=\"line\">            mContainerId = arr.getResourceId(R.styleable.PtrFrameLayout_ptr_content, mContainerId); <span class=\"comment\">// contentViewlayoutid</span></div><div class=\"line\">            mDurationToClose = arr.getInt(R.styleable.PtrFrameLayout_ptr_duration_to_close, mDurationToClose);<span class=\"comment\">// HeaderView</span></div><div class=\"line\">            mDurationToCloseHeader = arr.getInt(R.styleable.PtrFrameLayout_ptr_duration_to_close_header, mDurationToCloseHeader);</div><div class=\"line\">            <span class=\"keyword\">float</span> ratio = mPtrIndicator.getRatioOfHeaderToHeightRefresh();</div><div class=\"line\">            ratio = arr.getFloat(R.styleable.PtrFrameLayout_ptr_ratio_of_header_height_to_refresh, ratio);</div><div class=\"line\">            mKeepHeaderWhenRefresh = arr.getBoolean(R.styleable.PtrFrameLayout_ptr_keep_header_when_refresh, mKeepHeaderWhenRefresh);</div><div class=\"line\">            mPullToRefresh = arr.getBoolean(R.styleable.PtrFrameLayout_ptr_pull_to_fresh, mPullToRefresh);</div><div class=\"line\">            arr.recycle();</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"comment\">//ViewConfigurationmTouchSlop</span></div><div class=\"line\">        <span class=\"keyword\">final</span> ViewConfiguration conf = ViewConfiguration.get(getContext());</div><div class=\"line\">        mPagingTouchSlop = conf.getScaledTouchSlop() * <span class=\"number\">2</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>xml</p>\n<ol>\n<li><strong>onFinishInflate</strong><br>inflate xmlchildView<br>PtrFrameLayout</li>\n</ol>\n<ul>\n<li>ChildViewchildCount &gt;2 </li>\n<li>child(childCount=2)<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//</span></div><div class=\"line\"><span class=\"keyword\">if</span> (child1 <span class=\"keyword\">instanceof</span> PtrUIHandler) &#123;</div><div class=\"line\">                    mHeaderView = child1;</div><div class=\"line\">                    mContent = child2;</div><div class=\"line\">                &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (child2 <span class=\"keyword\">instanceof</span> PtrUIHandler) &#123;</div><div class=\"line\">                    mHeaderView = child2;</div><div class=\"line\">                    mContent = child1;</div><div class=\"line\">                &#125; </div><div class=\"line\"><span class=\"comment\">//</span></div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>ptrUIHandler<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">PtrUIHandler</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</div><div class=\"line\">     * When the content view has reached top and refresh has been completed, view will be reset.</div><div class=\"line\">     *</div><div class=\"line\">     * <span class=\"doctag\">@param</span> frame</div><div class=\"line\">     */</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onUIReset</span><span class=\"params\">(PtrFrameLayout frame)</span></span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</div><div class=\"line\">     * prepare for loading</div><div class=\"line\">     *</div><div class=\"line\">     * <span class=\"doctag\">@param</span> frame</div><div class=\"line\">     */</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onUIRefreshPrepare</span><span class=\"params\">(PtrFrameLayout frame)</span></span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</div><div class=\"line\">     * perform refreshing UI</div><div class=\"line\">     */</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onUIRefreshBegin</span><span class=\"params\">(PtrFrameLayout frame)</span></span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</div><div class=\"line\">     * perform UI after refresh</div><div class=\"line\">     */</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onUIRefreshComplete</span><span class=\"params\">(PtrFrameLayout frame)</span></span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onUIPositionChange</span><span class=\"params\">(PtrFrameLayout frame, <span class=\"keyword\">boolean</span> isUnderTouch, <span class=\"keyword\">byte</span> status, PtrIndicator ptrIndicator)</span></span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>(View)</p>\n<ol>\n<li><strong>onMeasure</strong><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">@Override</span></div><div class=\"line\">   <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onMeasure</span><span class=\"params\">(<span class=\"keyword\">int</span> widthMeasureSpec, <span class=\"keyword\">int</span> heightMeasureSpec)</span> </span>&#123;</div><div class=\"line\">       <span class=\"keyword\">super</span>.onMeasure(widthMeasureSpec, heightMeasureSpec);</div><div class=\"line\">       <span class=\"comment\">//...</span></div><div class=\"line\">        measureContentView(mContent, widthMeasureSpec, heightMeasureSpec);</div><div class=\"line\">   &#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">measureContentView</span><span class=\"params\">(View child,</div><div class=\"line\">                                   <span class=\"keyword\">int</span> parentWidthMeasureSpec,</div><div class=\"line\">                                   <span class=\"keyword\">int</span> parentHeightMeasureSpec)</span> </span>&#123;</div><div class=\"line\">       <span class=\"keyword\">final</span> MarginLayoutParams lp = (MarginLayoutParams) child.getLayoutParams();</div><div class=\"line\"></div><div class=\"line\">       <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> childWidthMeasureSpec = getChildMeasureSpec(parentWidthMeasureSpec,</div><div class=\"line\">               getPaddingLeft() + getPaddingRight() + lp.leftMargin + lp.rightMargin, lp.width);</div><div class=\"line\">       <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> childHeightMeasureSpec = getChildMeasureSpec(parentHeightMeasureSpec,</div><div class=\"line\">               getPaddingTop() + getPaddingBottom() + lp.topMargin, lp.height);</div><div class=\"line\"></div><div class=\"line\">       child.measure(childWidthMeasureSpec, childHeightMeasureSpec);</div><div class=\"line\">   &#125;</div></pre></td></tr></table></figure>\n</li>\n</ol>\n<p>measureContentView</p>\n<ol>\n<li><strong>onLayout</strong><br>LayoutParamsmargin,Top<blockquote>\n<p> int offset = mPtrIndicator.getCurrentPosY();</p>\n</blockquote>\n</li>\n</ol>\n<p>mPterIndicator<br>ptr</p>\n<ol>\n<li><strong>dispatchTouchEvent</strong><br>TouchEvent<br>:<blockquote>\n<p>ViewGroup.dispatchTouchEvent-ViewGroup.onInterceptTouchEventView.dispatchTouchEvent etc </p>\n</blockquote>\n</li>\n</ol>\n<p>TouchEvent<a href=\"http://www.jianshu.com/p/e99b5e8bd67b\"></a><br><br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">@Override</span></div><div class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">dispatchTouchEvent</span><span class=\"params\">(MotionEvent e)</span> </span>&#123;</div><div class=\"line\">   \t<span class=\"comment\">//.....</span></div><div class=\"line\">       <span class=\"keyword\">switch</span> (action) &#123;</div><div class=\"line\">           <span class=\"keyword\">case</span> MotionEvent.ACTION_UP:</div><div class=\"line\">           <span class=\"keyword\">case</span> MotionEvent.ACTION_CANCEL:</div><div class=\"line\">               <span class=\"keyword\">if</span> (mPtrIndicator.hasLeftStartPosition()) &#123;</div><div class=\"line\">                   onRelease(<span class=\"keyword\">false</span>); <span class=\"comment\">//</span></div><div class=\"line\">                   <span class=\"comment\">// ......</span></div><div class=\"line\">                   <span class=\"keyword\">return</span> dispatchTouchEventSupper(e);</div><div class=\"line\">               &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">                   <span class=\"keyword\">return</span> dispatchTouchEventSupper(e);</div><div class=\"line\">               &#125;</div><div class=\"line\"></div><div class=\"line\">           <span class=\"keyword\">case</span> MotionEvent.ACTION_DOWN:</div><div class=\"line\">           \t<span class=\"comment\">//Scroller</span></div><div class=\"line\">               <span class=\"comment\">// The cancel event will be sent once the position is moved.</span></div><div class=\"line\">               <span class=\"comment\">// So let the event pass to children.</span></div><div class=\"line\">               <span class=\"comment\">// fix #93, #102</span></div><div class=\"line\">               dispatchTouchEventSupper(e);</div><div class=\"line\">               <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;<span class=\"comment\">//truechildACTION_CANCEL</span></div><div class=\"line\"></div><div class=\"line\">           <span class=\"keyword\">case</span> MotionEvent.ACTION_MOVE:</div><div class=\"line\">               mLastMoveEvent = e; <span class=\"comment\">//</span></div><div class=\"line\">               mPtrIndicator.onMove(e.getX(), e.getY());</div><div class=\"line\">               <span class=\"keyword\">float</span> offsetX = mPtrIndicator.getOffsetX();</div><div class=\"line\">               <span class=\"keyword\">float</span> offsetY = mPtrIndicator.getOffsetY();</div><div class=\"line\">              </div><div class=\"line\"></div><div class=\"line\">               <span class=\"keyword\">boolean</span> moveDown = offsetY &gt; <span class=\"number\">0</span>;</div><div class=\"line\">               <span class=\"keyword\">boolean</span> moveUp = !moveDown;</div><div class=\"line\">               <span class=\"keyword\">boolean</span> canMoveUp = mPtrIndicator.hasLeftStartPosition();</div><div class=\"line\"></div><div class=\"line\">               <span class=\"comment\">// disable move when header not reach top</span></div><div class=\"line\">               <span class=\"keyword\">if</span> (moveDown &amp;&amp; mPtrHandler != <span class=\"keyword\">null</span> &amp;&amp; !mPtrHandler.checkCanDoRefresh(<span class=\"keyword\">this</span>, mContent, mHeaderView)) &#123;</div><div class=\"line\">                   <span class=\"keyword\">return</span> dispatchTouchEventSupper(e);</div><div class=\"line\">               &#125;</div><div class=\"line\"></div><div class=\"line\">               <span class=\"keyword\">if</span> ((moveUp &amp;&amp; canMoveUp) || moveDown) &#123;</div><div class=\"line\">                   movePos(offsetY); <span class=\"comment\">//</span></div><div class=\"line\">                   <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;<span class=\"comment\">// ACTION_UP</span></div><div class=\"line\">               &#125;</div><div class=\"line\">       &#125;</div><div class=\"line\">       <span class=\"keyword\">return</span> dispatchTouchEventSupper(e);</div><div class=\"line\">   &#125;</div></pre></td></tr></table></figure></p>\n<p></p>\n<p><strong>ACTION_DOWN</strong> : TouchEventmPtrIndicatorptrACTION_DOWNEvent.getYposition(0contentViewACTION_DOWNgetY)Scroller mScroller.forceFinished(true)()onRelease(true)onReleaseACTION_UP</p>\n<p><strong>ACTION_MOVE</strong> : mPtrIndicatormPtrIndicatorget(mDisableWhenHorizontalMoveViewPagerreturn super)<br><br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">boolean</span> moveDown = offsetY &gt; <span class=\"number\">0</span>; EventymptrIndicatoryoffset &gt;<span class=\"number\">0</span>,moveDown</div><div class=\"line\"><span class=\"keyword\">boolean</span> moveUp = !moveDown;</div><div class=\"line\"><span class=\"keyword\">boolean</span> canMoveUp = mPtrIndicator.hasLeftStartPosition()<span class=\"comment\">// Eventy0</span></div></pre></td></tr></table></figure></p>\n<p>mPtrHandlerDoRefresh,ChildView<br></p>\n<blockquote>\n<p> return PtrDefaultHandler.checkContentCanBePulledDown(frame, content, header);</p>\n</blockquote>\n<p>ViewCompat.canScollVerticallyAbstractListViewgetFirstVisiblePositionAdapterView<br>trueView:<br>(moveUp &amp;&amp; canMoveUp)(moveDown),return trueACTION_MOVE_ACTION_UPdispatchTouchEvent<br><br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">updatePos</span><span class=\"params\">(<span class=\"keyword\">int</span> change)</span> </span>&#123;</div><div class=\"line\">     </div><div class=\"line\"></div><div class=\"line\">      <span class=\"keyword\">boolean</span> isUnderTouch = mPtrIndicator.isUnderTouch();</div><div class=\"line\"></div><div class=\"line\">      <span class=\"comment\">// once moved, cancel event will be sent to child</span></div><div class=\"line\">      <span class=\"keyword\">if</span> (isUnderTouch &amp;&amp; !mHasSendCancelEvent &amp;&amp; mPtrIndicator.hasMovedAfterPressedDown()) &#123;</div><div class=\"line\">          mHasSendCancelEvent = <span class=\"keyword\">true</span>;</div><div class=\"line\">          sendCancelEvent();</div><div class=\"line\">      &#125;</div><div class=\"line\"></div><div class=\"line\">      <span class=\"comment\">// leave initiated position or just refresh complete</span></div><div class=\"line\">      <span class=\"keyword\">if</span> ((mPtrIndicator.hasJustLeftStartPosition() &amp;&amp; mStatus == PTR_STATUS_INIT) ||</div><div class=\"line\">              (mPtrIndicator.goDownCrossFinishPosition() &amp;&amp; mStatus == PTR_STATUS_COMPLETE &amp;&amp; isEnabledNextPtrAtOnce())) &#123;</div><div class=\"line\"></div><div class=\"line\">          mStatus = PTR_STATUS_PREPARE;</div><div class=\"line\">          mPtrUIHandlerHolder.onUIRefreshPrepare(<span class=\"keyword\">this</span>);<span class=\"comment\">//0HolderHolderUIHandlerHolder(next)(Message)HolderUIHanlder(addHandler)</span></div><div class=\"line\">          <span class=\"comment\">//**0STATUS_PREPARED**</span></div><div class=\"line\">      &#125;</div><div class=\"line\"></div><div class=\"line\">      <span class=\"comment\">// back to initiated position</span></div><div class=\"line\">      <span class=\"keyword\">if</span> (mPtrIndicator.hasJustBackToStartPosition()) &#123;</div><div class=\"line\">          tryToNotifyReset();</div><div class=\"line\">          <span class=\"comment\">//**0UIHandleronUIReset(),STATUS_INIT**</span></div><div class=\"line\">          <span class=\"comment\">//</span></div><div class=\"line\">          <span class=\"comment\">// recover event to childrenACTION_MOVEACTION_DOWN</span></div><div class=\"line\">          <span class=\"keyword\">if</span> (isUnderTouch) &#123;</div><div class=\"line\">              sendDownEvent();</div><div class=\"line\">          &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\"></div><div class=\"line\">      <span class=\"comment\">// Pull to Refresh</span></div><div class=\"line\">      <span class=\"keyword\">if</span> (mStatus == PTR_STATUS_PREPARE) &#123;<span class=\"comment\">//0   HeadView</span></div><div class=\"line\">          <span class=\"comment\">// reach fresh height while moving from top to bottom</span></div><div class=\"line\">          <span class=\"keyword\">if</span> (isUnderTouch &amp;&amp; !isAutoRefresh() &amp;&amp; mPullToRefresh  <span class=\"comment\">// ptr</span></div><div class=\"line\">                  &amp;&amp; mPtrIndicator.crossRefreshLineFromTopToBottom()) &#123;</div><div class=\"line\">              tryToPerformRefresh();</div><div class=\"line\">          &#125;</div><div class=\"line\">          <span class=\"comment\">// reach header height while auto refresh</span></div><div class=\"line\">          <span class=\"keyword\">if</span> (performAutoRefreshButLater() &amp;&amp; mPtrIndicator.hasJustReachedHeaderHeightFromTopToBottom()) &#123;<span class=\"comment\">//headerView</span></div><div class=\"line\">              tryToPerformRefresh();</div><div class=\"line\">          &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"comment\">//tryToPerformRefresh()mPtrIndicator.isOverOffsetToRefresh()STATUS_LOADINGrun mPtrUIHandlerHolder.onUIRefreshBegin(this);mPtrHandler.onRefreshBegin(this);UIHandleronInFlateFinishHolderUIHandler,HanldleUIfacade</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">      <span class=\"comment\">// ViewViewX,Y(X = left+translationX;Y = top+translationY) </span></div><div class=\"line\">      mHeaderView.offsetTopAndBottom(change);</div><div class=\"line\">      <span class=\"keyword\">if</span> (!isPinContent()) &#123;</div><div class=\"line\">          mContent.offsetTopAndBottom(change);</div><div class=\"line\">      &#125;</div><div class=\"line\">      invalidate();??</div><div class=\"line\"></div><div class=\"line\">      <span class=\"comment\">//UIHandlerHoldermUIHandlermContentmHeaderView</span></div><div class=\"line\">      <span class=\"keyword\">if</span> (mPtrUIHandlerHolder.hasHandler()) &#123;</div><div class=\"line\">          mPtrUIHandlerHolder.onUIPositionChange(<span class=\"keyword\">this</span>, isUnderTouch, mStatus, mPtrIndicator);</div><div class=\"line\">      &#125;</div><div class=\"line\">      onPositionChange(isUnderTouch, mStatus, mPtrIndicator);<span class=\"comment\">//onPositionChange</span></div><div class=\"line\">  &#125;</div></pre></td></tr></table></figure></p>\n<p>ACTION_MOVESTATUSMOVEptrstatusptrheadrViewchildViewUIHanlderptrcontentViewxmlresistance<strong>statusSTATUS_PREPAREDSTATUS_LOADING</strong></p>\n<p><strong>ACTION_UP</strong> mPtrIndicatormPressedfalse&gt;0contentViewonRelease(false)false(git log)OnRelease:<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">onRelease</span><span class=\"params\">(<span class=\"keyword\">boolean</span> stayForLoading)</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">      tryToPerformRefresh();<span class=\"comment\">//status!=STATUS_PREPAREDreturn falseperformRefreshptr</span></div><div class=\"line\"></div><div class=\"line\">      <span class=\"keyword\">if</span> (mStatus == PTR_STATUS_LOADING) &#123;</div><div class=\"line\">          <span class=\"comment\">// keep header for fresh</span></div><div class=\"line\">          <span class=\"keyword\">if</span> (mKeepHeaderWhenRefresh) &#123;</div><div class=\"line\">              <span class=\"comment\">// scroll header back</span></div><div class=\"line\">              <span class=\"keyword\">if</span> (mPtrIndicator.isOverOffsetToKeepHeaderWhileLoading() &amp;&amp; !stayForLoading) &#123;<span class=\"comment\">//statyForLoadingfalse</span></div><div class=\"line\">                  mScrollChecker.tryToScrollTo(mPtrIndicator.getOffsetToKeepHeaderWhileLoading(), mDurationToClose);<span class=\"comment\">//postrunnablerunACTION_MOVEmovePosUIHandlerUIHandlerHolder</span></div><div class=\"line\">              &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">                  <span class=\"comment\">// do nothing</span></div><div class=\"line\">              &#125;</div><div class=\"line\">          &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">              tryScrollBackToTopWhileLoading();<span class=\"comment\">//0updatPosSTATUSSTATUS_INITSTATUS_PREPARED</span></div><div class=\"line\">          &#125;</div><div class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">          <span class=\"keyword\">if</span> (mStatus == PTR_STATUS_COMPLETE) &#123;<span class=\"comment\">//STATUS_COMPLETErefreshComplete public SwipeRefreshLayoutsetRefreshing()</span></div><div class=\"line\">              notifyUIRefreshComplete(<span class=\"keyword\">false</span>);</div><div class=\"line\">          &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">              tryScrollBackToTopAbortRefresh();</div><div class=\"line\">          &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\">  &#125;</div></pre></td></tr></table></figure></p>\n<p>ptrgettersetterDemo</p>\n<h3 id=\"3-\"><a href=\"#3-\" class=\"headerlink\" title=\"3. \"></a>3. </h3><p>ptrViewGroupdispatchTouchEventgettersetterView</p>"},{"title":"Python 3 ","date":"2016-12-24T14:06:37.000Z","_content":"\n\n#### Python\n\n![implementing dumb features](http://odzl05jxx.bkt.clouddn.com/46ee54dd915d71da90e435703d4568fb.jpg?imageView2/2/w/600)\n\n<!-- more -->\n### 1. Python\n[](http://www.liaoxuefeng.com/)Python\n\n> CPythonCPUCCPU\n\n> \n\n> GIL\n\n[  Python](http://cuiqingcai.com/3325.html)\n```text\n1GIL\n\nGILGlobal Interpreter Lock()python\n\n2CPUCPU\n\nPython\n\nGIL\nsleeppython\nGIL\nGILGILpythonGILCPU\n\nPython2.xGILIOticks100ticksPythonGIL sys.setcheckinterval \n\nGILGILpython(GIL)CPUpython\n```\n\n### 2. packagecan't resolve XXX\n[no module named urllib2](http://stackoverflow.com/questions/2792650/python3-error-import-error-no-module-name-urllib2)\n\n> The urllib2 module has been split across several modules in Python 3 named urllib.request and urllib.error. The 2to3 tool will automatically adapt imports when converting your sources to Python 3.\n\nThis is what look like on py 2.7\n\n```python\nimport urllib2\nreq = urllib2.Request(url,headers=header)\nhtml = urllib2.urlopen(req)\nhtml_data = html.read\nhtml_path = etree.HTML(html_data)\t\n```   \n\non Python 3.X \n```python\nfrom urllib.request import urlopen\nfrom urllib.request import Request\n\nreq = Request(img_url, headers=headers)\nurlhtml = urlopen(req)\n```\n\n\n### 3. pip install XXXX \npackage pip install xxxx....\n#### if not working\n![](http://odzl05jxx.bkt.clouddn.com/Googling%20the%20Error%20Message.jpg?imageView2/2/w/500)\n\n\n### 4. Listtupledictset\n\n```python\n list   mylist = ['Tom','Jerry','Henry']\n        mylist[0] = 'Tom'\n\n tuple  mytuple = ('rock','pop','jazz')\n         mytuple[0] = 'rock' \n\n tuple\n\n dict: d={'name':'tom','job':'doctor','age',99}\n        d['name'] = 'tom'\n\n set:  s = set([1,2,3]) # list\n    >> s\n    {1,2,3}\n    set\n    setdictvalue(key)\n```\ntuplePythonTuple\n\n#### \nclass name should be cammelCase, Arguments,variable name should be lowercase\n\n\n```python\n for i in range(2, 5):\n        print(i)\n>>> result: 2 3 4 \n\n\n\ndef add_end(L=None):\n    if L is None:\n        L = []\n    L.append('END')\n    return L\n```\n\n##### \n\n\n\n```python\ndef sell(name,price,amount=1):\n    print(price*amount)\n\nsell('product',26)\nsell('product',26,2)\n\n>>> 26    \n>>> 52    \n```\n\n\n```python\ndef power(x, n=2): #n=2,strNone\n    s = 1\n    while n > 0:\n        n = n - 1\n        s = s * x\n    return s\n\npower(5) >> 25\npower(5,2) >>>25    \n```\n\n# *tuple\n```python\ndef calc(*numbers): #tuple\n    sum = 0\n    for n in numbers:\n        sum = sum + n * n\n    return sum\n\ncalc(1,2)\n\ncalc(2,3,5)    \n\nnums = [1,2,3]\ncal(*nums)#tuple\n```\n\n```python\ndef person(name, age, **kw):\n    print('name:', name, 'age:', age, 'other:', kw)\n\n>>> person('Michael', 30)\nname: Michael age: 30 other: {}\n\ndict    \n```\n\n```python\ndef shoppping(name,time,*,price,count)# price\n    print(price*count)\n\n>> shopping(john,0325,price=39,count=5)\n>> 195\n```\n\n\n### 5. \nChromerequestheadercookiesctrl+shift+R\n#### 5.1 Request, Urllib2 \n\n#### 5.2 UnicodeEncodeError: 'ascii' codec can't encode characters in position\n\n\n```\n# how to invoke this error\nb = \"this is english within ascii range\".encode('ascii')  # totally fine\n\ns = \"\".encode('ascii') \n# this will raise an error ,UnicodeEncodeError: 'ascii' codec can't encode characters in position 0-1: ordinal not in range(128)>\n\n\n\n print((b\"totally cool binary representation of english words within ascii range\").decode('ascii'))\n print((b\"totally cool binary cause utf-8 include ascii\").decode('utf-8'))\n # \n\n\n # eg.\nstring = \"\"\nbinary_string = b'\\xe4\\xbd\\xa0\\xe5\\xa5\\xbd\\xe5\\x95\\x8a'\nbinary_string_2_string = bstring.decode('utf-8')\n\n\ncode :\nprint(string)  \nprint(string.encode('utf-8'))\nprint(bstring2string)\nprint(bstring2string)\n    \nprint(which_instance_is_this(string))\nprint(which_instance_is_this(bstring))\nprint(which_instance_is_this(bstring2string))\n\n\noutputs:\n\nb'\\xe4\\xbd\\xa0\\xe5\\xa5\\xbd\\xe5\\x95\\x8a'\n \n\n\nis str\nis byte \nis str\n\n**Since Python 3.0, the language features a str type that contain Unicode characters, meaning any string created using \"unicode rocks!\", 'unicode rocks!', or the triple-quoted string syntax is stored as Unicode.**\n\nstrunicodeunicodechr(12345) integer1Unicode String\nord() unicode\n\n\nprint(chr(20320))   >>>> \nprint(ord(''))    >>>> 20320 #1string\n\nbinary to string is called decode ,string to binary is encode\nbytes.decode('utf-8')   <----> str.encode('utf-8')\n\nUnicodeEncodeError: 'ascii' codec can't encode characters in position\nstr.encode('ascii')unicodeasciidecodebinary\n```\n\n### 6.\n\n```python\n with open(filepath, 'r', encoding=\"utf8\") as f:\n    f.write('utf8')\n    #close\n```\n\n how to upgrade installed packages?\n\n> pip install --upgrade setuptools\n\n\n\n<!-- install mongoDb(better performance than sql) -->\n<!-- install pip -->\n\n\n\ngrep log in command console\nbasic grammars\nnetwork, disk ,database, io , dic, list ,etc\nclass object orientated  \n\n\n\n\n### Reference\n- [](http://www.liaoxuefeng.com/)\n- [use python and mongoDb as backend](https://zhuanlan.zhihu.com/p/20488077?columnSlug=kotandroid)\n- [](http://cuiqingcai.com/category/technique/python) \n- [unicodeencodeerror-ascii-codec-cant-encode-character](https://stackoverflow.com/questions/9942594/unicodeencodeerror-ascii-codec-cant-encode-character-u-xa0-in-position-20?rq=1)\n- [Droidcon NYC 2016 - Decoding the Secrets of Binary Data](https://www.youtube.com/watch?v=T_p22jMZSrk)\n- [Jake Wharton and Jesse Wilson - Death, Taxes, and HTTP](https://www.youtube.com/watch?v=6uroXz5l7Gk)\n- [Droidcon Montreal Jake Wharton - A Few Ok Libraries](https://www.youtube.com/watch?v=WvyScM_S88c)\n- [Jesse Wilson - Coordinating Space and Time](https://www.youtube.com/watch?v=yS0Nc-L1Uuk)\n\n\n","source":"_posts/2016-12-24-Python-UnicodeEncodeError.md","raw":"---\ntitle: Python 3 \ndate: 2016-12-24 22:06:37\ncategories: blog \ntags: [python]\n---\n\n\n#### Python\n\n![implementing dumb features](http://odzl05jxx.bkt.clouddn.com/46ee54dd915d71da90e435703d4568fb.jpg?imageView2/2/w/600)\n\n<!-- more -->\n### 1. Python\n[](http://www.liaoxuefeng.com/)Python\n\n> CPythonCPUCCPU\n\n> \n\n> GIL\n\n[  Python](http://cuiqingcai.com/3325.html)\n```text\n1GIL\n\nGILGlobal Interpreter Lock()python\n\n2CPUCPU\n\nPython\n\nGIL\nsleeppython\nGIL\nGILGILpythonGILCPU\n\nPython2.xGILIOticks100ticksPythonGIL sys.setcheckinterval \n\nGILGILpython(GIL)CPUpython\n```\n\n### 2. packagecan't resolve XXX\n[no module named urllib2](http://stackoverflow.com/questions/2792650/python3-error-import-error-no-module-name-urllib2)\n\n> The urllib2 module has been split across several modules in Python 3 named urllib.request and urllib.error. The 2to3 tool will automatically adapt imports when converting your sources to Python 3.\n\nThis is what look like on py 2.7\n\n```python\nimport urllib2\nreq = urllib2.Request(url,headers=header)\nhtml = urllib2.urlopen(req)\nhtml_data = html.read\nhtml_path = etree.HTML(html_data)\t\n```   \n\non Python 3.X \n```python\nfrom urllib.request import urlopen\nfrom urllib.request import Request\n\nreq = Request(img_url, headers=headers)\nurlhtml = urlopen(req)\n```\n\n\n### 3. pip install XXXX \npackage pip install xxxx....\n#### if not working\n![](http://odzl05jxx.bkt.clouddn.com/Googling%20the%20Error%20Message.jpg?imageView2/2/w/500)\n\n\n### 4. Listtupledictset\n\n```python\n list   mylist = ['Tom','Jerry','Henry']\n        mylist[0] = 'Tom'\n\n tuple  mytuple = ('rock','pop','jazz')\n         mytuple[0] = 'rock' \n\n tuple\n\n dict: d={'name':'tom','job':'doctor','age',99}\n        d['name'] = 'tom'\n\n set:  s = set([1,2,3]) # list\n    >> s\n    {1,2,3}\n    set\n    setdictvalue(key)\n```\ntuplePythonTuple\n\n#### \nclass name should be cammelCase, Arguments,variable name should be lowercase\n\n\n```python\n for i in range(2, 5):\n        print(i)\n>>> result: 2 3 4 \n\n\n\ndef add_end(L=None):\n    if L is None:\n        L = []\n    L.append('END')\n    return L\n```\n\n##### \n\n\n\n```python\ndef sell(name,price,amount=1):\n    print(price*amount)\n\nsell('product',26)\nsell('product',26,2)\n\n>>> 26    \n>>> 52    \n```\n\n\n```python\ndef power(x, n=2): #n=2,strNone\n    s = 1\n    while n > 0:\n        n = n - 1\n        s = s * x\n    return s\n\npower(5) >> 25\npower(5,2) >>>25    \n```\n\n# *tuple\n```python\ndef calc(*numbers): #tuple\n    sum = 0\n    for n in numbers:\n        sum = sum + n * n\n    return sum\n\ncalc(1,2)\n\ncalc(2,3,5)    \n\nnums = [1,2,3]\ncal(*nums)#tuple\n```\n\n```python\ndef person(name, age, **kw):\n    print('name:', name, 'age:', age, 'other:', kw)\n\n>>> person('Michael', 30)\nname: Michael age: 30 other: {}\n\ndict    \n```\n\n```python\ndef shoppping(name,time,*,price,count)# price\n    print(price*count)\n\n>> shopping(john,0325,price=39,count=5)\n>> 195\n```\n\n\n### 5. \nChromerequestheadercookiesctrl+shift+R\n#### 5.1 Request, Urllib2 \n\n#### 5.2 UnicodeEncodeError: 'ascii' codec can't encode characters in position\n\n\n```\n# how to invoke this error\nb = \"this is english within ascii range\".encode('ascii')  # totally fine\n\ns = \"\".encode('ascii') \n# this will raise an error ,UnicodeEncodeError: 'ascii' codec can't encode characters in position 0-1: ordinal not in range(128)>\n\n\n\n print((b\"totally cool binary representation of english words within ascii range\").decode('ascii'))\n print((b\"totally cool binary cause utf-8 include ascii\").decode('utf-8'))\n # \n\n\n # eg.\nstring = \"\"\nbinary_string = b'\\xe4\\xbd\\xa0\\xe5\\xa5\\xbd\\xe5\\x95\\x8a'\nbinary_string_2_string = bstring.decode('utf-8')\n\n\ncode :\nprint(string)  \nprint(string.encode('utf-8'))\nprint(bstring2string)\nprint(bstring2string)\n    \nprint(which_instance_is_this(string))\nprint(which_instance_is_this(bstring))\nprint(which_instance_is_this(bstring2string))\n\n\noutputs:\n\nb'\\xe4\\xbd\\xa0\\xe5\\xa5\\xbd\\xe5\\x95\\x8a'\n \n\n\nis str\nis byte \nis str\n\n**Since Python 3.0, the language features a str type that contain Unicode characters, meaning any string created using \"unicode rocks!\", 'unicode rocks!', or the triple-quoted string syntax is stored as Unicode.**\n\nstrunicodeunicodechr(12345) integer1Unicode String\nord() unicode\n\n\nprint(chr(20320))   >>>> \nprint(ord(''))    >>>> 20320 #1string\n\nbinary to string is called decode ,string to binary is encode\nbytes.decode('utf-8')   <----> str.encode('utf-8')\n\nUnicodeEncodeError: 'ascii' codec can't encode characters in position\nstr.encode('ascii')unicodeasciidecodebinary\n```\n\n### 6.\n\n```python\n with open(filepath, 'r', encoding=\"utf8\") as f:\n    f.write('utf8')\n    #close\n```\n\n how to upgrade installed packages?\n\n> pip install --upgrade setuptools\n\n\n\n<!-- install mongoDb(better performance than sql) -->\n<!-- install pip -->\n\n\n\ngrep log in command console\nbasic grammars\nnetwork, disk ,database, io , dic, list ,etc\nclass object orientated  \n\n\n\n\n### Reference\n- [](http://www.liaoxuefeng.com/)\n- [use python and mongoDb as backend](https://zhuanlan.zhihu.com/p/20488077?columnSlug=kotandroid)\n- [](http://cuiqingcai.com/category/technique/python) \n- [unicodeencodeerror-ascii-codec-cant-encode-character](https://stackoverflow.com/questions/9942594/unicodeencodeerror-ascii-codec-cant-encode-character-u-xa0-in-position-20?rq=1)\n- [Droidcon NYC 2016 - Decoding the Secrets of Binary Data](https://www.youtube.com/watch?v=T_p22jMZSrk)\n- [Jake Wharton and Jesse Wilson - Death, Taxes, and HTTP](https://www.youtube.com/watch?v=6uroXz5l7Gk)\n- [Droidcon Montreal Jake Wharton - A Few Ok Libraries](https://www.youtube.com/watch?v=WvyScM_S88c)\n- [Jesse Wilson - Coordinating Space and Time](https://www.youtube.com/watch?v=yS0Nc-L1Uuk)\n\n\n","slug":"2016-12-24-Python-UnicodeEncodeError","published":1,"updated":"2017-07-12T00:36:03.136Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj50afgvf000gi4vr6wk06b7f","content":"<h4 id=\"Python\"><a href=\"#Python\" class=\"headerlink\" title=\"Python\"></a>Python</h4><p><img src=\"http://odzl05jxx.bkt.clouddn.com/46ee54dd915d71da90e435703d4568fb.jpg?imageView2/2/w/600\" alt=\"implementing dumb features\"></p>\n<a id=\"more\"></a>\n<h3 id=\"1-Python\"><a href=\"#1-Python\" class=\"headerlink\" title=\"1. Python\"></a>1. Python</h3><p><a href=\"http://www.liaoxuefeng.com/\"></a>Python</p>\n<blockquote>\n<p>CPythonCPUCCPU</p>\n<p></p>\n<p>GIL</p>\n</blockquote>\n<p><a href=\"http://cuiqingcai.com/3325.html\">  Python</a><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\">1GIL</div><div class=\"line\"></div><div class=\"line\">GILGlobal Interpreter Lock()python</div><div class=\"line\"></div><div class=\"line\">2CPUCPU</div><div class=\"line\"></div><div class=\"line\">Python</div><div class=\"line\"></div><div class=\"line\">GIL</div><div class=\"line\">sleeppython</div><div class=\"line\">GIL</div><div class=\"line\">GILGILpythonGILCPU</div><div class=\"line\"></div><div class=\"line\">Python2.xGILIOticks100ticksPythonGIL sys.setcheckinterval </div><div class=\"line\"></div><div class=\"line\">GILGILpython(GIL)CPUpython</div></pre></td></tr></table></figure></p>\n<h3 id=\"2-packagecant-resolve-XXX\"><a href=\"#2-packagecant-resolve-XXX\" class=\"headerlink\" title=\"2. packagecant resolve XXX\"></a>2. packagecant resolve XXX</h3><p><a href=\"http://stackoverflow.com/questions/2792650/python3-error-import-error-no-module-name-urllib2\">no module named urllib2</a></p>\n<blockquote>\n<p>The urllib2 module has been split across several modules in Python 3 named urllib.request and urllib.error. The 2to3 tool will automatically adapt imports when converting your sources to Python 3.</p>\n</blockquote>\n<p>This is what look like on py 2.7</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> urllib2</div><div class=\"line\">req = urllib2.Request(url,headers=header)</div><div class=\"line\">html = urllib2.urlopen(req)</div><div class=\"line\">html_data = html.read</div><div class=\"line\">html_path = etree.HTML(html_data)\t</div><div class=\"line\">```   </div><div class=\"line\"></div><div class=\"line\">on Python <span class=\"number\">3.</span>X </div><div class=\"line\">```python</div><div class=\"line\"><span class=\"keyword\">from</span> urllib.request <span class=\"keyword\">import</span> urlopen</div><div class=\"line\"><span class=\"keyword\">from</span> urllib.request <span class=\"keyword\">import</span> Request</div><div class=\"line\"></div><div class=\"line\">req = Request(img_url, headers=headers)</div><div class=\"line\">urlhtml = urlopen(req)</div></pre></td></tr></table></figure>\n<h3 id=\"3-pip-install-XXXX\"><a href=\"#3-pip-install-XXXX\" class=\"headerlink\" title=\"3. pip install XXXX\"></a>3. pip install XXXX</h3><p>package pip install xxxx.</p>\n<h4 id=\"if-not-working\"><a href=\"#if-not-working\" class=\"headerlink\" title=\"if not working\"></a>if not working</h4><p><img src=\"http://odzl05jxx.bkt.clouddn.com/Googling%20the%20Error%20Message.jpg?imageView2/2/w/500\" alt=\"\"></p>\n<h3 id=\"4-Listtupledictset\"><a href=\"#4-Listtupledictset\" class=\"headerlink\" title=\"4. Listtupledictset\"></a>4. Listtupledictset</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\">list   mylist = [<span class=\"string\">'Tom'</span>,<span class=\"string\">'Jerry'</span>,<span class=\"string\">'Henry'</span>]</div><div class=\"line\">       mylist[<span class=\"number\">0</span>] = <span class=\"string\">'Tom'</span></div><div class=\"line\"></div><div class=\"line\">tuple  mytuple = (<span class=\"string\">'rock'</span>,<span class=\"string\">'pop'</span>,<span class=\"string\">'jazz'</span>)</div><div class=\"line\">        mytuple[<span class=\"number\">0</span>] = <span class=\"string\">'rock'</span> </div><div class=\"line\"></div><div class=\"line\">tuple</div><div class=\"line\"></div><div class=\"line\">dict: d=&#123;<span class=\"string\">'name'</span>:<span class=\"string\">'tom'</span>,<span class=\"string\">'job'</span>:<span class=\"string\">'doctor'</span>,<span class=\"string\">'age'</span>,<span class=\"number\">99</span>&#125;</div><div class=\"line\">       d[<span class=\"string\">'name'</span>] = <span class=\"string\">'tom'</span></div><div class=\"line\"></div><div class=\"line\">set:  s = set([<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>]) <span class=\"comment\"># list</span></div><div class=\"line\">   &gt;&gt; s</div><div class=\"line\">   &#123;<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>&#125;</div><div class=\"line\">   set</div><div class=\"line\">   setdictvalue(key)</div></pre></td></tr></table></figure>\n<p>tuplePythonTuple</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>class name should be cammelCase, Arguments,variable name should be lowercase</p>\n<p><br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"> <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(<span class=\"number\">2</span>, <span class=\"number\">5</span>):</div><div class=\"line\">        print(i)</div><div class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>result: <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">4</span> </div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">add_end</span><span class=\"params\">(L=None)</span>:</span></div><div class=\"line\">    <span class=\"keyword\">if</span> L <span class=\"keyword\">is</span> <span class=\"keyword\">None</span>:</div><div class=\"line\">        L = []</div><div class=\"line\">    L.append(<span class=\"string\">'END'</span>)</div><div class=\"line\">    <span class=\"keyword\">return</span> L</div></pre></td></tr></table></figure></p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p></p>\n<p><br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">sell</span><span class=\"params\">(name,price,amount=<span class=\"number\">1</span>)</span>:</span></div><div class=\"line\">    print(price*amount)</div><div class=\"line\"></div><div class=\"line\">sell(<span class=\"string\">'product'</span>,<span class=\"number\">26</span>)</div><div class=\"line\">sell(<span class=\"string\">'product'</span>,<span class=\"number\">26</span>,<span class=\"number\">2</span>)</div><div class=\"line\"></div><div class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"number\">26</span>    </div><div class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"number\">52</span></div></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">power</span><span class=\"params\">(x, n=<span class=\"number\">2</span>)</span>:</span> <span class=\"comment\">#n=2,strNone</span></div><div class=\"line\">    s = <span class=\"number\">1</span></div><div class=\"line\">    <span class=\"keyword\">while</span> n &gt; <span class=\"number\">0</span>:</div><div class=\"line\">        n = n - <span class=\"number\">1</span></div><div class=\"line\">        s = s * x</div><div class=\"line\">    <span class=\"keyword\">return</span> s</div><div class=\"line\"></div><div class=\"line\">power(<span class=\"number\">5</span>) &gt;&gt; <span class=\"number\">25</span></div><div class=\"line\">power(<span class=\"number\">5</span>,<span class=\"number\">2</span>) &gt;&gt;&gt;<span class=\"number\">25</span></div></pre></td></tr></table></figure></p>\n<p># *tuple<br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">calc</span><span class=\"params\">(*numbers)</span>:</span> <span class=\"comment\">#tuple</span></div><div class=\"line\">    sum = <span class=\"number\">0</span></div><div class=\"line\">    <span class=\"keyword\">for</span> n <span class=\"keyword\">in</span> numbers:</div><div class=\"line\">        sum = sum + n * n</div><div class=\"line\">    <span class=\"keyword\">return</span> sum</div><div class=\"line\"></div><div class=\"line\">calc(<span class=\"number\">1</span>,<span class=\"number\">2</span>)</div><div class=\"line\"></div><div class=\"line\">calc(<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">5</span>)    </div><div class=\"line\"></div><div class=\"line\">nums = [<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>]</div><div class=\"line\">cal(*nums)<span class=\"comment\">#tuple</span></div></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">person</span><span class=\"params\">(name, age, **kw)</span>:</span></div><div class=\"line\">    print(<span class=\"string\">'name:'</span>, name, <span class=\"string\">'age:'</span>, age, <span class=\"string\">'other:'</span>, kw)</div><div class=\"line\"></div><div class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>person(<span class=\"string\">'Michael'</span>, <span class=\"number\">30</span>)</div><div class=\"line\">name: Michael age: <span class=\"number\">30</span> other: &#123;&#125;</div><div class=\"line\"></div><div class=\"line\">dict</div></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">def shoppping(name,time,*,price,count)# price</div><div class=\"line\">    print(price*count)</div><div class=\"line\"></div><div class=\"line\">&gt;&gt; shopping(john,0325,price=39,count=5)</div><div class=\"line\">&gt;&gt; 195</div></pre></td></tr></table></figure></p>\n<h3 id=\"5-\"><a href=\"#5-\" class=\"headerlink\" title=\"5. \"></a>5. </h3><p>Chromerequestheadercookiesctrl+shift+R</p>\n<h4 id=\"5-1-Request-Urllib2\"><a href=\"#5-1-Request-Urllib2\" class=\"headerlink\" title=\"5.1 Request, Urllib2\"></a>5.1 Request, Urllib2</h4><h4 id=\"5-2-UnicodeEncodeError-ascii-codec-cant-encode-characters-in-position\"><a href=\"#5-2-UnicodeEncodeError-ascii-codec-cant-encode-characters-in-position\" class=\"headerlink\" title=\"5.2 UnicodeEncodeError: ascii codec cant encode characters in position\"></a>5.2 UnicodeEncodeError: ascii codec cant encode characters in position</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div></pre></td><td class=\"code\"><pre><div class=\"line\"># how to invoke this error</div><div class=\"line\">b = &quot;this is english within ascii range&quot;.encode(&apos;ascii&apos;)  # totally fine</div><div class=\"line\"></div><div class=\"line\">s = &quot;&quot;.encode(&apos;ascii&apos;) </div><div class=\"line\"># this will raise an error ,UnicodeEncodeError: &apos;ascii&apos; codec can&apos;t encode characters in position 0-1: ordinal not in range(128)&gt;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"> print((b&quot;totally cool binary representation of english words within ascii range&quot;).decode(&apos;ascii&apos;))</div><div class=\"line\"> print((b&quot;totally cool binary cause utf-8 include ascii&quot;).decode(&apos;utf-8&apos;))</div><div class=\"line\"> # </div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"> # eg.</div><div class=\"line\">string = &quot;&quot;</div><div class=\"line\">binary_string = b&apos;\\xe4\\xbd\\xa0\\xe5\\xa5\\xbd\\xe5\\x95\\x8a&apos;</div><div class=\"line\">binary_string_2_string = bstring.decode(&apos;utf-8&apos;)</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">code :</div><div class=\"line\">print(string)  </div><div class=\"line\">print(string.encode(&apos;utf-8&apos;))</div><div class=\"line\">print(bstring2string)</div><div class=\"line\">print(bstring2string)</div><div class=\"line\">    </div><div class=\"line\">print(which_instance_is_this(string))</div><div class=\"line\">print(which_instance_is_this(bstring))</div><div class=\"line\">print(which_instance_is_this(bstring2string))</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">outputs:</div><div class=\"line\"></div><div class=\"line\">b&apos;\\xe4\\xbd\\xa0\\xe5\\xa5\\xbd\\xe5\\x95\\x8a&apos;</div><div class=\"line\"> </div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">is str</div><div class=\"line\">is byte </div><div class=\"line\">is str</div><div class=\"line\"></div><div class=\"line\">**Since Python 3.0, the language features a str type that contain Unicode characters, meaning any string created using &quot;unicode rocks!&quot;, &apos;unicode rocks!&apos;, or the triple-quoted string syntax is stored as Unicode.**</div><div class=\"line\"></div><div class=\"line\">strunicodeunicodechr(12345) integer1Unicode String</div><div class=\"line\">ord() unicode</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">print(chr(20320))   &gt;&gt;&gt;&gt; </div><div class=\"line\">print(ord(&apos;&apos;))    &gt;&gt;&gt;&gt; 20320 #1string</div><div class=\"line\"></div><div class=\"line\">binary to string is called decode ,string to binary is encode</div><div class=\"line\">bytes.decode(&apos;utf-8&apos;)   &lt;----&gt; str.encode(&apos;utf-8&apos;)</div><div class=\"line\"></div><div class=\"line\">UnicodeEncodeError: &apos;ascii&apos; codec can&apos;t encode characters in position</div><div class=\"line\">str.encode(&apos;ascii&apos;)unicodeasciidecodebinary</div></pre></td></tr></table></figure>\n<h3 id=\"6-\"><a href=\"#6-\" class=\"headerlink\" title=\"6.\"></a>6.</h3><p><br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">with</span> open(filepath, <span class=\"string\">'r'</span>, encoding=<span class=\"string\">\"utf8\"</span>) <span class=\"keyword\">as</span> f:</div><div class=\"line\">   f.write(<span class=\"string\">'utf8'</span>)</div><div class=\"line\">   <span class=\"comment\">#close</span></div></pre></td></tr></table></figure></p>\n<p> how to upgrade installed packages?</p>\n<blockquote>\n<p>pip install upgrade setuptools</p>\n</blockquote>\n<!-- install mongoDb(better performance than sql) -->\n<!-- install pip -->\n<p>grep log in command console<br>basic grammars<br>network, disk ,database, io , dic, list ,etc<br>class object orientated  </p>\n<h3 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h3><ul>\n<li><a href=\"http://www.liaoxuefeng.com/\"></a></li>\n<li><a href=\"https://zhuanlan.zhihu.com/p/20488077?columnSlug=kotandroid\">use python and mongoDb as backend</a></li>\n<li><a href=\"http://cuiqingcai.com/category/technique/python\"></a> </li>\n<li><a href=\"https://stackoverflow.com/questions/9942594/unicodeencodeerror-ascii-codec-cant-encode-character-u-xa0-in-position-20?rq=1\">unicodeencodeerror-ascii-codec-cant-encode-character</a></li>\n<li><a href=\"https://www.youtube.com/watch?v=T_p22jMZSrk\">Droidcon NYC 2016 - Decoding the Secrets of Binary Data</a></li>\n<li><a href=\"https://www.youtube.com/watch?v=6uroXz5l7Gk\">Jake Wharton and Jesse Wilson - Death, Taxes, and HTTP</a></li>\n<li><a href=\"https://www.youtube.com/watch?v=WvyScM_S88c\">Droidcon Montreal Jake Wharton - A Few Ok Libraries</a></li>\n<li><a href=\"https://www.youtube.com/watch?v=yS0Nc-L1Uuk\">Jesse Wilson - Coordinating Space and Time</a></li>\n</ul>\n","excerpt":"<h4 id=\"Python\"><a href=\"#Python\" class=\"headerlink\" title=\"Python\"></a>Python</h4><p><img src=\"http://odzl05jxx.bkt.clouddn.com/46ee54dd915d71da90e435703d4568fb.jpg?imageView2/2/w/600\" alt=\"implementing dumb features\"></p>","more":"<h3 id=\"1-Python\"><a href=\"#1-Python\" class=\"headerlink\" title=\"1. Python\"></a>1. Python</h3><p><a href=\"http://www.liaoxuefeng.com/\"></a>Python</p>\n<blockquote>\n<p>CPythonCPUCCPU</p>\n<p></p>\n<p>GIL</p>\n</blockquote>\n<p><a href=\"http://cuiqingcai.com/3325.html\">  Python</a><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\">1GIL</div><div class=\"line\"></div><div class=\"line\">GILGlobal Interpreter Lock()python</div><div class=\"line\"></div><div class=\"line\">2CPUCPU</div><div class=\"line\"></div><div class=\"line\">Python</div><div class=\"line\"></div><div class=\"line\">GIL</div><div class=\"line\">sleeppython</div><div class=\"line\">GIL</div><div class=\"line\">GILGILpythonGILCPU</div><div class=\"line\"></div><div class=\"line\">Python2.xGILIOticks100ticksPythonGIL sys.setcheckinterval </div><div class=\"line\"></div><div class=\"line\">GILGILpython(GIL)CPUpython</div></pre></td></tr></table></figure></p>\n<h3 id=\"2-packagecant-resolve-XXX\"><a href=\"#2-packagecant-resolve-XXX\" class=\"headerlink\" title=\"2. packagecant resolve XXX\"></a>2. packagecant resolve XXX</h3><p><a href=\"http://stackoverflow.com/questions/2792650/python3-error-import-error-no-module-name-urllib2\">no module named urllib2</a></p>\n<blockquote>\n<p>The urllib2 module has been split across several modules in Python 3 named urllib.request and urllib.error. The 2to3 tool will automatically adapt imports when converting your sources to Python 3.</p>\n</blockquote>\n<p>This is what look like on py 2.7</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> urllib2</div><div class=\"line\">req = urllib2.Request(url,headers=header)</div><div class=\"line\">html = urllib2.urlopen(req)</div><div class=\"line\">html_data = html.read</div><div class=\"line\">html_path = etree.HTML(html_data)\t</div><div class=\"line\">```   </div><div class=\"line\"></div><div class=\"line\">on Python <span class=\"number\">3.</span>X </div><div class=\"line\">```python</div><div class=\"line\"><span class=\"keyword\">from</span> urllib.request <span class=\"keyword\">import</span> urlopen</div><div class=\"line\"><span class=\"keyword\">from</span> urllib.request <span class=\"keyword\">import</span> Request</div><div class=\"line\"></div><div class=\"line\">req = Request(img_url, headers=headers)</div><div class=\"line\">urlhtml = urlopen(req)</div></pre></td></tr></table></figure>\n<h3 id=\"3-pip-install-XXXX\"><a href=\"#3-pip-install-XXXX\" class=\"headerlink\" title=\"3. pip install XXXX\"></a>3. pip install XXXX</h3><p>package pip install xxxx.</p>\n<h4 id=\"if-not-working\"><a href=\"#if-not-working\" class=\"headerlink\" title=\"if not working\"></a>if not working</h4><p><img src=\"http://odzl05jxx.bkt.clouddn.com/Googling%20the%20Error%20Message.jpg?imageView2/2/w/500\" alt=\"\"></p>\n<h3 id=\"4-Listtupledictset\"><a href=\"#4-Listtupledictset\" class=\"headerlink\" title=\"4. Listtupledictset\"></a>4. Listtupledictset</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\">list   mylist = [<span class=\"string\">'Tom'</span>,<span class=\"string\">'Jerry'</span>,<span class=\"string\">'Henry'</span>]</div><div class=\"line\">       mylist[<span class=\"number\">0</span>] = <span class=\"string\">'Tom'</span></div><div class=\"line\"></div><div class=\"line\">tuple  mytuple = (<span class=\"string\">'rock'</span>,<span class=\"string\">'pop'</span>,<span class=\"string\">'jazz'</span>)</div><div class=\"line\">        mytuple[<span class=\"number\">0</span>] = <span class=\"string\">'rock'</span> </div><div class=\"line\"></div><div class=\"line\">tuple</div><div class=\"line\"></div><div class=\"line\">dict: d=&#123;<span class=\"string\">'name'</span>:<span class=\"string\">'tom'</span>,<span class=\"string\">'job'</span>:<span class=\"string\">'doctor'</span>,<span class=\"string\">'age'</span>,<span class=\"number\">99</span>&#125;</div><div class=\"line\">       d[<span class=\"string\">'name'</span>] = <span class=\"string\">'tom'</span></div><div class=\"line\"></div><div class=\"line\">set:  s = set([<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>]) <span class=\"comment\"># list</span></div><div class=\"line\">   &gt;&gt; s</div><div class=\"line\">   &#123;<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>&#125;</div><div class=\"line\">   set</div><div class=\"line\">   setdictvalue(key)</div></pre></td></tr></table></figure>\n<p>tuplePythonTuple</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>class name should be cammelCase, Arguments,variable name should be lowercase</p>\n<p><br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"> <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(<span class=\"number\">2</span>, <span class=\"number\">5</span>):</div><div class=\"line\">        print(i)</div><div class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>result: <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">4</span> </div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">add_end</span><span class=\"params\">(L=None)</span>:</span></div><div class=\"line\">    <span class=\"keyword\">if</span> L <span class=\"keyword\">is</span> <span class=\"keyword\">None</span>:</div><div class=\"line\">        L = []</div><div class=\"line\">    L.append(<span class=\"string\">'END'</span>)</div><div class=\"line\">    <span class=\"keyword\">return</span> L</div></pre></td></tr></table></figure></p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p></p>\n<p><br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">sell</span><span class=\"params\">(name,price,amount=<span class=\"number\">1</span>)</span>:</span></div><div class=\"line\">    print(price*amount)</div><div class=\"line\"></div><div class=\"line\">sell(<span class=\"string\">'product'</span>,<span class=\"number\">26</span>)</div><div class=\"line\">sell(<span class=\"string\">'product'</span>,<span class=\"number\">26</span>,<span class=\"number\">2</span>)</div><div class=\"line\"></div><div class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"number\">26</span>    </div><div class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"number\">52</span></div></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">power</span><span class=\"params\">(x, n=<span class=\"number\">2</span>)</span>:</span> <span class=\"comment\">#n=2,strNone</span></div><div class=\"line\">    s = <span class=\"number\">1</span></div><div class=\"line\">    <span class=\"keyword\">while</span> n &gt; <span class=\"number\">0</span>:</div><div class=\"line\">        n = n - <span class=\"number\">1</span></div><div class=\"line\">        s = s * x</div><div class=\"line\">    <span class=\"keyword\">return</span> s</div><div class=\"line\"></div><div class=\"line\">power(<span class=\"number\">5</span>) &gt;&gt; <span class=\"number\">25</span></div><div class=\"line\">power(<span class=\"number\">5</span>,<span class=\"number\">2</span>) &gt;&gt;&gt;<span class=\"number\">25</span></div></pre></td></tr></table></figure></p>\n<p># *tuple<br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">calc</span><span class=\"params\">(*numbers)</span>:</span> <span class=\"comment\">#tuple</span></div><div class=\"line\">    sum = <span class=\"number\">0</span></div><div class=\"line\">    <span class=\"keyword\">for</span> n <span class=\"keyword\">in</span> numbers:</div><div class=\"line\">        sum = sum + n * n</div><div class=\"line\">    <span class=\"keyword\">return</span> sum</div><div class=\"line\"></div><div class=\"line\">calc(<span class=\"number\">1</span>,<span class=\"number\">2</span>)</div><div class=\"line\"></div><div class=\"line\">calc(<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">5</span>)    </div><div class=\"line\"></div><div class=\"line\">nums = [<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>]</div><div class=\"line\">cal(*nums)<span class=\"comment\">#tuple</span></div></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">person</span><span class=\"params\">(name, age, **kw)</span>:</span></div><div class=\"line\">    print(<span class=\"string\">'name:'</span>, name, <span class=\"string\">'age:'</span>, age, <span class=\"string\">'other:'</span>, kw)</div><div class=\"line\"></div><div class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>person(<span class=\"string\">'Michael'</span>, <span class=\"number\">30</span>)</div><div class=\"line\">name: Michael age: <span class=\"number\">30</span> other: &#123;&#125;</div><div class=\"line\"></div><div class=\"line\">dict</div></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">def shoppping(name,time,*,price,count)# price</div><div class=\"line\">    print(price*count)</div><div class=\"line\"></div><div class=\"line\">&gt;&gt; shopping(john,0325,price=39,count=5)</div><div class=\"line\">&gt;&gt; 195</div></pre></td></tr></table></figure></p>\n<h3 id=\"5-\"><a href=\"#5-\" class=\"headerlink\" title=\"5. \"></a>5. </h3><p>Chromerequestheadercookiesctrl+shift+R</p>\n<h4 id=\"5-1-Request-Urllib2\"><a href=\"#5-1-Request-Urllib2\" class=\"headerlink\" title=\"5.1 Request, Urllib2\"></a>5.1 Request, Urllib2</h4><h4 id=\"5-2-UnicodeEncodeError-ascii-codec-cant-encode-characters-in-position\"><a href=\"#5-2-UnicodeEncodeError-ascii-codec-cant-encode-characters-in-position\" class=\"headerlink\" title=\"5.2 UnicodeEncodeError: ascii codec cant encode characters in position\"></a>5.2 UnicodeEncodeError: ascii codec cant encode characters in position</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div></pre></td><td class=\"code\"><pre><div class=\"line\"># how to invoke this error</div><div class=\"line\">b = &quot;this is english within ascii range&quot;.encode(&apos;ascii&apos;)  # totally fine</div><div class=\"line\"></div><div class=\"line\">s = &quot;&quot;.encode(&apos;ascii&apos;) </div><div class=\"line\"># this will raise an error ,UnicodeEncodeError: &apos;ascii&apos; codec can&apos;t encode characters in position 0-1: ordinal not in range(128)&gt;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"> print((b&quot;totally cool binary representation of english words within ascii range&quot;).decode(&apos;ascii&apos;))</div><div class=\"line\"> print((b&quot;totally cool binary cause utf-8 include ascii&quot;).decode(&apos;utf-8&apos;))</div><div class=\"line\"> # </div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"> # eg.</div><div class=\"line\">string = &quot;&quot;</div><div class=\"line\">binary_string = b&apos;\\xe4\\xbd\\xa0\\xe5\\xa5\\xbd\\xe5\\x95\\x8a&apos;</div><div class=\"line\">binary_string_2_string = bstring.decode(&apos;utf-8&apos;)</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">code :</div><div class=\"line\">print(string)  </div><div class=\"line\">print(string.encode(&apos;utf-8&apos;))</div><div class=\"line\">print(bstring2string)</div><div class=\"line\">print(bstring2string)</div><div class=\"line\">    </div><div class=\"line\">print(which_instance_is_this(string))</div><div class=\"line\">print(which_instance_is_this(bstring))</div><div class=\"line\">print(which_instance_is_this(bstring2string))</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">outputs:</div><div class=\"line\"></div><div class=\"line\">b&apos;\\xe4\\xbd\\xa0\\xe5\\xa5\\xbd\\xe5\\x95\\x8a&apos;</div><div class=\"line\"> </div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">is str</div><div class=\"line\">is byte </div><div class=\"line\">is str</div><div class=\"line\"></div><div class=\"line\">**Since Python 3.0, the language features a str type that contain Unicode characters, meaning any string created using &quot;unicode rocks!&quot;, &apos;unicode rocks!&apos;, or the triple-quoted string syntax is stored as Unicode.**</div><div class=\"line\"></div><div class=\"line\">strunicodeunicodechr(12345) integer1Unicode String</div><div class=\"line\">ord() unicode</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">print(chr(20320))   &gt;&gt;&gt;&gt; </div><div class=\"line\">print(ord(&apos;&apos;))    &gt;&gt;&gt;&gt; 20320 #1string</div><div class=\"line\"></div><div class=\"line\">binary to string is called decode ,string to binary is encode</div><div class=\"line\">bytes.decode(&apos;utf-8&apos;)   &lt;----&gt; str.encode(&apos;utf-8&apos;)</div><div class=\"line\"></div><div class=\"line\">UnicodeEncodeError: &apos;ascii&apos; codec can&apos;t encode characters in position</div><div class=\"line\">str.encode(&apos;ascii&apos;)unicodeasciidecodebinary</div></pre></td></tr></table></figure>\n<h3 id=\"6-\"><a href=\"#6-\" class=\"headerlink\" title=\"6.\"></a>6.</h3><p><br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">with</span> open(filepath, <span class=\"string\">'r'</span>, encoding=<span class=\"string\">\"utf8\"</span>) <span class=\"keyword\">as</span> f:</div><div class=\"line\">   f.write(<span class=\"string\">'utf8'</span>)</div><div class=\"line\">   <span class=\"comment\">#close</span></div></pre></td></tr></table></figure></p>\n<p> how to upgrade installed packages?</p>\n<blockquote>\n<p>pip install upgrade setuptools</p>\n</blockquote>\n<!-- install mongoDb(better performance than sql) -->\n<!-- install pip -->\n<p>grep log in command console<br>basic grammars<br>network, disk ,database, io , dic, list ,etc<br>class object orientated  </p>\n<h3 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h3><ul>\n<li><a href=\"http://www.liaoxuefeng.com/\"></a></li>\n<li><a href=\"https://zhuanlan.zhihu.com/p/20488077?columnSlug=kotandroid\">use python and mongoDb as backend</a></li>\n<li><a href=\"http://cuiqingcai.com/category/technique/python\"></a> </li>\n<li><a href=\"https://stackoverflow.com/questions/9942594/unicodeencodeerror-ascii-codec-cant-encode-character-u-xa0-in-position-20?rq=1\">unicodeencodeerror-ascii-codec-cant-encode-character</a></li>\n<li><a href=\"https://www.youtube.com/watch?v=T_p22jMZSrk\">Droidcon NYC 2016 - Decoding the Secrets of Binary Data</a></li>\n<li><a href=\"https://www.youtube.com/watch?v=6uroXz5l7Gk\">Jake Wharton and Jesse Wilson - Death, Taxes, and HTTP</a></li>\n<li><a href=\"https://www.youtube.com/watch?v=WvyScM_S88c\">Droidcon Montreal Jake Wharton - A Few Ok Libraries</a></li>\n<li><a href=\"https://www.youtube.com/watch?v=yS0Nc-L1Uuk\">Jesse Wilson - Coordinating Space and Time</a></li>\n</ul>"},{"title":"LayoutManager","date":"2016-10-20T08:37:42.000Z","_content":"\n### 1. LinearLayoutManagerGridLayoutManagerStaggeredGridLayoutManager\n\n\n![](http://odzl05jxx.bkt.clouddn.com/Googling%20the%20Error%20Message.jpg?imageView2/2/w/600)\n<!--more-->\n\n- GridLayoutManagerItemColumn numVERTICAL\n:\n```java\nGridLayoutManager manager = new GridLayoutManager(\n   this,2 ,GridLayoutManager.VERTICAL,false)\n   \nmanager.setSpanSizeLookup(){\n        new GridLayoutManager.SpanSizeLookup(){\n        @override\n        public int getSpanSize(int position){\n                return (position % 3 == 0 ? 2 : 1)\n            }\n        }\n    }   \n```\n2\n\n- GridLayoutMangerItemViewitemHeightItemViewStaggeredGridLayoutManager\n\n#### 2. LayoutManager <-------> Recycler <--------> Adapter\nLayoutManagerAdapter!!!\n\n### 3.Recycler\nRecycler:\n1. Scrap Heap  detachAndScrapView() View\n2. Recycle Pool: removeAndRecycleView() Viewpositiondata\n\n### 4.FillGaps,\n1. Discover firstVisible position/location\n2. layout Gaps\n```java\nfindFirstVisiblePosition\n```\n\n3. Scrap everything(ScrapHeap)\n```java\n /**\n         * Temporarily detach and scrap all currently attached child views. Views will be scrapped\n         * into the given Recycler. The Recycler may prefer to reuse scrap views before\n         * other views that were previously recycled.\n         *\n         * @param recycler Recycler to scrap views into\n         */\n        public void detachAndScrapAttachedViews(Recycler recycler) {\n            final int childCount = getChildCount();\n            for (int i = childCount - 1; i >= 0; i--) {\n                final View v = getChildAt(i);\n                scrapOrRecycleView(recycler, i, v);\n            }\n        }\n```\n4. Lay out all visible positions\n\n```java\nfor(...){\n    int nextPosition = ...;\n    View view = recycler.getViewForPosition(nextPosition);\n    addView(view);\n    \n    //MeasureLayoutmeasureChildlayoutItemDecoration\n    measureChildWithMargin(view,...) \n    layoutDecorated(view,....)\n    }\n```\n5. Recycle remaining views\n```java\nfinal List<RecyclerView.ViewHolder> scrapList =\n    recycler.getScrapList();\nfor(int i=0;i<scrapList.size;i++){\n    final View removingView = scrapList.get(i);\n    recycler.recycleView(removingView);\n    }    \n```\n\n: RecyclerPoolViewviewHolderLayoutParams\n\n\n### 4. Scroll\n```java\n   public int scrollHorizontallyBy(int dx, RecyclerView.Recycler recycler, RecyclerView.State state) {\n   \n   //dx TouchEvent\n   dx <0 \n   dx > 0\n   //ScrollBy\n   //\n   offsetChildrenHorizontal(delta);//ChildViewIterate\n   }\n```\n### 5.notifyDataSetChanged()\nonLayoutChildrenlayout\n\n### 6.ScrollToPosition()SmoothScrollToPosition()\n:\nscrollToPosition:Track Requested PositionTrigger requestLayout\nSmoothscrollToPosition: Create a SmoothScroller instanceSet the Target Positioninvoke startSmoothScroll\nSmoothScrollercomputeScrollVectorForPosition\n\n### 7. supportPredictiveItemAnimationItemChange Animation\nonViewAttachedToWindowonBindViewHolderViewTranslationXAlpha(01)ScaleX\n\n\n\n### Reference\n1. [Dave Smith](https://github.com/devunwired/recyclerview-playground)\n2. [500px](https://github.com/500px/greedo-layout-for-android.git)","source":"_posts/2016-10-20-write-your-own-layoutmanager.md","raw":"---\ntitle: LayoutManager\ndate: 2016-10-20 16:37:42\ncategories: blog  \ntags: [android]\n---\n\n### 1. LinearLayoutManagerGridLayoutManagerStaggeredGridLayoutManager\n\n\n![](http://odzl05jxx.bkt.clouddn.com/Googling%20the%20Error%20Message.jpg?imageView2/2/w/600)\n<!--more-->\n\n- GridLayoutManagerItemColumn numVERTICAL\n:\n```java\nGridLayoutManager manager = new GridLayoutManager(\n   this,2 ,GridLayoutManager.VERTICAL,false)\n   \nmanager.setSpanSizeLookup(){\n        new GridLayoutManager.SpanSizeLookup(){\n        @override\n        public int getSpanSize(int position){\n                return (position % 3 == 0 ? 2 : 1)\n            }\n        }\n    }   \n```\n2\n\n- GridLayoutMangerItemViewitemHeightItemViewStaggeredGridLayoutManager\n\n#### 2. LayoutManager <-------> Recycler <--------> Adapter\nLayoutManagerAdapter!!!\n\n### 3.Recycler\nRecycler:\n1. Scrap Heap  detachAndScrapView() View\n2. Recycle Pool: removeAndRecycleView() Viewpositiondata\n\n### 4.FillGaps,\n1. Discover firstVisible position/location\n2. layout Gaps\n```java\nfindFirstVisiblePosition\n```\n\n3. Scrap everything(ScrapHeap)\n```java\n /**\n         * Temporarily detach and scrap all currently attached child views. Views will be scrapped\n         * into the given Recycler. The Recycler may prefer to reuse scrap views before\n         * other views that were previously recycled.\n         *\n         * @param recycler Recycler to scrap views into\n         */\n        public void detachAndScrapAttachedViews(Recycler recycler) {\n            final int childCount = getChildCount();\n            for (int i = childCount - 1; i >= 0; i--) {\n                final View v = getChildAt(i);\n                scrapOrRecycleView(recycler, i, v);\n            }\n        }\n```\n4. Lay out all visible positions\n\n```java\nfor(...){\n    int nextPosition = ...;\n    View view = recycler.getViewForPosition(nextPosition);\n    addView(view);\n    \n    //MeasureLayoutmeasureChildlayoutItemDecoration\n    measureChildWithMargin(view,...) \n    layoutDecorated(view,....)\n    }\n```\n5. Recycle remaining views\n```java\nfinal List<RecyclerView.ViewHolder> scrapList =\n    recycler.getScrapList();\nfor(int i=0;i<scrapList.size;i++){\n    final View removingView = scrapList.get(i);\n    recycler.recycleView(removingView);\n    }    \n```\n\n: RecyclerPoolViewviewHolderLayoutParams\n\n\n### 4. Scroll\n```java\n   public int scrollHorizontallyBy(int dx, RecyclerView.Recycler recycler, RecyclerView.State state) {\n   \n   //dx TouchEvent\n   dx <0 \n   dx > 0\n   //ScrollBy\n   //\n   offsetChildrenHorizontal(delta);//ChildViewIterate\n   }\n```\n### 5.notifyDataSetChanged()\nonLayoutChildrenlayout\n\n### 6.ScrollToPosition()SmoothScrollToPosition()\n:\nscrollToPosition:Track Requested PositionTrigger requestLayout\nSmoothscrollToPosition: Create a SmoothScroller instanceSet the Target Positioninvoke startSmoothScroll\nSmoothScrollercomputeScrollVectorForPosition\n\n### 7. supportPredictiveItemAnimationItemChange Animation\nonViewAttachedToWindowonBindViewHolderViewTranslationXAlpha(01)ScaleX\n\n\n\n### Reference\n1. [Dave Smith](https://github.com/devunwired/recyclerview-playground)\n2. [500px](https://github.com/500px/greedo-layout-for-android.git)","slug":"2016-10-20-write-your-own-layoutmanager","published":1,"updated":"2017-04-23T10:50:40.959Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj50afgvu000ii4vra6xg2uus","content":"<h3 id=\"1-LinearLayoutManagerGridLayoutManagerStaggeredGridLayoutManager\"><a href=\"#1-LinearLayoutManagerGridLayoutManagerStaggeredGridLayoutManager\" class=\"headerlink\" title=\"1. LinearLayoutManagerGridLayoutManagerStaggeredGridLayoutManager\"></a>1. LinearLayoutManagerGridLayoutManagerStaggeredGridLayoutManager</h3><p></p>\n<p><img src=\"http://odzl05jxx.bkt.clouddn.com/Googling%20the%20Error%20Message.jpg?imageView2/2/w/600\" alt=\"\"><br><a id=\"more\"></a></p>\n<ul>\n<li>GridLayoutManagerItemColumn numVERTICAL<br>:<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">GridLayoutManager manager = <span class=\"keyword\">new</span> GridLayoutManager(</div><div class=\"line\">   <span class=\"keyword\">this</span>,<span class=\"number\">2</span> ,GridLayoutManager.VERTICAL,<span class=\"keyword\">false</span>)</div><div class=\"line\">   </div><div class=\"line\">manager.setSpanSizeLookup()&#123;</div><div class=\"line\">        <span class=\"keyword\">new</span> GridLayoutManager.SpanSizeLookup()&#123;</div><div class=\"line\">        <span class=\"meta\">@override</span></div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">getSpanSize</span><span class=\"params\">(<span class=\"keyword\">int</span> position)</span></span>&#123;</div><div class=\"line\">                <span class=\"keyword\">return</span> (position % <span class=\"number\">3</span> == <span class=\"number\">0</span> ? <span class=\"number\">2</span> : <span class=\"number\">1</span>)</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>2</p>\n<ul>\n<li>GridLayoutMangerItemViewitemHeightItemViewStaggeredGridLayoutManager</li>\n</ul>\n<h4 id=\"2-LayoutManager-lt--gt-Recycler-lt--gt-Adapter\"><a href=\"#2-LayoutManager-lt--gt-Recycler-lt--gt-Adapter\" class=\"headerlink\" title=\"2. LayoutManager &lt;-&gt; Recycler &lt;&gt; Adapter\"></a>2. LayoutManager &lt;-&gt; Recycler &lt;&gt; Adapter</h4><p>LayoutManagerAdapter!!!</p>\n<h3 id=\"3-Recycler\"><a href=\"#3-Recycler\" class=\"headerlink\" title=\"3.Recycler\"></a>3.Recycler</h3><p>Recycler:</p>\n<ol>\n<li>Scrap Heap  detachAndScrapView() View</li>\n<li>Recycle Pool: removeAndRecycleView() Viewpositiondata</li>\n</ol>\n<h3 id=\"4-FillGaps-\"><a href=\"#4-FillGaps-\" class=\"headerlink\" title=\"4.FillGaps,\"></a>4.FillGaps,</h3><ol>\n<li>Discover firstVisible position/location</li>\n<li><p>layout Gaps</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">findFirstVisiblePosition</div></pre></td></tr></table></figure>\n</li>\n<li><p>Scrap everything(ScrapHeap)</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/**</div><div class=\"line\">        * Temporarily detach and scrap all currently attached child views. Views will be scrapped</div><div class=\"line\">        * into the given Recycler. The Recycler may prefer to reuse scrap views before</div><div class=\"line\">        * other views that were previously recycled.</div><div class=\"line\">        *</div><div class=\"line\">        * <span class=\"doctag\">@param</span> recycler Recycler to scrap views into</div><div class=\"line\">        */</span></div><div class=\"line\">       <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">detachAndScrapAttachedViews</span><span class=\"params\">(Recycler recycler)</span> </span>&#123;</div><div class=\"line\">           <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> childCount = getChildCount();</div><div class=\"line\">           <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = childCount - <span class=\"number\">1</span>; i &gt;= <span class=\"number\">0</span>; i--) &#123;</div><div class=\"line\">               <span class=\"keyword\">final</span> View v = getChildAt(i);</div><div class=\"line\">               scrapOrRecycleView(recycler, i, v);</div><div class=\"line\">           &#125;</div><div class=\"line\">       &#125;</div></pre></td></tr></table></figure>\n</li>\n<li><p>Lay out all visible positions</p>\n</li>\n</ol>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">for</span>(...)&#123;</div><div class=\"line\">    <span class=\"keyword\">int</span> nextPosition = ...;</div><div class=\"line\">    View view = recycler.getViewForPosition(nextPosition);</div><div class=\"line\">    addView(view);</div><div class=\"line\">    </div><div class=\"line\">    <span class=\"comment\">//MeasureLayoutmeasureChildlayoutItemDecoration</span></div><div class=\"line\">    measureChildWithMargin(view,...) </div><div class=\"line\">    layoutDecorated(view,....)</div><div class=\"line\">    &#125;</div></pre></td></tr></table></figure>\n<ol>\n<li>Recycle remaining views<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">final</span> List&lt;RecyclerView.ViewHolder&gt; scrapList =</div><div class=\"line\">    recycler.getScrapList();</div><div class=\"line\"><span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i=<span class=\"number\">0</span>;i&lt;scrapList.size;i++)&#123;</div><div class=\"line\">    <span class=\"keyword\">final</span> View removingView = scrapList.get(i);</div><div class=\"line\">    recycler.recycleView(removingView);</div><div class=\"line\">    &#125;</div></pre></td></tr></table></figure>\n</li>\n</ol>\n<p>: RecyclerPoolViewviewHolderLayoutParams</p>\n<h3 id=\"4-Scroll\"><a href=\"#4-Scroll\" class=\"headerlink\" title=\"4. Scroll\"></a>4. Scroll</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">scrollHorizontallyBy</span><span class=\"params\">(<span class=\"keyword\">int</span> dx, RecyclerView.Recycler recycler, RecyclerView.State state)</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//dx TouchEvent</span></div><div class=\"line\">dx &lt;<span class=\"number\">0</span> </div><div class=\"line\">dx &gt; <span class=\"number\">0</span></div><div class=\"line\"><span class=\"comment\">//ScrollBy</span></div><div class=\"line\"><span class=\"comment\">//</span></div><div class=\"line\">offsetChildrenHorizontal(delta);<span class=\"comment\">//ChildViewIterate</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"5-notifyDataSetChanged-\"><a href=\"#5-notifyDataSetChanged-\" class=\"headerlink\" title=\"5.notifyDataSetChanged()\"></a>5.notifyDataSetChanged()</h3><p>onLayoutChildrenlayout</p>\n<h3 id=\"6-ScrollToPosition-SmoothScrollToPosition\"><a href=\"#6-ScrollToPosition-SmoothScrollToPosition\" class=\"headerlink\" title=\"6.ScrollToPosition()SmoothScrollToPosition()\"></a>6.ScrollToPosition()SmoothScrollToPosition()</h3><p>:<br>scrollToPosition:Track Requested PositionTrigger requestLayout<br>SmoothscrollToPosition: Create a SmoothScroller instanceSet the Target Positioninvoke startSmoothScroll<br>SmoothScrollercomputeScrollVectorForPosition</p>\n<h3 id=\"7-supportPredictiveItemAnimationItemChange-Animation\"><a href=\"#7-supportPredictiveItemAnimationItemChange-Animation\" class=\"headerlink\" title=\"7. supportPredictiveItemAnimationItemChange Animation\"></a>7. supportPredictiveItemAnimationItemChange Animation</h3><p>onViewAttachedToWindowonBindViewHolderViewTranslationXAlpha(01)ScaleX</p>\n<h3 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h3><ol>\n<li><a href=\"https://github.com/devunwired/recyclerview-playground\">Dave Smith</a></li>\n<li><a href=\"https://github.com/500px/greedo-layout-for-android.git\">500px</a></li>\n</ol>\n","excerpt":"<h3 id=\"1-LinearLayoutManagerGridLayoutManagerStaggeredGridLayoutManager\"><a href=\"#1-LinearLayoutManagerGridLayoutManagerStaggeredGridLayoutManager\" class=\"headerlink\" title=\"1. LinearLayoutManagerGridLayoutManagerStaggeredGridLayoutManager\"></a>1. LinearLayoutManagerGridLayoutManagerStaggeredGridLayoutManager</h3><p></p>\n<p><img src=\"http://odzl05jxx.bkt.clouddn.com/Googling%20the%20Error%20Message.jpg?imageView2/2/w/600\" alt=\"\"><br>","more":"</p>\n<ul>\n<li>GridLayoutManagerItemColumn numVERTICAL<br>:<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">GridLayoutManager manager = <span class=\"keyword\">new</span> GridLayoutManager(</div><div class=\"line\">   <span class=\"keyword\">this</span>,<span class=\"number\">2</span> ,GridLayoutManager.VERTICAL,<span class=\"keyword\">false</span>)</div><div class=\"line\">   </div><div class=\"line\">manager.setSpanSizeLookup()&#123;</div><div class=\"line\">        <span class=\"keyword\">new</span> GridLayoutManager.SpanSizeLookup()&#123;</div><div class=\"line\">        <span class=\"meta\">@override</span></div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">getSpanSize</span><span class=\"params\">(<span class=\"keyword\">int</span> position)</span></span>&#123;</div><div class=\"line\">                <span class=\"keyword\">return</span> (position % <span class=\"number\">3</span> == <span class=\"number\">0</span> ? <span class=\"number\">2</span> : <span class=\"number\">1</span>)</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>2</p>\n<ul>\n<li>GridLayoutMangerItemViewitemHeightItemViewStaggeredGridLayoutManager</li>\n</ul>\n<h4 id=\"2-LayoutManager-lt--gt-Recycler-lt--gt-Adapter\"><a href=\"#2-LayoutManager-lt--gt-Recycler-lt--gt-Adapter\" class=\"headerlink\" title=\"2. LayoutManager &lt;-&gt; Recycler &lt;&gt; Adapter\"></a>2. LayoutManager &lt;-&gt; Recycler &lt;&gt; Adapter</h4><p>LayoutManagerAdapter!!!</p>\n<h3 id=\"3-Recycler\"><a href=\"#3-Recycler\" class=\"headerlink\" title=\"3.Recycler\"></a>3.Recycler</h3><p>Recycler:</p>\n<ol>\n<li>Scrap Heap  detachAndScrapView() View</li>\n<li>Recycle Pool: removeAndRecycleView() Viewpositiondata</li>\n</ol>\n<h3 id=\"4-FillGaps-\"><a href=\"#4-FillGaps-\" class=\"headerlink\" title=\"4.FillGaps,\"></a>4.FillGaps,</h3><ol>\n<li>Discover firstVisible position/location</li>\n<li><p>layout Gaps</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">findFirstVisiblePosition</div></pre></td></tr></table></figure>\n</li>\n<li><p>Scrap everything(ScrapHeap)</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/**</div><div class=\"line\">        * Temporarily detach and scrap all currently attached child views. Views will be scrapped</div><div class=\"line\">        * into the given Recycler. The Recycler may prefer to reuse scrap views before</div><div class=\"line\">        * other views that were previously recycled.</div><div class=\"line\">        *</div><div class=\"line\">        * <span class=\"doctag\">@param</span> recycler Recycler to scrap views into</div><div class=\"line\">        */</span></div><div class=\"line\">       <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">detachAndScrapAttachedViews</span><span class=\"params\">(Recycler recycler)</span> </span>&#123;</div><div class=\"line\">           <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> childCount = getChildCount();</div><div class=\"line\">           <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = childCount - <span class=\"number\">1</span>; i &gt;= <span class=\"number\">0</span>; i--) &#123;</div><div class=\"line\">               <span class=\"keyword\">final</span> View v = getChildAt(i);</div><div class=\"line\">               scrapOrRecycleView(recycler, i, v);</div><div class=\"line\">           &#125;</div><div class=\"line\">       &#125;</div></pre></td></tr></table></figure>\n</li>\n<li><p>Lay out all visible positions</p>\n</li>\n</ol>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">for</span>(...)&#123;</div><div class=\"line\">    <span class=\"keyword\">int</span> nextPosition = ...;</div><div class=\"line\">    View view = recycler.getViewForPosition(nextPosition);</div><div class=\"line\">    addView(view);</div><div class=\"line\">    </div><div class=\"line\">    <span class=\"comment\">//MeasureLayoutmeasureChildlayoutItemDecoration</span></div><div class=\"line\">    measureChildWithMargin(view,...) </div><div class=\"line\">    layoutDecorated(view,....)</div><div class=\"line\">    &#125;</div></pre></td></tr></table></figure>\n<ol>\n<li>Recycle remaining views<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">final</span> List&lt;RecyclerView.ViewHolder&gt; scrapList =</div><div class=\"line\">    recycler.getScrapList();</div><div class=\"line\"><span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i=<span class=\"number\">0</span>;i&lt;scrapList.size;i++)&#123;</div><div class=\"line\">    <span class=\"keyword\">final</span> View removingView = scrapList.get(i);</div><div class=\"line\">    recycler.recycleView(removingView);</div><div class=\"line\">    &#125;</div></pre></td></tr></table></figure>\n</li>\n</ol>\n<p>: RecyclerPoolViewviewHolderLayoutParams</p>\n<h3 id=\"4-Scroll\"><a href=\"#4-Scroll\" class=\"headerlink\" title=\"4. Scroll\"></a>4. Scroll</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">scrollHorizontallyBy</span><span class=\"params\">(<span class=\"keyword\">int</span> dx, RecyclerView.Recycler recycler, RecyclerView.State state)</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//dx TouchEvent</span></div><div class=\"line\">dx &lt;<span class=\"number\">0</span> </div><div class=\"line\">dx &gt; <span class=\"number\">0</span></div><div class=\"line\"><span class=\"comment\">//ScrollBy</span></div><div class=\"line\"><span class=\"comment\">//</span></div><div class=\"line\">offsetChildrenHorizontal(delta);<span class=\"comment\">//ChildViewIterate</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"5-notifyDataSetChanged-\"><a href=\"#5-notifyDataSetChanged-\" class=\"headerlink\" title=\"5.notifyDataSetChanged()\"></a>5.notifyDataSetChanged()</h3><p>onLayoutChildrenlayout</p>\n<h3 id=\"6-ScrollToPosition-SmoothScrollToPosition\"><a href=\"#6-ScrollToPosition-SmoothScrollToPosition\" class=\"headerlink\" title=\"6.ScrollToPosition()SmoothScrollToPosition()\"></a>6.ScrollToPosition()SmoothScrollToPosition()</h3><p>:<br>scrollToPosition:Track Requested PositionTrigger requestLayout<br>SmoothscrollToPosition: Create a SmoothScroller instanceSet the Target Positioninvoke startSmoothScroll<br>SmoothScrollercomputeScrollVectorForPosition</p>\n<h3 id=\"7-supportPredictiveItemAnimationItemChange-Animation\"><a href=\"#7-supportPredictiveItemAnimationItemChange-Animation\" class=\"headerlink\" title=\"7. supportPredictiveItemAnimationItemChange Animation\"></a>7. supportPredictiveItemAnimationItemChange Animation</h3><p>onViewAttachedToWindowonBindViewHolderViewTranslationXAlpha(01)ScaleX</p>\n<h3 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h3><ol>\n<li><a href=\"https://github.com/devunwired/recyclerview-playground\">Dave Smith</a></li>\n<li><a href=\"https://github.com/500px/greedo-layout-for-android.git\">500px</a></li>\n</ol>"},{"title":"Windows10lxml","date":"2016-10-31T07:49:38.000Z","_content":"\n\nlxml()b\n\n###  1. \n1. python2.7, win10 64\n2. pip  <!--more-->\n\n### 2. \n1. cmd \n> pip install wheel\n\n2. lxml\n   [](https://pypi.python.org/pypi/lxml/3.4.2)\n   win10 64 lxml-3.4.2-cp27-none-win_amd54.xhl\n\n3.  c:\\python27\\\n4. \n> pip install c:\\python27\\lxml...()\n\n5. \n> successfully installeed lxml-3.4.2\n\npycharm project\n\n### ref\n- [](http://jingyan.baidu.com/article/cbcede07177b8702f40b4df9.html)\n","source":"_posts/2016-10-31-install-lxml-on-windows.md","raw":"---\ntitle: Windows10lxml\ndate: 2016-10-31 15:49:38\ncategories: blog\ntags: [python]\n---\n\n\nlxml()b\n\n###  1. \n1. python2.7, win10 64\n2. pip  <!--more-->\n\n### 2. \n1. cmd \n> pip install wheel\n\n2. lxml\n   [](https://pypi.python.org/pypi/lxml/3.4.2)\n   win10 64 lxml-3.4.2-cp27-none-win_amd54.xhl\n\n3.  c:\\python27\\\n4. \n> pip install c:\\python27\\lxml...()\n\n5. \n> successfully installeed lxml-3.4.2\n\npycharm project\n\n### ref\n- [](http://jingyan.baidu.com/article/cbcede07177b8702f40b4df9.html)\n","slug":"2016-10-31-install-lxml-on-windows","published":1,"updated":"2017-06-15T15:39:29.896Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj50afgwa000li4vr3k7y0tns","content":"<p>lxml()b</p>\n<h3 id=\"1-\"><a href=\"#1-\" class=\"headerlink\" title=\"1. \"></a>1. </h3><ol>\n<li>python2.7, win10 64</li>\n<li>pip  <a id=\"more\"></a></li>\n</ol>\n<h3 id=\"2-\"><a href=\"#2-\" class=\"headerlink\" title=\"2. \"></a>2. </h3><ol>\n<li><p>cmd </p>\n<blockquote>\n<p>pip install wheel</p>\n</blockquote>\n</li>\n<li><p>lxml<br><a href=\"https://pypi.python.org/pypi/lxml/3.4.2\"></a><br>win10 64 lxml-3.4.2-cp27-none-win_amd54.xhl</p>\n</li>\n<li><p> c:\\python27\\</p>\n</li>\n<li><p></p>\n<blockquote>\n<p>pip install c:\\python27\\lxml()</p>\n</blockquote>\n</li>\n<li><p></p>\n<blockquote>\n<p>successfully installeed lxml-3.4.2</p>\n</blockquote>\n</li>\n</ol>\n<p>pycharm project</p>\n<h3 id=\"ref\"><a href=\"#ref\" class=\"headerlink\" title=\"ref\"></a>ref</h3><ul>\n<li><a href=\"http://jingyan.baidu.com/article/cbcede07177b8702f40b4df9.html\"></a></li>\n</ul>\n","excerpt":"<p>lxml()b</p>\n<h3 id=\"1-\"><a href=\"#1-\" class=\"headerlink\" title=\"1. \"></a>1. </h3><ol>\n<li>python2.7, win10 64</li>\n<li>pip ","more":"</li>\n</ol>\n<h3 id=\"2-\"><a href=\"#2-\" class=\"headerlink\" title=\"2. \"></a>2. </h3><ol>\n<li><p>cmd </p>\n<blockquote>\n<p>pip install wheel</p>\n</blockquote>\n</li>\n<li><p>lxml<br><a href=\"https://pypi.python.org/pypi/lxml/3.4.2\"></a><br>win10 64 lxml-3.4.2-cp27-none-win_amd54.xhl</p>\n</li>\n<li><p> c:\\python27\\</p>\n</li>\n<li><p></p>\n<blockquote>\n<p>pip install c:\\python27\\lxml()</p>\n</blockquote>\n</li>\n<li><p></p>\n<blockquote>\n<p>successfully installeed lxml-3.4.2</p>\n</blockquote>\n</li>\n</ol>\n<p>pycharm project</p>\n<h3 id=\"ref\"><a href=\"#ref\" class=\"headerlink\" title=\"ref\"></a>ref</h3><ul>\n<li><a href=\"http://jingyan.baidu.com/article/cbcede07177b8702f40b4df9.html\"></a></li>\n</ul>"},{"title":"Hexo","date":"2017-01-08T10:01:01.000Z","top":2,"_content":"\nhexobloghexo</br>\n![](http://odzl05jxx.bkt.clouddn.com/79a65f1911c81d736be0704904de8ea1.jpg?imageView2/2/w/600)\n\n<!--more-->\n\n### 1. yiliatheme\n[yilia](https://github.com/litten/hexo-theme-yilia)themebug fix\n\n### 2. \n- github\n```javascript\nhexo clean //\nhexo g -d // = hexo g + hexo d\nhexo s //localost:4000\n```\n\n- \n\n```javascript\n$ hexo g -d\nINFO  Start processing\nERROR Process failed: _posts/2016-12-10-adb-command.md\nYAMLException: can not read a block mapping entry; a multiline key may not be an implicit key at line 3, column 11:\n    categories:  []\n              ^\n    at generateError (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\js-yaml\\lib\\js-yaml\\loader.js:162:10)\n    at throwError (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\js-yaml\\lib\\js-yaml\\loader.js:168:9)\n    at readBlockMapping (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\js-yaml\\lib\\js-yaml\\loader.js:1040:9)\n    at composeNode (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\js-yaml\\lib\\js-yaml\\loader.js:1326:12)\n    at readDocument (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\js-yaml\\lib\\js-yaml\\loader.js:1488:3)\n    at loadDocuments (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\js-yaml\\lib\\js-yaml\\loader.js:1544:5)\n    at Object.load (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\js-yaml\\lib\\js-yaml\\loader.js:1561:19)\n    at parseYAML (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\hexo-front-matter\\lib\\front_matter.js:80:21)\n    at parse (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\hexo-front-matter\\lib\\front_matter.js:56:12)\n    at D:\\Blog\\github\\node_modules\\hexo\\lib\\plugins\\processor\\post.js:52:18\n    at tryCatcher (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\util.js:16:23)\n    at Promise._settlePromiseFromHandler (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:507:35)\n    at Promise._settlePromise (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:567:18)\n    at Promise._settlePromise0 (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:612:10)\n    at Promise._settlePromises (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:691:18)\n    at Promise._fulfill (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:636:18)\n    at PromiseArray._resolve (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise_array.js:125:19)\n    at PromiseArray._promiseFulfilled (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise_array.js:143:14)\n    at PromiseArray._iterate (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise_array.js:113:31)\n    at PromiseArray.init [as _init] (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise_array.js:77:10)\n    at Promise._settlePromise (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:564:21)\n    at Promise._settlePromise0 (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:612:10)\n    at Promise._settlePromises (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:691:18)\n    at Promise._fulfill (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:636:18)\n    at PromiseArray._resolve (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise_array.js:125:19)\n    at PromiseArray._promiseFulfilled (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise_array.js:143:14)\n    at Promise._settlePromise (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:572:26)\n    at Promise._settlePromise0 (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:612:10)\n    at Promise._settlePromises (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:691:18)\n    at Promise._fulfill (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:636:18)\n    at Promise._resolveCallback (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:431:57)\n    at Promise._settlePromiseFromHandler (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:522:17)\n    at Promise._settlePromise (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:567:18)\n    at Promise._settlePromise0 (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:612:10)\n    at Promise._settlePromises (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:691:18)\n    at Promise._fulfill (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:636:18)\n    at D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\nodeback.js:42:21\n    at D:\\Blog\\github\\node_modules\\hexo\\node_modules\\hexo-fs\\node_modules\\graceful-fs\\graceful-fs.js:78:16\n    at tryToString (fs.js:455:3)\n    at FSReqWrap.readFileAfterClose [as oncomplete] (fs.js:442:12)\nINFO  Files loaded in 1.48 s\nINFO  Generated: sitemap.xml\nINFO  Generated: atom.xml\nINFO  Generated: 2017/01/08/2017-01-08-trouble-shooting-with-my-blog/index.html\nINFO  Generated: index.html\nINFO  4 files generated in 2.26 s\nINFO  Deploying: git\n\n```\n _config.xmltitle****\n```\n---\ntitle: adb\ndate: 2016-12-10 21:14:14\ntags:\n - android\n - adb\n---\n```\ntags\n\n```\n---\ntitle: my awesometitle\ndate: 2017-05-07 16:48:01\ncategories: blog\ntags: [linux,python]\n---\n```\n\n\n### 3. \n\n- \n    node_modules/hexo-generator-index/lib/generator.js\n\n```javascript\n'use strict';\nvar pagination = require('hexo-pagination');\nmodule.exports = function(locals){\n  var config = this.config;\n  var posts = locals.posts;\n    posts.data = posts.data.sort(function(a, b) {\n        if(a.top && b.top) { // top\n            if(a.top == b.top) return b.date - a.date; // top\n            else return b.top - a.top; // top\n        }\n        else if(a.top && !b.top) { // toptop233\n            return -1;\n        }\n        else if(!a.top && b.top) {\n            return 1;\n        }\n        else return b.date - a.date; // \n    });\n  var paginationDir = config.pagination_dir || 'page';\n  return pagination('', posts, {\n    perPage: config.index_generator.per_page,\n    layout: ['index', 'archive'],\n    format: paginationDir + '/%d/',\n    data: {\n    __index: true\n    }\n  });\n};\n\n```\n\n- top : 1 \n```java\n title: Hexo\ndate: 2016-11-11 23:26:22\ntags:[]\ncategories: Hexo\ntop: 0 # 01\n```\n\n### 4. SublimeText\nSublimeTextTyproaMardkDownSubLimeText\n\n> **Ctrl+Shift+P**\nCtrl+P\nCtrl+G\nCtrl+W CTRL+F4\nCtrl+Shift+W\nCtrl+Shift+V\nCtrl+D\n**Ctrl+L**\n**Alt+Shift+**\n**Ctrl+Shift+L**\n**Ctrl+Shift+D**\n**Ctrl+X**\n**Ctrl+Shift+ **\n**Shift+ **\n**Ctrl+B markDownhtml**\n**Alt+2 Tabchromectrl+2**\n**Ctrl+R ***\n**[]  [ **\n** alt+F3 **\n**Ctrl+Enter **\n**Ctrl+Shift+Enter **\n**Shift+  **\n\n\n\nCtrl+Shift+DCtrl+Shift+Enter\nCtrl+M\nCtrl+U\nCtrl+J\nCtrl+F\nCtrl+Shift+F\nCtrl+H\nCtrl+N\nCtrl+K+B\nCtrl+Shift+M\nCtrl+F2/\nCtrl+/\nCtrl+Shift+/\nCtrl+Alt+/Focus\nCtrl+Shift+A\nF11\nShift+F11\nAlt+F3\nAlt+.\nShift+\nAlt+N\nTab\nCtrl\nCtrl+Shift+\n\n\n\n### 5. title[]\n###4#\n\n\n### 6. markdown\nMarkDown\n[MarkDown](http://www.cnblogs.com/JohnTsai/p/4027229.html)\n\n\n\n### ref\n- [Hexo](http://yanhuili.github.io/2016/11/21/hexo%E5%8D%9A%E6%96%87%E7%BD%AE%E9%A1%B6%E6%8A%80%E5%B7%A7/)\n- [SublimeText](http://www.daqianduan.com/4820.html)","source":"_posts/2017-01-08-trouble-shooting-with-my-blog.md","raw":"---\ntitle: Hexo\ndate: 2017-01-08 18:01:01\ncategories: blog\ntags: [hexo,]\ntop : 2\n---\n\nhexobloghexo</br>\n![](http://odzl05jxx.bkt.clouddn.com/79a65f1911c81d736be0704904de8ea1.jpg?imageView2/2/w/600)\n\n<!--more-->\n\n### 1. yiliatheme\n[yilia](https://github.com/litten/hexo-theme-yilia)themebug fix\n\n### 2. \n- github\n```javascript\nhexo clean //\nhexo g -d // = hexo g + hexo d\nhexo s //localost:4000\n```\n\n- \n\n```javascript\n$ hexo g -d\nINFO  Start processing\nERROR Process failed: _posts/2016-12-10-adb-command.md\nYAMLException: can not read a block mapping entry; a multiline key may not be an implicit key at line 3, column 11:\n    categories:  []\n              ^\n    at generateError (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\js-yaml\\lib\\js-yaml\\loader.js:162:10)\n    at throwError (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\js-yaml\\lib\\js-yaml\\loader.js:168:9)\n    at readBlockMapping (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\js-yaml\\lib\\js-yaml\\loader.js:1040:9)\n    at composeNode (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\js-yaml\\lib\\js-yaml\\loader.js:1326:12)\n    at readDocument (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\js-yaml\\lib\\js-yaml\\loader.js:1488:3)\n    at loadDocuments (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\js-yaml\\lib\\js-yaml\\loader.js:1544:5)\n    at Object.load (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\js-yaml\\lib\\js-yaml\\loader.js:1561:19)\n    at parseYAML (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\hexo-front-matter\\lib\\front_matter.js:80:21)\n    at parse (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\hexo-front-matter\\lib\\front_matter.js:56:12)\n    at D:\\Blog\\github\\node_modules\\hexo\\lib\\plugins\\processor\\post.js:52:18\n    at tryCatcher (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\util.js:16:23)\n    at Promise._settlePromiseFromHandler (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:507:35)\n    at Promise._settlePromise (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:567:18)\n    at Promise._settlePromise0 (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:612:10)\n    at Promise._settlePromises (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:691:18)\n    at Promise._fulfill (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:636:18)\n    at PromiseArray._resolve (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise_array.js:125:19)\n    at PromiseArray._promiseFulfilled (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise_array.js:143:14)\n    at PromiseArray._iterate (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise_array.js:113:31)\n    at PromiseArray.init [as _init] (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise_array.js:77:10)\n    at Promise._settlePromise (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:564:21)\n    at Promise._settlePromise0 (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:612:10)\n    at Promise._settlePromises (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:691:18)\n    at Promise._fulfill (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:636:18)\n    at PromiseArray._resolve (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise_array.js:125:19)\n    at PromiseArray._promiseFulfilled (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise_array.js:143:14)\n    at Promise._settlePromise (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:572:26)\n    at Promise._settlePromise0 (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:612:10)\n    at Promise._settlePromises (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:691:18)\n    at Promise._fulfill (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:636:18)\n    at Promise._resolveCallback (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:431:57)\n    at Promise._settlePromiseFromHandler (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:522:17)\n    at Promise._settlePromise (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:567:18)\n    at Promise._settlePromise0 (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:612:10)\n    at Promise._settlePromises (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:691:18)\n    at Promise._fulfill (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:636:18)\n    at D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\nodeback.js:42:21\n    at D:\\Blog\\github\\node_modules\\hexo\\node_modules\\hexo-fs\\node_modules\\graceful-fs\\graceful-fs.js:78:16\n    at tryToString (fs.js:455:3)\n    at FSReqWrap.readFileAfterClose [as oncomplete] (fs.js:442:12)\nINFO  Files loaded in 1.48 s\nINFO  Generated: sitemap.xml\nINFO  Generated: atom.xml\nINFO  Generated: 2017/01/08/2017-01-08-trouble-shooting-with-my-blog/index.html\nINFO  Generated: index.html\nINFO  4 files generated in 2.26 s\nINFO  Deploying: git\n\n```\n _config.xmltitle****\n```\n---\ntitle: adb\ndate: 2016-12-10 21:14:14\ntags:\n - android\n - adb\n---\n```\ntags\n\n```\n---\ntitle: my awesometitle\ndate: 2017-05-07 16:48:01\ncategories: blog\ntags: [linux,python]\n---\n```\n\n\n### 3. \n\n- \n    node_modules/hexo-generator-index/lib/generator.js\n\n```javascript\n'use strict';\nvar pagination = require('hexo-pagination');\nmodule.exports = function(locals){\n  var config = this.config;\n  var posts = locals.posts;\n    posts.data = posts.data.sort(function(a, b) {\n        if(a.top && b.top) { // top\n            if(a.top == b.top) return b.date - a.date; // top\n            else return b.top - a.top; // top\n        }\n        else if(a.top && !b.top) { // toptop233\n            return -1;\n        }\n        else if(!a.top && b.top) {\n            return 1;\n        }\n        else return b.date - a.date; // \n    });\n  var paginationDir = config.pagination_dir || 'page';\n  return pagination('', posts, {\n    perPage: config.index_generator.per_page,\n    layout: ['index', 'archive'],\n    format: paginationDir + '/%d/',\n    data: {\n    __index: true\n    }\n  });\n};\n\n```\n\n- top : 1 \n```java\n title: Hexo\ndate: 2016-11-11 23:26:22\ntags:[]\ncategories: Hexo\ntop: 0 # 01\n```\n\n### 4. SublimeText\nSublimeTextTyproaMardkDownSubLimeText\n\n> **Ctrl+Shift+P**\nCtrl+P\nCtrl+G\nCtrl+W CTRL+F4\nCtrl+Shift+W\nCtrl+Shift+V\nCtrl+D\n**Ctrl+L**\n**Alt+Shift+**\n**Ctrl+Shift+L**\n**Ctrl+Shift+D**\n**Ctrl+X**\n**Ctrl+Shift+ **\n**Shift+ **\n**Ctrl+B markDownhtml**\n**Alt+2 Tabchromectrl+2**\n**Ctrl+R ***\n**[]  [ **\n** alt+F3 **\n**Ctrl+Enter **\n**Ctrl+Shift+Enter **\n**Shift+  **\n\n\n\nCtrl+Shift+DCtrl+Shift+Enter\nCtrl+M\nCtrl+U\nCtrl+J\nCtrl+F\nCtrl+Shift+F\nCtrl+H\nCtrl+N\nCtrl+K+B\nCtrl+Shift+M\nCtrl+F2/\nCtrl+/\nCtrl+Shift+/\nCtrl+Alt+/Focus\nCtrl+Shift+A\nF11\nShift+F11\nAlt+F3\nAlt+.\nShift+\nAlt+N\nTab\nCtrl\nCtrl+Shift+\n\n\n\n### 5. title[]\n###4#\n\n\n### 6. markdown\nMarkDown\n[MarkDown](http://www.cnblogs.com/JohnTsai/p/4027229.html)\n\n\n\n### ref\n- [Hexo](http://yanhuili.github.io/2016/11/21/hexo%E5%8D%9A%E6%96%87%E7%BD%AE%E9%A1%B6%E6%8A%80%E5%B7%A7/)\n- [SublimeText](http://www.daqianduan.com/4820.html)","slug":"2017-01-08-trouble-shooting-with-my-blog","published":1,"updated":"2017-07-09T10:27:51.061Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj50afgwa000oi4vr3us5833h","content":"<p>hexobloghexo</br><br><img src=\"http://odzl05jxx.bkt.clouddn.com/79a65f1911c81d736be0704904de8ea1.jpg?imageView2/2/w/600\" alt=\"\"></p>\n<a id=\"more\"></a>\n<h3 id=\"1-yiliatheme\"><a href=\"#1-yiliatheme\" class=\"headerlink\" title=\"1. yiliatheme\"></a>1. yiliatheme</h3><p><a href=\"https://github.com/litten/hexo-theme-yilia\">yilia</a>themebug fix</p>\n<h3 id=\"2-\"><a href=\"#2-\" class=\"headerlink\" title=\"2. \"></a>2. </h3><ul>\n<li><p>github</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">hexo clean <span class=\"comment\">//</span></div><div class=\"line\">hexo g -d <span class=\"comment\">// = hexo g + hexo d</span></div><div class=\"line\">hexo s <span class=\"comment\">//localost:4000</span></div></pre></td></tr></table></figure>\n</li>\n<li><p></p>\n</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div></pre></td><td class=\"code\"><pre><div class=\"line\">$ hexo g -d</div><div class=\"line\">INFO  Start processing</div><div class=\"line\">ERROR Process failed: _posts/<span class=\"number\">2016</span><span class=\"number\">-12</span><span class=\"number\">-10</span>-adb-command.md</div><div class=\"line\">YAMLException: can not read a block mapping entry; a multiline key may not be an implicit key at line <span class=\"number\">3</span>, column <span class=\"number\">11</span>:</div><div class=\"line\">    categories:  []</div><div class=\"line\">              ^</div><div class=\"line\">    at generateError (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\js-yaml\\lib\\js-yaml\\loader.js:<span class=\"number\">162</span>:<span class=\"number\">10</span>)</div><div class=\"line\">    at throwError (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\js-yaml\\lib\\js-yaml\\loader.js:<span class=\"number\">168</span>:<span class=\"number\">9</span>)</div><div class=\"line\">    at readBlockMapping (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\js-yaml\\lib\\js-yaml\\loader.js:<span class=\"number\">1040</span>:<span class=\"number\">9</span>)</div><div class=\"line\">    at composeNode (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\js-yaml\\lib\\js-yaml\\loader.js:<span class=\"number\">1326</span>:<span class=\"number\">12</span>)</div><div class=\"line\">    at readDocument (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\js-yaml\\lib\\js-yaml\\loader.js:<span class=\"number\">1488</span>:<span class=\"number\">3</span>)</div><div class=\"line\">    at loadDocuments (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\js-yaml\\lib\\js-yaml\\loader.js:<span class=\"number\">1544</span>:<span class=\"number\">5</span>)</div><div class=\"line\">    at <span class=\"built_in\">Object</span>.load (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\js-yaml\\lib\\js-yaml\\loader.js:<span class=\"number\">1561</span>:<span class=\"number\">19</span>)</div><div class=\"line\">    at parseYAML (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\hexo-front-matter\\lib\\front_matter.js:<span class=\"number\">80</span>:<span class=\"number\">21</span>)</div><div class=\"line\">    at parse (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\hexo-front-matter\\lib\\front_matter.js:<span class=\"number\">56</span>:<span class=\"number\">12</span>)</div><div class=\"line\">    at D:\\Blog\\github\\node_modules\\hexo\\lib\\plugins\\processor\\post.js:<span class=\"number\">52</span>:<span class=\"number\">18</span></div><div class=\"line\">    at tryCatcher (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\util.js:<span class=\"number\">16</span>:<span class=\"number\">23</span>)</div><div class=\"line\">    at <span class=\"built_in\">Promise</span>._settlePromiseFromHandler (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:<span class=\"number\">507</span>:<span class=\"number\">35</span>)</div><div class=\"line\">    at <span class=\"built_in\">Promise</span>._settlePromise (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:<span class=\"number\">567</span>:<span class=\"number\">18</span>)</div><div class=\"line\">    at <span class=\"built_in\">Promise</span>._settlePromise0 (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:<span class=\"number\">612</span>:<span class=\"number\">10</span>)</div><div class=\"line\">    at <span class=\"built_in\">Promise</span>._settlePromises (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:<span class=\"number\">691</span>:<span class=\"number\">18</span>)</div><div class=\"line\">    at <span class=\"built_in\">Promise</span>._fulfill (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:<span class=\"number\">636</span>:<span class=\"number\">18</span>)</div><div class=\"line\">    at PromiseArray._resolve (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise_array.js:<span class=\"number\">125</span>:<span class=\"number\">19</span>)</div><div class=\"line\">    at PromiseArray._promiseFulfilled (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise_array.js:<span class=\"number\">143</span>:<span class=\"number\">14</span>)</div><div class=\"line\">    at PromiseArray._iterate (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise_array.js:<span class=\"number\">113</span>:<span class=\"number\">31</span>)</div><div class=\"line\">    at PromiseArray.init [<span class=\"keyword\">as</span> _init] (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise_array.js:<span class=\"number\">77</span>:<span class=\"number\">10</span>)</div><div class=\"line\">    at <span class=\"built_in\">Promise</span>._settlePromise (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:<span class=\"number\">564</span>:<span class=\"number\">21</span>)</div><div class=\"line\">    at <span class=\"built_in\">Promise</span>._settlePromise0 (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:<span class=\"number\">612</span>:<span class=\"number\">10</span>)</div><div class=\"line\">    at <span class=\"built_in\">Promise</span>._settlePromises (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:<span class=\"number\">691</span>:<span class=\"number\">18</span>)</div><div class=\"line\">    at <span class=\"built_in\">Promise</span>._fulfill (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:<span class=\"number\">636</span>:<span class=\"number\">18</span>)</div><div class=\"line\">    at PromiseArray._resolve (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise_array.js:<span class=\"number\">125</span>:<span class=\"number\">19</span>)</div><div class=\"line\">    at PromiseArray._promiseFulfilled (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise_array.js:<span class=\"number\">143</span>:<span class=\"number\">14</span>)</div><div class=\"line\">    at <span class=\"built_in\">Promise</span>._settlePromise (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:<span class=\"number\">572</span>:<span class=\"number\">26</span>)</div><div class=\"line\">    at <span class=\"built_in\">Promise</span>._settlePromise0 (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:<span class=\"number\">612</span>:<span class=\"number\">10</span>)</div><div class=\"line\">    at <span class=\"built_in\">Promise</span>._settlePromises (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:<span class=\"number\">691</span>:<span class=\"number\">18</span>)</div><div class=\"line\">    at <span class=\"built_in\">Promise</span>._fulfill (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:<span class=\"number\">636</span>:<span class=\"number\">18</span>)</div><div class=\"line\">    at <span class=\"built_in\">Promise</span>._resolveCallback (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:<span class=\"number\">431</span>:<span class=\"number\">57</span>)</div><div class=\"line\">    at <span class=\"built_in\">Promise</span>._settlePromiseFromHandler (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:<span class=\"number\">522</span>:<span class=\"number\">17</span>)</div><div class=\"line\">    at <span class=\"built_in\">Promise</span>._settlePromise (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:<span class=\"number\">567</span>:<span class=\"number\">18</span>)</div><div class=\"line\">    at <span class=\"built_in\">Promise</span>._settlePromise0 (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:<span class=\"number\">612</span>:<span class=\"number\">10</span>)</div><div class=\"line\">    at <span class=\"built_in\">Promise</span>._settlePromises (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:<span class=\"number\">691</span>:<span class=\"number\">18</span>)</div><div class=\"line\">    at <span class=\"built_in\">Promise</span>._fulfill (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:<span class=\"number\">636</span>:<span class=\"number\">18</span>)</div><div class=\"line\">    at D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\nodeback.js:<span class=\"number\">42</span>:<span class=\"number\">21</span></div><div class=\"line\">    at D:\\Blog\\github\\node_modules\\hexo\\node_modules\\hexo-fs\\node_modules\\graceful-fs\\graceful-fs.js:<span class=\"number\">78</span>:<span class=\"number\">16</span></div><div class=\"line\">    at tryToString (fs.js:<span class=\"number\">455</span>:<span class=\"number\">3</span>)</div><div class=\"line\">    at FSReqWrap.readFileAfterClose [<span class=\"keyword\">as</span> oncomplete] (fs.js:<span class=\"number\">442</span>:<span class=\"number\">12</span>)</div><div class=\"line\">INFO  Files loaded <span class=\"keyword\">in</span> <span class=\"number\">1.48</span> s</div><div class=\"line\">INFO  Generated: sitemap.xml</div><div class=\"line\">INFO  Generated: atom.xml</div><div class=\"line\">INFO  Generated: <span class=\"number\">2017</span>/<span class=\"number\">01</span>/<span class=\"number\">08</span>/<span class=\"number\">2017</span><span class=\"number\">-01</span><span class=\"number\">-08</span>-trouble-shooting-<span class=\"keyword\">with</span>-my-blog/index.html</div><div class=\"line\">INFO  Generated: index.html</div><div class=\"line\">INFO  <span class=\"number\">4</span> files generated <span class=\"keyword\">in</span> <span class=\"number\">2.26</span> s</div><div class=\"line\">INFO  Deploying: git</div></pre></td></tr></table></figure>\n<p> _config.xmltitle<strong></strong><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">---</div><div class=\"line\">title: adb</div><div class=\"line\">date: 2016-12-10 21:14:14</div><div class=\"line\">tags:</div><div class=\"line\"> - android</div><div class=\"line\"> - adb</div><div class=\"line\">---</div></pre></td></tr></table></figure></p>\n<p>tags<br><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">---</div><div class=\"line\">title: my awesometitle</div><div class=\"line\">date: 2017-05-07 16:48:01</div><div class=\"line\">categories: blog</div><div class=\"line\">tags: [linux,python]</div><div class=\"line\">---</div></pre></td></tr></table></figure></p>\n<h3 id=\"3-\"><a href=\"#3-\" class=\"headerlink\" title=\"3. \"></a>3. </h3><ul>\n<li><br>  node_modules/hexo-generator-index/lib/generator.js</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">'use strict'</span>;</div><div class=\"line\"><span class=\"keyword\">var</span> pagination = <span class=\"built_in\">require</span>(<span class=\"string\">'hexo-pagination'</span>);</div><div class=\"line\"><span class=\"built_in\">module</span>.exports = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">locals</span>)</span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> config = <span class=\"keyword\">this</span>.config;</div><div class=\"line\">  <span class=\"keyword\">var</span> posts = locals.posts;</div><div class=\"line\">    posts.data = posts.data.sort(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">a, b</span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">if</span>(a.top &amp;&amp; b.top) &#123; <span class=\"comment\">// top</span></div><div class=\"line\">            <span class=\"keyword\">if</span>(a.top == b.top) <span class=\"keyword\">return</span> b.date - a.date; <span class=\"comment\">// top</span></div><div class=\"line\">            <span class=\"keyword\">else</span> <span class=\"keyword\">return</span> b.top - a.top; <span class=\"comment\">// top</span></div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(a.top &amp;&amp; !b.top) &#123; <span class=\"comment\">// toptop233</span></div><div class=\"line\">            <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(!a.top &amp;&amp; b.top) &#123;</div><div class=\"line\">            <span class=\"keyword\">return</span> <span class=\"number\">1</span>;</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">return</span> b.date - a.date; <span class=\"comment\">// </span></div><div class=\"line\">    &#125;);</div><div class=\"line\">  <span class=\"keyword\">var</span> paginationDir = config.pagination_dir || <span class=\"string\">'page'</span>;</div><div class=\"line\">  <span class=\"keyword\">return</span> pagination(<span class=\"string\">''</span>, posts, &#123;</div><div class=\"line\">    perPage: config.index_generator.per_page,</div><div class=\"line\">    layout: [<span class=\"string\">'index'</span>, <span class=\"string\">'archive'</span>],</div><div class=\"line\">    format: paginationDir + <span class=\"string\">'/%d/'</span>,</div><div class=\"line\">    data: &#123;</div><div class=\"line\">    __index: <span class=\"literal\">true</span></div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;);</div><div class=\"line\">&#125;;</div></pre></td></tr></table></figure>\n<ul>\n<li>top : 1 <figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"> title: Hexo</div><div class=\"line\">date: 2016-11-11 23:26:22</div><div class=\"line\">tags:[]</div><div class=\"line\">categories: Hexo</div><div class=\"line\">top: 0 # 01</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"4-SublimeText\"><a href=\"#4-SublimeText\" class=\"headerlink\" title=\"4. SublimeText\"></a>4. SublimeText</h3><p>SublimeTextTyproaMardkDownSubLimeText</p>\n<blockquote>\n<p><strong>Ctrl+Shift+P</strong><br>Ctrl+P<br>Ctrl+G<br>Ctrl+W CTRL+F4<br>Ctrl+Shift+W<br>Ctrl+Shift+V<br>Ctrl+D<br><strong>Ctrl+L</strong><br><strong>Alt+Shift+</strong><br><strong>Ctrl+Shift+L</strong><br><strong>Ctrl+Shift+D</strong><br><strong>Ctrl+X</strong><br><strong>Ctrl+Shift+ </strong><br><strong>Shift+ </strong><br><strong>Ctrl+B markDownhtml</strong><br><strong>Alt+2 Tabchromectrl+2</strong><br><strong>Ctrl+R *</strong><br><strong>[]  [ </strong><br><strong> alt+F3 </strong><br><strong>Ctrl+Enter </strong><br><strong>Ctrl+Shift+Enter </strong><br><strong>Shift+  </strong></p>\n</blockquote>\n<p>Ctrl+Shift+DCtrl+Shift+Enter<br>Ctrl+M<br>Ctrl+U<br>Ctrl+J<br>Ctrl+F<br>Ctrl+Shift+F<br>Ctrl+H<br>Ctrl+N<br>Ctrl+K+B<br>Ctrl+Shift+M<br>Ctrl+F2/<br>Ctrl+/<br>Ctrl+Shift+/<br>Ctrl+Alt+/Focus<br>Ctrl+Shift+A<br>F11<br>Shift+F11<br>Alt+F3<br>Alt+.<br>Shift+<br>Alt+N<br>Tab<br>Ctrl<br>Ctrl+Shift+</p>\n<h3 id=\"5-title-\"><a href=\"#5-title-\" class=\"headerlink\" title=\"5. title[]\"></a>5. title[]</h3><p>###4#</p>\n<h3 id=\"6-markdown\"><a href=\"#6-markdown\" class=\"headerlink\" title=\"6. markdown\"></a>6. markdown</h3><p>MarkDown<br><a href=\"http://www.cnblogs.com/JohnTsai/p/4027229.html\">MarkDown</a></p>\n<h3 id=\"ref\"><a href=\"#ref\" class=\"headerlink\" title=\"ref\"></a>ref</h3><ul>\n<li><a href=\"http://yanhuili.github.io/2016/11/21/hexo%E5%8D%9A%E6%96%87%E7%BD%AE%E9%A1%B6%E6%8A%80%E5%B7%A7/\">Hexo</a></li>\n<li><a href=\"http://www.daqianduan.com/4820.html\">SublimeText</a></li>\n</ul>\n","excerpt":"<p>hexobloghexo</br><br><img src=\"http://odzl05jxx.bkt.clouddn.com/79a65f1911c81d736be0704904de8ea1.jpg?imageView2/2/w/600\" alt=\"\"></p>","more":"<h3 id=\"1-yiliatheme\"><a href=\"#1-yiliatheme\" class=\"headerlink\" title=\"1. yiliatheme\"></a>1. yiliatheme</h3><p><a href=\"https://github.com/litten/hexo-theme-yilia\">yilia</a>themebug fix</p>\n<h3 id=\"2-\"><a href=\"#2-\" class=\"headerlink\" title=\"2. \"></a>2. </h3><ul>\n<li><p>github</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">hexo clean <span class=\"comment\">//</span></div><div class=\"line\">hexo g -d <span class=\"comment\">// = hexo g + hexo d</span></div><div class=\"line\">hexo s <span class=\"comment\">//localost:4000</span></div></pre></td></tr></table></figure>\n</li>\n<li><p></p>\n</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div></pre></td><td class=\"code\"><pre><div class=\"line\">$ hexo g -d</div><div class=\"line\">INFO  Start processing</div><div class=\"line\">ERROR Process failed: _posts/<span class=\"number\">2016</span><span class=\"number\">-12</span><span class=\"number\">-10</span>-adb-command.md</div><div class=\"line\">YAMLException: can not read a block mapping entry; a multiline key may not be an implicit key at line <span class=\"number\">3</span>, column <span class=\"number\">11</span>:</div><div class=\"line\">    categories:  []</div><div class=\"line\">              ^</div><div class=\"line\">    at generateError (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\js-yaml\\lib\\js-yaml\\loader.js:<span class=\"number\">162</span>:<span class=\"number\">10</span>)</div><div class=\"line\">    at throwError (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\js-yaml\\lib\\js-yaml\\loader.js:<span class=\"number\">168</span>:<span class=\"number\">9</span>)</div><div class=\"line\">    at readBlockMapping (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\js-yaml\\lib\\js-yaml\\loader.js:<span class=\"number\">1040</span>:<span class=\"number\">9</span>)</div><div class=\"line\">    at composeNode (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\js-yaml\\lib\\js-yaml\\loader.js:<span class=\"number\">1326</span>:<span class=\"number\">12</span>)</div><div class=\"line\">    at readDocument (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\js-yaml\\lib\\js-yaml\\loader.js:<span class=\"number\">1488</span>:<span class=\"number\">3</span>)</div><div class=\"line\">    at loadDocuments (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\js-yaml\\lib\\js-yaml\\loader.js:<span class=\"number\">1544</span>:<span class=\"number\">5</span>)</div><div class=\"line\">    at <span class=\"built_in\">Object</span>.load (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\js-yaml\\lib\\js-yaml\\loader.js:<span class=\"number\">1561</span>:<span class=\"number\">19</span>)</div><div class=\"line\">    at parseYAML (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\hexo-front-matter\\lib\\front_matter.js:<span class=\"number\">80</span>:<span class=\"number\">21</span>)</div><div class=\"line\">    at parse (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\hexo-front-matter\\lib\\front_matter.js:<span class=\"number\">56</span>:<span class=\"number\">12</span>)</div><div class=\"line\">    at D:\\Blog\\github\\node_modules\\hexo\\lib\\plugins\\processor\\post.js:<span class=\"number\">52</span>:<span class=\"number\">18</span></div><div class=\"line\">    at tryCatcher (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\util.js:<span class=\"number\">16</span>:<span class=\"number\">23</span>)</div><div class=\"line\">    at <span class=\"built_in\">Promise</span>._settlePromiseFromHandler (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:<span class=\"number\">507</span>:<span class=\"number\">35</span>)</div><div class=\"line\">    at <span class=\"built_in\">Promise</span>._settlePromise (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:<span class=\"number\">567</span>:<span class=\"number\">18</span>)</div><div class=\"line\">    at <span class=\"built_in\">Promise</span>._settlePromise0 (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:<span class=\"number\">612</span>:<span class=\"number\">10</span>)</div><div class=\"line\">    at <span class=\"built_in\">Promise</span>._settlePromises (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:<span class=\"number\">691</span>:<span class=\"number\">18</span>)</div><div class=\"line\">    at <span class=\"built_in\">Promise</span>._fulfill (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:<span class=\"number\">636</span>:<span class=\"number\">18</span>)</div><div class=\"line\">    at PromiseArray._resolve (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise_array.js:<span class=\"number\">125</span>:<span class=\"number\">19</span>)</div><div class=\"line\">    at PromiseArray._promiseFulfilled (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise_array.js:<span class=\"number\">143</span>:<span class=\"number\">14</span>)</div><div class=\"line\">    at PromiseArray._iterate (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise_array.js:<span class=\"number\">113</span>:<span class=\"number\">31</span>)</div><div class=\"line\">    at PromiseArray.init [<span class=\"keyword\">as</span> _init] (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise_array.js:<span class=\"number\">77</span>:<span class=\"number\">10</span>)</div><div class=\"line\">    at <span class=\"built_in\">Promise</span>._settlePromise (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:<span class=\"number\">564</span>:<span class=\"number\">21</span>)</div><div class=\"line\">    at <span class=\"built_in\">Promise</span>._settlePromise0 (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:<span class=\"number\">612</span>:<span class=\"number\">10</span>)</div><div class=\"line\">    at <span class=\"built_in\">Promise</span>._settlePromises (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:<span class=\"number\">691</span>:<span class=\"number\">18</span>)</div><div class=\"line\">    at <span class=\"built_in\">Promise</span>._fulfill (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:<span class=\"number\">636</span>:<span class=\"number\">18</span>)</div><div class=\"line\">    at PromiseArray._resolve (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise_array.js:<span class=\"number\">125</span>:<span class=\"number\">19</span>)</div><div class=\"line\">    at PromiseArray._promiseFulfilled (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise_array.js:<span class=\"number\">143</span>:<span class=\"number\">14</span>)</div><div class=\"line\">    at <span class=\"built_in\">Promise</span>._settlePromise (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:<span class=\"number\">572</span>:<span class=\"number\">26</span>)</div><div class=\"line\">    at <span class=\"built_in\">Promise</span>._settlePromise0 (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:<span class=\"number\">612</span>:<span class=\"number\">10</span>)</div><div class=\"line\">    at <span class=\"built_in\">Promise</span>._settlePromises (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:<span class=\"number\">691</span>:<span class=\"number\">18</span>)</div><div class=\"line\">    at <span class=\"built_in\">Promise</span>._fulfill (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:<span class=\"number\">636</span>:<span class=\"number\">18</span>)</div><div class=\"line\">    at <span class=\"built_in\">Promise</span>._resolveCallback (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:<span class=\"number\">431</span>:<span class=\"number\">57</span>)</div><div class=\"line\">    at <span class=\"built_in\">Promise</span>._settlePromiseFromHandler (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:<span class=\"number\">522</span>:<span class=\"number\">17</span>)</div><div class=\"line\">    at <span class=\"built_in\">Promise</span>._settlePromise (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:<span class=\"number\">567</span>:<span class=\"number\">18</span>)</div><div class=\"line\">    at <span class=\"built_in\">Promise</span>._settlePromise0 (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:<span class=\"number\">612</span>:<span class=\"number\">10</span>)</div><div class=\"line\">    at <span class=\"built_in\">Promise</span>._settlePromises (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:<span class=\"number\">691</span>:<span class=\"number\">18</span>)</div><div class=\"line\">    at <span class=\"built_in\">Promise</span>._fulfill (D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\promise.js:<span class=\"number\">636</span>:<span class=\"number\">18</span>)</div><div class=\"line\">    at D:\\Blog\\github\\node_modules\\hexo\\node_modules\\bluebird\\js\\release\\nodeback.js:<span class=\"number\">42</span>:<span class=\"number\">21</span></div><div class=\"line\">    at D:\\Blog\\github\\node_modules\\hexo\\node_modules\\hexo-fs\\node_modules\\graceful-fs\\graceful-fs.js:<span class=\"number\">78</span>:<span class=\"number\">16</span></div><div class=\"line\">    at tryToString (fs.js:<span class=\"number\">455</span>:<span class=\"number\">3</span>)</div><div class=\"line\">    at FSReqWrap.readFileAfterClose [<span class=\"keyword\">as</span> oncomplete] (fs.js:<span class=\"number\">442</span>:<span class=\"number\">12</span>)</div><div class=\"line\">INFO  Files loaded <span class=\"keyword\">in</span> <span class=\"number\">1.48</span> s</div><div class=\"line\">INFO  Generated: sitemap.xml</div><div class=\"line\">INFO  Generated: atom.xml</div><div class=\"line\">INFO  Generated: <span class=\"number\">2017</span>/<span class=\"number\">01</span>/<span class=\"number\">08</span>/<span class=\"number\">2017</span><span class=\"number\">-01</span><span class=\"number\">-08</span>-trouble-shooting-<span class=\"keyword\">with</span>-my-blog/index.html</div><div class=\"line\">INFO  Generated: index.html</div><div class=\"line\">INFO  <span class=\"number\">4</span> files generated <span class=\"keyword\">in</span> <span class=\"number\">2.26</span> s</div><div class=\"line\">INFO  Deploying: git</div></pre></td></tr></table></figure>\n<p> _config.xmltitle<strong></strong><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">---</div><div class=\"line\">title: adb</div><div class=\"line\">date: 2016-12-10 21:14:14</div><div class=\"line\">tags:</div><div class=\"line\"> - android</div><div class=\"line\"> - adb</div><div class=\"line\">---</div></pre></td></tr></table></figure></p>\n<p>tags<br><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">---</div><div class=\"line\">title: my awesometitle</div><div class=\"line\">date: 2017-05-07 16:48:01</div><div class=\"line\">categories: blog</div><div class=\"line\">tags: [linux,python]</div><div class=\"line\">---</div></pre></td></tr></table></figure></p>\n<h3 id=\"3-\"><a href=\"#3-\" class=\"headerlink\" title=\"3. \"></a>3. </h3><ul>\n<li><br>  node_modules/hexo-generator-index/lib/generator.js</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">'use strict'</span>;</div><div class=\"line\"><span class=\"keyword\">var</span> pagination = <span class=\"built_in\">require</span>(<span class=\"string\">'hexo-pagination'</span>);</div><div class=\"line\"><span class=\"built_in\">module</span>.exports = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">locals</span>)</span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> config = <span class=\"keyword\">this</span>.config;</div><div class=\"line\">  <span class=\"keyword\">var</span> posts = locals.posts;</div><div class=\"line\">    posts.data = posts.data.sort(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">a, b</span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">if</span>(a.top &amp;&amp; b.top) &#123; <span class=\"comment\">// top</span></div><div class=\"line\">            <span class=\"keyword\">if</span>(a.top == b.top) <span class=\"keyword\">return</span> b.date - a.date; <span class=\"comment\">// top</span></div><div class=\"line\">            <span class=\"keyword\">else</span> <span class=\"keyword\">return</span> b.top - a.top; <span class=\"comment\">// top</span></div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(a.top &amp;&amp; !b.top) &#123; <span class=\"comment\">// toptop233</span></div><div class=\"line\">            <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(!a.top &amp;&amp; b.top) &#123;</div><div class=\"line\">            <span class=\"keyword\">return</span> <span class=\"number\">1</span>;</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">return</span> b.date - a.date; <span class=\"comment\">// </span></div><div class=\"line\">    &#125;);</div><div class=\"line\">  <span class=\"keyword\">var</span> paginationDir = config.pagination_dir || <span class=\"string\">'page'</span>;</div><div class=\"line\">  <span class=\"keyword\">return</span> pagination(<span class=\"string\">''</span>, posts, &#123;</div><div class=\"line\">    perPage: config.index_generator.per_page,</div><div class=\"line\">    layout: [<span class=\"string\">'index'</span>, <span class=\"string\">'archive'</span>],</div><div class=\"line\">    format: paginationDir + <span class=\"string\">'/%d/'</span>,</div><div class=\"line\">    data: &#123;</div><div class=\"line\">    __index: <span class=\"literal\">true</span></div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;);</div><div class=\"line\">&#125;;</div></pre></td></tr></table></figure>\n<ul>\n<li>top : 1 <figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"> title: Hexo</div><div class=\"line\">date: 2016-11-11 23:26:22</div><div class=\"line\">tags:[]</div><div class=\"line\">categories: Hexo</div><div class=\"line\">top: 0 # 01</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"4-SublimeText\"><a href=\"#4-SublimeText\" class=\"headerlink\" title=\"4. SublimeText\"></a>4. SublimeText</h3><p>SublimeTextTyproaMardkDownSubLimeText</p>\n<blockquote>\n<p><strong>Ctrl+Shift+P</strong><br>Ctrl+P<br>Ctrl+G<br>Ctrl+W CTRL+F4<br>Ctrl+Shift+W<br>Ctrl+Shift+V<br>Ctrl+D<br><strong>Ctrl+L</strong><br><strong>Alt+Shift+</strong><br><strong>Ctrl+Shift+L</strong><br><strong>Ctrl+Shift+D</strong><br><strong>Ctrl+X</strong><br><strong>Ctrl+Shift+ </strong><br><strong>Shift+ </strong><br><strong>Ctrl+B markDownhtml</strong><br><strong>Alt+2 Tabchromectrl+2</strong><br><strong>Ctrl+R *</strong><br><strong>[]  [ </strong><br><strong> alt+F3 </strong><br><strong>Ctrl+Enter </strong><br><strong>Ctrl+Shift+Enter </strong><br><strong>Shift+  </strong></p>\n</blockquote>\n<p>Ctrl+Shift+DCtrl+Shift+Enter<br>Ctrl+M<br>Ctrl+U<br>Ctrl+J<br>Ctrl+F<br>Ctrl+Shift+F<br>Ctrl+H<br>Ctrl+N<br>Ctrl+K+B<br>Ctrl+Shift+M<br>Ctrl+F2/<br>Ctrl+/<br>Ctrl+Shift+/<br>Ctrl+Alt+/Focus<br>Ctrl+Shift+A<br>F11<br>Shift+F11<br>Alt+F3<br>Alt+.<br>Shift+<br>Alt+N<br>Tab<br>Ctrl<br>Ctrl+Shift+</p>\n<h3 id=\"5-title-\"><a href=\"#5-title-\" class=\"headerlink\" title=\"5. title[]\"></a>5. title[]</h3><p>###4#</p>\n<h3 id=\"6-markdown\"><a href=\"#6-markdown\" class=\"headerlink\" title=\"6. markdown\"></a>6. markdown</h3><p>MarkDown<br><a href=\"http://www.cnblogs.com/JohnTsai/p/4027229.html\">MarkDown</a></p>\n<h3 id=\"ref\"><a href=\"#ref\" class=\"headerlink\" title=\"ref\"></a>ref</h3><ul>\n<li><a href=\"http://yanhuili.github.io/2016/11/21/hexo%E5%8D%9A%E6%96%87%E7%BD%AE%E9%A1%B6%E6%8A%80%E5%B7%A7/\">Hexo</a></li>\n<li><a href=\"http://www.daqianduan.com/4820.html\">SublimeText</a></li>\n</ul>"},{"title":"adb","date":"2016-12-10T13:14:14.000Z","_content":"\n## ADB \n\nandroid studiocommandGoogle IO\n<!--more-->\n\n\n > adb get-serialno\n\n\n > adb devices\n\n\n\n > adb reboot\n\nbootloader\n\n> adb reboot bootloader\n\nrecovery\n\n> adb reboot recovery\n\nlog\n\n > adb logcat\n\nadb\n\n> adb kill-server\n\nadb\n\n> adb start-server\n\nMAC\n\n> adb shell  cat /sys/class/net/wlan0/address\n\nCPU\n\n> adb shell cat /proc/cpuinfo\n\nAPK\n\n> adb install <apkfile> //adb install baidu.apk\n\napk\n\n> adb install -r <apkfile> //adb install -r baidu.apk\n\napksd\n\n> adb install -s <apkfile> // adb install -s baidu.apk\n\nAPK\n\n> adb uninstall <package> //adb uninstall com.baidu.search\n\napp\n\n> adb uninstall -k <package> //adb uninstall -k com.baidu.search\n\n\n\n> adb shell am start -n <package_name>/.<activity_class_name>\n\ncpu\n\n> adb shell top\n\n6app\n\n> adb shell top -m 6\n\n\n\n> adb shell top -n 1\n\n\n\n> adb shell procrank\n\n\n\n> adb shell kill [pid]\n\n\n\n> adb shell ps\n\n\n\n> adb shell ps -x [PID]\n\nservices\n\n> adb shell service list\n\n\n\n> adb shell cat /proc/meminfo\n\nIO\n\n> adb shell cat /proc/iomem\n\nsystem\n\n> adb remount\n\n\n\n> adb push <local> <remote>\n\n\n\n> adb pull <remote>  <local>\n\ndosdir\n\n> adb shell ls\n\ndoscd \n\n> adb shell cd <folder>\n\n\n\n> adb shell rename path/oldfilename path/newfilename\n\nsystem/avi.apk\n\n> adb shell rm /system/avi.apk\n\n\n\n> adb shell rm -r <folder>\n\n\n\n> adb shell mv path/file newpath/file\n\n\n\n> adb shell chmod 777 /system/fonts/DroidSansFallback.ttf\n\n\n\n> adb shell mkdir path/foldelname\n\n\n\n> adb shell cat <file>\n\nwifi\n\n>adb shell cat /data/misc/wifi/*.conf\n\nlog\n\n> adb logcat -c\n\nbug\n\n> adb bugreport\n\n\n\n> adb shell cat /system/build.prop\n\nADB\n\n> adb help\n\nmonkey\n\n> adb shell monkey -v -p your.package.name 500\n\n\n\n> adb shell screenrecord /sdcard/demo.mp4  Demo.mp4180s\nctrl+c \n\n\n\n\n### Ref: \n\n- [](http://zmywly8866.github.io/2015/01/24/all-adb-command.html)\n","source":"_posts/2016-12-10-adb-command.md","raw":"---\ntitle: adb\ndate: 2016-12-10 21:14:14\ntags:\n - android\n - adb\n---\n\n## ADB \n\nandroid studiocommandGoogle IO\n<!--more-->\n\n\n > adb get-serialno\n\n\n > adb devices\n\n\n\n > adb reboot\n\nbootloader\n\n> adb reboot bootloader\n\nrecovery\n\n> adb reboot recovery\n\nlog\n\n > adb logcat\n\nadb\n\n> adb kill-server\n\nadb\n\n> adb start-server\n\nMAC\n\n> adb shell  cat /sys/class/net/wlan0/address\n\nCPU\n\n> adb shell cat /proc/cpuinfo\n\nAPK\n\n> adb install <apkfile> //adb install baidu.apk\n\napk\n\n> adb install -r <apkfile> //adb install -r baidu.apk\n\napksd\n\n> adb install -s <apkfile> // adb install -s baidu.apk\n\nAPK\n\n> adb uninstall <package> //adb uninstall com.baidu.search\n\napp\n\n> adb uninstall -k <package> //adb uninstall -k com.baidu.search\n\n\n\n> adb shell am start -n <package_name>/.<activity_class_name>\n\ncpu\n\n> adb shell top\n\n6app\n\n> adb shell top -m 6\n\n\n\n> adb shell top -n 1\n\n\n\n> adb shell procrank\n\n\n\n> adb shell kill [pid]\n\n\n\n> adb shell ps\n\n\n\n> adb shell ps -x [PID]\n\nservices\n\n> adb shell service list\n\n\n\n> adb shell cat /proc/meminfo\n\nIO\n\n> adb shell cat /proc/iomem\n\nsystem\n\n> adb remount\n\n\n\n> adb push <local> <remote>\n\n\n\n> adb pull <remote>  <local>\n\ndosdir\n\n> adb shell ls\n\ndoscd \n\n> adb shell cd <folder>\n\n\n\n> adb shell rename path/oldfilename path/newfilename\n\nsystem/avi.apk\n\n> adb shell rm /system/avi.apk\n\n\n\n> adb shell rm -r <folder>\n\n\n\n> adb shell mv path/file newpath/file\n\n\n\n> adb shell chmod 777 /system/fonts/DroidSansFallback.ttf\n\n\n\n> adb shell mkdir path/foldelname\n\n\n\n> adb shell cat <file>\n\nwifi\n\n>adb shell cat /data/misc/wifi/*.conf\n\nlog\n\n> adb logcat -c\n\nbug\n\n> adb bugreport\n\n\n\n> adb shell cat /system/build.prop\n\nADB\n\n> adb help\n\nmonkey\n\n> adb shell monkey -v -p your.package.name 500\n\n\n\n> adb shell screenrecord /sdcard/demo.mp4  Demo.mp4180s\nctrl+c \n\n\n\n\n### Ref: \n\n- [](http://zmywly8866.github.io/2015/01/24/all-adb-command.html)\n","slug":"2016-12-10-adb-command","published":1,"updated":"2017-06-18T02:32:52.366Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj50afgwa000si4vrc3qy3y5d","content":"<h2 id=\"ADB-\"><a href=\"#ADB-\" class=\"headerlink\" title=\"ADB \"></a>ADB </h2><p>android studiocommandGoogle IO<br><a id=\"more\"></a></p>\n<p></p>\n<blockquote>\n<p>adb get-serialno</p>\n</blockquote>\n<p></p>\n<blockquote>\n<p>adb devices</p>\n</blockquote>\n<p></p>\n<blockquote>\n<p>adb reboot</p>\n</blockquote>\n<p>bootloader</p>\n<blockquote>\n<p>adb reboot bootloader</p>\n</blockquote>\n<p>recovery</p>\n<blockquote>\n<p>adb reboot recovery</p>\n</blockquote>\n<p>log</p>\n<blockquote>\n<p>adb logcat</p>\n</blockquote>\n<p>adb</p>\n<blockquote>\n<p>adb kill-server</p>\n</blockquote>\n<p>adb</p>\n<blockquote>\n<p>adb start-server</p>\n</blockquote>\n<p>MAC</p>\n<blockquote>\n<p>adb shell  cat /sys/class/net/wlan0/address</p>\n</blockquote>\n<p>CPU</p>\n<blockquote>\n<p>adb shell cat /proc/cpuinfo</p>\n</blockquote>\n<p>APK</p>\n<blockquote>\n<p>adb install <apkfile> //adb install baidu.apk</p>\n</blockquote>\n<p>apk</p>\n<blockquote>\n<p>adb install -r <apkfile> //adb install -r baidu.apk</p>\n</blockquote>\n<p>apksd</p>\n<blockquote>\n<p>adb install -s <apkfile> // adb install -s baidu.apk</p>\n</blockquote>\n<p>APK</p>\n<blockquote>\n<p>adb uninstall <package> //adb uninstall com.baidu.search</p>\n</blockquote>\n<p>app</p>\n<blockquote>\n<p>adb uninstall -k <package> //adb uninstall -k com.baidu.search</p>\n</blockquote>\n<p></p>\n<blockquote>\n<p>adb shell am start -n <package_name>/.<activity_class_name></p>\n</blockquote>\n<p>cpu</p>\n<blockquote>\n<p>adb shell top</p>\n</blockquote>\n<p>6app</p>\n<blockquote>\n<p>adb shell top -m 6</p>\n</blockquote>\n<p></p>\n<blockquote>\n<p>adb shell top -n 1</p>\n</blockquote>\n<p></p>\n<blockquote>\n<p>adb shell procrank</p>\n</blockquote>\n<p></p>\n<blockquote>\n<p>adb shell kill [pid]</p>\n</blockquote>\n<p></p>\n<blockquote>\n<p>adb shell ps</p>\n</blockquote>\n<p></p>\n<blockquote>\n<p>adb shell ps -x [PID]</p>\n</blockquote>\n<p>services</p>\n<blockquote>\n<p>adb shell service list</p>\n</blockquote>\n<p></p>\n<blockquote>\n<p>adb shell cat /proc/meminfo</p>\n</blockquote>\n<p>IO</p>\n<blockquote>\n<p>adb shell cat /proc/iomem</p>\n</blockquote>\n<p>system</p>\n<blockquote>\n<p>adb remount</p>\n</blockquote>\n<p></p>\n<blockquote>\n<p>adb push <local> <remote></p>\n</blockquote>\n<p></p>\n<blockquote>\n<p>adb pull <remote>  <local></p>\n</blockquote>\n<p>dosdir</p>\n<blockquote>\n<p>adb shell ls</p>\n</blockquote>\n<p>doscd </p>\n<blockquote>\n<p>adb shell cd <folder></p>\n</blockquote>\n<p></p>\n<blockquote>\n<p>adb shell rename path/oldfilename path/newfilename</p>\n</blockquote>\n<p>system/avi.apk</p>\n<blockquote>\n<p>adb shell rm /system/avi.apk</p>\n</blockquote>\n<p></p>\n<blockquote>\n<p>adb shell rm -r <folder></p>\n</blockquote>\n<p></p>\n<blockquote>\n<p>adb shell mv path/file newpath/file</p>\n</blockquote>\n<p></p>\n<blockquote>\n<p>adb shell chmod 777 /system/fonts/DroidSansFallback.ttf</p>\n</blockquote>\n<p></p>\n<blockquote>\n<p>adb shell mkdir path/foldelname</p>\n</blockquote>\n<p></p>\n<blockquote>\n<p>adb shell cat <file></p>\n</blockquote>\n<p>wifi</p>\n<blockquote>\n<p>adb shell cat /data/misc/wifi/*.conf</p>\n</blockquote>\n<p>log</p>\n<blockquote>\n<p>adb logcat -c</p>\n</blockquote>\n<p>bug</p>\n<blockquote>\n<p>adb bugreport</p>\n</blockquote>\n<p></p>\n<blockquote>\n<p>adb shell cat /system/build.prop</p>\n</blockquote>\n<p>ADB</p>\n<blockquote>\n<p>adb help</p>\n</blockquote>\n<p>monkey</p>\n<blockquote>\n<p>adb shell monkey -v -p your.package.name 500</p>\n</blockquote>\n<p></p>\n<blockquote>\n<p>adb shell screenrecord /sdcard/demo.mp4  Demo.mp4180s<br>ctrl+c <br></p>\n</blockquote>\n<h3 id=\"Ref\"><a href=\"#Ref\" class=\"headerlink\" title=\"Ref:\"></a>Ref:</h3><ul>\n<li><a href=\"http://zmywly8866.github.io/2015/01/24/all-adb-command.html\"></a></li>\n</ul>\n","excerpt":"<h2 id=\"ADB-\"><a href=\"#ADB-\" class=\"headerlink\" title=\"ADB \"></a>ADB </h2><p>android studiocommandGoogle IO<br>","more":"</p>\n<p></p>\n<blockquote>\n<p>adb get-serialno</p>\n</blockquote>\n<p></p>\n<blockquote>\n<p>adb devices</p>\n</blockquote>\n<p></p>\n<blockquote>\n<p>adb reboot</p>\n</blockquote>\n<p>bootloader</p>\n<blockquote>\n<p>adb reboot bootloader</p>\n</blockquote>\n<p>recovery</p>\n<blockquote>\n<p>adb reboot recovery</p>\n</blockquote>\n<p>log</p>\n<blockquote>\n<p>adb logcat</p>\n</blockquote>\n<p>adb</p>\n<blockquote>\n<p>adb kill-server</p>\n</blockquote>\n<p>adb</p>\n<blockquote>\n<p>adb start-server</p>\n</blockquote>\n<p>MAC</p>\n<blockquote>\n<p>adb shell  cat /sys/class/net/wlan0/address</p>\n</blockquote>\n<p>CPU</p>\n<blockquote>\n<p>adb shell cat /proc/cpuinfo</p>\n</blockquote>\n<p>APK</p>\n<blockquote>\n<p>adb install <apkfile> //adb install baidu.apk</p>\n</blockquote>\n<p>apk</p>\n<blockquote>\n<p>adb install -r <apkfile> //adb install -r baidu.apk</p>\n</blockquote>\n<p>apksd</p>\n<blockquote>\n<p>adb install -s <apkfile> // adb install -s baidu.apk</p>\n</blockquote>\n<p>APK</p>\n<blockquote>\n<p>adb uninstall <package> //adb uninstall com.baidu.search</p>\n</blockquote>\n<p>app</p>\n<blockquote>\n<p>adb uninstall -k <package> //adb uninstall -k com.baidu.search</p>\n</blockquote>\n<p></p>\n<blockquote>\n<p>adb shell am start -n <package_name>/.<activity_class_name></p>\n</blockquote>\n<p>cpu</p>\n<blockquote>\n<p>adb shell top</p>\n</blockquote>\n<p>6app</p>\n<blockquote>\n<p>adb shell top -m 6</p>\n</blockquote>\n<p></p>\n<blockquote>\n<p>adb shell top -n 1</p>\n</blockquote>\n<p></p>\n<blockquote>\n<p>adb shell procrank</p>\n</blockquote>\n<p></p>\n<blockquote>\n<p>adb shell kill [pid]</p>\n</blockquote>\n<p></p>\n<blockquote>\n<p>adb shell ps</p>\n</blockquote>\n<p></p>\n<blockquote>\n<p>adb shell ps -x [PID]</p>\n</blockquote>\n<p>services</p>\n<blockquote>\n<p>adb shell service list</p>\n</blockquote>\n<p></p>\n<blockquote>\n<p>adb shell cat /proc/meminfo</p>\n</blockquote>\n<p>IO</p>\n<blockquote>\n<p>adb shell cat /proc/iomem</p>\n</blockquote>\n<p>system</p>\n<blockquote>\n<p>adb remount</p>\n</blockquote>\n<p></p>\n<blockquote>\n<p>adb push <local> <remote></p>\n</blockquote>\n<p></p>\n<blockquote>\n<p>adb pull <remote>  <local></p>\n</blockquote>\n<p>dosdir</p>\n<blockquote>\n<p>adb shell ls</p>\n</blockquote>\n<p>doscd </p>\n<blockquote>\n<p>adb shell cd <folder></p>\n</blockquote>\n<p></p>\n<blockquote>\n<p>adb shell rename path/oldfilename path/newfilename</p>\n</blockquote>\n<p>system/avi.apk</p>\n<blockquote>\n<p>adb shell rm /system/avi.apk</p>\n</blockquote>\n<p></p>\n<blockquote>\n<p>adb shell rm -r <folder></p>\n</blockquote>\n<p></p>\n<blockquote>\n<p>adb shell mv path/file newpath/file</p>\n</blockquote>\n<p></p>\n<blockquote>\n<p>adb shell chmod 777 /system/fonts/DroidSansFallback.ttf</p>\n</blockquote>\n<p></p>\n<blockquote>\n<p>adb shell mkdir path/foldelname</p>\n</blockquote>\n<p></p>\n<blockquote>\n<p>adb shell cat <file></p>\n</blockquote>\n<p>wifi</p>\n<blockquote>\n<p>adb shell cat /data/misc/wifi/*.conf</p>\n</blockquote>\n<p>log</p>\n<blockquote>\n<p>adb logcat -c</p>\n</blockquote>\n<p>bug</p>\n<blockquote>\n<p>adb bugreport</p>\n</blockquote>\n<p></p>\n<blockquote>\n<p>adb shell cat /system/build.prop</p>\n</blockquote>\n<p>ADB</p>\n<blockquote>\n<p>adb help</p>\n</blockquote>\n<p>monkey</p>\n<blockquote>\n<p>adb shell monkey -v -p your.package.name 500</p>\n</blockquote>\n<p></p>\n<blockquote>\n<p>adb shell screenrecord /sdcard/demo.mp4  Demo.mp4180s<br>ctrl+c <br></p>\n</blockquote>\n<h3 id=\"Ref\"><a href=\"#Ref\" class=\"headerlink\" title=\"Ref:\"></a>Ref:</h3><ul>\n<li><a href=\"http://zmywly8866.github.io/2015/01/24/all-adb-command.html\"></a></li>\n</ul>"},{"title":"AnnotationProcessor","date":"2016-12-31T14:42:15.000Z","_content":"\n\n![](http://odzl05jxx.bkt.clouddn.com/apt_01.JPG?imageView2/2/w/500)\nRomain GuyDroidCon:\n\n> As I understand, modern java development are all about wrting annaotation Processors and not wrting code anymore...\n\n\n\nJack Wharton\"My Hypothetical Annotation Processor...\" RetrofitButterKnife\n <!--more-->\n\n\n\n### 1. \nAnnotation Processoring Tooljavac.javaclass\nAnnotation\n```java\n@Documented\n@Target(ElementType.TYPE)  //class,interface,enummethod\n@Retention(RetentionPolicy.SOURCE)  //\npublic @interface Builder {  //@interfaceclass,interface,enum\n}\n```\n\n### 2.Annotation Processor\n\n```java\npublic class PojoStringProcessor extends AbstractProcessor {\n    private static final String ANNOTATION = \"@\" + PojoString.class.getSimpleName();\n    private static final String CLASS_NAME = \"StringUtil\";\n    private Messager messager; //Logger,\n    private Filer filer //Build Path\n\n    //public\n\n    // init\n    @Override\n    public synchronized void init(ProcessingEnvironment processingEnv) {\n        super.init(processingEnv);\n        messager = processingEnv.getMessager();\n        this.filer = processingEnv.getFiler();\n    }\n\n    //aptclass\n    @Override\n    public Set<String> getSupportedAnnotationTypes() {\n        return immutableSet.of(Builder.class.getCanonicalName());\n    }\n\n\t //java7,java8 androidtargetSdk Version\n    @Override\n    public SourceVersion getSupportedSourceVersion() {\n        return SourceVersion.latestSupported();\n    }\n\n\n\n    //\n    @Override\n    public boolean process(Set<? extends TypeElement> annotations, RoundEnvironment roundEnv) {\n        ArrayList<AnnotatedClass> annotatedClasses = new ArrayList<>();\n        for (Element element : roundEnv.getElementsAnnotatedWith(PojoString.class)) {\n            TypeElement typeElement = (TypeElement) element;\n            if (!isValidClass(typeElement)) {\n                return true; //aptclass\n            }\n\n            try {\n                annotatedClasses.add(buildAnnotatedClass(typeElement));\n            } catch (IOException e) {\n                String message = String.format(\"Couldn't process class %s: %s\", typeElement,\n                        e.getMessage());\n                messager.printMessage(Diagnostic.Kind.ERROR, message, element);\n                e.printStackTrace();\n            }\n\n\n        }\n        try {\n            generate(annotatedClasses);\n        } catch (IOException e) {\n            messager.printMessage(Diagnostic.Kind.ERROR, \"Couldn't generate class\");\n        }\n\n        return true;\n    }\n\n\n}\n\n```\n\n- roundEnv: apt1. aptprocessorjava(apt)\n2. aptProcessorprocessing\n\n\nServiceLoader Discovery Filejar\n//META-INFO/services/javax.annotations.processing.Processor\ncom.example.annotation.BuilderProcessor// class\n//processorincludeprocessor\n\n\n```java\napp/build.gradle\n\ndependencies{\n\tcompile project(': annotation')\n\n\tapt project (':processor')\n}\n//apt processordistributed apk,\n//https://bitbucket.org/hvisser/android-apt\n//https://github.com/tbroyer/gradle-apt-plugin\n```\n\n\n\nAbstractProcessorpublic\n\n\n### 3. java\nsquarejavaPoet\n\n\n```java\npublic final class UserBuilder{\n\t\n\tprivate String userName;\n\n\tpublic UserBuilder username(String username){\n\t\tthis.username = username;\n\t\treturen this;\n\t}\n\n}\n\n```\n- \n![](http://odzl05jxx.bkt.clouddn.com/apt_field.JPG)\n\n- \n![](http://odzl05jxx.bkt.clouddn.com/apt_methods.JPG)\n\n- class:\n![](http://odzl05jxx.bkt.clouddn.com/apt_class.JPG)\n\n\n- \n![](http://odzl05jxx.bkt.clouddn.com/apt_process_steps.JPG)\n\nmeta_data\n![](http://odzl05jxx.bkt.clouddn.com/apt_process_meta_data.JPG)\n\n- private fieldpublic setter:\n> FiledSpec username = FiledSpec.builder(String.class,\"username\",Modifier.PRIVATE).build();\n![](http://odzl05jxx.bkt.clouddn.com/apt_process_fields.JPG)\n\n\n- build method\n![](http://odzl05jxx.bkt.clouddn.com/apt_process_build_method.JPG)\n\n- builder\n![](http://odzl05jxx.bkt.clouddn.com/apt_process_create_builder.JPG)\n\n- java\n![](http://odzl05jxx.bkt.clouddn.com/apt_process_write_java_file.JPG)\n\n\n\n\n### 4. \ndnot't put annotation processors in a compile configuration, use the Android Apt plugin \n\nif you using jack, jack has support for annotation processors.\n\nif it's only a java, could use the Gradle Apt Plugin\n\nprocessorapk\n\n\n### ref\n - [android gradle plugin 2.3](https://code.google.com/p/android/issues/detail?id=227612)\n - [Android](http://yeungeek.com/2016/04/27/Android%E5%85%AC%E5%85%B1%E6%8A%80%E6%9C%AF%E7%82%B9%E4%B9%8B%E4%BA%8C-Annotation-Processing-Tool)\n - [Droidcon NYC 2016 - @Eliminate(\"Boilerplate\")](https://www.youtube.com/watch?v=NBkl_SIHUr8)\n - [Gradle Apt Plugin](https://github.com/tbroyer/gradle-apt-plugin)\n - [Andorid Apt Plugin](https://bitbucket.org/hvisser/android-apt)","source":"_posts/2016-12-31-Eliminating-BoilPlate-AnnotationProcessor.md","raw":"---\ntitle: AnnotationProcessor\ndate: 2016-12-31 22:42:15\ncategories: blog \ntags: [android,annotation]\n---\n\n\n![](http://odzl05jxx.bkt.clouddn.com/apt_01.JPG?imageView2/2/w/500)\nRomain GuyDroidCon:\n\n> As I understand, modern java development are all about wrting annaotation Processors and not wrting code anymore...\n\n\n\nJack Wharton\"My Hypothetical Annotation Processor...\" RetrofitButterKnife\n <!--more-->\n\n\n\n### 1. \nAnnotation Processoring Tooljavac.javaclass\nAnnotation\n```java\n@Documented\n@Target(ElementType.TYPE)  //class,interface,enummethod\n@Retention(RetentionPolicy.SOURCE)  //\npublic @interface Builder {  //@interfaceclass,interface,enum\n}\n```\n\n### 2.Annotation Processor\n\n```java\npublic class PojoStringProcessor extends AbstractProcessor {\n    private static final String ANNOTATION = \"@\" + PojoString.class.getSimpleName();\n    private static final String CLASS_NAME = \"StringUtil\";\n    private Messager messager; //Logger,\n    private Filer filer //Build Path\n\n    //public\n\n    // init\n    @Override\n    public synchronized void init(ProcessingEnvironment processingEnv) {\n        super.init(processingEnv);\n        messager = processingEnv.getMessager();\n        this.filer = processingEnv.getFiler();\n    }\n\n    //aptclass\n    @Override\n    public Set<String> getSupportedAnnotationTypes() {\n        return immutableSet.of(Builder.class.getCanonicalName());\n    }\n\n\t //java7,java8 androidtargetSdk Version\n    @Override\n    public SourceVersion getSupportedSourceVersion() {\n        return SourceVersion.latestSupported();\n    }\n\n\n\n    //\n    @Override\n    public boolean process(Set<? extends TypeElement> annotations, RoundEnvironment roundEnv) {\n        ArrayList<AnnotatedClass> annotatedClasses = new ArrayList<>();\n        for (Element element : roundEnv.getElementsAnnotatedWith(PojoString.class)) {\n            TypeElement typeElement = (TypeElement) element;\n            if (!isValidClass(typeElement)) {\n                return true; //aptclass\n            }\n\n            try {\n                annotatedClasses.add(buildAnnotatedClass(typeElement));\n            } catch (IOException e) {\n                String message = String.format(\"Couldn't process class %s: %s\", typeElement,\n                        e.getMessage());\n                messager.printMessage(Diagnostic.Kind.ERROR, message, element);\n                e.printStackTrace();\n            }\n\n\n        }\n        try {\n            generate(annotatedClasses);\n        } catch (IOException e) {\n            messager.printMessage(Diagnostic.Kind.ERROR, \"Couldn't generate class\");\n        }\n\n        return true;\n    }\n\n\n}\n\n```\n\n- roundEnv: apt1. aptprocessorjava(apt)\n2. aptProcessorprocessing\n\n\nServiceLoader Discovery Filejar\n//META-INFO/services/javax.annotations.processing.Processor\ncom.example.annotation.BuilderProcessor// class\n//processorincludeprocessor\n\n\n```java\napp/build.gradle\n\ndependencies{\n\tcompile project(': annotation')\n\n\tapt project (':processor')\n}\n//apt processordistributed apk,\n//https://bitbucket.org/hvisser/android-apt\n//https://github.com/tbroyer/gradle-apt-plugin\n```\n\n\n\nAbstractProcessorpublic\n\n\n### 3. java\nsquarejavaPoet\n\n\n```java\npublic final class UserBuilder{\n\t\n\tprivate String userName;\n\n\tpublic UserBuilder username(String username){\n\t\tthis.username = username;\n\t\treturen this;\n\t}\n\n}\n\n```\n- \n![](http://odzl05jxx.bkt.clouddn.com/apt_field.JPG)\n\n- \n![](http://odzl05jxx.bkt.clouddn.com/apt_methods.JPG)\n\n- class:\n![](http://odzl05jxx.bkt.clouddn.com/apt_class.JPG)\n\n\n- \n![](http://odzl05jxx.bkt.clouddn.com/apt_process_steps.JPG)\n\nmeta_data\n![](http://odzl05jxx.bkt.clouddn.com/apt_process_meta_data.JPG)\n\n- private fieldpublic setter:\n> FiledSpec username = FiledSpec.builder(String.class,\"username\",Modifier.PRIVATE).build();\n![](http://odzl05jxx.bkt.clouddn.com/apt_process_fields.JPG)\n\n\n- build method\n![](http://odzl05jxx.bkt.clouddn.com/apt_process_build_method.JPG)\n\n- builder\n![](http://odzl05jxx.bkt.clouddn.com/apt_process_create_builder.JPG)\n\n- java\n![](http://odzl05jxx.bkt.clouddn.com/apt_process_write_java_file.JPG)\n\n\n\n\n### 4. \ndnot't put annotation processors in a compile configuration, use the Android Apt plugin \n\nif you using jack, jack has support for annotation processors.\n\nif it's only a java, could use the Gradle Apt Plugin\n\nprocessorapk\n\n\n### ref\n - [android gradle plugin 2.3](https://code.google.com/p/android/issues/detail?id=227612)\n - [Android](http://yeungeek.com/2016/04/27/Android%E5%85%AC%E5%85%B1%E6%8A%80%E6%9C%AF%E7%82%B9%E4%B9%8B%E4%BA%8C-Annotation-Processing-Tool)\n - [Droidcon NYC 2016 - @Eliminate(\"Boilerplate\")](https://www.youtube.com/watch?v=NBkl_SIHUr8)\n - [Gradle Apt Plugin](https://github.com/tbroyer/gradle-apt-plugin)\n - [Andorid Apt Plugin](https://bitbucket.org/hvisser/android-apt)","slug":"2016-12-31-Eliminating-BoilPlate-AnnotationProcessor","published":1,"updated":"2017-04-23T10:51:22.005Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj50afgwa000vi4vrptwjk3p4","content":"<p><img src=\"http://odzl05jxx.bkt.clouddn.com/apt_01.JPG?imageView2/2/w/500\" alt=\"\"><br>Romain GuyDroidCon:</p>\n<blockquote>\n<p>As I understand, modern java development are all about wrting annaotation Processors and not wrting code anymore</p>\n</blockquote>\n<p></p>\n<p>Jack WhartonMy Hypothetical Annotation Processor RetrofitButterKnife<br> <a id=\"more\"></a></p>\n<h3 id=\"1-\"><a href=\"#1-\" class=\"headerlink\" title=\"1. \"></a>1. </h3><p>Annotation Processoring Tooljavac.javaclass<br>Annotation<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">@Documented</span></div><div class=\"line\"><span class=\"meta\">@Target</span>(ElementType.TYPE)  <span class=\"comment\">//class,interface,enummethod</span></div><div class=\"line\"><span class=\"meta\">@Retention</span>(RetentionPolicy.SOURCE)  <span class=\"comment\">//</span></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"meta\">@interface</span> Builder &#123;  <span class=\"comment\">//@interfaceclass,interface,enum</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<h3 id=\"2-Annotation-Processor\"><a href=\"#2-Annotation-Processor\" class=\"headerlink\" title=\"2.Annotation Processor\"></a>2.Annotation Processor</h3><p><br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PojoStringProcessor</span> <span class=\"keyword\">extends</span> <span class=\"title\">AbstractProcessor</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String ANNOTATION = <span class=\"string\">\"@\"</span> + PojoString.class.getSimpleName();</div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String CLASS_NAME = <span class=\"string\">\"StringUtil\"</span>;</div><div class=\"line\">    <span class=\"keyword\">private</span> Messager messager; <span class=\"comment\">//Logger,</span></div><div class=\"line\">    <span class=\"keyword\">private</span> Filer filer <span class=\"comment\">//Build Path</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">//public</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// init</span></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">synchronized</span> <span class=\"keyword\">void</span> <span class=\"title\">init</span><span class=\"params\">(ProcessingEnvironment processingEnv)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>.init(processingEnv);</div><div class=\"line\">        messager = processingEnv.getMessager();</div><div class=\"line\">        <span class=\"keyword\">this</span>.filer = processingEnv.getFiler();</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">//aptclass</span></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Set&lt;String&gt; <span class=\"title\">getSupportedAnnotationTypes</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> immutableSet.of(Builder.class.getCanonicalName());</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">true <span class=\"comment\">//java7,java8 androidtargetSdk Version</span></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> SourceVersion <span class=\"title\">getSupportedSourceVersion</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> SourceVersion.latestSupported();</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">//</span></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">process</span><span class=\"params\">(Set&lt;? extends TypeElement&gt; annotations, RoundEnvironment roundEnv)</span> </span>&#123;</div><div class=\"line\">        ArrayList&lt;AnnotatedClass&gt; annotatedClasses = <span class=\"keyword\">new</span> ArrayList&lt;&gt;();</div><div class=\"line\">        <span class=\"keyword\">for</span> (Element element : roundEnv.getElementsAnnotatedWith(PojoString.class)) &#123;</div><div class=\"line\">            TypeElement typeElement = (TypeElement) element;</div><div class=\"line\">            <span class=\"keyword\">if</span> (!isValidClass(typeElement)) &#123;</div><div class=\"line\">                <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>; <span class=\"comment\">//aptclass</span></div><div class=\"line\">            &#125;</div><div class=\"line\"></div><div class=\"line\">            <span class=\"keyword\">try</span> &#123;</div><div class=\"line\">                annotatedClasses.add(buildAnnotatedClass(typeElement));</div><div class=\"line\">            &#125; <span class=\"keyword\">catch</span> (IOException e) &#123;</div><div class=\"line\">                String message = String.format(<span class=\"string\">\"Couldn't process class %s: %s\"</span>, typeElement,</div><div class=\"line\">                        e.getMessage());</div><div class=\"line\">                messager.printMessage(Diagnostic.Kind.ERROR, message, element);</div><div class=\"line\">                e.printStackTrace();</div><div class=\"line\">            &#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"keyword\">try</span> &#123;</div><div class=\"line\">            generate(annotatedClasses);</div><div class=\"line\">        &#125; <span class=\"keyword\">catch</span> (IOException e) &#123;</div><div class=\"line\">            messager.printMessage(Diagnostic.Kind.ERROR, <span class=\"string\">\"Couldn't generate class\"</span>);</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p></p>\n<ul>\n<li>roundEnv: apt1. aptprocessorjava(apt)</li>\n</ul>\n<ol>\n<li>aptProcessorprocessing</li>\n</ol>\n<p>ServiceLoader Discovery Filejar<br>//META-INFO/services/javax.annotations.processing.Processor<br>com.example.annotation.BuilderProcessor// class<br>//processorincludeprocessor</p>\n<p><br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">app/build.gradle</div><div class=\"line\"></div><div class=\"line\">dependencies&#123;</div><div class=\"line\">true<span class=\"function\">compile <span class=\"title\">project</span><span class=\"params\">(<span class=\"string\">': annotation'</span>)</span></div><div class=\"line\"></div><div class=\"line\">trueapt <span class=\"title\">project</span> <span class=\"params\">(<span class=\"string\">':processor'</span>)</span></div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">//apt processordistributed apk,</span></div><div class=\"line\"><span class=\"comment\">//https://bitbucket.org/hvisser/android-apt</span></div><div class=\"line\"><span class=\"comment\">//https://github.com/tbroyer/gradle-apt-plugin</span></span></div></pre></td></tr></table></figure></p>\n<p>AbstractProcessorpublic</p>\n<h3 id=\"3-java\"><a href=\"#3-java\" class=\"headerlink\" title=\"3. java\"></a>3. java</h3><p>squarejavaPoet</p>\n<p><br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">final</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">UserBuilder</span></span>&#123;</div><div class=\"line\">true</div><div class=\"line\">true<span class=\"keyword\">private</span> String userName;</div><div class=\"line\"></div><div class=\"line\">true<span class=\"function\"><span class=\"keyword\">public</span> UserBuilder <span class=\"title\">username</span><span class=\"params\">(String username)</span></span>&#123;</div><div class=\"line\">truetrue<span class=\"keyword\">this</span>.username = username;</div><div class=\"line\">truetruereturen <span class=\"keyword\">this</span>;</div><div class=\"line\">true&#125;</div><div class=\"line\"></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<ul>\n<li><p><br><img src=\"http://odzl05jxx.bkt.clouddn.com/apt_field.JPG\" alt=\"\"></p>\n</li>\n<li><p><br><img src=\"http://odzl05jxx.bkt.clouddn.com/apt_methods.JPG\" alt=\"\"></p>\n</li>\n<li><p>class:<br><img src=\"http://odzl05jxx.bkt.clouddn.com/apt_class.JPG\" alt=\"\"></p>\n</li>\n</ul>\n<p></p>\n<ul>\n<li><br><img src=\"http://odzl05jxx.bkt.clouddn.com/apt_process_steps.JPG\" alt=\"\"></li>\n</ul>\n<p>meta_data<br><img src=\"http://odzl05jxx.bkt.clouddn.com/apt_process_meta_data.JPG\" alt=\"\"></p>\n<ul>\n<li>private fieldpublic setter:<blockquote>\n<p>FiledSpec username = FiledSpec.builder(String.class,username,Modifier.PRIVATE).build();<br><img src=\"http://odzl05jxx.bkt.clouddn.com/apt_process_fields.JPG\" alt=\"\"></p>\n</blockquote>\n</li>\n</ul>\n<ul>\n<li><p>build method<br><img src=\"http://odzl05jxx.bkt.clouddn.com/apt_process_build_method.JPG\" alt=\"\"></p>\n</li>\n<li><p>builder<br><img src=\"http://odzl05jxx.bkt.clouddn.com/apt_process_create_builder.JPG\" alt=\"\"></p>\n</li>\n<li><p>java<br><img src=\"http://odzl05jxx.bkt.clouddn.com/apt_process_write_java_file.JPG\" alt=\"\"></p>\n</li>\n</ul>\n<h3 id=\"4-\"><a href=\"#4-\" class=\"headerlink\" title=\"4. \"></a>4. </h3><p>dnott put annotation processors in a compile configuration, use the Android Apt plugin </p>\n<p>if you using jack, jack has support for annotation processors.</p>\n<p>if its only a java, could use the Gradle Apt Plugin</p>\n<p>processorapk</p>\n<h3 id=\"ref\"><a href=\"#ref\" class=\"headerlink\" title=\"ref\"></a>ref</h3><ul>\n<li><a href=\"https://code.google.com/p/android/issues/detail?id=227612\">android gradle plugin 2.3</a></li>\n<li><a href=\"http://yeungeek.com/2016/04/27/Android%E5%85%AC%E5%85%B1%E6%8A%80%E6%9C%AF%E7%82%B9%E4%B9%8B%E4%BA%8C-Annotation-Processing-Tool\">Android</a></li>\n<li><a href=\"https://www.youtube.com/watch?v=NBkl_SIHUr8\">Droidcon NYC 2016 - @Eliminate(Boilerplate)</a></li>\n<li><a href=\"https://github.com/tbroyer/gradle-apt-plugin\">Gradle Apt Plugin</a></li>\n<li><a href=\"https://bitbucket.org/hvisser/android-apt\">Andorid Apt Plugin</a></li>\n</ul>\n","excerpt":"<p><img src=\"http://odzl05jxx.bkt.clouddn.com/apt_01.JPG?imageView2/2/w/500\" alt=\"\"><br>Romain GuyDroidCon:</p>\n<blockquote>\n<p>As I understand, modern java development are all about wrting annaotation Processors and not wrting code anymore</p>\n</blockquote>\n<p></p>\n<p>Jack WhartonMy Hypothetical Annotation Processor RetrofitButterKnife<br>","more":"</p>\n<h3 id=\"1-\"><a href=\"#1-\" class=\"headerlink\" title=\"1. \"></a>1. </h3><p>Annotation Processoring Tooljavac.javaclass<br>Annotation<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">@Documented</span></div><div class=\"line\"><span class=\"meta\">@Target</span>(ElementType.TYPE)  <span class=\"comment\">//class,interface,enummethod</span></div><div class=\"line\"><span class=\"meta\">@Retention</span>(RetentionPolicy.SOURCE)  <span class=\"comment\">//</span></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"meta\">@interface</span> Builder &#123;  <span class=\"comment\">//@interfaceclass,interface,enum</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<h3 id=\"2-Annotation-Processor\"><a href=\"#2-Annotation-Processor\" class=\"headerlink\" title=\"2.Annotation Processor\"></a>2.Annotation Processor</h3><p><br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PojoStringProcessor</span> <span class=\"keyword\">extends</span> <span class=\"title\">AbstractProcessor</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String ANNOTATION = <span class=\"string\">\"@\"</span> + PojoString.class.getSimpleName();</div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String CLASS_NAME = <span class=\"string\">\"StringUtil\"</span>;</div><div class=\"line\">    <span class=\"keyword\">private</span> Messager messager; <span class=\"comment\">//Logger,</span></div><div class=\"line\">    <span class=\"keyword\">private</span> Filer filer <span class=\"comment\">//Build Path</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">//public</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// init</span></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">synchronized</span> <span class=\"keyword\">void</span> <span class=\"title\">init</span><span class=\"params\">(ProcessingEnvironment processingEnv)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>.init(processingEnv);</div><div class=\"line\">        messager = processingEnv.getMessager();</div><div class=\"line\">        <span class=\"keyword\">this</span>.filer = processingEnv.getFiler();</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">//aptclass</span></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Set&lt;String&gt; <span class=\"title\">getSupportedAnnotationTypes</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> immutableSet.of(Builder.class.getCanonicalName());</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">true <span class=\"comment\">//java7,java8 androidtargetSdk Version</span></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> SourceVersion <span class=\"title\">getSupportedSourceVersion</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> SourceVersion.latestSupported();</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">//</span></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">process</span><span class=\"params\">(Set&lt;? extends TypeElement&gt; annotations, RoundEnvironment roundEnv)</span> </span>&#123;</div><div class=\"line\">        ArrayList&lt;AnnotatedClass&gt; annotatedClasses = <span class=\"keyword\">new</span> ArrayList&lt;&gt;();</div><div class=\"line\">        <span class=\"keyword\">for</span> (Element element : roundEnv.getElementsAnnotatedWith(PojoString.class)) &#123;</div><div class=\"line\">            TypeElement typeElement = (TypeElement) element;</div><div class=\"line\">            <span class=\"keyword\">if</span> (!isValidClass(typeElement)) &#123;</div><div class=\"line\">                <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>; <span class=\"comment\">//aptclass</span></div><div class=\"line\">            &#125;</div><div class=\"line\"></div><div class=\"line\">            <span class=\"keyword\">try</span> &#123;</div><div class=\"line\">                annotatedClasses.add(buildAnnotatedClass(typeElement));</div><div class=\"line\">            &#125; <span class=\"keyword\">catch</span> (IOException e) &#123;</div><div class=\"line\">                String message = String.format(<span class=\"string\">\"Couldn't process class %s: %s\"</span>, typeElement,</div><div class=\"line\">                        e.getMessage());</div><div class=\"line\">                messager.printMessage(Diagnostic.Kind.ERROR, message, element);</div><div class=\"line\">                e.printStackTrace();</div><div class=\"line\">            &#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"keyword\">try</span> &#123;</div><div class=\"line\">            generate(annotatedClasses);</div><div class=\"line\">        &#125; <span class=\"keyword\">catch</span> (IOException e) &#123;</div><div class=\"line\">            messager.printMessage(Diagnostic.Kind.ERROR, <span class=\"string\">\"Couldn't generate class\"</span>);</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p></p>\n<ul>\n<li>roundEnv: apt1. aptprocessorjava(apt)</li>\n</ul>\n<ol>\n<li>aptProcessorprocessing</li>\n</ol>\n<p>ServiceLoader Discovery Filejar<br>//META-INFO/services/javax.annotations.processing.Processor<br>com.example.annotation.BuilderProcessor// class<br>//processorincludeprocessor</p>\n<p><br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">app/build.gradle</div><div class=\"line\"></div><div class=\"line\">dependencies&#123;</div><div class=\"line\">true<span class=\"function\">compile <span class=\"title\">project</span><span class=\"params\">(<span class=\"string\">': annotation'</span>)</span></div><div class=\"line\"></div><div class=\"line\">trueapt <span class=\"title\">project</span> <span class=\"params\">(<span class=\"string\">':processor'</span>)</span></div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">//apt processordistributed apk,</span></div><div class=\"line\"><span class=\"comment\">//https://bitbucket.org/hvisser/android-apt</span></div><div class=\"line\"><span class=\"comment\">//https://github.com/tbroyer/gradle-apt-plugin</span></span></div></pre></td></tr></table></figure></p>\n<p>AbstractProcessorpublic</p>\n<h3 id=\"3-java\"><a href=\"#3-java\" class=\"headerlink\" title=\"3. java\"></a>3. java</h3><p>squarejavaPoet</p>\n<p><br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">final</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">UserBuilder</span></span>&#123;</div><div class=\"line\">true</div><div class=\"line\">true<span class=\"keyword\">private</span> String userName;</div><div class=\"line\"></div><div class=\"line\">true<span class=\"function\"><span class=\"keyword\">public</span> UserBuilder <span class=\"title\">username</span><span class=\"params\">(String username)</span></span>&#123;</div><div class=\"line\">truetrue<span class=\"keyword\">this</span>.username = username;</div><div class=\"line\">truetruereturen <span class=\"keyword\">this</span>;</div><div class=\"line\">true&#125;</div><div class=\"line\"></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<ul>\n<li><p><br><img src=\"http://odzl05jxx.bkt.clouddn.com/apt_field.JPG\" alt=\"\"></p>\n</li>\n<li><p><br><img src=\"http://odzl05jxx.bkt.clouddn.com/apt_methods.JPG\" alt=\"\"></p>\n</li>\n<li><p>class:<br><img src=\"http://odzl05jxx.bkt.clouddn.com/apt_class.JPG\" alt=\"\"></p>\n</li>\n</ul>\n<p></p>\n<ul>\n<li><br><img src=\"http://odzl05jxx.bkt.clouddn.com/apt_process_steps.JPG\" alt=\"\"></li>\n</ul>\n<p>meta_data<br><img src=\"http://odzl05jxx.bkt.clouddn.com/apt_process_meta_data.JPG\" alt=\"\"></p>\n<ul>\n<li>private fieldpublic setter:<blockquote>\n<p>FiledSpec username = FiledSpec.builder(String.class,username,Modifier.PRIVATE).build();<br><img src=\"http://odzl05jxx.bkt.clouddn.com/apt_process_fields.JPG\" alt=\"\"></p>\n</blockquote>\n</li>\n</ul>\n<ul>\n<li><p>build method<br><img src=\"http://odzl05jxx.bkt.clouddn.com/apt_process_build_method.JPG\" alt=\"\"></p>\n</li>\n<li><p>builder<br><img src=\"http://odzl05jxx.bkt.clouddn.com/apt_process_create_builder.JPG\" alt=\"\"></p>\n</li>\n<li><p>java<br><img src=\"http://odzl05jxx.bkt.clouddn.com/apt_process_write_java_file.JPG\" alt=\"\"></p>\n</li>\n</ul>\n<h3 id=\"4-\"><a href=\"#4-\" class=\"headerlink\" title=\"4. \"></a>4. </h3><p>dnott put annotation processors in a compile configuration, use the Android Apt plugin </p>\n<p>if you using jack, jack has support for annotation processors.</p>\n<p>if its only a java, could use the Gradle Apt Plugin</p>\n<p>processorapk</p>\n<h3 id=\"ref\"><a href=\"#ref\" class=\"headerlink\" title=\"ref\"></a>ref</h3><ul>\n<li><a href=\"https://code.google.com/p/android/issues/detail?id=227612\">android gradle plugin 2.3</a></li>\n<li><a href=\"http://yeungeek.com/2016/04/27/Android%E5%85%AC%E5%85%B1%E6%8A%80%E6%9C%AF%E7%82%B9%E4%B9%8B%E4%BA%8C-Annotation-Processing-Tool\">Android</a></li>\n<li><a href=\"https://www.youtube.com/watch?v=NBkl_SIHUr8\">Droidcon NYC 2016 - @Eliminate(Boilerplate)</a></li>\n<li><a href=\"https://github.com/tbroyer/gradle-apt-plugin\">Gradle Apt Plugin</a></li>\n<li><a href=\"https://bitbucket.org/hvisser/android-apt\">Andorid Apt Plugin</a></li>\n</ul>"},{"title":"linux","date":"2017-01-07T07:38:43.000Z","top":1,"_content":"\nlinux,</br>\n![](http://odzl05jxx.bkt.clouddn.com/849c18412f8e7a0b18df09f6f87e6516.jpg?imageView2/2/w/600)\n <!--more-->\n\nvpsssh(Secure Shell)puttyxshell\n\n## \n1. [](#1-)\n2. [Vi](#2-Vi)\n3. [bash](#3-linuxshell)\n4. [](#4-)\n5. [](#5-)\n6. [](#6-)\n7. [](#7-)\n8. [SS](#8-SS)\n9. [](#9-)\n10. [](#10-)\n11.[](#11-)\n\n[](#)\n\n\n### 1. \n\n```shell\n- > cd //\n- > cd /  \n- > pwd // \n- > ls //  \n\n- > mkdir //\n- > rmdir //,\n- > rm -r //\n- > rm -rf //\n\n:\n-> rm -f 'my file'\n-> mv a.mp4 b.mp4 //mvWindows\n\n# \nrenamerename\n\n- > touch filename //linux\n\n```\n\n\n\n\n```shell\n- > cp a b //ab\n\n- > cp d1 d2 // -r \n- > cp -r d1 d2\n\n() \n\n- > mv d1 /  d1\n- > mv d1 ../d1\n- > mv d1 ../../\n```\n\n\n\n###\n\n```\n >\nls  > lsoutput.txt #\necho 'hey man' # print\necho 'hello' > log.txt # \n\n <\nwall < aa.txt # wall aa.txt\n\n\n#service\nservice XXX start/stop/status #help\n\nzip q r video.zip /home/video \nzip q r video.zip .  # .\n\n```\n\n\n\n### 2. Vi\n```shell\n- > vi 3.txt // \n\nVi'a'\n'esc' \n :w \n- :q \n\n- :wq \n- :q! \n```\n\n\n, 'dd' 'dw'\n'o'\n\n\n\n\n\n```shell\n- > more filename//\n\n- > cat filename //\n\n- > tac filename //\n\n- > head - 3 filename //\n- > tail - 3 filename // \n\n\n\n```\n\n\n find  whereis  Li(Link)\n\n```shell\nfind / -name filename  //\nfind /etc -name filename //etc\n\ngrep stringtofind filename //\n\nwhereis ls //ls()\n\n```\n\n### 3. linuxshell\nlinux\neg: \n```shell\n#!/bin/sh\nmyPath=\"/var/log/httpd/\"\nmyFile=\"/var /log/httpd/access.log\"\n#-x $myPath\nif [ ! -x \"$myPath\"]; then\nmkdir \"$myPath\"\nfi\n#-d $myPath\nif [ ! -d \"$myPath\"]; then\nmkdir \"$myPath\"\nfi\n#-f$myFile\nif [ ! -f \"$myFile\" ]; then\ntouch \"$myFile\"\nfi\n#-n,-n\nif [ ! -n \"$myVar\" ]; then\necho \"$myVar is empty\"\nexit 0\nfi\n#\nif [ \"$var1\" == \"$var2\" ]; then  //if then\necho '$var1 eq $var2'\nelse\necho '$var1 not eq $var2'\nfi //elsefi\n \n\n       if list then\n           do something here\n       elif list then\n           do another thing here\n       else\n         do something else here\n       fi  \n```\n\neg: echoprint\n```shell\nmyvar=Hi there\n\n    echo $myvar\n\n    echo \"$myvar\"\n\n    echo ' $myvar'\n\n    echo \\$myvar\n\nHi there\n\n              Hi there!\n\n              $myvar\n\n              $myvar\n```\n\n\n### 4. \n```shell\nuseradd user //(-g )/homeuser\n\npasswd user //user\n\ncd /etc >>> more passwd  \nmore group ,\ngroupadd groupname //\n\n//\nuserdel user // \n(rm -rf user) \n\n\n\n su testuser testuser\nexitroot\n\npwd\n```\n\n\n\n\n### 5. \nls\n\n- \nl\nd\n\n\nr(read)w()-()x()\n\n(u)(g)(0)\n\n: chmod\n```shell\nchmod +x filename //\nchmod u+x filename //\n//\n\n> u \n  g \n  o \n  a \n\n\n> r 4\n  w 2\n  x 1\n  - 0\n\na.txt\nchmod a+x a.txt \n#\nchmod a-x a.txt  #\n\n\nchmod 755 filename  \n751//\nchomod 444 filename# \nchmod 777 filename //9\n755  111101101,\n\nchown -R Jane /foldername # flodernameJane -R \n\n```\n\n\n\n- > chown username filename\n\n\n### 6. \n\neg: \n```shell\n$ cat /etc/passwd | grep usernametofind\n$ ls -l | grep \"^d\"\n$ ls -l * | grep \"^-\" | wc -|   //\"^-\"wc\n$ ls -l | grep \"^d\" //\n```\n\n\n### 7. \n\n[VPS](https://github.com/Teddysun/across)\n\n\n> git clone\ncd across\nwget -qO- bench.sh | bash Readme\n > curl -Lso- bench.sh | bash \n\n\n#### BandWagon\n```\n----------------------------------------------------------------------\nCPU model            : Intel(R) Xeon(R) CPU E3-1275 v5 @ 3.60GHz\nNumber of cores      : 1\nCPU frequency        : 3600.041 MHz\nTotal size of Disk   : 12.0 GB (10.0 GB Used)\nTotal amount of Mem  : 256 MB (217 MB Used)\nTotal amount of Swap : 128 MB (122 MB Used)\nSystem uptime        : 2 days, 4 hour 20 min\nLoad average         : 0.06, 0.05, 0.01\nOS                   : Ubuntu 14.04.1 LTS\nArch                 : i686 (32 Bit)\nKernel               : 2.6.32-042stab123.3\n----------------------------------------------------------------------\nI/O speed(1st run)   : 855 MB/s\nI/O speed(2nd run)   : 1.0 GB/s\nI/O speed(3rd run)   : 1.0 GB/s\nAverage I/O speed    : 967.7 MB/s\n----------------------------------------------------------------------\nNode Name                       IPv4 address            Download Speed\nCacheFly                        205.234.175.175         76.5MB/s\nLinode, Tokyo, JP               106.187.96.148          17.6MB/s\nLinode, Singapore, SG           139.162.23.4            8.18MB/s\nLinode, London, UK              176.58.107.39           8.67MB/s\nLinode, Frankfurt, DE           139.162.130.8           12.8MB/s\nLinode, Fremont, CA             50.116.14.9             9.40MB/s\nSoftlayer, Dallas, TX           173.192.68.18           62.3MB/s\nSoftlayer, Seattle, WA          67.228.112.250          66.0MB/s\nSoftlayer, Frankfurt, DE        159.122.69.4            12.2MB/s\nSoftlayer, Singapore, SG        119.81.28.170           11.8MB/s\nSoftlayer, HongKong, CN         119.81.130.170          13.2MB/s\n----------------------------------------------------------------------\n\n```\n#### BuyVm \n```\nCPU model            : Intel(R) Xeon(R) CPU           L5639  @ 2.13GHz\nNumber of cores      : 1\nCPU frequency        : 2000.070 MHz\nTotal size of Disk   : 15.0 GB (1.3 GB Used)\nTotal amount of Mem  : 128 MB (80 MB Used)\nTotal amount of Swap : 128 MB (32 MB Used)\nSystem uptime        : 0 days, 22 hour 28 min\nLoad average         : 0.10, 0.04, 0.05\nOS                   : Ubuntu 14.04.2 LTS\nArch                 : i686 (32 Bit)\nKernel               : 2.6.32-openvz-042stab116.2-amd64\n----------------------------------------------------------------------\nI/O speed(1st run)   : 102 MB/s\nI/O speed(2nd run)   : 97.1 MB/s\nI/O speed(3rd run)   : 147 MB/s\nAverage I/O speed    : 115.4 MB/s\n----------------------------------------------------------------------\nNode Name                       IPv4 address            Download Speed\nCacheFly                        205.234.175.175         14.7MB/s\nLinode, Tokyo, JP               106.187.96.148          6.15MB/s\nLinode, Singapore, SG           139.162.23.4            2.54MB/s\nLinode, London, UK              176.58.107.39           2.99MB/s\nLinode, Frankfurt, DE           139.162.130.8           2.96MB/s\nLinode, Fremont, CA             50.116.14.9             4.27MB/s\nSoftlayer, Dallas, TX           173.192.68.18           11.7MB/s\nSoftlayer, Seattle, WA          67.228.112.250          13.0MB/s\nSoftlayer, Frankfurt, DE        159.122.69.4            1.89MB/s\nSoftlayer, Singapore, SG        119.81.28.170           3.26MB/s\nSoftlayer, HongKong, CN         119.81.130.170          3.72MB/s\n----------------------------------------------------------------------\n```\n\n#### DigitalOcean Los Angeles\n\n```\n----------------------------------------------------------------------\nCPU model            : Intel(R) Xeon(R) CPU E5-2650L v3 @ 1.80GHz\nNumber of cores      : 1\nCPU frequency        : 1799.998 MHz\nTotal size of Disk   : 20.2 GB (1.0 GB Used)\nTotal amount of Mem  : 488 MB (33 MB Used)\nTotal amount of Swap : 0 MB (0 MB Used)\nSystem uptime        : 0 days, 0 hour 3 min\nLoad average         : 0.16, 0.10, 0.03\nOS                   : Ubuntu 16.04.2 LTS\nArch                 : x86_64 (64 Bit)\nKernel               : 4.4.0-78-generic\n----------------------------------------------------------------------\nI/O speed(1st run)   : 581 MB/s\nI/O speed(2nd run)   : 711 MB/s\nI/O speed(3rd run)   : 777 MB/s\nAverage I/O speed    : 689.7 MB/s\n----------------------------------------------------------------------\nNode Name                       IPv4 address            Download Speed\nCacheFly                        205.234.175.175         161MB/s\nLinode, Tokyo, JP               106.187.96.148          15.7MB/s\nLinode, Singapore, SG           139.162.23.4            5.96MB/s\nLinode, London, UK              176.58.107.39           5.71MB/s\nLinode, Frankfurt, DE           139.162.130.8           6.45MB/s\nLinode, Fremont, CA             50.116.14.9             30.4MB/s\nSoftlayer, Dallas, TX           173.192.68.18           29.9MB/s\nSoftlayer, Seattle, WA          67.228.112.250          57.7MB/s\nSoftlayer, Frankfurt, DE        159.122.69.4            3.64MB/s\nSoftlayer, Singapore, SG        119.81.28.170           7.59MB/s\nSoftlayer, HongKong, CN         119.81.130.170          8.84MB/s\n----------------------------------------------------------------------\n```\n\n#### DigitalOcean Sinapore (ip adress lokks like Russian)\n```\n----------------------------------------------------------------------\nCPU model            : Intel(R) Xeon(R) CPU E5-2630L 0 @ 2.00GHz\nNumber of cores      : 1\nCPU frequency        : 1999.999 MHz\nTotal size of Disk   : 20.2 GB (1.0 GB Used)\nTotal amount of Mem  : 488 MB (36 MB Used)\nTotal amount of Swap : 0 MB (0 MB Used)\nSystem uptime        : 0 days, 0 hour 2 min\nLoad average         : 0.17, 0.20, 0.09\nOS                   : Ubuntu 16.04.2 LTS\nArch                 : x86_64 (64 Bit)\nKernel               : 4.4.0-78-generic\n----------------------------------------------------------------------\nI/O speed(1st run)   : 662 MB/s\nI/O speed(2nd run)   : 741 MB/s\nI/O speed(3rd run)   : 728 MB/s\nAverage I/O speed    : 710.3 MB/s\n----------------------------------------------------------------------\nNode Name                       IPv4 address            Download Speed\nCacheFly                        205.234.175.175         20.8MB/s\nLinode, Tokyo, JP               106.187.96.148          18.6MB/s\nLinode, Singapore, SG           139.162.23.4            83.8MB/s\nLinode, London, UK              176.58.107.39           5.71MB/s\nLinode, Frankfurt, DE           139.162.130.8           8.13MB/s\nLinode, Fremont, CA             50.116.14.9             2.82MB/s\nSoftlayer, Dallas, TX           173.192.68.18           6.18MB/s\nSoftlayer, Seattle, WA          67.228.112.250          8.47MB/s\nSoftlayer, Frankfurt, DE        159.122.69.4            6.77MB/s\nSoftlayer, Singapore, SG        119.81.28.170           97.9MB/s\nSoftlayer, HongKong, CN         119.81.130.170          35.2MB/s\n----------------------------------------------------------------------\n\n```\n\n\n:\n````\ndf -h //hhuman-readable\ndu -sh //directory\ndu -h //\ndh -h img// img\ndh -h img/1.jpg //\n````\n\ncpu\n> cat /proc/cpuinfo\n\n\n>free -m \nfree -h # human readable\n\n\n> vi /etc/ssh/ssd_config\n\n\n\n\n```\nPort 22 (ssh)\nPermitRootLogin without-Password no\nAllowUsers userName\n```\n\n/home/video/ video.zip\n\nzip q r -v video.zip . #-v\n\n\nlinux ->windows putty sshLinuxLinuxWindowspscppscp.exec:/windows/system32cmd\npscp -r root@202.123.123.123:\"/root/fileonServer.mp4\" d:/whateveriwantonmyPc.mp4  root\nConnection Refused Error\n> netstat -anp | grep sshd\n\n\n\n\n> pscp -P 12345-r root@202.123.123.123:\"/root/fileonServer.mp4\" d:/whateveriwantonmyPc.mp4  -p\n\n\n\n\n### 8. SS\n```\n  1. ubuntu\n  git > apt-get install git\n  python > apt-get install python-2.7\n  python-setuptools > apt-get install python-setuptools\n   python --version\n\n\n  2. shadowsocks\n > git clone https://github.com/shadowsocks/shadowsocks\n  # master\n  python setup.py build\n  python setup.py install\n\n   ssserver --version\n\n  3. \n  vim config.json\n  {\n   \"server\":\"my_server_ip\",\n   \"server_port\":8388,\n   \"local_address\": \"127.0.0.1\",\n   \"local_port\":1080,\n   \"password\":\"mypassword\",\n   \"timeout\":300,\n   \"method\":\"aes-256-cfb\",\n   \"fast_open\": false\n}\n  \nssserver -c config.json -d start #\n\n\nps -ef |grep sss\n\nss  \nssserver -c /etc/shadowsocks/config.json # \n\n- \nssserver -c /etc/shadowsocks.json -d start\nssserver -c /etc/shadowsocks.json -d stop\n\n- \n\n/etc/rc.local\nsudo ssserver -c /etc/shadowsocks.json --user username -d start - rootaddusersudo\n\n[ShadowsocksR](https://github.com/breakwa11/shadowsocks-rss/wiki)\n> python server.py -p 443 -k password -m aes-256-cfb -O auth_sha1_v4 -o http_simple -d start\n\n[net-speeder](https://zhgcao.github.io/2016/05/26/ubuntu-install-net-speeder/)\nvenetXOpenVZ\n\ncd net-speeder-master/\nsh build.sh -DCOOKED\n\nXenKVM\ncd net-speeder-master/\nsh build.sh\n\n\nip\n\n> ./net_speeder venet0 \"ip\"\n\nTCP 8989\nnet-speeder\n> ./net_speeder venet0:0 \"tcp src port 8989\"\n\n./net_speeder venet0 \"ip\"\n\nTCP 8989\nnet-speeder\n ./net_speeder venet0:0 \"tcp src port 8989\"\n\n\n [KVMBBR](https://qiujunya.com/linodebbr.html)\n```\n\n### 9. \n\n\n```\ntcpdump -i \"venet0:0\"  //\ntcpdump -c 10 //count\ntcpdump -c -A  //Asiciipackage\ntcpdump -c 5 -i wlo1 // \ntcpdump -c 5 -i wlo1 port 22// \n\ntcpdump version 4.5.1\nlibpcap version 1.5.3\nUsage: tcpdump [-aAbdDefhHIJKlLnNOpqRStuUvxX] [ -B size ] [ -c count ]\n                [ -C file_size ] [ -E algo:secret ] [ -F file ] [ -G seconds ]\n                [ -i interface ] [ -j tstamptype ] [ -M secret ]\n                [ -P in|out|inout ]\n                [ -r file ] [ -s snaplen ] [ -T type ] [ -V file ] [ -w file ]\n                [ -W filecount ] [ -y datalinktype ] [ -z command ]\n                [ -Z user ] [ expression ]\n```\n\ntcpdumpwireshark\n\n```\nnetstat\nnetstat -i // byte\nnetstat -ta //active\nnetstat -tan //ip\n```\n\n```\nifconfig // \nen01 //Ethernet \n RX bytes()TX bytes()\n```\n\n\n\n\n### 10.\n\n[](https://stackoverflow.com/questions/4797050/how-to-run-process-as-background-and-never-die)\n\n>  nohup node server.js > /dev/null 2>&1 &\n\n```\nnohup node server.js > /dev/null 2>&1 &\n\n1. nohup means: Do not terminate this process even when the stty is cut off.\n2. > /dev/null means: stdout goes to /dev/null (which is a dummy device that does not record any output).\n3. 2>&1 means: stderr also goes to the stdout (which is already redirected to /dev/null). You may replace &1 with a file path to keep a log of errors, e.g.: 2>/tmp/myLog\n4. & at the end means: run this command as a background task.\n```\n\n\n```\ntop \nPIDID[](http://www.cnblogs.com/gaojun/p/3406096.html)\nUSER\nPR\nNInice\nVIRT\nRES\nSHR\nSSRZN\n%CPUCPU\n%MEM\nTIME+CPUCPU\nCOMMAND\n\nps a \n\n****\n netstat -anp | grep sshd\n\nps | grep  pgrep XXX //\n\n\n*1*\nwatch -n 1 ps -aux --sort=-pmem,-pcpu\n```\n\n```\n#\nnetstat -anp\nlsof -i # \n#http(80)\nlsof -i:80\n#\nnetstat -anp|grep pid\n```\n\n//sudo\n> \nkill -9 id // 9\nkill pid // kill 15 //15terminate,  \n\nkill -l //id\n\nkillall nginx ->> nginx\n\npkill -u username //ps\n\nSignal ()  man signal\n\n\nrunnablesleepingzombiestop\n\n//,\nnice -n 15 /.....   pathnice\nrenice -s pid //\n\ndf -ah  // mounted\nproc\n\n\n\n\n\n\n### 11 .\n\n> \ngrep \"Failed password for root\" /var/log/auth.log | awk '{print $11}' | sort | uniq -c | sort -nr | more\n\n\n\nsudo vi /etc/ssh/sshd_config\nPort 4484\nPermitRootLogin no\n\nssh\n/etc/init.d/ssh restart\n\n\n\n[](https://perlgeek.de/en/article/set-up-a-clean-utf8-environment)\nlocaleutf-8(ubuntu)\n> \nvi ~/.bashrc \n\n# add these lines\nexport LC_ALL=en_US.UTF-8\nexport LANG=en_US.UTF-8\nexport LANGUAGE=en_US.UTF-8\n\nsudo locale-gen \"en_US.UTF-8\"\nsudo dpkg-reconfigure locales\n\n\n\n\n### \n\n\n- ![](http://odzl05jxx.bkt.clouddn.com/fork_you_git.jpg)\n- [](https://my.oschina.net/liting/blog/392051)\n- [](http://blog.sina.com.cn/s/blog_7479f7990100zwkp.html)\n- [](https://my.oschina.net/hunterli/blog/140783)\n- [Pythonss](http://www.jianshu.com/p/3d80c7cb7b17)\n- [ss](http://blog.csdn.net/program_thinker/article/details/45787395)\n- [utf-8](https://askubuntu.com/questions/162391/how-do-i-fix-my-locale-issue)\n","source":"_posts/2017-01-07-Linux-Basic-Commands.md","raw":"---\ntitle: linux\ndate: 2017-01-07 15:38:43\ncategories: blog\ntags: [,linux,notes]\ntop : 1\n---\n\nlinux,</br>\n![](http://odzl05jxx.bkt.clouddn.com/849c18412f8e7a0b18df09f6f87e6516.jpg?imageView2/2/w/600)\n <!--more-->\n\nvpsssh(Secure Shell)puttyxshell\n\n## \n1. [](#1-)\n2. [Vi](#2-Vi)\n3. [bash](#3-linuxshell)\n4. [](#4-)\n5. [](#5-)\n6. [](#6-)\n7. [](#7-)\n8. [SS](#8-SS)\n9. [](#9-)\n10. [](#10-)\n11.[](#11-)\n\n[](#)\n\n\n### 1. \n\n```shell\n- > cd //\n- > cd /  \n- > pwd // \n- > ls //  \n\n- > mkdir //\n- > rmdir //,\n- > rm -r //\n- > rm -rf //\n\n:\n-> rm -f 'my file'\n-> mv a.mp4 b.mp4 //mvWindows\n\n# \nrenamerename\n\n- > touch filename //linux\n\n```\n\n\n\n\n```shell\n- > cp a b //ab\n\n- > cp d1 d2 // -r \n- > cp -r d1 d2\n\n() \n\n- > mv d1 /  d1\n- > mv d1 ../d1\n- > mv d1 ../../\n```\n\n\n\n###\n\n```\n >\nls  > lsoutput.txt #\necho 'hey man' # print\necho 'hello' > log.txt # \n\n <\nwall < aa.txt # wall aa.txt\n\n\n#service\nservice XXX start/stop/status #help\n\nzip q r video.zip /home/video \nzip q r video.zip .  # .\n\n```\n\n\n\n### 2. Vi\n```shell\n- > vi 3.txt // \n\nVi'a'\n'esc' \n :w \n- :q \n\n- :wq \n- :q! \n```\n\n\n, 'dd' 'dw'\n'o'\n\n\n\n\n\n```shell\n- > more filename//\n\n- > cat filename //\n\n- > tac filename //\n\n- > head - 3 filename //\n- > tail - 3 filename // \n\n\n\n```\n\n\n find  whereis  Li(Link)\n\n```shell\nfind / -name filename  //\nfind /etc -name filename //etc\n\ngrep stringtofind filename //\n\nwhereis ls //ls()\n\n```\n\n### 3. linuxshell\nlinux\neg: \n```shell\n#!/bin/sh\nmyPath=\"/var/log/httpd/\"\nmyFile=\"/var /log/httpd/access.log\"\n#-x $myPath\nif [ ! -x \"$myPath\"]; then\nmkdir \"$myPath\"\nfi\n#-d $myPath\nif [ ! -d \"$myPath\"]; then\nmkdir \"$myPath\"\nfi\n#-f$myFile\nif [ ! -f \"$myFile\" ]; then\ntouch \"$myFile\"\nfi\n#-n,-n\nif [ ! -n \"$myVar\" ]; then\necho \"$myVar is empty\"\nexit 0\nfi\n#\nif [ \"$var1\" == \"$var2\" ]; then  //if then\necho '$var1 eq $var2'\nelse\necho '$var1 not eq $var2'\nfi //elsefi\n \n\n       if list then\n           do something here\n       elif list then\n           do another thing here\n       else\n         do something else here\n       fi  \n```\n\neg: echoprint\n```shell\nmyvar=Hi there\n\n    echo $myvar\n\n    echo \"$myvar\"\n\n    echo ' $myvar'\n\n    echo \\$myvar\n\nHi there\n\n              Hi there!\n\n              $myvar\n\n              $myvar\n```\n\n\n### 4. \n```shell\nuseradd user //(-g )/homeuser\n\npasswd user //user\n\ncd /etc >>> more passwd  \nmore group ,\ngroupadd groupname //\n\n//\nuserdel user // \n(rm -rf user) \n\n\n\n su testuser testuser\nexitroot\n\npwd\n```\n\n\n\n\n### 5. \nls\n\n- \nl\nd\n\n\nr(read)w()-()x()\n\n(u)(g)(0)\n\n: chmod\n```shell\nchmod +x filename //\nchmod u+x filename //\n//\n\n> u \n  g \n  o \n  a \n\n\n> r 4\n  w 2\n  x 1\n  - 0\n\na.txt\nchmod a+x a.txt \n#\nchmod a-x a.txt  #\n\n\nchmod 755 filename  \n751//\nchomod 444 filename# \nchmod 777 filename //9\n755  111101101,\n\nchown -R Jane /foldername # flodernameJane -R \n\n```\n\n\n\n- > chown username filename\n\n\n### 6. \n\neg: \n```shell\n$ cat /etc/passwd | grep usernametofind\n$ ls -l | grep \"^d\"\n$ ls -l * | grep \"^-\" | wc -|   //\"^-\"wc\n$ ls -l | grep \"^d\" //\n```\n\n\n### 7. \n\n[VPS](https://github.com/Teddysun/across)\n\n\n> git clone\ncd across\nwget -qO- bench.sh | bash Readme\n > curl -Lso- bench.sh | bash \n\n\n#### BandWagon\n```\n----------------------------------------------------------------------\nCPU model            : Intel(R) Xeon(R) CPU E3-1275 v5 @ 3.60GHz\nNumber of cores      : 1\nCPU frequency        : 3600.041 MHz\nTotal size of Disk   : 12.0 GB (10.0 GB Used)\nTotal amount of Mem  : 256 MB (217 MB Used)\nTotal amount of Swap : 128 MB (122 MB Used)\nSystem uptime        : 2 days, 4 hour 20 min\nLoad average         : 0.06, 0.05, 0.01\nOS                   : Ubuntu 14.04.1 LTS\nArch                 : i686 (32 Bit)\nKernel               : 2.6.32-042stab123.3\n----------------------------------------------------------------------\nI/O speed(1st run)   : 855 MB/s\nI/O speed(2nd run)   : 1.0 GB/s\nI/O speed(3rd run)   : 1.0 GB/s\nAverage I/O speed    : 967.7 MB/s\n----------------------------------------------------------------------\nNode Name                       IPv4 address            Download Speed\nCacheFly                        205.234.175.175         76.5MB/s\nLinode, Tokyo, JP               106.187.96.148          17.6MB/s\nLinode, Singapore, SG           139.162.23.4            8.18MB/s\nLinode, London, UK              176.58.107.39           8.67MB/s\nLinode, Frankfurt, DE           139.162.130.8           12.8MB/s\nLinode, Fremont, CA             50.116.14.9             9.40MB/s\nSoftlayer, Dallas, TX           173.192.68.18           62.3MB/s\nSoftlayer, Seattle, WA          67.228.112.250          66.0MB/s\nSoftlayer, Frankfurt, DE        159.122.69.4            12.2MB/s\nSoftlayer, Singapore, SG        119.81.28.170           11.8MB/s\nSoftlayer, HongKong, CN         119.81.130.170          13.2MB/s\n----------------------------------------------------------------------\n\n```\n#### BuyVm \n```\nCPU model            : Intel(R) Xeon(R) CPU           L5639  @ 2.13GHz\nNumber of cores      : 1\nCPU frequency        : 2000.070 MHz\nTotal size of Disk   : 15.0 GB (1.3 GB Used)\nTotal amount of Mem  : 128 MB (80 MB Used)\nTotal amount of Swap : 128 MB (32 MB Used)\nSystem uptime        : 0 days, 22 hour 28 min\nLoad average         : 0.10, 0.04, 0.05\nOS                   : Ubuntu 14.04.2 LTS\nArch                 : i686 (32 Bit)\nKernel               : 2.6.32-openvz-042stab116.2-amd64\n----------------------------------------------------------------------\nI/O speed(1st run)   : 102 MB/s\nI/O speed(2nd run)   : 97.1 MB/s\nI/O speed(3rd run)   : 147 MB/s\nAverage I/O speed    : 115.4 MB/s\n----------------------------------------------------------------------\nNode Name                       IPv4 address            Download Speed\nCacheFly                        205.234.175.175         14.7MB/s\nLinode, Tokyo, JP               106.187.96.148          6.15MB/s\nLinode, Singapore, SG           139.162.23.4            2.54MB/s\nLinode, London, UK              176.58.107.39           2.99MB/s\nLinode, Frankfurt, DE           139.162.130.8           2.96MB/s\nLinode, Fremont, CA             50.116.14.9             4.27MB/s\nSoftlayer, Dallas, TX           173.192.68.18           11.7MB/s\nSoftlayer, Seattle, WA          67.228.112.250          13.0MB/s\nSoftlayer, Frankfurt, DE        159.122.69.4            1.89MB/s\nSoftlayer, Singapore, SG        119.81.28.170           3.26MB/s\nSoftlayer, HongKong, CN         119.81.130.170          3.72MB/s\n----------------------------------------------------------------------\n```\n\n#### DigitalOcean Los Angeles\n\n```\n----------------------------------------------------------------------\nCPU model            : Intel(R) Xeon(R) CPU E5-2650L v3 @ 1.80GHz\nNumber of cores      : 1\nCPU frequency        : 1799.998 MHz\nTotal size of Disk   : 20.2 GB (1.0 GB Used)\nTotal amount of Mem  : 488 MB (33 MB Used)\nTotal amount of Swap : 0 MB (0 MB Used)\nSystem uptime        : 0 days, 0 hour 3 min\nLoad average         : 0.16, 0.10, 0.03\nOS                   : Ubuntu 16.04.2 LTS\nArch                 : x86_64 (64 Bit)\nKernel               : 4.4.0-78-generic\n----------------------------------------------------------------------\nI/O speed(1st run)   : 581 MB/s\nI/O speed(2nd run)   : 711 MB/s\nI/O speed(3rd run)   : 777 MB/s\nAverage I/O speed    : 689.7 MB/s\n----------------------------------------------------------------------\nNode Name                       IPv4 address            Download Speed\nCacheFly                        205.234.175.175         161MB/s\nLinode, Tokyo, JP               106.187.96.148          15.7MB/s\nLinode, Singapore, SG           139.162.23.4            5.96MB/s\nLinode, London, UK              176.58.107.39           5.71MB/s\nLinode, Frankfurt, DE           139.162.130.8           6.45MB/s\nLinode, Fremont, CA             50.116.14.9             30.4MB/s\nSoftlayer, Dallas, TX           173.192.68.18           29.9MB/s\nSoftlayer, Seattle, WA          67.228.112.250          57.7MB/s\nSoftlayer, Frankfurt, DE        159.122.69.4            3.64MB/s\nSoftlayer, Singapore, SG        119.81.28.170           7.59MB/s\nSoftlayer, HongKong, CN         119.81.130.170          8.84MB/s\n----------------------------------------------------------------------\n```\n\n#### DigitalOcean Sinapore (ip adress lokks like Russian)\n```\n----------------------------------------------------------------------\nCPU model            : Intel(R) Xeon(R) CPU E5-2630L 0 @ 2.00GHz\nNumber of cores      : 1\nCPU frequency        : 1999.999 MHz\nTotal size of Disk   : 20.2 GB (1.0 GB Used)\nTotal amount of Mem  : 488 MB (36 MB Used)\nTotal amount of Swap : 0 MB (0 MB Used)\nSystem uptime        : 0 days, 0 hour 2 min\nLoad average         : 0.17, 0.20, 0.09\nOS                   : Ubuntu 16.04.2 LTS\nArch                 : x86_64 (64 Bit)\nKernel               : 4.4.0-78-generic\n----------------------------------------------------------------------\nI/O speed(1st run)   : 662 MB/s\nI/O speed(2nd run)   : 741 MB/s\nI/O speed(3rd run)   : 728 MB/s\nAverage I/O speed    : 710.3 MB/s\n----------------------------------------------------------------------\nNode Name                       IPv4 address            Download Speed\nCacheFly                        205.234.175.175         20.8MB/s\nLinode, Tokyo, JP               106.187.96.148          18.6MB/s\nLinode, Singapore, SG           139.162.23.4            83.8MB/s\nLinode, London, UK              176.58.107.39           5.71MB/s\nLinode, Frankfurt, DE           139.162.130.8           8.13MB/s\nLinode, Fremont, CA             50.116.14.9             2.82MB/s\nSoftlayer, Dallas, TX           173.192.68.18           6.18MB/s\nSoftlayer, Seattle, WA          67.228.112.250          8.47MB/s\nSoftlayer, Frankfurt, DE        159.122.69.4            6.77MB/s\nSoftlayer, Singapore, SG        119.81.28.170           97.9MB/s\nSoftlayer, HongKong, CN         119.81.130.170          35.2MB/s\n----------------------------------------------------------------------\n\n```\n\n\n:\n````\ndf -h //hhuman-readable\ndu -sh //directory\ndu -h //\ndh -h img// img\ndh -h img/1.jpg //\n````\n\ncpu\n> cat /proc/cpuinfo\n\n\n>free -m \nfree -h # human readable\n\n\n> vi /etc/ssh/ssd_config\n\n\n\n\n```\nPort 22 (ssh)\nPermitRootLogin without-Password no\nAllowUsers userName\n```\n\n/home/video/ video.zip\n\nzip q r -v video.zip . #-v\n\n\nlinux ->windows putty sshLinuxLinuxWindowspscppscp.exec:/windows/system32cmd\npscp -r root@202.123.123.123:\"/root/fileonServer.mp4\" d:/whateveriwantonmyPc.mp4  root\nConnection Refused Error\n> netstat -anp | grep sshd\n\n\n\n\n> pscp -P 12345-r root@202.123.123.123:\"/root/fileonServer.mp4\" d:/whateveriwantonmyPc.mp4  -p\n\n\n\n\n### 8. SS\n```\n  1. ubuntu\n  git > apt-get install git\n  python > apt-get install python-2.7\n  python-setuptools > apt-get install python-setuptools\n   python --version\n\n\n  2. shadowsocks\n > git clone https://github.com/shadowsocks/shadowsocks\n  # master\n  python setup.py build\n  python setup.py install\n\n   ssserver --version\n\n  3. \n  vim config.json\n  {\n   \"server\":\"my_server_ip\",\n   \"server_port\":8388,\n   \"local_address\": \"127.0.0.1\",\n   \"local_port\":1080,\n   \"password\":\"mypassword\",\n   \"timeout\":300,\n   \"method\":\"aes-256-cfb\",\n   \"fast_open\": false\n}\n  \nssserver -c config.json -d start #\n\n\nps -ef |grep sss\n\nss  \nssserver -c /etc/shadowsocks/config.json # \n\n- \nssserver -c /etc/shadowsocks.json -d start\nssserver -c /etc/shadowsocks.json -d stop\n\n- \n\n/etc/rc.local\nsudo ssserver -c /etc/shadowsocks.json --user username -d start - rootaddusersudo\n\n[ShadowsocksR](https://github.com/breakwa11/shadowsocks-rss/wiki)\n> python server.py -p 443 -k password -m aes-256-cfb -O auth_sha1_v4 -o http_simple -d start\n\n[net-speeder](https://zhgcao.github.io/2016/05/26/ubuntu-install-net-speeder/)\nvenetXOpenVZ\n\ncd net-speeder-master/\nsh build.sh -DCOOKED\n\nXenKVM\ncd net-speeder-master/\nsh build.sh\n\n\nip\n\n> ./net_speeder venet0 \"ip\"\n\nTCP 8989\nnet-speeder\n> ./net_speeder venet0:0 \"tcp src port 8989\"\n\n./net_speeder venet0 \"ip\"\n\nTCP 8989\nnet-speeder\n ./net_speeder venet0:0 \"tcp src port 8989\"\n\n\n [KVMBBR](https://qiujunya.com/linodebbr.html)\n```\n\n### 9. \n\n\n```\ntcpdump -i \"venet0:0\"  //\ntcpdump -c 10 //count\ntcpdump -c -A  //Asiciipackage\ntcpdump -c 5 -i wlo1 // \ntcpdump -c 5 -i wlo1 port 22// \n\ntcpdump version 4.5.1\nlibpcap version 1.5.3\nUsage: tcpdump [-aAbdDefhHIJKlLnNOpqRStuUvxX] [ -B size ] [ -c count ]\n                [ -C file_size ] [ -E algo:secret ] [ -F file ] [ -G seconds ]\n                [ -i interface ] [ -j tstamptype ] [ -M secret ]\n                [ -P in|out|inout ]\n                [ -r file ] [ -s snaplen ] [ -T type ] [ -V file ] [ -w file ]\n                [ -W filecount ] [ -y datalinktype ] [ -z command ]\n                [ -Z user ] [ expression ]\n```\n\ntcpdumpwireshark\n\n```\nnetstat\nnetstat -i // byte\nnetstat -ta //active\nnetstat -tan //ip\n```\n\n```\nifconfig // \nen01 //Ethernet \n RX bytes()TX bytes()\n```\n\n\n\n\n### 10.\n\n[](https://stackoverflow.com/questions/4797050/how-to-run-process-as-background-and-never-die)\n\n>  nohup node server.js > /dev/null 2>&1 &\n\n```\nnohup node server.js > /dev/null 2>&1 &\n\n1. nohup means: Do not terminate this process even when the stty is cut off.\n2. > /dev/null means: stdout goes to /dev/null (which is a dummy device that does not record any output).\n3. 2>&1 means: stderr also goes to the stdout (which is already redirected to /dev/null). You may replace &1 with a file path to keep a log of errors, e.g.: 2>/tmp/myLog\n4. & at the end means: run this command as a background task.\n```\n\n\n```\ntop \nPIDID[](http://www.cnblogs.com/gaojun/p/3406096.html)\nUSER\nPR\nNInice\nVIRT\nRES\nSHR\nSSRZN\n%CPUCPU\n%MEM\nTIME+CPUCPU\nCOMMAND\n\nps a \n\n****\n netstat -anp | grep sshd\n\nps | grep  pgrep XXX //\n\n\n*1*\nwatch -n 1 ps -aux --sort=-pmem,-pcpu\n```\n\n```\n#\nnetstat -anp\nlsof -i # \n#http(80)\nlsof -i:80\n#\nnetstat -anp|grep pid\n```\n\n//sudo\n> \nkill -9 id // 9\nkill pid // kill 15 //15terminate,  \n\nkill -l //id\n\nkillall nginx ->> nginx\n\npkill -u username //ps\n\nSignal ()  man signal\n\n\nrunnablesleepingzombiestop\n\n//,\nnice -n 15 /.....   pathnice\nrenice -s pid //\n\ndf -ah  // mounted\nproc\n\n\n\n\n\n\n### 11 .\n\n> \ngrep \"Failed password for root\" /var/log/auth.log | awk '{print $11}' | sort | uniq -c | sort -nr | more\n\n\n\nsudo vi /etc/ssh/sshd_config\nPort 4484\nPermitRootLogin no\n\nssh\n/etc/init.d/ssh restart\n\n\n\n[](https://perlgeek.de/en/article/set-up-a-clean-utf8-environment)\nlocaleutf-8(ubuntu)\n> \nvi ~/.bashrc \n\n# add these lines\nexport LC_ALL=en_US.UTF-8\nexport LANG=en_US.UTF-8\nexport LANGUAGE=en_US.UTF-8\n\nsudo locale-gen \"en_US.UTF-8\"\nsudo dpkg-reconfigure locales\n\n\n\n\n### \n\n\n- ![](http://odzl05jxx.bkt.clouddn.com/fork_you_git.jpg)\n- [](https://my.oschina.net/liting/blog/392051)\n- [](http://blog.sina.com.cn/s/blog_7479f7990100zwkp.html)\n- [](https://my.oschina.net/hunterli/blog/140783)\n- [Pythonss](http://www.jianshu.com/p/3d80c7cb7b17)\n- [ss](http://blog.csdn.net/program_thinker/article/details/45787395)\n- [utf-8](https://askubuntu.com/questions/162391/how-do-i-fix-my-locale-issue)\n","slug":"2017-01-07-Linux-Basic-Commands","published":1,"updated":"2017-07-08T15:01:38.560Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj50afgwp000zi4vrurztttuw","content":"<p>linux,</br><br><img src=\"http://odzl05jxx.bkt.clouddn.com/849c18412f8e7a0b18df09f6f87e6516.jpg?imageView2/2/w/600\" alt=\"\"><br> <a id=\"more\"></a></p>\n<p>vpsssh(Secure Shell)puttyxshell</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ol>\n<li><a href=\"#1-\"></a></li>\n<li><a href=\"#2-Vi\">Vi</a></li>\n<li><a href=\"#3-linuxshell\">bash</a></li>\n<li><a href=\"#4-\"></a></li>\n<li><a href=\"#5-\"></a></li>\n<li><a href=\"#6-\"></a></li>\n<li><a href=\"#7-\"></a></li>\n<li><a href=\"#8-SS\">SS</a></li>\n<li><a href=\"#9-\"></a></li>\n<li><a href=\"#10-\"></a><br>11.<a href=\"#11-\"></a></li>\n</ol>\n<p><a href=\"#\"></a></p>\n<h3 id=\"1-\"><a href=\"#1-\" class=\"headerlink\" title=\"1. \"></a>1. </h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\">- &gt; cd //</div><div class=\"line\">- &gt; cd /  </div><div class=\"line\">- &gt; pwd // </div><div class=\"line\">- &gt; ls //  </div><div class=\"line\"></div><div class=\"line\">- &gt; mkdir //</div><div class=\"line\">- &gt; rmdir //,</div><div class=\"line\">- &gt; rm -r //</div><div class=\"line\">- &gt; rm -rf //</div><div class=\"line\"></div><div class=\"line\">:</div><div class=\"line\">-&gt; rm -f &apos;my file&apos;</div><div class=\"line\">-&gt; mv a.mp4 b.mp4 //mvWindows</div><div class=\"line\"></div><div class=\"line\"># </div><div class=\"line\">renamerename</div><div class=\"line\"></div><div class=\"line\">- &gt; touch filename //linux</div></pre></td></tr></table></figure>\n<p><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">- &gt; cp a b //ab</div><div class=\"line\"></div><div class=\"line\">- &gt; cp d1 d2 // -r </div><div class=\"line\">- &gt; cp -r d1 d2</div><div class=\"line\"></div><div class=\"line\">() </div><div class=\"line\"></div><div class=\"line\">- &gt; mv d1 /  d1</div><div class=\"line\">- &gt; mv d1 ../d1</div><div class=\"line\">- &gt; mv d1 ../../</div></pre></td></tr></table></figure></p>\n<p>###</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\"> &gt;</div><div class=\"line\">ls  &gt; lsoutput.txt #</div><div class=\"line\">echo &apos;hey man&apos; # print</div><div class=\"line\">echo &apos;hello&apos; &gt; log.txt # </div><div class=\"line\"></div><div class=\"line\"> &lt;</div><div class=\"line\">wall &lt; aa.txt # wall aa.txt</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">#service</div><div class=\"line\">service XXX start/stop/status #help</div><div class=\"line\"></div><div class=\"line\">zip q r video.zip /home/video </div><div class=\"line\">zip q r video.zip .  # .</div></pre></td></tr></table></figure>\n<h3 id=\"2-Vi\"><a href=\"#2-Vi\" class=\"headerlink\" title=\"2. Vi\"></a>2. Vi</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">- &gt; vi 3.txt // </div><div class=\"line\"></div><div class=\"line\">Vi&apos;a&apos;</div><div class=\"line\">&apos;esc&apos; </div><div class=\"line\"> :w </div><div class=\"line\">- :q </div><div class=\"line\"></div><div class=\"line\">- :wq </div><div class=\"line\">- :q! </div></pre></td></tr></table></figure>\n<p>, dd dw<br>o</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">- &gt; more filename//</div><div class=\"line\"></div><div class=\"line\">- &gt; cat filename //</div><div class=\"line\"></div><div class=\"line\">- &gt; tac filename //</div><div class=\"line\"></div><div class=\"line\">- &gt; head - 3 filename //</div><div class=\"line\">- &gt; tail - 3 filename //</div></pre></td></tr></table></figure>\n<p> find  whereis  Li(Link)<br><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">find / -name filename  //</div><div class=\"line\">find /etc -name filename //etc</div><div class=\"line\"></div><div class=\"line\">grep stringtofind filename //</div><div class=\"line\"></div><div class=\"line\">whereis ls //ls()</div></pre></td></tr></table></figure></p>\n<h3 id=\"3-linuxshell\"><a href=\"#3-linuxshell\" class=\"headerlink\" title=\"3. linuxshell\"></a>3. linuxshell</h3><p>linux<br>eg:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div></pre></td><td class=\"code\"><pre><div class=\"line\">#!/bin/sh</div><div class=\"line\">myPath=&quot;/var/log/httpd/&quot;</div><div class=\"line\">myFile=&quot;/var /log/httpd/access.log&quot;</div><div class=\"line\">#-x $myPath</div><div class=\"line\">if [ ! -x &quot;$myPath&quot;]; then</div><div class=\"line\">mkdir &quot;$myPath&quot;</div><div class=\"line\">fi</div><div class=\"line\">#-d $myPath</div><div class=\"line\">if [ ! -d &quot;$myPath&quot;]; then</div><div class=\"line\">mkdir &quot;$myPath&quot;</div><div class=\"line\">fi</div><div class=\"line\">#-f$myFile</div><div class=\"line\">if [ ! -f &quot;$myFile&quot; ]; then</div><div class=\"line\">touch &quot;$myFile&quot;</div><div class=\"line\">fi</div><div class=\"line\">#-n,-n</div><div class=\"line\">if [ ! -n &quot;$myVar&quot; ]; then</div><div class=\"line\">echo &quot;$myVar is empty&quot;</div><div class=\"line\">exit 0</div><div class=\"line\">fi</div><div class=\"line\">#</div><div class=\"line\">if [ &quot;$var1&quot; == &quot;$var2&quot; ]; then  //if then</div><div class=\"line\">echo &apos;$var1 eq $var2&apos;</div><div class=\"line\">else</div><div class=\"line\">echo &apos;$var1 not eq $var2&apos;</div><div class=\"line\">fi //elsefi</div><div class=\"line\"> </div><div class=\"line\"></div><div class=\"line\">       if list then</div><div class=\"line\">           do something here</div><div class=\"line\">       elif list then</div><div class=\"line\">           do another thing here</div><div class=\"line\">       else</div><div class=\"line\">         do something else here</div><div class=\"line\">       fi</div></pre></td></tr></table></figure></p>\n<p>eg: echoprint<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\">myvar=Hi there</div><div class=\"line\"></div><div class=\"line\">    echo $myvar</div><div class=\"line\"></div><div class=\"line\">    echo &quot;$myvar&quot;</div><div class=\"line\"></div><div class=\"line\">    echo &apos; $myvar&apos;</div><div class=\"line\"></div><div class=\"line\">    echo \\$myvar</div><div class=\"line\"></div><div class=\"line\">Hi there</div><div class=\"line\"></div><div class=\"line\">              Hi there!</div><div class=\"line\"></div><div class=\"line\">              $myvar</div><div class=\"line\"></div><div class=\"line\">              $myvar</div></pre></td></tr></table></figure></p>\n<h3 id=\"4-\"><a href=\"#4-\" class=\"headerlink\" title=\"4. \"></a>4. </h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\">useradd user //(-g )/homeuser</div><div class=\"line\"></div><div class=\"line\">passwd user //user</div><div class=\"line\"></div><div class=\"line\">cd /etc &gt;&gt;&gt; more passwd  </div><div class=\"line\">more group ,</div><div class=\"line\">groupadd groupname //</div><div class=\"line\"></div><div class=\"line\">//</div><div class=\"line\">userdel user // </div><div class=\"line\">(rm -rf user) </div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"> su testuser testuser</div><div class=\"line\">exitroot</div><div class=\"line\"></div><div class=\"line\">pwd</div></pre></td></tr></table></figure>\n<h3 id=\"5-\"><a href=\"#5-\" class=\"headerlink\" title=\"5. \"></a>5. </h3><p>ls<br></p>\n<ul>\n<li><br>l<br>d</li>\n</ul>\n<p><br>r(read)w()-()x()</p>\n<p>(u)(g)(0)</p>\n<p>: chmod<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div></pre></td><td class=\"code\"><pre><div class=\"line\">chmod +x filename //</div><div class=\"line\">chmod u+x filename //</div><div class=\"line\">//</div><div class=\"line\"></div><div class=\"line\">&gt; u </div><div class=\"line\">  g </div><div class=\"line\">  o </div><div class=\"line\">  a </div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">&gt; r 4</div><div class=\"line\">  w 2</div><div class=\"line\">  x 1</div><div class=\"line\">  - 0</div><div class=\"line\"></div><div class=\"line\">a.txt</div><div class=\"line\">chmod a+x a.txt </div><div class=\"line\">#</div><div class=\"line\">chmod a-x a.txt  #</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">chmod 755 filename  </div><div class=\"line\">751//</div><div class=\"line\">chomod 444 filename# </div><div class=\"line\">chmod 777 filename //9</div><div class=\"line\">755  111101101,</div><div class=\"line\"></div><div class=\"line\">chown -R Jane /foldername # flodernameJane -R </div></pre></td></tr></table></figure></p>\n<p></p>\n<ul>\n<li><blockquote>\n<p>chown username filename</p>\n</blockquote>\n</li>\n</ul>\n<h3 id=\"6-\"><a href=\"#6-\" class=\"headerlink\" title=\"6. \"></a>6. </h3><p><br>eg: <br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">$ cat /etc/passwd | grep usernametofind</div><div class=\"line\">$ ls -l | grep &quot;^d&quot;</div><div class=\"line\">$ ls -l * | grep &quot;^-&quot; | wc -|   //&quot;^-&quot;wc</div><div class=\"line\">$ ls -l | grep &quot;^d&quot; //</div></pre></td></tr></table></figure></p>\n<h3 id=\"7-\"><a href=\"#7-\" class=\"headerlink\" title=\"7. \"></a>7. </h3><p><a href=\"https://github.com/Teddysun/across\">VPS</a></p>\n<blockquote>\n<p>git clone<br>cd across<br>wget -qO- bench.sh | bash Readme<br> &gt; curl -Lso- bench.sh | bash </p>\n</blockquote>\n<h4 id=\"BandWagon\"><a href=\"#BandWagon\" class=\"headerlink\" title=\"BandWagon\"></a>BandWagon</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div></pre></td><td class=\"code\"><pre><div class=\"line\">----------------------------------------------------------------------</div><div class=\"line\">CPU model            : Intel(R) Xeon(R) CPU E3-1275 v5 @ 3.60GHz</div><div class=\"line\">Number of cores      : 1</div><div class=\"line\">CPU frequency        : 3600.041 MHz</div><div class=\"line\">Total size of Disk   : 12.0 GB (10.0 GB Used)</div><div class=\"line\">Total amount of Mem  : 256 MB (217 MB Used)</div><div class=\"line\">Total amount of Swap : 128 MB (122 MB Used)</div><div class=\"line\">System uptime        : 2 days, 4 hour 20 min</div><div class=\"line\">Load average         : 0.06, 0.05, 0.01</div><div class=\"line\">OS                   : Ubuntu 14.04.1 LTS</div><div class=\"line\">Arch                 : i686 (32 Bit)</div><div class=\"line\">Kernel               : 2.6.32-042stab123.3</div><div class=\"line\">----------------------------------------------------------------------</div><div class=\"line\">I/O speed(1st run)   : 855 MB/s</div><div class=\"line\">I/O speed(2nd run)   : 1.0 GB/s</div><div class=\"line\">I/O speed(3rd run)   : 1.0 GB/s</div><div class=\"line\">Average I/O speed    : 967.7 MB/s</div><div class=\"line\">----------------------------------------------------------------------</div><div class=\"line\">Node Name                       IPv4 address            Download Speed</div><div class=\"line\">CacheFly                        205.234.175.175         76.5MB/s</div><div class=\"line\">Linode, Tokyo, JP               106.187.96.148          17.6MB/s</div><div class=\"line\">Linode, Singapore, SG           139.162.23.4            8.18MB/s</div><div class=\"line\">Linode, London, UK              176.58.107.39           8.67MB/s</div><div class=\"line\">Linode, Frankfurt, DE           139.162.130.8           12.8MB/s</div><div class=\"line\">Linode, Fremont, CA             50.116.14.9             9.40MB/s</div><div class=\"line\">Softlayer, Dallas, TX           173.192.68.18           62.3MB/s</div><div class=\"line\">Softlayer, Seattle, WA          67.228.112.250          66.0MB/s</div><div class=\"line\">Softlayer, Frankfurt, DE        159.122.69.4            12.2MB/s</div><div class=\"line\">Softlayer, Singapore, SG        119.81.28.170           11.8MB/s</div><div class=\"line\">Softlayer, HongKong, CN         119.81.130.170          13.2MB/s</div><div class=\"line\">----------------------------------------------------------------------</div></pre></td></tr></table></figure>\n<h4 id=\"BuyVm\"><a href=\"#BuyVm\" class=\"headerlink\" title=\"BuyVm\"></a>BuyVm</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div></pre></td><td class=\"code\"><pre><div class=\"line\">CPU model            : Intel(R) Xeon(R) CPU           L5639  @ 2.13GHz</div><div class=\"line\">Number of cores      : 1</div><div class=\"line\">CPU frequency        : 2000.070 MHz</div><div class=\"line\">Total size of Disk   : 15.0 GB (1.3 GB Used)</div><div class=\"line\">Total amount of Mem  : 128 MB (80 MB Used)</div><div class=\"line\">Total amount of Swap : 128 MB (32 MB Used)</div><div class=\"line\">System uptime        : 0 days, 22 hour 28 min</div><div class=\"line\">Load average         : 0.10, 0.04, 0.05</div><div class=\"line\">OS                   : Ubuntu 14.04.2 LTS</div><div class=\"line\">Arch                 : i686 (32 Bit)</div><div class=\"line\">Kernel               : 2.6.32-openvz-042stab116.2-amd64</div><div class=\"line\">----------------------------------------------------------------------</div><div class=\"line\">I/O speed(1st run)   : 102 MB/s</div><div class=\"line\">I/O speed(2nd run)   : 97.1 MB/s</div><div class=\"line\">I/O speed(3rd run)   : 147 MB/s</div><div class=\"line\">Average I/O speed    : 115.4 MB/s</div><div class=\"line\">----------------------------------------------------------------------</div><div class=\"line\">Node Name                       IPv4 address            Download Speed</div><div class=\"line\">CacheFly                        205.234.175.175         14.7MB/s</div><div class=\"line\">Linode, Tokyo, JP               106.187.96.148          6.15MB/s</div><div class=\"line\">Linode, Singapore, SG           139.162.23.4            2.54MB/s</div><div class=\"line\">Linode, London, UK              176.58.107.39           2.99MB/s</div><div class=\"line\">Linode, Frankfurt, DE           139.162.130.8           2.96MB/s</div><div class=\"line\">Linode, Fremont, CA             50.116.14.9             4.27MB/s</div><div class=\"line\">Softlayer, Dallas, TX           173.192.68.18           11.7MB/s</div><div class=\"line\">Softlayer, Seattle, WA          67.228.112.250          13.0MB/s</div><div class=\"line\">Softlayer, Frankfurt, DE        159.122.69.4            1.89MB/s</div><div class=\"line\">Softlayer, Singapore, SG        119.81.28.170           3.26MB/s</div><div class=\"line\">Softlayer, HongKong, CN         119.81.130.170          3.72MB/s</div><div class=\"line\">----------------------------------------------------------------------</div></pre></td></tr></table></figure>\n<h4 id=\"DigitalOcean-Los-Angeles\"><a href=\"#DigitalOcean-Los-Angeles\" class=\"headerlink\" title=\"DigitalOcean Los Angeles\"></a>DigitalOcean Los Angeles</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div></pre></td><td class=\"code\"><pre><div class=\"line\">----------------------------------------------------------------------</div><div class=\"line\">CPU model            : Intel(R) Xeon(R) CPU E5-2650L v3 @ 1.80GHz</div><div class=\"line\">Number of cores      : 1</div><div class=\"line\">CPU frequency        : 1799.998 MHz</div><div class=\"line\">Total size of Disk   : 20.2 GB (1.0 GB Used)</div><div class=\"line\">Total amount of Mem  : 488 MB (33 MB Used)</div><div class=\"line\">Total amount of Swap : 0 MB (0 MB Used)</div><div class=\"line\">System uptime        : 0 days, 0 hour 3 min</div><div class=\"line\">Load average         : 0.16, 0.10, 0.03</div><div class=\"line\">OS                   : Ubuntu 16.04.2 LTS</div><div class=\"line\">Arch                 : x86_64 (64 Bit)</div><div class=\"line\">Kernel               : 4.4.0-78-generic</div><div class=\"line\">----------------------------------------------------------------------</div><div class=\"line\">I/O speed(1st run)   : 581 MB/s</div><div class=\"line\">I/O speed(2nd run)   : 711 MB/s</div><div class=\"line\">I/O speed(3rd run)   : 777 MB/s</div><div class=\"line\">Average I/O speed    : 689.7 MB/s</div><div class=\"line\">----------------------------------------------------------------------</div><div class=\"line\">Node Name                       IPv4 address            Download Speed</div><div class=\"line\">CacheFly                        205.234.175.175         161MB/s</div><div class=\"line\">Linode, Tokyo, JP               106.187.96.148          15.7MB/s</div><div class=\"line\">Linode, Singapore, SG           139.162.23.4            5.96MB/s</div><div class=\"line\">Linode, London, UK              176.58.107.39           5.71MB/s</div><div class=\"line\">Linode, Frankfurt, DE           139.162.130.8           6.45MB/s</div><div class=\"line\">Linode, Fremont, CA             50.116.14.9             30.4MB/s</div><div class=\"line\">Softlayer, Dallas, TX           173.192.68.18           29.9MB/s</div><div class=\"line\">Softlayer, Seattle, WA          67.228.112.250          57.7MB/s</div><div class=\"line\">Softlayer, Frankfurt, DE        159.122.69.4            3.64MB/s</div><div class=\"line\">Softlayer, Singapore, SG        119.81.28.170           7.59MB/s</div><div class=\"line\">Softlayer, HongKong, CN         119.81.130.170          8.84MB/s</div><div class=\"line\">----------------------------------------------------------------------</div></pre></td></tr></table></figure>\n<h4 id=\"DigitalOcean-Sinapore-ip-adress-lokks-like-Russian\"><a href=\"#DigitalOcean-Sinapore-ip-adress-lokks-like-Russian\" class=\"headerlink\" title=\"DigitalOcean Sinapore (ip adress lokks like Russian)\"></a>DigitalOcean Sinapore (ip adress lokks like Russian)</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div></pre></td><td class=\"code\"><pre><div class=\"line\">----------------------------------------------------------------------</div><div class=\"line\">CPU model            : Intel(R) Xeon(R) CPU E5-2630L 0 @ 2.00GHz</div><div class=\"line\">Number of cores      : 1</div><div class=\"line\">CPU frequency        : 1999.999 MHz</div><div class=\"line\">Total size of Disk   : 20.2 GB (1.0 GB Used)</div><div class=\"line\">Total amount of Mem  : 488 MB (36 MB Used)</div><div class=\"line\">Total amount of Swap : 0 MB (0 MB Used)</div><div class=\"line\">System uptime        : 0 days, 0 hour 2 min</div><div class=\"line\">Load average         : 0.17, 0.20, 0.09</div><div class=\"line\">OS                   : Ubuntu 16.04.2 LTS</div><div class=\"line\">Arch                 : x86_64 (64 Bit)</div><div class=\"line\">Kernel               : 4.4.0-78-generic</div><div class=\"line\">----------------------------------------------------------------------</div><div class=\"line\">I/O speed(1st run)   : 662 MB/s</div><div class=\"line\">I/O speed(2nd run)   : 741 MB/s</div><div class=\"line\">I/O speed(3rd run)   : 728 MB/s</div><div class=\"line\">Average I/O speed    : 710.3 MB/s</div><div class=\"line\">----------------------------------------------------------------------</div><div class=\"line\">Node Name                       IPv4 address            Download Speed</div><div class=\"line\">CacheFly                        205.234.175.175         20.8MB/s</div><div class=\"line\">Linode, Tokyo, JP               106.187.96.148          18.6MB/s</div><div class=\"line\">Linode, Singapore, SG           139.162.23.4            83.8MB/s</div><div class=\"line\">Linode, London, UK              176.58.107.39           5.71MB/s</div><div class=\"line\">Linode, Frankfurt, DE           139.162.130.8           8.13MB/s</div><div class=\"line\">Linode, Fremont, CA             50.116.14.9             2.82MB/s</div><div class=\"line\">Softlayer, Dallas, TX           173.192.68.18           6.18MB/s</div><div class=\"line\">Softlayer, Seattle, WA          67.228.112.250          8.47MB/s</div><div class=\"line\">Softlayer, Frankfurt, DE        159.122.69.4            6.77MB/s</div><div class=\"line\">Softlayer, Singapore, SG        119.81.28.170           97.9MB/s</div><div class=\"line\">Softlayer, HongKong, CN         119.81.130.170          35.2MB/s</div><div class=\"line\">----------------------------------------------------------------------</div></pre></td></tr></table></figure>\n<p>:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">df -h //hhuman-readable</div><div class=\"line\">du -sh //directory</div><div class=\"line\">du -h //</div><div class=\"line\">dh -h img// img</div><div class=\"line\">dh -h img/1.jpg //</div></pre></td></tr></table></figure></p>\n<p>cpu</p>\n<blockquote>\n<p>cat /proc/cpuinfo</p>\n</blockquote>\n<p></p>\n<blockquote>\n<p>free -m<br>free -h # human readable</p>\n</blockquote>\n<p></p>\n<blockquote>\n<p>vi /etc/ssh/ssd_config</p>\n</blockquote>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">Port 22 (ssh)</div><div class=\"line\">PermitRootLogin without-Password no</div><div class=\"line\">AllowUsers userName</div></pre></td></tr></table></figure>\n<p><br>/home/video/ video.zip</p>\n<p>zip q r -v video.zip . #-v</p>\n<p>linux -&gt;windows putty sshLinuxLinuxWindowspscppscp.exec:/windows/system32cmd<br>pscp -r root@202.123.123.123:/root/fileonServer.mp4 d:/whateveriwantonmyPc.mp4  root<br>Connection Refused Error</p>\n<blockquote>\n<p>netstat -anp | grep sshd</p>\n</blockquote>\n<p><br></p>\n<blockquote>\n<p>pscp -P 12345-r root@202.123.123.123:/root/fileonServer.mp4 d:/whateveriwantonmyPc.mp4  -p</p>\n</blockquote>\n<h3 id=\"8-SS\"><a href=\"#8-SS\" class=\"headerlink\" title=\"8. SS\"></a>8. SS</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div></pre></td><td class=\"code\"><pre><div class=\"line\">  1. ubuntu</div><div class=\"line\">  git &gt; apt-get install git</div><div class=\"line\">  python &gt; apt-get install python-2.7</div><div class=\"line\">  python-setuptools &gt; apt-get install python-setuptools</div><div class=\"line\">   python --version</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">  2. shadowsocks</div><div class=\"line\"> &gt; git clone https://github.com/shadowsocks/shadowsocks</div><div class=\"line\">  # master</div><div class=\"line\">  python setup.py build</div><div class=\"line\">  python setup.py install</div><div class=\"line\"></div><div class=\"line\">   ssserver --version</div><div class=\"line\"></div><div class=\"line\">  3. </div><div class=\"line\">  vim config.json</div><div class=\"line\">  &#123;</div><div class=\"line\">   &quot;server&quot;:&quot;my_server_ip&quot;,</div><div class=\"line\">   &quot;server_port&quot;:8388,</div><div class=\"line\">   &quot;local_address&quot;: &quot;127.0.0.1&quot;,</div><div class=\"line\">   &quot;local_port&quot;:1080,</div><div class=\"line\">   &quot;password&quot;:&quot;mypassword&quot;,</div><div class=\"line\">   &quot;timeout&quot;:300,</div><div class=\"line\">   &quot;method&quot;:&quot;aes-256-cfb&quot;,</div><div class=\"line\">   &quot;fast_open&quot;: false</div><div class=\"line\">&#125;</div><div class=\"line\">  </div><div class=\"line\">ssserver -c config.json -d start #</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">ps -ef |grep sss</div><div class=\"line\"></div><div class=\"line\">ss  </div><div class=\"line\">ssserver -c /etc/shadowsocks/config.json # </div><div class=\"line\"></div><div class=\"line\">- </div><div class=\"line\">ssserver -c /etc/shadowsocks.json -d start</div><div class=\"line\">ssserver -c /etc/shadowsocks.json -d stop</div><div class=\"line\"></div><div class=\"line\">- </div><div class=\"line\"></div><div class=\"line\">/etc/rc.local</div><div class=\"line\">sudo ssserver -c /etc/shadowsocks.json --user username -d start - rootaddusersudo</div><div class=\"line\"></div><div class=\"line\">[ShadowsocksR](https://github.com/breakwa11/shadowsocks-rss/wiki)</div><div class=\"line\">&gt; python server.py -p 443 -k password -m aes-256-cfb -O auth_sha1_v4 -o http_simple -d start</div><div class=\"line\"></div><div class=\"line\">[net-speeder](https://zhgcao.github.io/2016/05/26/ubuntu-install-net-speeder/)</div><div class=\"line\">venetXOpenVZ</div><div class=\"line\"></div><div class=\"line\">cd net-speeder-master/</div><div class=\"line\">sh build.sh -DCOOKED</div><div class=\"line\"></div><div class=\"line\">XenKVM</div><div class=\"line\">cd net-speeder-master/</div><div class=\"line\">sh build.sh</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">ip</div><div class=\"line\"></div><div class=\"line\">&gt; ./net_speeder venet0 &quot;ip&quot;</div><div class=\"line\"></div><div class=\"line\">TCP 8989</div><div class=\"line\">net-speeder</div><div class=\"line\">&gt; ./net_speeder venet0:0 &quot;tcp src port 8989&quot;</div><div class=\"line\"></div><div class=\"line\">./net_speeder venet0 &quot;ip&quot;</div><div class=\"line\"></div><div class=\"line\">TCP 8989</div><div class=\"line\">net-speeder</div><div class=\"line\"> ./net_speeder venet0:0 &quot;tcp src port 8989&quot;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"> [KVMBBR](https://qiujunya.com/linodebbr.html)</div></pre></td></tr></table></figure>\n<h3 id=\"9-\"><a href=\"#9-\" class=\"headerlink\" title=\"9. \"></a>9. </h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\">tcpdump -i &quot;venet0:0&quot;  //</div><div class=\"line\">tcpdump -c 10 //count</div><div class=\"line\">tcpdump -c -A  //Asiciipackage</div><div class=\"line\">tcpdump -c 5 -i wlo1 // </div><div class=\"line\">tcpdump -c 5 -i wlo1 port 22// </div><div class=\"line\"></div><div class=\"line\">tcpdump version 4.5.1</div><div class=\"line\">libpcap version 1.5.3</div><div class=\"line\">Usage: tcpdump [-aAbdDefhHIJKlLnNOpqRStuUvxX] [ -B size ] [ -c count ]</div><div class=\"line\">                [ -C file_size ] [ -E algo:secret ] [ -F file ] [ -G seconds ]</div><div class=\"line\">                [ -i interface ] [ -j tstamptype ] [ -M secret ]</div><div class=\"line\">                [ -P in|out|inout ]</div><div class=\"line\">                [ -r file ] [ -s snaplen ] [ -T type ] [ -V file ] [ -w file ]</div><div class=\"line\">                [ -W filecount ] [ -y datalinktype ] [ -z command ]</div><div class=\"line\">                [ -Z user ] [ expression ]</div></pre></td></tr></table></figure>\n<p>tcpdumpwireshark</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">netstat</div><div class=\"line\">netstat -i // byte</div><div class=\"line\">netstat -ta //active</div><div class=\"line\">netstat -tan //ip</div></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">ifconfig // </div><div class=\"line\">en01 //Ethernet </div><div class=\"line\"> RX bytes()TX bytes()</div></pre></td></tr></table></figure>\n<h3 id=\"10-\"><a href=\"#10-\" class=\"headerlink\" title=\"10.\"></a>10.</h3><p><a href=\"https://stackoverflow.com/questions/4797050/how-to-run-process-as-background-and-never-die\"></a></p>\n<blockquote>\n<p> nohup node server.js &gt; /dev/null 2&gt;&amp;1 &amp;</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">nohup node server.js &gt; /dev/null 2&gt;&amp;1 &amp;</div><div class=\"line\"></div><div class=\"line\">1. nohup means: Do not terminate this process even when the stty is cut off.</div><div class=\"line\">2. &gt; /dev/null means: stdout goes to /dev/null (which is a dummy device that does not record any output).</div><div class=\"line\">3. 2&gt;&amp;1 means: stderr also goes to the stdout (which is already redirected to /dev/null). You may replace &amp;1 with a file path to keep a log of errors, e.g.: 2&gt;/tmp/myLog</div><div class=\"line\">4. &amp; at the end means: run this command as a background task.</div></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div></pre></td><td class=\"code\"><pre><div class=\"line\">top </div><div class=\"line\">PIDID[](http://www.cnblogs.com/gaojun/p/3406096.html)</div><div class=\"line\">USER</div><div class=\"line\">PR</div><div class=\"line\">NInice</div><div class=\"line\">VIRT</div><div class=\"line\">RES</div><div class=\"line\">SHR</div><div class=\"line\">SSRZN</div><div class=\"line\">%CPUCPU</div><div class=\"line\">%MEM</div><div class=\"line\">TIME+CPUCPU</div><div class=\"line\">COMMAND</div><div class=\"line\"></div><div class=\"line\">ps a </div><div class=\"line\"></div><div class=\"line\">****</div><div class=\"line\"> netstat -anp | grep sshd</div><div class=\"line\"></div><div class=\"line\">ps | grep  pgrep XXX //</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">*1*</div><div class=\"line\">watch -n 1 ps -aux --sort=-pmem,-pcpu</div></pre></td></tr></table></figure>\n<p><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">#</div><div class=\"line\">netstat -anp</div><div class=\"line\">lsof -i # </div><div class=\"line\">#http(80)</div><div class=\"line\">lsof -i:80</div><div class=\"line\">#</div><div class=\"line\">netstat -anp|grep pid</div></pre></td></tr></table></figure></p>\n<p>//sudo</p>\n<blockquote>\n<p><br>kill -9 id // 9<br>kill pid // kill 15 //15terminate,  </p>\n</blockquote>\n<p>kill -l //id</p>\n<p>killall nginx -&gt;&gt; nginx</p>\n<p>pkill -u username //ps</p>\n<p>Signal ()  man signal</p>\n<p><br>runnablesleepingzombiestop</p>\n<p>//,<br>nice -n 15 /..   pathnice<br>renice -s pid //</p>\n<p>df -ah  // mounted<br>proc</p>\n<h3 id=\"11-\"><a href=\"#11-\" class=\"headerlink\" title=\"11 .\"></a>11 .</h3><blockquote>\n<p><br>grep Failed password for root /var/log/auth.log | awk {print $11} | sort | uniq -c | sort -nr | more</p>\n</blockquote>\n<p><br><br>sudo vi /etc/ssh/sshd_config<br>Port 4484<br>PermitRootLogin no</p>\n<p>ssh<br>/etc/init.d/ssh restart</p>\n<p><a href=\"https://perlgeek.de/en/article/set-up-a-clean-utf8-environment\"></a><br>localeutf-8(ubuntu)</p>\n<blockquote>\n<p>vi ~/.bashrc </p>\n</blockquote>\n<h1 id=\"add-these-lines\"><a href=\"#add-these-lines\" class=\"headerlink\" title=\"add these lines\"></a>add these lines</h1><p>export LC_ALL=en_US.UTF-8<br>export LANG=en_US.UTF-8<br>export LANGUAGE=en_US.UTF-8</p>\n<p>sudo locale-gen en_US.UTF-8<br>sudo dpkg-reconfigure locales</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li><img src=\"http://odzl05jxx.bkt.clouddn.com/fork_you_git.jpg\" alt=\"\"></li>\n<li><a href=\"https://my.oschina.net/liting/blog/392051\"></a></li>\n<li><a href=\"http://blog.sina.com.cn/s/blog_7479f7990100zwkp.html\"></a></li>\n<li><a href=\"https://my.oschina.net/hunterli/blog/140783\"></a></li>\n<li><a href=\"http://www.jianshu.com/p/3d80c7cb7b17\">Pythonss</a></li>\n<li><a href=\"http://blog.csdn.net/program_thinker/article/details/45787395\">ss</a></li>\n<li><a href=\"https://askubuntu.com/questions/162391/how-do-i-fix-my-locale-issue\">utf-8</a></li>\n</ul>\n","excerpt":"<p>linux,</br><br><img src=\"http://odzl05jxx.bkt.clouddn.com/849c18412f8e7a0b18df09f6f87e6516.jpg?imageView2/2/w/600\" alt=\"\"><br>","more":"</p>\n<p>vpsssh(Secure Shell)puttyxshell</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ol>\n<li><a href=\"#1-\"></a></li>\n<li><a href=\"#2-Vi\">Vi</a></li>\n<li><a href=\"#3-linuxshell\">bash</a></li>\n<li><a href=\"#4-\"></a></li>\n<li><a href=\"#5-\"></a></li>\n<li><a href=\"#6-\"></a></li>\n<li><a href=\"#7-\"></a></li>\n<li><a href=\"#8-SS\">SS</a></li>\n<li><a href=\"#9-\"></a></li>\n<li><a href=\"#10-\"></a><br>11.<a href=\"#11-\"></a></li>\n</ol>\n<p><a href=\"#\"></a></p>\n<h3 id=\"1-\"><a href=\"#1-\" class=\"headerlink\" title=\"1. \"></a>1. </h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\">- &gt; cd //</div><div class=\"line\">- &gt; cd /  </div><div class=\"line\">- &gt; pwd // </div><div class=\"line\">- &gt; ls //  </div><div class=\"line\"></div><div class=\"line\">- &gt; mkdir //</div><div class=\"line\">- &gt; rmdir //,</div><div class=\"line\">- &gt; rm -r //</div><div class=\"line\">- &gt; rm -rf //</div><div class=\"line\"></div><div class=\"line\">:</div><div class=\"line\">-&gt; rm -f &apos;my file&apos;</div><div class=\"line\">-&gt; mv a.mp4 b.mp4 //mvWindows</div><div class=\"line\"></div><div class=\"line\"># </div><div class=\"line\">renamerename</div><div class=\"line\"></div><div class=\"line\">- &gt; touch filename //linux</div></pre></td></tr></table></figure>\n<p><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">- &gt; cp a b //ab</div><div class=\"line\"></div><div class=\"line\">- &gt; cp d1 d2 // -r </div><div class=\"line\">- &gt; cp -r d1 d2</div><div class=\"line\"></div><div class=\"line\">() </div><div class=\"line\"></div><div class=\"line\">- &gt; mv d1 /  d1</div><div class=\"line\">- &gt; mv d1 ../d1</div><div class=\"line\">- &gt; mv d1 ../../</div></pre></td></tr></table></figure></p>\n<p>###</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\"> &gt;</div><div class=\"line\">ls  &gt; lsoutput.txt #</div><div class=\"line\">echo &apos;hey man&apos; # print</div><div class=\"line\">echo &apos;hello&apos; &gt; log.txt # </div><div class=\"line\"></div><div class=\"line\"> &lt;</div><div class=\"line\">wall &lt; aa.txt # wall aa.txt</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">#service</div><div class=\"line\">service XXX start/stop/status #help</div><div class=\"line\"></div><div class=\"line\">zip q r video.zip /home/video </div><div class=\"line\">zip q r video.zip .  # .</div></pre></td></tr></table></figure>\n<h3 id=\"2-Vi\"><a href=\"#2-Vi\" class=\"headerlink\" title=\"2. Vi\"></a>2. Vi</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">- &gt; vi 3.txt // </div><div class=\"line\"></div><div class=\"line\">Vi&apos;a&apos;</div><div class=\"line\">&apos;esc&apos; </div><div class=\"line\"> :w </div><div class=\"line\">- :q </div><div class=\"line\"></div><div class=\"line\">- :wq </div><div class=\"line\">- :q! </div></pre></td></tr></table></figure>\n<p>, dd dw<br>o</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">- &gt; more filename//</div><div class=\"line\"></div><div class=\"line\">- &gt; cat filename //</div><div class=\"line\"></div><div class=\"line\">- &gt; tac filename //</div><div class=\"line\"></div><div class=\"line\">- &gt; head - 3 filename //</div><div class=\"line\">- &gt; tail - 3 filename //</div></pre></td></tr></table></figure>\n<p> find  whereis  Li(Link)<br><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">find / -name filename  //</div><div class=\"line\">find /etc -name filename //etc</div><div class=\"line\"></div><div class=\"line\">grep stringtofind filename //</div><div class=\"line\"></div><div class=\"line\">whereis ls //ls()</div></pre></td></tr></table></figure></p>\n<h3 id=\"3-linuxshell\"><a href=\"#3-linuxshell\" class=\"headerlink\" title=\"3. linuxshell\"></a>3. linuxshell</h3><p>linux<br>eg:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div></pre></td><td class=\"code\"><pre><div class=\"line\">#!/bin/sh</div><div class=\"line\">myPath=&quot;/var/log/httpd/&quot;</div><div class=\"line\">myFile=&quot;/var /log/httpd/access.log&quot;</div><div class=\"line\">#-x $myPath</div><div class=\"line\">if [ ! -x &quot;$myPath&quot;]; then</div><div class=\"line\">mkdir &quot;$myPath&quot;</div><div class=\"line\">fi</div><div class=\"line\">#-d $myPath</div><div class=\"line\">if [ ! -d &quot;$myPath&quot;]; then</div><div class=\"line\">mkdir &quot;$myPath&quot;</div><div class=\"line\">fi</div><div class=\"line\">#-f$myFile</div><div class=\"line\">if [ ! -f &quot;$myFile&quot; ]; then</div><div class=\"line\">touch &quot;$myFile&quot;</div><div class=\"line\">fi</div><div class=\"line\">#-n,-n</div><div class=\"line\">if [ ! -n &quot;$myVar&quot; ]; then</div><div class=\"line\">echo &quot;$myVar is empty&quot;</div><div class=\"line\">exit 0</div><div class=\"line\">fi</div><div class=\"line\">#</div><div class=\"line\">if [ &quot;$var1&quot; == &quot;$var2&quot; ]; then  //if then</div><div class=\"line\">echo &apos;$var1 eq $var2&apos;</div><div class=\"line\">else</div><div class=\"line\">echo &apos;$var1 not eq $var2&apos;</div><div class=\"line\">fi //elsefi</div><div class=\"line\"> </div><div class=\"line\"></div><div class=\"line\">       if list then</div><div class=\"line\">           do something here</div><div class=\"line\">       elif list then</div><div class=\"line\">           do another thing here</div><div class=\"line\">       else</div><div class=\"line\">         do something else here</div><div class=\"line\">       fi</div></pre></td></tr></table></figure></p>\n<p>eg: echoprint<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\">myvar=Hi there</div><div class=\"line\"></div><div class=\"line\">    echo $myvar</div><div class=\"line\"></div><div class=\"line\">    echo &quot;$myvar&quot;</div><div class=\"line\"></div><div class=\"line\">    echo &apos; $myvar&apos;</div><div class=\"line\"></div><div class=\"line\">    echo \\$myvar</div><div class=\"line\"></div><div class=\"line\">Hi there</div><div class=\"line\"></div><div class=\"line\">              Hi there!</div><div class=\"line\"></div><div class=\"line\">              $myvar</div><div class=\"line\"></div><div class=\"line\">              $myvar</div></pre></td></tr></table></figure></p>\n<h3 id=\"4-\"><a href=\"#4-\" class=\"headerlink\" title=\"4. \"></a>4. </h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\">useradd user //(-g )/homeuser</div><div class=\"line\"></div><div class=\"line\">passwd user //user</div><div class=\"line\"></div><div class=\"line\">cd /etc &gt;&gt;&gt; more passwd  </div><div class=\"line\">more group ,</div><div class=\"line\">groupadd groupname //</div><div class=\"line\"></div><div class=\"line\">//</div><div class=\"line\">userdel user // </div><div class=\"line\">(rm -rf user) </div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"> su testuser testuser</div><div class=\"line\">exitroot</div><div class=\"line\"></div><div class=\"line\">pwd</div></pre></td></tr></table></figure>\n<h3 id=\"5-\"><a href=\"#5-\" class=\"headerlink\" title=\"5. \"></a>5. </h3><p>ls<br></p>\n<ul>\n<li><br>l<br>d</li>\n</ul>\n<p><br>r(read)w()-()x()</p>\n<p>(u)(g)(0)</p>\n<p>: chmod<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div></pre></td><td class=\"code\"><pre><div class=\"line\">chmod +x filename //</div><div class=\"line\">chmod u+x filename //</div><div class=\"line\">//</div><div class=\"line\"></div><div class=\"line\">&gt; u </div><div class=\"line\">  g </div><div class=\"line\">  o </div><div class=\"line\">  a </div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">&gt; r 4</div><div class=\"line\">  w 2</div><div class=\"line\">  x 1</div><div class=\"line\">  - 0</div><div class=\"line\"></div><div class=\"line\">a.txt</div><div class=\"line\">chmod a+x a.txt </div><div class=\"line\">#</div><div class=\"line\">chmod a-x a.txt  #</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">chmod 755 filename  </div><div class=\"line\">751//</div><div class=\"line\">chomod 444 filename# </div><div class=\"line\">chmod 777 filename //9</div><div class=\"line\">755  111101101,</div><div class=\"line\"></div><div class=\"line\">chown -R Jane /foldername # flodernameJane -R </div></pre></td></tr></table></figure></p>\n<p></p>\n<ul>\n<li><blockquote>\n<p>chown username filename</p>\n</blockquote>\n</li>\n</ul>\n<h3 id=\"6-\"><a href=\"#6-\" class=\"headerlink\" title=\"6. \"></a>6. </h3><p><br>eg: <br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">$ cat /etc/passwd | grep usernametofind</div><div class=\"line\">$ ls -l | grep &quot;^d&quot;</div><div class=\"line\">$ ls -l * | grep &quot;^-&quot; | wc -|   //&quot;^-&quot;wc</div><div class=\"line\">$ ls -l | grep &quot;^d&quot; //</div></pre></td></tr></table></figure></p>\n<h3 id=\"7-\"><a href=\"#7-\" class=\"headerlink\" title=\"7. \"></a>7. </h3><p><a href=\"https://github.com/Teddysun/across\">VPS</a></p>\n<blockquote>\n<p>git clone<br>cd across<br>wget -qO- bench.sh | bash Readme<br> &gt; curl -Lso- bench.sh | bash </p>\n</blockquote>\n<h4 id=\"BandWagon\"><a href=\"#BandWagon\" class=\"headerlink\" title=\"BandWagon\"></a>BandWagon</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div></pre></td><td class=\"code\"><pre><div class=\"line\">----------------------------------------------------------------------</div><div class=\"line\">CPU model            : Intel(R) Xeon(R) CPU E3-1275 v5 @ 3.60GHz</div><div class=\"line\">Number of cores      : 1</div><div class=\"line\">CPU frequency        : 3600.041 MHz</div><div class=\"line\">Total size of Disk   : 12.0 GB (10.0 GB Used)</div><div class=\"line\">Total amount of Mem  : 256 MB (217 MB Used)</div><div class=\"line\">Total amount of Swap : 128 MB (122 MB Used)</div><div class=\"line\">System uptime        : 2 days, 4 hour 20 min</div><div class=\"line\">Load average         : 0.06, 0.05, 0.01</div><div class=\"line\">OS                   : Ubuntu 14.04.1 LTS</div><div class=\"line\">Arch                 : i686 (32 Bit)</div><div class=\"line\">Kernel               : 2.6.32-042stab123.3</div><div class=\"line\">----------------------------------------------------------------------</div><div class=\"line\">I/O speed(1st run)   : 855 MB/s</div><div class=\"line\">I/O speed(2nd run)   : 1.0 GB/s</div><div class=\"line\">I/O speed(3rd run)   : 1.0 GB/s</div><div class=\"line\">Average I/O speed    : 967.7 MB/s</div><div class=\"line\">----------------------------------------------------------------------</div><div class=\"line\">Node Name                       IPv4 address            Download Speed</div><div class=\"line\">CacheFly                        205.234.175.175         76.5MB/s</div><div class=\"line\">Linode, Tokyo, JP               106.187.96.148          17.6MB/s</div><div class=\"line\">Linode, Singapore, SG           139.162.23.4            8.18MB/s</div><div class=\"line\">Linode, London, UK              176.58.107.39           8.67MB/s</div><div class=\"line\">Linode, Frankfurt, DE           139.162.130.8           12.8MB/s</div><div class=\"line\">Linode, Fremont, CA             50.116.14.9             9.40MB/s</div><div class=\"line\">Softlayer, Dallas, TX           173.192.68.18           62.3MB/s</div><div class=\"line\">Softlayer, Seattle, WA          67.228.112.250          66.0MB/s</div><div class=\"line\">Softlayer, Frankfurt, DE        159.122.69.4            12.2MB/s</div><div class=\"line\">Softlayer, Singapore, SG        119.81.28.170           11.8MB/s</div><div class=\"line\">Softlayer, HongKong, CN         119.81.130.170          13.2MB/s</div><div class=\"line\">----------------------------------------------------------------------</div></pre></td></tr></table></figure>\n<h4 id=\"BuyVm\"><a href=\"#BuyVm\" class=\"headerlink\" title=\"BuyVm\"></a>BuyVm</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div></pre></td><td class=\"code\"><pre><div class=\"line\">CPU model            : Intel(R) Xeon(R) CPU           L5639  @ 2.13GHz</div><div class=\"line\">Number of cores      : 1</div><div class=\"line\">CPU frequency        : 2000.070 MHz</div><div class=\"line\">Total size of Disk   : 15.0 GB (1.3 GB Used)</div><div class=\"line\">Total amount of Mem  : 128 MB (80 MB Used)</div><div class=\"line\">Total amount of Swap : 128 MB (32 MB Used)</div><div class=\"line\">System uptime        : 0 days, 22 hour 28 min</div><div class=\"line\">Load average         : 0.10, 0.04, 0.05</div><div class=\"line\">OS                   : Ubuntu 14.04.2 LTS</div><div class=\"line\">Arch                 : i686 (32 Bit)</div><div class=\"line\">Kernel               : 2.6.32-openvz-042stab116.2-amd64</div><div class=\"line\">----------------------------------------------------------------------</div><div class=\"line\">I/O speed(1st run)   : 102 MB/s</div><div class=\"line\">I/O speed(2nd run)   : 97.1 MB/s</div><div class=\"line\">I/O speed(3rd run)   : 147 MB/s</div><div class=\"line\">Average I/O speed    : 115.4 MB/s</div><div class=\"line\">----------------------------------------------------------------------</div><div class=\"line\">Node Name                       IPv4 address            Download Speed</div><div class=\"line\">CacheFly                        205.234.175.175         14.7MB/s</div><div class=\"line\">Linode, Tokyo, JP               106.187.96.148          6.15MB/s</div><div class=\"line\">Linode, Singapore, SG           139.162.23.4            2.54MB/s</div><div class=\"line\">Linode, London, UK              176.58.107.39           2.99MB/s</div><div class=\"line\">Linode, Frankfurt, DE           139.162.130.8           2.96MB/s</div><div class=\"line\">Linode, Fremont, CA             50.116.14.9             4.27MB/s</div><div class=\"line\">Softlayer, Dallas, TX           173.192.68.18           11.7MB/s</div><div class=\"line\">Softlayer, Seattle, WA          67.228.112.250          13.0MB/s</div><div class=\"line\">Softlayer, Frankfurt, DE        159.122.69.4            1.89MB/s</div><div class=\"line\">Softlayer, Singapore, SG        119.81.28.170           3.26MB/s</div><div class=\"line\">Softlayer, HongKong, CN         119.81.130.170          3.72MB/s</div><div class=\"line\">----------------------------------------------------------------------</div></pre></td></tr></table></figure>\n<h4 id=\"DigitalOcean-Los-Angeles\"><a href=\"#DigitalOcean-Los-Angeles\" class=\"headerlink\" title=\"DigitalOcean Los Angeles\"></a>DigitalOcean Los Angeles</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div></pre></td><td class=\"code\"><pre><div class=\"line\">----------------------------------------------------------------------</div><div class=\"line\">CPU model            : Intel(R) Xeon(R) CPU E5-2650L v3 @ 1.80GHz</div><div class=\"line\">Number of cores      : 1</div><div class=\"line\">CPU frequency        : 1799.998 MHz</div><div class=\"line\">Total size of Disk   : 20.2 GB (1.0 GB Used)</div><div class=\"line\">Total amount of Mem  : 488 MB (33 MB Used)</div><div class=\"line\">Total amount of Swap : 0 MB (0 MB Used)</div><div class=\"line\">System uptime        : 0 days, 0 hour 3 min</div><div class=\"line\">Load average         : 0.16, 0.10, 0.03</div><div class=\"line\">OS                   : Ubuntu 16.04.2 LTS</div><div class=\"line\">Arch                 : x86_64 (64 Bit)</div><div class=\"line\">Kernel               : 4.4.0-78-generic</div><div class=\"line\">----------------------------------------------------------------------</div><div class=\"line\">I/O speed(1st run)   : 581 MB/s</div><div class=\"line\">I/O speed(2nd run)   : 711 MB/s</div><div class=\"line\">I/O speed(3rd run)   : 777 MB/s</div><div class=\"line\">Average I/O speed    : 689.7 MB/s</div><div class=\"line\">----------------------------------------------------------------------</div><div class=\"line\">Node Name                       IPv4 address            Download Speed</div><div class=\"line\">CacheFly                        205.234.175.175         161MB/s</div><div class=\"line\">Linode, Tokyo, JP               106.187.96.148          15.7MB/s</div><div class=\"line\">Linode, Singapore, SG           139.162.23.4            5.96MB/s</div><div class=\"line\">Linode, London, UK              176.58.107.39           5.71MB/s</div><div class=\"line\">Linode, Frankfurt, DE           139.162.130.8           6.45MB/s</div><div class=\"line\">Linode, Fremont, CA             50.116.14.9             30.4MB/s</div><div class=\"line\">Softlayer, Dallas, TX           173.192.68.18           29.9MB/s</div><div class=\"line\">Softlayer, Seattle, WA          67.228.112.250          57.7MB/s</div><div class=\"line\">Softlayer, Frankfurt, DE        159.122.69.4            3.64MB/s</div><div class=\"line\">Softlayer, Singapore, SG        119.81.28.170           7.59MB/s</div><div class=\"line\">Softlayer, HongKong, CN         119.81.130.170          8.84MB/s</div><div class=\"line\">----------------------------------------------------------------------</div></pre></td></tr></table></figure>\n<h4 id=\"DigitalOcean-Sinapore-ip-adress-lokks-like-Russian\"><a href=\"#DigitalOcean-Sinapore-ip-adress-lokks-like-Russian\" class=\"headerlink\" title=\"DigitalOcean Sinapore (ip adress lokks like Russian)\"></a>DigitalOcean Sinapore (ip adress lokks like Russian)</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div></pre></td><td class=\"code\"><pre><div class=\"line\">----------------------------------------------------------------------</div><div class=\"line\">CPU model            : Intel(R) Xeon(R) CPU E5-2630L 0 @ 2.00GHz</div><div class=\"line\">Number of cores      : 1</div><div class=\"line\">CPU frequency        : 1999.999 MHz</div><div class=\"line\">Total size of Disk   : 20.2 GB (1.0 GB Used)</div><div class=\"line\">Total amount of Mem  : 488 MB (36 MB Used)</div><div class=\"line\">Total amount of Swap : 0 MB (0 MB Used)</div><div class=\"line\">System uptime        : 0 days, 0 hour 2 min</div><div class=\"line\">Load average         : 0.17, 0.20, 0.09</div><div class=\"line\">OS                   : Ubuntu 16.04.2 LTS</div><div class=\"line\">Arch                 : x86_64 (64 Bit)</div><div class=\"line\">Kernel               : 4.4.0-78-generic</div><div class=\"line\">----------------------------------------------------------------------</div><div class=\"line\">I/O speed(1st run)   : 662 MB/s</div><div class=\"line\">I/O speed(2nd run)   : 741 MB/s</div><div class=\"line\">I/O speed(3rd run)   : 728 MB/s</div><div class=\"line\">Average I/O speed    : 710.3 MB/s</div><div class=\"line\">----------------------------------------------------------------------</div><div class=\"line\">Node Name                       IPv4 address            Download Speed</div><div class=\"line\">CacheFly                        205.234.175.175         20.8MB/s</div><div class=\"line\">Linode, Tokyo, JP               106.187.96.148          18.6MB/s</div><div class=\"line\">Linode, Singapore, SG           139.162.23.4            83.8MB/s</div><div class=\"line\">Linode, London, UK              176.58.107.39           5.71MB/s</div><div class=\"line\">Linode, Frankfurt, DE           139.162.130.8           8.13MB/s</div><div class=\"line\">Linode, Fremont, CA             50.116.14.9             2.82MB/s</div><div class=\"line\">Softlayer, Dallas, TX           173.192.68.18           6.18MB/s</div><div class=\"line\">Softlayer, Seattle, WA          67.228.112.250          8.47MB/s</div><div class=\"line\">Softlayer, Frankfurt, DE        159.122.69.4            6.77MB/s</div><div class=\"line\">Softlayer, Singapore, SG        119.81.28.170           97.9MB/s</div><div class=\"line\">Softlayer, HongKong, CN         119.81.130.170          35.2MB/s</div><div class=\"line\">----------------------------------------------------------------------</div></pre></td></tr></table></figure>\n<p>:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">df -h //hhuman-readable</div><div class=\"line\">du -sh //directory</div><div class=\"line\">du -h //</div><div class=\"line\">dh -h img// img</div><div class=\"line\">dh -h img/1.jpg //</div></pre></td></tr></table></figure></p>\n<p>cpu</p>\n<blockquote>\n<p>cat /proc/cpuinfo</p>\n</blockquote>\n<p></p>\n<blockquote>\n<p>free -m<br>free -h # human readable</p>\n</blockquote>\n<p></p>\n<blockquote>\n<p>vi /etc/ssh/ssd_config</p>\n</blockquote>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">Port 22 (ssh)</div><div class=\"line\">PermitRootLogin without-Password no</div><div class=\"line\">AllowUsers userName</div></pre></td></tr></table></figure>\n<p><br>/home/video/ video.zip</p>\n<p>zip q r -v video.zip . #-v</p>\n<p>linux -&gt;windows putty sshLinuxLinuxWindowspscppscp.exec:/windows/system32cmd<br>pscp -r root@202.123.123.123:/root/fileonServer.mp4 d:/whateveriwantonmyPc.mp4  root<br>Connection Refused Error</p>\n<blockquote>\n<p>netstat -anp | grep sshd</p>\n</blockquote>\n<p><br></p>\n<blockquote>\n<p>pscp -P 12345-r root@202.123.123.123:/root/fileonServer.mp4 d:/whateveriwantonmyPc.mp4  -p</p>\n</blockquote>\n<h3 id=\"8-SS\"><a href=\"#8-SS\" class=\"headerlink\" title=\"8. SS\"></a>8. SS</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div></pre></td><td class=\"code\"><pre><div class=\"line\">  1. ubuntu</div><div class=\"line\">  git &gt; apt-get install git</div><div class=\"line\">  python &gt; apt-get install python-2.7</div><div class=\"line\">  python-setuptools &gt; apt-get install python-setuptools</div><div class=\"line\">   python --version</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">  2. shadowsocks</div><div class=\"line\"> &gt; git clone https://github.com/shadowsocks/shadowsocks</div><div class=\"line\">  # master</div><div class=\"line\">  python setup.py build</div><div class=\"line\">  python setup.py install</div><div class=\"line\"></div><div class=\"line\">   ssserver --version</div><div class=\"line\"></div><div class=\"line\">  3. </div><div class=\"line\">  vim config.json</div><div class=\"line\">  &#123;</div><div class=\"line\">   &quot;server&quot;:&quot;my_server_ip&quot;,</div><div class=\"line\">   &quot;server_port&quot;:8388,</div><div class=\"line\">   &quot;local_address&quot;: &quot;127.0.0.1&quot;,</div><div class=\"line\">   &quot;local_port&quot;:1080,</div><div class=\"line\">   &quot;password&quot;:&quot;mypassword&quot;,</div><div class=\"line\">   &quot;timeout&quot;:300,</div><div class=\"line\">   &quot;method&quot;:&quot;aes-256-cfb&quot;,</div><div class=\"line\">   &quot;fast_open&quot;: false</div><div class=\"line\">&#125;</div><div class=\"line\">  </div><div class=\"line\">ssserver -c config.json -d start #</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">ps -ef |grep sss</div><div class=\"line\"></div><div class=\"line\">ss  </div><div class=\"line\">ssserver -c /etc/shadowsocks/config.json # </div><div class=\"line\"></div><div class=\"line\">- </div><div class=\"line\">ssserver -c /etc/shadowsocks.json -d start</div><div class=\"line\">ssserver -c /etc/shadowsocks.json -d stop</div><div class=\"line\"></div><div class=\"line\">- </div><div class=\"line\"></div><div class=\"line\">/etc/rc.local</div><div class=\"line\">sudo ssserver -c /etc/shadowsocks.json --user username -d start - rootaddusersudo</div><div class=\"line\"></div><div class=\"line\">[ShadowsocksR](https://github.com/breakwa11/shadowsocks-rss/wiki)</div><div class=\"line\">&gt; python server.py -p 443 -k password -m aes-256-cfb -O auth_sha1_v4 -o http_simple -d start</div><div class=\"line\"></div><div class=\"line\">[net-speeder](https://zhgcao.github.io/2016/05/26/ubuntu-install-net-speeder/)</div><div class=\"line\">venetXOpenVZ</div><div class=\"line\"></div><div class=\"line\">cd net-speeder-master/</div><div class=\"line\">sh build.sh -DCOOKED</div><div class=\"line\"></div><div class=\"line\">XenKVM</div><div class=\"line\">cd net-speeder-master/</div><div class=\"line\">sh build.sh</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">ip</div><div class=\"line\"></div><div class=\"line\">&gt; ./net_speeder venet0 &quot;ip&quot;</div><div class=\"line\"></div><div class=\"line\">TCP 8989</div><div class=\"line\">net-speeder</div><div class=\"line\">&gt; ./net_speeder venet0:0 &quot;tcp src port 8989&quot;</div><div class=\"line\"></div><div class=\"line\">./net_speeder venet0 &quot;ip&quot;</div><div class=\"line\"></div><div class=\"line\">TCP 8989</div><div class=\"line\">net-speeder</div><div class=\"line\"> ./net_speeder venet0:0 &quot;tcp src port 8989&quot;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"> [KVMBBR](https://qiujunya.com/linodebbr.html)</div></pre></td></tr></table></figure>\n<h3 id=\"9-\"><a href=\"#9-\" class=\"headerlink\" title=\"9. \"></a>9. </h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\">tcpdump -i &quot;venet0:0&quot;  //</div><div class=\"line\">tcpdump -c 10 //count</div><div class=\"line\">tcpdump -c -A  //Asiciipackage</div><div class=\"line\">tcpdump -c 5 -i wlo1 // </div><div class=\"line\">tcpdump -c 5 -i wlo1 port 22// </div><div class=\"line\"></div><div class=\"line\">tcpdump version 4.5.1</div><div class=\"line\">libpcap version 1.5.3</div><div class=\"line\">Usage: tcpdump [-aAbdDefhHIJKlLnNOpqRStuUvxX] [ -B size ] [ -c count ]</div><div class=\"line\">                [ -C file_size ] [ -E algo:secret ] [ -F file ] [ -G seconds ]</div><div class=\"line\">                [ -i interface ] [ -j tstamptype ] [ -M secret ]</div><div class=\"line\">                [ -P in|out|inout ]</div><div class=\"line\">                [ -r file ] [ -s snaplen ] [ -T type ] [ -V file ] [ -w file ]</div><div class=\"line\">                [ -W filecount ] [ -y datalinktype ] [ -z command ]</div><div class=\"line\">                [ -Z user ] [ expression ]</div></pre></td></tr></table></figure>\n<p>tcpdumpwireshark</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">netstat</div><div class=\"line\">netstat -i // byte</div><div class=\"line\">netstat -ta //active</div><div class=\"line\">netstat -tan //ip</div></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">ifconfig // </div><div class=\"line\">en01 //Ethernet </div><div class=\"line\"> RX bytes()TX bytes()</div></pre></td></tr></table></figure>\n<h3 id=\"10-\"><a href=\"#10-\" class=\"headerlink\" title=\"10.\"></a>10.</h3><p><a href=\"https://stackoverflow.com/questions/4797050/how-to-run-process-as-background-and-never-die\"></a></p>\n<blockquote>\n<p> nohup node server.js &gt; /dev/null 2&gt;&amp;1 &amp;</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">nohup node server.js &gt; /dev/null 2&gt;&amp;1 &amp;</div><div class=\"line\"></div><div class=\"line\">1. nohup means: Do not terminate this process even when the stty is cut off.</div><div class=\"line\">2. &gt; /dev/null means: stdout goes to /dev/null (which is a dummy device that does not record any output).</div><div class=\"line\">3. 2&gt;&amp;1 means: stderr also goes to the stdout (which is already redirected to /dev/null). You may replace &amp;1 with a file path to keep a log of errors, e.g.: 2&gt;/tmp/myLog</div><div class=\"line\">4. &amp; at the end means: run this command as a background task.</div></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div></pre></td><td class=\"code\"><pre><div class=\"line\">top </div><div class=\"line\">PIDID[](http://www.cnblogs.com/gaojun/p/3406096.html)</div><div class=\"line\">USER</div><div class=\"line\">PR</div><div class=\"line\">NInice</div><div class=\"line\">VIRT</div><div class=\"line\">RES</div><div class=\"line\">SHR</div><div class=\"line\">SSRZN</div><div class=\"line\">%CPUCPU</div><div class=\"line\">%MEM</div><div class=\"line\">TIME+CPUCPU</div><div class=\"line\">COMMAND</div><div class=\"line\"></div><div class=\"line\">ps a </div><div class=\"line\"></div><div class=\"line\">****</div><div class=\"line\"> netstat -anp | grep sshd</div><div class=\"line\"></div><div class=\"line\">ps | grep  pgrep XXX //</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">*1*</div><div class=\"line\">watch -n 1 ps -aux --sort=-pmem,-pcpu</div></pre></td></tr></table></figure>\n<p><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">#</div><div class=\"line\">netstat -anp</div><div class=\"line\">lsof -i # </div><div class=\"line\">#http(80)</div><div class=\"line\">lsof -i:80</div><div class=\"line\">#</div><div class=\"line\">netstat -anp|grep pid</div></pre></td></tr></table></figure></p>\n<p>//sudo</p>\n<blockquote>\n<p><br>kill -9 id // 9<br>kill pid // kill 15 //15terminate,  </p>\n</blockquote>\n<p>kill -l //id</p>\n<p>killall nginx -&gt;&gt; nginx</p>\n<p>pkill -u username //ps</p>\n<p>Signal ()  man signal</p>\n<p><br>runnablesleepingzombiestop</p>\n<p>//,<br>nice -n 15 /..   pathnice<br>renice -s pid //</p>\n<p>df -ah  // mounted<br>proc</p>\n<h3 id=\"11-\"><a href=\"#11-\" class=\"headerlink\" title=\"11 .\"></a>11 .</h3><blockquote>\n<p><br>grep Failed password for root /var/log/auth.log | awk {print $11} | sort | uniq -c | sort -nr | more</p>\n</blockquote>\n<p><br><br>sudo vi /etc/ssh/sshd_config<br>Port 4484<br>PermitRootLogin no</p>\n<p>ssh<br>/etc/init.d/ssh restart</p>\n<p><a href=\"https://perlgeek.de/en/article/set-up-a-clean-utf8-environment\"></a><br>localeutf-8(ubuntu)</p>\n<blockquote>\n<p>vi ~/.bashrc </p>\n</blockquote>\n<h1 id=\"add-these-lines\"><a href=\"#add-these-lines\" class=\"headerlink\" title=\"add these lines\"></a>add these lines</h1><p>export LC_ALL=en_US.UTF-8<br>export LANG=en_US.UTF-8<br>export LANGUAGE=en_US.UTF-8</p>\n<p>sudo locale-gen en_US.UTF-8<br>sudo dpkg-reconfigure locales</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li><img src=\"http://odzl05jxx.bkt.clouddn.com/fork_you_git.jpg\" alt=\"\"></li>\n<li><a href=\"https://my.oschina.net/liting/blog/392051\"></a></li>\n<li><a href=\"http://blog.sina.com.cn/s/blog_7479f7990100zwkp.html\"></a></li>\n<li><a href=\"https://my.oschina.net/hunterli/blog/140783\"></a></li>\n<li><a href=\"http://www.jianshu.com/p/3d80c7cb7b17\">Pythonss</a></li>\n<li><a href=\"http://blog.csdn.net/program_thinker/article/details/45787395\">ss</a></li>\n<li><a href=\"https://askubuntu.com/questions/162391/how-do-i-fix-my-locale-issue\">utf-8</a></li>\n</ul>"},{"title":"wrap_content","date":"2016-11-27T08:46:44.000Z","_content":"\njava\n\n#### \nView()\n![](http://odzl05jxx.bkt.clouddn.com/timelineView.png)\n\nDrawable\n\nViewGroup(Copy)(Paste): \n\n> 1. onMeasureheight == 0 , :\nViewGroupItemItemView(CustomView)wrap_contentTextViewwrap_content()debugView0Google\n\n\n```java\n protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {\n        final int widthMode = MeasureSpec.getMode(widthMeasureSpec);\n        final int heightMode = MeasureSpec.getMode(heightMeasureSpec);// UNSPECIFIED, wrap_contentAT_MOST\n        final int widthSize = MeasureSpec.getSize(widthMeasureSpec);\n        final int heightSize = MeasureSpec.getSize(heightMeasureSpec); // 0\n    }\n\n```\nItemItemRelativeLayoutViewaddView(view,RelativeLayout.Layoutparams),paramsrulesAlignParentLeftViewTextViewidTextViewaddViewMeasureSpecRelativeLayoutonMeasureViewTextViewwrap_contentItemUIaddView(view,RelativeLayout.Layoutparams)heightwrap_contentItemchildchildTextViewView0TextViewItem\n\n> 2. drawable\ndrawableScaleDrawablescaleDrawablesetLeveldraw1\n\n\n> 3. ItemRelativeLayoutonDraw\nsetWillNotDraw(false) \nbooleantrue\n\n\n\n### ref \n- [How Android caculates view size](https://www.liaohuqiu.net/posts/how-does-android-caculate-the-size-of-child-view/)","source":"_posts/2016-11-27-the-size-of-wrap-content.md","raw":"---\ntitle: wrap_content\ndate: 2016-11-27 16:46:44\ncategories: blog\ntags: [android]\n---\n\njava\n\n#### \nView()\n![](http://odzl05jxx.bkt.clouddn.com/timelineView.png)\n\nDrawable\n\nViewGroup(Copy)(Paste): \n\n> 1. onMeasureheight == 0 , :\nViewGroupItemItemView(CustomView)wrap_contentTextViewwrap_content()debugView0Google\n\n\n```java\n protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {\n        final int widthMode = MeasureSpec.getMode(widthMeasureSpec);\n        final int heightMode = MeasureSpec.getMode(heightMeasureSpec);// UNSPECIFIED, wrap_contentAT_MOST\n        final int widthSize = MeasureSpec.getSize(widthMeasureSpec);\n        final int heightSize = MeasureSpec.getSize(heightMeasureSpec); // 0\n    }\n\n```\nItemItemRelativeLayoutViewaddView(view,RelativeLayout.Layoutparams),paramsrulesAlignParentLeftViewTextViewidTextViewaddViewMeasureSpecRelativeLayoutonMeasureViewTextViewwrap_contentItemUIaddView(view,RelativeLayout.Layoutparams)heightwrap_contentItemchildchildTextViewView0TextViewItem\n\n> 2. drawable\ndrawableScaleDrawablescaleDrawablesetLeveldraw1\n\n\n> 3. ItemRelativeLayoutonDraw\nsetWillNotDraw(false) \nbooleantrue\n\n\n\n### ref \n- [How Android caculates view size](https://www.liaohuqiu.net/posts/how-does-android-caculate-the-size-of-child-view/)","slug":"2016-11-27-the-size-of-wrap-content","published":1,"updated":"2017-04-23T10:50:55.838Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj50afgwp0012i4vr7wmwv6u6","content":"<p>java</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>View()<br><img src=\"http://odzl05jxx.bkt.clouddn.com/timelineView.png\" alt=\"\"></p>\n<p>Drawable</p>\n<p>ViewGroup(Copy)(Paste): </p>\n<blockquote>\n<ol>\n<li>onMeasureheight == 0 , :<br>ViewGroupItemItemView(CustomView)wrap_contentTextViewwrap_content()debugView0Google</li>\n</ol>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onMeasure</span><span class=\"params\">(<span class=\"keyword\">int</span> widthMeasureSpec, <span class=\"keyword\">int</span> heightMeasureSpec)</span> </span>&#123;</div><div class=\"line\">       <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> widthMode = MeasureSpec.getMode(widthMeasureSpec);</div><div class=\"line\">       <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> heightMode = MeasureSpec.getMode(heightMeasureSpec);<span class=\"comment\">// UNSPECIFIED, wrap_contentAT_MOST</span></div><div class=\"line\">       <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> widthSize = MeasureSpec.getSize(widthMeasureSpec);</div><div class=\"line\">       <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> heightSize = MeasureSpec.getSize(heightMeasureSpec); <span class=\"comment\">// 0</span></div><div class=\"line\">   &#125;</div></pre></td></tr></table></figure>\n<p>ItemItemRelativeLayoutViewaddView(view,RelativeLayout.Layoutparams),paramsrulesAlignParentLeftViewTextViewidTextViewaddViewMeasureSpecRelativeLayoutonMeasureViewTextViewwrap_contentItemUIaddView(view,RelativeLayout.Layoutparams)heightwrap_contentItemchildchildTextViewView0TextViewItem</p>\n<blockquote>\n<ol>\n<li>drawable<br>drawableScaleDrawablescaleDrawablesetLeveldraw1</li>\n</ol>\n<ol>\n<li>ItemRelativeLayoutonDraw<br>setWillNotDraw(false)<br>booleantrue</li>\n</ol>\n</blockquote>\n<h3 id=\"ref\"><a href=\"#ref\" class=\"headerlink\" title=\"ref\"></a>ref</h3><ul>\n<li><a href=\"https://www.liaohuqiu.net/posts/how-does-android-caculate-the-size-of-child-view/\">How Android caculates view size</a></li>\n</ul>\n","excerpt":"","more":"<p>java</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>View()<br><img src=\"http://odzl05jxx.bkt.clouddn.com/timelineView.png\" alt=\"\"></p>\n<p>Drawable</p>\n<p>ViewGroup(Copy)(Paste): </p>\n<blockquote>\n<ol>\n<li>onMeasureheight == 0 , :<br>ViewGroupItemItemView(CustomView)wrap_contentTextViewwrap_content()debugView0Google</li>\n</ol>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onMeasure</span><span class=\"params\">(<span class=\"keyword\">int</span> widthMeasureSpec, <span class=\"keyword\">int</span> heightMeasureSpec)</span> </span>&#123;</div><div class=\"line\">       <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> widthMode = MeasureSpec.getMode(widthMeasureSpec);</div><div class=\"line\">       <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> heightMode = MeasureSpec.getMode(heightMeasureSpec);<span class=\"comment\">// UNSPECIFIED, wrap_contentAT_MOST</span></div><div class=\"line\">       <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> widthSize = MeasureSpec.getSize(widthMeasureSpec);</div><div class=\"line\">       <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> heightSize = MeasureSpec.getSize(heightMeasureSpec); <span class=\"comment\">// 0</span></div><div class=\"line\">   &#125;</div></pre></td></tr></table></figure>\n<p>ItemItemRelativeLayoutViewaddView(view,RelativeLayout.Layoutparams),paramsrulesAlignParentLeftViewTextViewidTextViewaddViewMeasureSpecRelativeLayoutonMeasureViewTextViewwrap_contentItemUIaddView(view,RelativeLayout.Layoutparams)heightwrap_contentItemchildchildTextViewView0TextViewItem</p>\n<blockquote>\n<ol>\n<li>drawable<br>drawableScaleDrawablescaleDrawablesetLeveldraw1</li>\n</ol>\n<ol>\n<li>ItemRelativeLayoutonDraw<br>setWillNotDraw(false)<br>booleantrue</li>\n</ol>\n</blockquote>\n<h3 id=\"ref\"><a href=\"#ref\" class=\"headerlink\" title=\"ref\"></a>ref</h3><ul>\n<li><a href=\"https://www.liaohuqiu.net/posts/how-does-android-caculate-the-size-of-child-view/\">How Android caculates view size</a></li>\n</ul>\n"},{"title":"IDETerminal","date":"2017-03-11T14:28:51.000Z","_content":"\n![io](http://odzl05jxx.bkt.clouddn.com/device-2017-03-11-222239.png?imageView2/2/w/600)\nGoogle I/O 2016Android AppDevice\n\n<!-- more -->\n\n### 1. Android client \nBuild Instructionsshift+F10\n\nclone[iosched](https://github.com/google/iosched)gradle.properitiessupportLibBuild Instruction \n\n> gradlew clean assembleDebug\n\n\ngradlestackOverFlowgradle 3.3 -all.zip/gradle/wrappergradle-wrapper.properitiesdistributionUrl\n\n\n> distributionUrl=gradle-3.3-all.zip\n\nBuild\n\n>gradlew installNormalDebug\n\n\n\n### 2. Server\nGoogle io 2016 Android ClientMap IntergationYoutube video displayGCMGoogle Cloud Platform\n","source":"_posts/2017-03-11-utilizing-the-terminal-in-android-studio.md","raw":"---\ntitle: IDETerminal\ndate: 2017-03-11 22:28:51\ncategories: blog \ntags: [android]\n---\n\n![io](http://odzl05jxx.bkt.clouddn.com/device-2017-03-11-222239.png?imageView2/2/w/600)\nGoogle I/O 2016Android AppDevice\n\n<!-- more -->\n\n### 1. Android client \nBuild Instructionsshift+F10\n\nclone[iosched](https://github.com/google/iosched)gradle.properitiessupportLibBuild Instruction \n\n> gradlew clean assembleDebug\n\n\ngradlestackOverFlowgradle 3.3 -all.zip/gradle/wrappergradle-wrapper.properitiesdistributionUrl\n\n\n> distributionUrl=gradle-3.3-all.zip\n\nBuild\n\n>gradlew installNormalDebug\n\n\n\n### 2. Server\nGoogle io 2016 Android ClientMap IntergationYoutube video displayGCMGoogle Cloud Platform\n","slug":"2017-03-11-utilizing-the-terminal-in-android-studio","published":1,"updated":"2017-04-23T10:51:46.777Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj50afgwp0015i4vryhapa6hx","content":"<p><img src=\"http://odzl05jxx.bkt.clouddn.com/device-2017-03-11-222239.png?imageView2/2/w/600\" alt=\"io\"><br>Google I/O 2016Android AppDevice</p>\n<a id=\"more\"></a>\n<h3 id=\"1-Android-client\"><a href=\"#1-Android-client\" class=\"headerlink\" title=\"1. Android client\"></a>1. Android client</h3><p>Build Instructionsshift+F10</p>\n<p>clone<a href=\"https://github.com/google/iosched\">iosched</a>gradle.properitiessupportLibBuild Instruction </p>\n<blockquote>\n<p>gradlew clean assembleDebug</p>\n</blockquote>\n<p>gradlestackOverFlowgradle 3.3 -all.zip/gradle/wrappergradle-wrapper.properitiesdistributionUrl</p>\n<blockquote>\n<p>distributionUrl=gradle-3.3-all.zip</p>\n</blockquote>\n<p>Build</p>\n<blockquote>\n<p>gradlew installNormalDebug</p>\n</blockquote>\n<p></p>\n<h3 id=\"2-Server\"><a href=\"#2-Server\" class=\"headerlink\" title=\"2. Server\"></a>2. Server</h3><p>Google io 2016 Android ClientMap IntergationYoutube video displayGCMGoogle Cloud Platform</p>\n","excerpt":"<p><img src=\"http://odzl05jxx.bkt.clouddn.com/device-2017-03-11-222239.png?imageView2/2/w/600\" alt=\"io\"><br>Google I/O 2016Android AppDevice</p>","more":"<h3 id=\"1-Android-client\"><a href=\"#1-Android-client\" class=\"headerlink\" title=\"1. Android client\"></a>1. Android client</h3><p>Build Instructionsshift+F10</p>\n<p>clone<a href=\"https://github.com/google/iosched\">iosched</a>gradle.properitiessupportLibBuild Instruction </p>\n<blockquote>\n<p>gradlew clean assembleDebug</p>\n</blockquote>\n<p>gradlestackOverFlowgradle 3.3 -all.zip/gradle/wrappergradle-wrapper.properitiesdistributionUrl</p>\n<blockquote>\n<p>distributionUrl=gradle-3.3-all.zip</p>\n</blockquote>\n<p>Build</p>\n<blockquote>\n<p>gradlew installNormalDebug</p>\n</blockquote>\n<p></p>\n<h3 id=\"2-Server\"><a href=\"#2-Server\" class=\"headerlink\" title=\"2. Server\"></a>2. Server</h3><p>Google io 2016 Android ClientMap IntergationYoutube video displayGCMGoogle Cloud Platform</p>"},{"title":"java","date":"2017-04-30T11:17:45.000Z","_content":"\n\n![](http://odzl05jxx.bkt.clouddn.com/16d714eb6e8ecc23e4d6ba20d0be17a0.jpg?imageView2/2/w/600)\n<!--more-->\n\n1. \nExecutorexecuterunnableExecutorServiceExecutorService\n```java\n\npublic interface Executor {\n\n    /**\n     * Executes the given command at some time in the future.  The command\n     * may execute in a new thread, in a pooled thread, or in the calling\n     * thread, at the discretion of the {@code Executor} implementation.\n     *\n     * @param command the runnable task\n     * @throws RejectedExecutionException if this task cannot be\n     * accepted for execution\n     * @throws NullPointerException if command is null\n     */\n    void execute(Runnable command);\n}\n\n\npublic interface ExecutorService extends Executor{\n\t\n}\n\n\npublic abstract class AbstractExecutorService implements ExecutorService {\n\t\n}\npublic class ThreadPoolExecutor extends AbstractExecutorService {\n\t\n}\n```\njava.util.concurrent.ThreadPoolExecutorhook(beforeExecuteafterExecute)\n\n```\npublic ThreadPoolExecutor(int corePoolSize,\n                              int maximumPoolSize,\n                              long keepAliveTime,\n                              TimeUnit unit,\n                              BlockingQueue<Runnable> workQueue) {\n        this(corePoolSize, maximumPoolSize, keepAliveTime, unit, workQueue,\n             Executors.defaultThreadFactory(), defaultHandler);\n    }\n```\njavajava.util.concurrent.ExecutorsnewFixedThreadPoolnewSingleThreadExecutornewCachedThreadPoolExecutors\n\n\n```java\nThread\n    */\n    public enum State {\n        NEW,\n        RUNNABLE,\n        BLOCKED,\n        WAITING,\n        TIMED_WAITING,\n        TERMINATED;\n    }\n```\n\nexecute\n```java\n public void execute(Runnable command) {\n        if (command == null)\n            throw new NullPointerException();\n        /*\n         * Proceed in 3 steps:\n         *\n         * 1. If fewer than corePoolSize threads are running, try to\n         * start a new thread with the given command as its first\n         * task.  The call to addWorker atomically checks runState and\n         * workerCount, and so prevents false alarms that would add\n         * threads when it shouldn't, by returning false.\n         *\n         * 2. If a task can be successfully queued, then we still need\n         * to double-check whether we should have added a thread\n         * (because existing ones died since last checking) or that\n         * the pool shut down since entry into this method. So we\n         * recheck state and if necessary roll back the enqueuing if\n         * stopped, or start a new thread if there are none.\n         *\n         * 3. If we cannot queue task, then we try to add a new\n         * thread.  If it fails, we know we are shut down or saturated\n         * and so reject the task.\n         */\n        int c = ctl.get();\n        if (workerCountOf(c) < corePoolSize) { //\n       // Core pool size is the minimum number of workers to keep alive (and not allow to time out etc)\n        unless allowCoreThreadTimeOut is set, in which case the minimum is zero.\n            if (addWorker(command, true))//trueWorkercoolPoolSize,falsemaximunPoolSize\n            Worker,return\n                return;\n            c = ctl.get(); //poolstate,ctlAtomicInteger\n        }\n        if (isRunning(c) && workQueue.offer(command)) {//addworkerWorkercommandqueueofferrunnable\n            int recheck = ctl.get();//recheck\n           //\n            if (! isRunning(recheck) && remove(command))\n                reject(command);//pool\n            else if (workerCountOf(recheck) == 0)\n                addWorker(null, false);\n\n        }\n        else if (!addWorker(command, false))\n            reject(command);\n    }\n```\naddWorker\n\n```java\nprivate boolean addWorker(Runnable firstTask, boolean core) {\n        retry:\n        \n        try {\n            w = new Worker(firstTask);\n            //nullcommandworker\n            final Thread t = w.thread;\n            if (t != null) {\n                final ReentrantLock mainLock = this.mainLock;\n                mainLock.lock();//\n                try {\n                        workers.add(w); //workersHashSet,ReentrantLock\n                    }\n                } finally {\n                    mainLock.unlock();\n                }\n                if (workerAdded) {\n                    t.start(); //command\n                    workerStarted = true;\n                }\n            }\n        } \n        return workerStarted; //,addWorkercommand\n    }\n\n\n\n final void runWorker(Worker w) { //\n        try {\n            while (task != null || (task = getTask()) != null) {\n                w.lock();//taskrunnablequeue\n                //getTaskaddTask,commandworkerworkerqueue(Thread)\n                try {\n                    beforeExecute(wt, task);//\n                    Throwable thrown = null;\n                    try {\n                        task.run(); \n                    } catch (RuntimeException x) {\n                        thrown = x; throw x;\n                    } catch (Error x) {\n                        thrown = x; throw x;\n                    } catch (Throwable x) {\n                        thrown = x; throw new Error(x);\n                    } finally {\n                        afterExecute(task, thrown);//\n                    }\n                } finally {\n                    task = null;\n                    w.completedTasks++;\n                    w.unlock();\n                }\n            }\n            completedAbruptly = false;\n        } finally {\n            processWorkerExit(w, completedAbruptly);\n        }\n    }    \n```\naddWorkerWorker()commandWorkerrunqueuegetTask\n```java\nprivate Runnable getTask() {\n        boolean timedOut = false; // Did the last poll() time out?\n\n        for (;;) { //\n            try {\n                Runnable r = timed ?\n                    workQueue.poll(keepAliveTime, TimeUnit.NANOSECONDS) : //queue\n                    workQueue.take();\n                if (r != null)\n                    return r;\n                \n            } catch (InterruptedException retry) {\n                timedOut = false;\n            }\n        }\n    }\n```\nexecutor.executenewWokerWorkerrunqueue\n\n\n2. WorkerAbstractQueuedSynchronizer\nAbstractQueuedSynchronizerAQS\n\n\n3. Reetranlock\n\n ReentrantLockThreadPoolExecutor\n\n4. Future,Callable,FutureTask\n\njdk Doug Lea \n\nReference \n1. [Java ](https://github.com/pzxwhc/MineKnowContainer/issues/9)","source":"_posts/2017-04-30-concurrency-and-beyond.md","raw":"---\ntitle: java\ndate: 2017-04-30 19:17:45\ntags: [concurrency]\n---\n\n\n![](http://odzl05jxx.bkt.clouddn.com/16d714eb6e8ecc23e4d6ba20d0be17a0.jpg?imageView2/2/w/600)\n<!--more-->\n\n1. \nExecutorexecuterunnableExecutorServiceExecutorService\n```java\n\npublic interface Executor {\n\n    /**\n     * Executes the given command at some time in the future.  The command\n     * may execute in a new thread, in a pooled thread, or in the calling\n     * thread, at the discretion of the {@code Executor} implementation.\n     *\n     * @param command the runnable task\n     * @throws RejectedExecutionException if this task cannot be\n     * accepted for execution\n     * @throws NullPointerException if command is null\n     */\n    void execute(Runnable command);\n}\n\n\npublic interface ExecutorService extends Executor{\n\t\n}\n\n\npublic abstract class AbstractExecutorService implements ExecutorService {\n\t\n}\npublic class ThreadPoolExecutor extends AbstractExecutorService {\n\t\n}\n```\njava.util.concurrent.ThreadPoolExecutorhook(beforeExecuteafterExecute)\n\n```\npublic ThreadPoolExecutor(int corePoolSize,\n                              int maximumPoolSize,\n                              long keepAliveTime,\n                              TimeUnit unit,\n                              BlockingQueue<Runnable> workQueue) {\n        this(corePoolSize, maximumPoolSize, keepAliveTime, unit, workQueue,\n             Executors.defaultThreadFactory(), defaultHandler);\n    }\n```\njavajava.util.concurrent.ExecutorsnewFixedThreadPoolnewSingleThreadExecutornewCachedThreadPoolExecutors\n\n\n```java\nThread\n    */\n    public enum State {\n        NEW,\n        RUNNABLE,\n        BLOCKED,\n        WAITING,\n        TIMED_WAITING,\n        TERMINATED;\n    }\n```\n\nexecute\n```java\n public void execute(Runnable command) {\n        if (command == null)\n            throw new NullPointerException();\n        /*\n         * Proceed in 3 steps:\n         *\n         * 1. If fewer than corePoolSize threads are running, try to\n         * start a new thread with the given command as its first\n         * task.  The call to addWorker atomically checks runState and\n         * workerCount, and so prevents false alarms that would add\n         * threads when it shouldn't, by returning false.\n         *\n         * 2. If a task can be successfully queued, then we still need\n         * to double-check whether we should have added a thread\n         * (because existing ones died since last checking) or that\n         * the pool shut down since entry into this method. So we\n         * recheck state and if necessary roll back the enqueuing if\n         * stopped, or start a new thread if there are none.\n         *\n         * 3. If we cannot queue task, then we try to add a new\n         * thread.  If it fails, we know we are shut down or saturated\n         * and so reject the task.\n         */\n        int c = ctl.get();\n        if (workerCountOf(c) < corePoolSize) { //\n       // Core pool size is the minimum number of workers to keep alive (and not allow to time out etc)\n        unless allowCoreThreadTimeOut is set, in which case the minimum is zero.\n            if (addWorker(command, true))//trueWorkercoolPoolSize,falsemaximunPoolSize\n            Worker,return\n                return;\n            c = ctl.get(); //poolstate,ctlAtomicInteger\n        }\n        if (isRunning(c) && workQueue.offer(command)) {//addworkerWorkercommandqueueofferrunnable\n            int recheck = ctl.get();//recheck\n           //\n            if (! isRunning(recheck) && remove(command))\n                reject(command);//pool\n            else if (workerCountOf(recheck) == 0)\n                addWorker(null, false);\n\n        }\n        else if (!addWorker(command, false))\n            reject(command);\n    }\n```\naddWorker\n\n```java\nprivate boolean addWorker(Runnable firstTask, boolean core) {\n        retry:\n        \n        try {\n            w = new Worker(firstTask);\n            //nullcommandworker\n            final Thread t = w.thread;\n            if (t != null) {\n                final ReentrantLock mainLock = this.mainLock;\n                mainLock.lock();//\n                try {\n                        workers.add(w); //workersHashSet,ReentrantLock\n                    }\n                } finally {\n                    mainLock.unlock();\n                }\n                if (workerAdded) {\n                    t.start(); //command\n                    workerStarted = true;\n                }\n            }\n        } \n        return workerStarted; //,addWorkercommand\n    }\n\n\n\n final void runWorker(Worker w) { //\n        try {\n            while (task != null || (task = getTask()) != null) {\n                w.lock();//taskrunnablequeue\n                //getTaskaddTask,commandworkerworkerqueue(Thread)\n                try {\n                    beforeExecute(wt, task);//\n                    Throwable thrown = null;\n                    try {\n                        task.run(); \n                    } catch (RuntimeException x) {\n                        thrown = x; throw x;\n                    } catch (Error x) {\n                        thrown = x; throw x;\n                    } catch (Throwable x) {\n                        thrown = x; throw new Error(x);\n                    } finally {\n                        afterExecute(task, thrown);//\n                    }\n                } finally {\n                    task = null;\n                    w.completedTasks++;\n                    w.unlock();\n                }\n            }\n            completedAbruptly = false;\n        } finally {\n            processWorkerExit(w, completedAbruptly);\n        }\n    }    \n```\naddWorkerWorker()commandWorkerrunqueuegetTask\n```java\nprivate Runnable getTask() {\n        boolean timedOut = false; // Did the last poll() time out?\n\n        for (;;) { //\n            try {\n                Runnable r = timed ?\n                    workQueue.poll(keepAliveTime, TimeUnit.NANOSECONDS) : //queue\n                    workQueue.take();\n                if (r != null)\n                    return r;\n                \n            } catch (InterruptedException retry) {\n                timedOut = false;\n            }\n        }\n    }\n```\nexecutor.executenewWokerWorkerrunqueue\n\n\n2. WorkerAbstractQueuedSynchronizer\nAbstractQueuedSynchronizerAQS\n\n\n3. Reetranlock\n\n ReentrantLockThreadPoolExecutor\n\n4. Future,Callable,FutureTask\n\njdk Doug Lea \n\nReference \n1. [Java ](https://github.com/pzxwhc/MineKnowContainer/issues/9)","slug":"2017-04-30-concurrency-and-beyond","published":1,"updated":"2017-06-18T09:04:26.928Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj50afgx50019i4vrhjmion16","content":"<p><br><img src=\"http://odzl05jxx.bkt.clouddn.com/16d714eb6e8ecc23e4d6ba20d0be17a0.jpg?imageView2/2/w/600\" alt=\"\"><br><a id=\"more\"></a></p>\n<ol>\n<li><br>ExecutorexecuterunnableExecutorServiceExecutorService<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Executor</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</div><div class=\"line\">     * Executes the given command at some time in the future.  The command</div><div class=\"line\">     * may execute in a new thread, in a pooled thread, or in the calling</div><div class=\"line\">     * thread, at the discretion of the &#123;<span class=\"doctag\">@code</span> Executor&#125; implementation.</div><div class=\"line\">     *</div><div class=\"line\">     * <span class=\"doctag\">@param</span> command the runnable task</div><div class=\"line\">     * <span class=\"doctag\">@throws</span> RejectedExecutionException if this task cannot be</div><div class=\"line\">     * accepted for execution</div><div class=\"line\">     * <span class=\"doctag\">@throws</span> NullPointerException if command is null</div><div class=\"line\">     */</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">execute</span><span class=\"params\">(Runnable command)</span></span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">ExecutorService</span> <span class=\"keyword\">extends</span> <span class=\"title\">Executor</span></span>&#123;</div><div class=\"line\">true</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AbstractExecutorService</span> <span class=\"keyword\">implements</span> <span class=\"title\">ExecutorService</span> </span>&#123;</div><div class=\"line\">true</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ThreadPoolExecutor</span> <span class=\"keyword\">extends</span> <span class=\"title\">AbstractExecutorService</span> </span>&#123;</div><div class=\"line\">true</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n</li>\n</ol>\n<p>java.util.concurrent.ThreadPoolExecutorhook(beforeExecuteafterExecute)<br><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">public ThreadPoolExecutor(int corePoolSize,</div><div class=\"line\">                              int maximumPoolSize,</div><div class=\"line\">                              long keepAliveTime,</div><div class=\"line\">                              TimeUnit unit,</div><div class=\"line\">                              BlockingQueue&lt;Runnable&gt; workQueue) &#123;</div><div class=\"line\">        this(corePoolSize, maximumPoolSize, keepAliveTime, unit, workQueue,</div><div class=\"line\">             Executors.defaultThreadFactory(), defaultHandler);</div><div class=\"line\">    &#125;</div></pre></td></tr></table></figure></p>\n<p>javajava.util.concurrent.ExecutorsnewFixedThreadPoolnewSingleThreadExecutornewCachedThreadPoolExecutors</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">Thread</div><div class=\"line\">    */</div><div class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">enum</span> State &#123;</div><div class=\"line\">        NEW,</div><div class=\"line\">        RUNNABLE,</div><div class=\"line\">        BLOCKED,</div><div class=\"line\">        WAITING,</div><div class=\"line\">        TIMED_WAITING,</div><div class=\"line\">        TERMINATED;</div><div class=\"line\">    &#125;</div></pre></td></tr></table></figure>\n<p>execute<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">execute</span><span class=\"params\">(Runnable command)</span> </span>&#123;</div><div class=\"line\">       <span class=\"keyword\">if</span> (command == <span class=\"keyword\">null</span>)</div><div class=\"line\">           <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> NullPointerException();</div><div class=\"line\">       <span class=\"comment\">/*</div><div class=\"line\">        * Proceed in 3 steps:</div><div class=\"line\">        *</div><div class=\"line\">        * 1. If fewer than corePoolSize threads are running, try to</div><div class=\"line\">        * start a new thread with the given command as its first</div><div class=\"line\">        * task.  The call to addWorker atomically checks runState and</div><div class=\"line\">        * workerCount, and so prevents false alarms that would add</div><div class=\"line\">        * threads when it shouldn't, by returning false.</div><div class=\"line\">        *</div><div class=\"line\">        * 2. If a task can be successfully queued, then we still need</div><div class=\"line\">        * to double-check whether we should have added a thread</div><div class=\"line\">        * (because existing ones died since last checking) or that</div><div class=\"line\">        * the pool shut down since entry into this method. So we</div><div class=\"line\">        * recheck state and if necessary roll back the enqueuing if</div><div class=\"line\">        * stopped, or start a new thread if there are none.</div><div class=\"line\">        *</div><div class=\"line\">        * 3. If we cannot queue task, then we try to add a new</div><div class=\"line\">        * thread.  If it fails, we know we are shut down or saturated</div><div class=\"line\">        * and so reject the task.</div><div class=\"line\">        */</span></div><div class=\"line\">       <span class=\"keyword\">int</span> c = ctl.get();</div><div class=\"line\">       <span class=\"keyword\">if</span> (workerCountOf(c) &lt; corePoolSize) &#123; <span class=\"comment\">//</span></div><div class=\"line\">      <span class=\"comment\">// Core pool size is the minimum number of workers to keep alive (and not allow to time out etc)</span></div><div class=\"line\">       unless allowCoreThreadTimeOut is set, in which <span class=\"keyword\">case</span> the minimum is zero.</div><div class=\"line\">           <span class=\"keyword\">if</span> (addWorker(command, <span class=\"keyword\">true</span>))<span class=\"comment\">//trueWorkercoolPoolSize,falsemaximunPoolSize</span></div><div class=\"line\">           Worker,<span class=\"keyword\">return</span></div><div class=\"line\">               <span class=\"keyword\">return</span>;</div><div class=\"line\">           c = ctl.get(); <span class=\"comment\">//poolstate,ctlAtomicInteger</span></div><div class=\"line\">       &#125;</div><div class=\"line\">       <span class=\"keyword\">if</span> (isRunning(c) &amp;&amp; workQueue.offer(command)) &#123;<span class=\"comment\">//addworkerWorkercommandqueueofferrunnable</span></div><div class=\"line\">           <span class=\"keyword\">int</span> recheck = ctl.get();<span class=\"comment\">//recheck</span></div><div class=\"line\">          <span class=\"comment\">//</span></div><div class=\"line\">           <span class=\"keyword\">if</span> (! isRunning(recheck) &amp;&amp; remove(command))</div><div class=\"line\">               reject(command);<span class=\"comment\">//pool</span></div><div class=\"line\">           <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (workerCountOf(recheck) == <span class=\"number\">0</span>)</div><div class=\"line\">               addWorker(<span class=\"keyword\">null</span>, <span class=\"keyword\">false</span>);</div><div class=\"line\"></div><div class=\"line\">       &#125;</div><div class=\"line\">       <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (!addWorker(command, <span class=\"keyword\">false</span>))</div><div class=\"line\">           reject(command);</div><div class=\"line\">   &#125;</div></pre></td></tr></table></figure></p>\n<p>addWorker</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">boolean</span> <span class=\"title\">addWorker</span><span class=\"params\">(Runnable firstTask, <span class=\"keyword\">boolean</span> core)</span> </span>&#123;</div><div class=\"line\">        retry:</div><div class=\"line\">        </div><div class=\"line\">        <span class=\"keyword\">try</span> &#123;</div><div class=\"line\">            w = <span class=\"keyword\">new</span> Worker(firstTask);</div><div class=\"line\">            <span class=\"comment\">//nullcommandworker</span></div><div class=\"line\">            <span class=\"keyword\">final</span> Thread t = w.thread;</div><div class=\"line\">            <span class=\"keyword\">if</span> (t != <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">                <span class=\"keyword\">final</span> ReentrantLock mainLock = <span class=\"keyword\">this</span>.mainLock;</div><div class=\"line\">                mainLock.lock();<span class=\"comment\">//</span></div><div class=\"line\">                <span class=\"keyword\">try</span> &#123;</div><div class=\"line\">                        workers.add(w); <span class=\"comment\">//workersHashSet,ReentrantLock</span></div><div class=\"line\">                    &#125;</div><div class=\"line\">                &#125; <span class=\"keyword\">finally</span> &#123;</div><div class=\"line\">                    mainLock.unlock();</div><div class=\"line\">                &#125;</div><div class=\"line\">                <span class=\"keyword\">if</span> (workerAdded) &#123;</div><div class=\"line\">                    t.start(); <span class=\"comment\">//command</span></div><div class=\"line\">                    workerStarted = <span class=\"keyword\">true</span>;</div><div class=\"line\">                &#125;</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125; </div><div class=\"line\">        <span class=\"keyword\">return</span> workerStarted; <span class=\"comment\">//,addWorkercommand</span></div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"> <span class=\"function\"><span class=\"keyword\">final</span> <span class=\"keyword\">void</span> <span class=\"title\">runWorker</span><span class=\"params\">(Worker w)</span> </span>&#123; <span class=\"comment\">//</span></div><div class=\"line\">        <span class=\"keyword\">try</span> &#123;</div><div class=\"line\">            <span class=\"keyword\">while</span> (task != <span class=\"keyword\">null</span> || (task = getTask()) != <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">                w.lock();<span class=\"comment\">//taskrunnablequeue</span></div><div class=\"line\">                <span class=\"comment\">//getTaskaddTask,commandworkerworkerqueue(Thread)</span></div><div class=\"line\">                <span class=\"keyword\">try</span> &#123;</div><div class=\"line\">                    beforeExecute(wt, task);<span class=\"comment\">//</span></div><div class=\"line\">                    Throwable thrown = <span class=\"keyword\">null</span>;</div><div class=\"line\">                    <span class=\"keyword\">try</span> &#123;</div><div class=\"line\">                        task.run(); </div><div class=\"line\">                    &#125; <span class=\"keyword\">catch</span> (RuntimeException x) &#123;</div><div class=\"line\">                        thrown = x; <span class=\"keyword\">throw</span> x;</div><div class=\"line\">                    &#125; <span class=\"keyword\">catch</span> (Error x) &#123;</div><div class=\"line\">                        thrown = x; <span class=\"keyword\">throw</span> x;</div><div class=\"line\">                    &#125; <span class=\"keyword\">catch</span> (Throwable x) &#123;</div><div class=\"line\">                        thrown = x; <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> Error(x);</div><div class=\"line\">                    &#125; <span class=\"keyword\">finally</span> &#123;</div><div class=\"line\">                        afterExecute(task, thrown);<span class=\"comment\">//</span></div><div class=\"line\">                    &#125;</div><div class=\"line\">                &#125; <span class=\"keyword\">finally</span> &#123;</div><div class=\"line\">                    task = <span class=\"keyword\">null</span>;</div><div class=\"line\">                    w.completedTasks++;</div><div class=\"line\">                    w.unlock();</div><div class=\"line\">                &#125;</div><div class=\"line\">            &#125;</div><div class=\"line\">            completedAbruptly = <span class=\"keyword\">false</span>;</div><div class=\"line\">        &#125; <span class=\"keyword\">finally</span> &#123;</div><div class=\"line\">            processWorkerExit(w, completedAbruptly);</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div></pre></td></tr></table></figure>\n<p>addWorkerWorker()commandWorkerrunqueuegetTask<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> Runnable <span class=\"title\">getTask</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">boolean</span> timedOut = <span class=\"keyword\">false</span>; <span class=\"comment\">// Did the last poll() time out?</span></div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">for</span> (;;) &#123; <span class=\"comment\">//</span></div><div class=\"line\">            <span class=\"keyword\">try</span> &#123;</div><div class=\"line\">                Runnable r = timed ?</div><div class=\"line\">                    workQueue.poll(keepAliveTime, TimeUnit.NANOSECONDS) : <span class=\"comment\">//queue</span></div><div class=\"line\">                    workQueue.take();</div><div class=\"line\">                <span class=\"keyword\">if</span> (r != <span class=\"keyword\">null</span>)</div><div class=\"line\">                    <span class=\"keyword\">return</span> r;</div><div class=\"line\">                </div><div class=\"line\">            &#125; <span class=\"keyword\">catch</span> (InterruptedException retry) &#123;</div><div class=\"line\">                timedOut = <span class=\"keyword\">false</span>;</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div></pre></td></tr></table></figure></p>\n<p>executor.executenewWokerWorkerrunqueue</p>\n<ol>\n<li>WorkerAbstractQueuedSynchronizer<br>AbstractQueuedSynchronizerAQS</li>\n</ol>\n<ol>\n<li><p>Reetranlock<br><br> ReentrantLockThreadPoolExecutor</p>\n</li>\n<li><p>Future,Callable,FutureTask</p>\n</li>\n</ol>\n<p>jdk Doug Lea </p>\n<p>Reference </p>\n<ol>\n<li><a href=\"https://github.com/pzxwhc/MineKnowContainer/issues/9\">Java </a></li>\n</ol>\n","excerpt":"<p><br><img src=\"http://odzl05jxx.bkt.clouddn.com/16d714eb6e8ecc23e4d6ba20d0be17a0.jpg?imageView2/2/w/600\" alt=\"\"><br>","more":"</p>\n<ol>\n<li><br>ExecutorexecuterunnableExecutorServiceExecutorService<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Executor</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</div><div class=\"line\">     * Executes the given command at some time in the future.  The command</div><div class=\"line\">     * may execute in a new thread, in a pooled thread, or in the calling</div><div class=\"line\">     * thread, at the discretion of the &#123;<span class=\"doctag\">@code</span> Executor&#125; implementation.</div><div class=\"line\">     *</div><div class=\"line\">     * <span class=\"doctag\">@param</span> command the runnable task</div><div class=\"line\">     * <span class=\"doctag\">@throws</span> RejectedExecutionException if this task cannot be</div><div class=\"line\">     * accepted for execution</div><div class=\"line\">     * <span class=\"doctag\">@throws</span> NullPointerException if command is null</div><div class=\"line\">     */</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">execute</span><span class=\"params\">(Runnable command)</span></span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">ExecutorService</span> <span class=\"keyword\">extends</span> <span class=\"title\">Executor</span></span>&#123;</div><div class=\"line\">true</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AbstractExecutorService</span> <span class=\"keyword\">implements</span> <span class=\"title\">ExecutorService</span> </span>&#123;</div><div class=\"line\">true</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ThreadPoolExecutor</span> <span class=\"keyword\">extends</span> <span class=\"title\">AbstractExecutorService</span> </span>&#123;</div><div class=\"line\">true</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n</li>\n</ol>\n<p>java.util.concurrent.ThreadPoolExecutorhook(beforeExecuteafterExecute)<br><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">public ThreadPoolExecutor(int corePoolSize,</div><div class=\"line\">                              int maximumPoolSize,</div><div class=\"line\">                              long keepAliveTime,</div><div class=\"line\">                              TimeUnit unit,</div><div class=\"line\">                              BlockingQueue&lt;Runnable&gt; workQueue) &#123;</div><div class=\"line\">        this(corePoolSize, maximumPoolSize, keepAliveTime, unit, workQueue,</div><div class=\"line\">             Executors.defaultThreadFactory(), defaultHandler);</div><div class=\"line\">    &#125;</div></pre></td></tr></table></figure></p>\n<p>javajava.util.concurrent.ExecutorsnewFixedThreadPoolnewSingleThreadExecutornewCachedThreadPoolExecutors</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">Thread</div><div class=\"line\">    */</div><div class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">enum</span> State &#123;</div><div class=\"line\">        NEW,</div><div class=\"line\">        RUNNABLE,</div><div class=\"line\">        BLOCKED,</div><div class=\"line\">        WAITING,</div><div class=\"line\">        TIMED_WAITING,</div><div class=\"line\">        TERMINATED;</div><div class=\"line\">    &#125;</div></pre></td></tr></table></figure>\n<p>execute<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">execute</span><span class=\"params\">(Runnable command)</span> </span>&#123;</div><div class=\"line\">       <span class=\"keyword\">if</span> (command == <span class=\"keyword\">null</span>)</div><div class=\"line\">           <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> NullPointerException();</div><div class=\"line\">       <span class=\"comment\">/*</div><div class=\"line\">        * Proceed in 3 steps:</div><div class=\"line\">        *</div><div class=\"line\">        * 1. If fewer than corePoolSize threads are running, try to</div><div class=\"line\">        * start a new thread with the given command as its first</div><div class=\"line\">        * task.  The call to addWorker atomically checks runState and</div><div class=\"line\">        * workerCount, and so prevents false alarms that would add</div><div class=\"line\">        * threads when it shouldn't, by returning false.</div><div class=\"line\">        *</div><div class=\"line\">        * 2. If a task can be successfully queued, then we still need</div><div class=\"line\">        * to double-check whether we should have added a thread</div><div class=\"line\">        * (because existing ones died since last checking) or that</div><div class=\"line\">        * the pool shut down since entry into this method. So we</div><div class=\"line\">        * recheck state and if necessary roll back the enqueuing if</div><div class=\"line\">        * stopped, or start a new thread if there are none.</div><div class=\"line\">        *</div><div class=\"line\">        * 3. If we cannot queue task, then we try to add a new</div><div class=\"line\">        * thread.  If it fails, we know we are shut down or saturated</div><div class=\"line\">        * and so reject the task.</div><div class=\"line\">        */</span></div><div class=\"line\">       <span class=\"keyword\">int</span> c = ctl.get();</div><div class=\"line\">       <span class=\"keyword\">if</span> (workerCountOf(c) &lt; corePoolSize) &#123; <span class=\"comment\">//</span></div><div class=\"line\">      <span class=\"comment\">// Core pool size is the minimum number of workers to keep alive (and not allow to time out etc)</span></div><div class=\"line\">       unless allowCoreThreadTimeOut is set, in which <span class=\"keyword\">case</span> the minimum is zero.</div><div class=\"line\">           <span class=\"keyword\">if</span> (addWorker(command, <span class=\"keyword\">true</span>))<span class=\"comment\">//trueWorkercoolPoolSize,falsemaximunPoolSize</span></div><div class=\"line\">           Worker,<span class=\"keyword\">return</span></div><div class=\"line\">               <span class=\"keyword\">return</span>;</div><div class=\"line\">           c = ctl.get(); <span class=\"comment\">//poolstate,ctlAtomicInteger</span></div><div class=\"line\">       &#125;</div><div class=\"line\">       <span class=\"keyword\">if</span> (isRunning(c) &amp;&amp; workQueue.offer(command)) &#123;<span class=\"comment\">//addworkerWorkercommandqueueofferrunnable</span></div><div class=\"line\">           <span class=\"keyword\">int</span> recheck = ctl.get();<span class=\"comment\">//recheck</span></div><div class=\"line\">          <span class=\"comment\">//</span></div><div class=\"line\">           <span class=\"keyword\">if</span> (! isRunning(recheck) &amp;&amp; remove(command))</div><div class=\"line\">               reject(command);<span class=\"comment\">//pool</span></div><div class=\"line\">           <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (workerCountOf(recheck) == <span class=\"number\">0</span>)</div><div class=\"line\">               addWorker(<span class=\"keyword\">null</span>, <span class=\"keyword\">false</span>);</div><div class=\"line\"></div><div class=\"line\">       &#125;</div><div class=\"line\">       <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (!addWorker(command, <span class=\"keyword\">false</span>))</div><div class=\"line\">           reject(command);</div><div class=\"line\">   &#125;</div></pre></td></tr></table></figure></p>\n<p>addWorker</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">boolean</span> <span class=\"title\">addWorker</span><span class=\"params\">(Runnable firstTask, <span class=\"keyword\">boolean</span> core)</span> </span>&#123;</div><div class=\"line\">        retry:</div><div class=\"line\">        </div><div class=\"line\">        <span class=\"keyword\">try</span> &#123;</div><div class=\"line\">            w = <span class=\"keyword\">new</span> Worker(firstTask);</div><div class=\"line\">            <span class=\"comment\">//nullcommandworker</span></div><div class=\"line\">            <span class=\"keyword\">final</span> Thread t = w.thread;</div><div class=\"line\">            <span class=\"keyword\">if</span> (t != <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">                <span class=\"keyword\">final</span> ReentrantLock mainLock = <span class=\"keyword\">this</span>.mainLock;</div><div class=\"line\">                mainLock.lock();<span class=\"comment\">//</span></div><div class=\"line\">                <span class=\"keyword\">try</span> &#123;</div><div class=\"line\">                        workers.add(w); <span class=\"comment\">//workersHashSet,ReentrantLock</span></div><div class=\"line\">                    &#125;</div><div class=\"line\">                &#125; <span class=\"keyword\">finally</span> &#123;</div><div class=\"line\">                    mainLock.unlock();</div><div class=\"line\">                &#125;</div><div class=\"line\">                <span class=\"keyword\">if</span> (workerAdded) &#123;</div><div class=\"line\">                    t.start(); <span class=\"comment\">//command</span></div><div class=\"line\">                    workerStarted = <span class=\"keyword\">true</span>;</div><div class=\"line\">                &#125;</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125; </div><div class=\"line\">        <span class=\"keyword\">return</span> workerStarted; <span class=\"comment\">//,addWorkercommand</span></div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"> <span class=\"function\"><span class=\"keyword\">final</span> <span class=\"keyword\">void</span> <span class=\"title\">runWorker</span><span class=\"params\">(Worker w)</span> </span>&#123; <span class=\"comment\">//</span></div><div class=\"line\">        <span class=\"keyword\">try</span> &#123;</div><div class=\"line\">            <span class=\"keyword\">while</span> (task != <span class=\"keyword\">null</span> || (task = getTask()) != <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">                w.lock();<span class=\"comment\">//taskrunnablequeue</span></div><div class=\"line\">                <span class=\"comment\">//getTaskaddTask,commandworkerworkerqueue(Thread)</span></div><div class=\"line\">                <span class=\"keyword\">try</span> &#123;</div><div class=\"line\">                    beforeExecute(wt, task);<span class=\"comment\">//</span></div><div class=\"line\">                    Throwable thrown = <span class=\"keyword\">null</span>;</div><div class=\"line\">                    <span class=\"keyword\">try</span> &#123;</div><div class=\"line\">                        task.run(); </div><div class=\"line\">                    &#125; <span class=\"keyword\">catch</span> (RuntimeException x) &#123;</div><div class=\"line\">                        thrown = x; <span class=\"keyword\">throw</span> x;</div><div class=\"line\">                    &#125; <span class=\"keyword\">catch</span> (Error x) &#123;</div><div class=\"line\">                        thrown = x; <span class=\"keyword\">throw</span> x;</div><div class=\"line\">                    &#125; <span class=\"keyword\">catch</span> (Throwable x) &#123;</div><div class=\"line\">                        thrown = x; <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> Error(x);</div><div class=\"line\">                    &#125; <span class=\"keyword\">finally</span> &#123;</div><div class=\"line\">                        afterExecute(task, thrown);<span class=\"comment\">//</span></div><div class=\"line\">                    &#125;</div><div class=\"line\">                &#125; <span class=\"keyword\">finally</span> &#123;</div><div class=\"line\">                    task = <span class=\"keyword\">null</span>;</div><div class=\"line\">                    w.completedTasks++;</div><div class=\"line\">                    w.unlock();</div><div class=\"line\">                &#125;</div><div class=\"line\">            &#125;</div><div class=\"line\">            completedAbruptly = <span class=\"keyword\">false</span>;</div><div class=\"line\">        &#125; <span class=\"keyword\">finally</span> &#123;</div><div class=\"line\">            processWorkerExit(w, completedAbruptly);</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div></pre></td></tr></table></figure>\n<p>addWorkerWorker()commandWorkerrunqueuegetTask<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> Runnable <span class=\"title\">getTask</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">boolean</span> timedOut = <span class=\"keyword\">false</span>; <span class=\"comment\">// Did the last poll() time out?</span></div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">for</span> (;;) &#123; <span class=\"comment\">//</span></div><div class=\"line\">            <span class=\"keyword\">try</span> &#123;</div><div class=\"line\">                Runnable r = timed ?</div><div class=\"line\">                    workQueue.poll(keepAliveTime, TimeUnit.NANOSECONDS) : <span class=\"comment\">//queue</span></div><div class=\"line\">                    workQueue.take();</div><div class=\"line\">                <span class=\"keyword\">if</span> (r != <span class=\"keyword\">null</span>)</div><div class=\"line\">                    <span class=\"keyword\">return</span> r;</div><div class=\"line\">                </div><div class=\"line\">            &#125; <span class=\"keyword\">catch</span> (InterruptedException retry) &#123;</div><div class=\"line\">                timedOut = <span class=\"keyword\">false</span>;</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div></pre></td></tr></table></figure></p>\n<p>executor.executenewWokerWorkerrunqueue</p>\n<ol>\n<li>WorkerAbstractQueuedSynchronizer<br>AbstractQueuedSynchronizerAQS</li>\n</ol>\n<ol>\n<li><p>Reetranlock<br><br> ReentrantLockThreadPoolExecutor</p>\n</li>\n<li><p>Future,Callable,FutureTask</p>\n</li>\n</ol>\n<p>jdk Doug Lea </p>\n<p>Reference </p>\n<ol>\n<li><a href=\"https://github.com/pzxwhc/MineKnowContainer/issues/9\">Java </a></li>\n</ol>"},{"title":"Rxjava2 ","date":"2017-04-23T05:56:07.000Z","_content":"\nJake WhartonRxjava2\n![](http://odzl05jxx.bkt.clouddn.com/f21a6a245edfe0b19804be5b3df24a3d.jpg?imageView2/2/w/600)\n<!--more-->\n\n\n### 1. Why Reactive? \nRxjava\nstartActivityFragmenttransactionRxjavaObservableBuilder PatternRxjavaWikiimmutable objectGC\n\n\n### 2. \nStream\n```\nsource of data\nlistener of data\nmethods for modifying data\n```\n![](http://odzl05jxx.bkt.clouddn.com/stream_compose.jpg?imageView2/2/w/600)\n\n#### 2.1 \nObservable<T> Flowable<T>BackPressureBackPressure. \nObservableFlowableObserverSubscriber\n\n```java\ninterface Observer<T>{\n  void onNext(T t);\n  void onComplete();\n  void onError(Throwable t);\n  void onSubscribe(Disposable d);\n}\n\ninterface Disposable{\n  void dispose();\n}\n\n\ninterface Subscriber<T>{\n  void onNext(T t)\n  void onComplete();;\n  void onError(Throwable t);\n  void onSubscribe(Subscription s);\n}\n\ninterface Subscription{\n  void cancel() //\n  void request(long r) //BackPressure\n}\n```\nDisposablesubscribeResurceResourceObservableFlowable,onSubscribeDisposableActivityonDestroycancel network request.\n\n\n#### 2.2 \n1. Single(SingleError)\n```java\npublic abstract class Single<T> implements SingleSource<T> {}\n\n```\n\n2. Completeable(completeableerrorreactive runnalecommand)\n```java\npublic abstract class Completable implements CompletableSource {}\n```\nerror\n```java\npublic void writeFile(Stirng data){} \n// model\nCompleteable writeFile(Stirng data){} \n```\n\n\n3. Maybe(optional)\n```java\npublic abstract class Maybe<T> implements MaybeSource<T> {}\n```\nstatic\n\n![from iterable](http://odzl05jxx.bkt.clouddn.com/creating_source_from_iterable.jpg?imageView2/2/w/600)\n\n\n![fromjust](http://odzl05jxx.bkt.clouddn.com/creating_source_from_just.jpg?imageView2/2/w/600)\n\n\n\n#### 1. fromCallable\n```java\nObservable.fromCallable(new Callable<String>(){\n\n  @override \n  public String call() throw Exception{\n      return getName() //  synchroniousgetasynchnous,OkHttpClient.newCall(request).execute(); //\n}\n})\n```\ncallobserveronNextonError\nfromCallableFlowable\n```java\nFlowable.fromCallable(() -> \"Hello Flowable\");\nObservable.fromCallable(() -> \"Hello Observable\");\nMaybe.fromCallable(() -> \"Hello Maybe\");\nSingle.fromCallable(() -> \"Hello Single\");\nCompleteable.fromCallable(() -> \"Hello Completeable\");\n```\n> fromCallable are for modeling synchronous sourse of a single source of data. \n\n\nMaybeCompleteable,\n```java\nMaybe.fromAction(() -> \"Hey jude\")\nMaybe.fromRunnable(() -> \"ignore\")\n\nCompleteable.fromAction(() -> \"Hey jude\")\nCompleteable.fromRunnable(() -> \"ignore\")\n\n```\n\n#### 2. create(Rxjava 1Rxjava2)\n```java\nObservable.create(new ObservableOnSubscribe<String>()){\n      @override\n      public void subscribe (ObservableEmitter<String> e) throws Exception{ //subscribe get called whenever there's a new subscriber, emitter is the person that's listening.\n      //\n         e.onNext(\"Hello\");\n         e.onComplete();\n      }\n}\n```\n\n//ObservablesubscriberonNextonNext\n\nlambda\n```java\nObservable.create(e ->{\n    e.onNext(\"Hello\");\n    e.onNext(\"Hello\");\n    e.onComplete();\n})\n\nOkhttpmodel\nObservable.create(e ->{\n   Call call = client.newCall(request);\n   call.enqueue(new Callback()){\n\n    @Override\n    public void   onResponse(Response r) throws IOException{\n      e.onNext(r.body().toString());\n      e.onComplete();\n    }\n\n    @Override\n    public void onFailure(IOException e){\n      e.onError(e);\n    }\n\n  }\n})\n\n// \npublic interface ObservableEmitter<T> extends Emitter<T> {\n    /**\n     * Sets a Cancellable on this emitter; any previous Disposable\n     * or Cancellation will be unsubscribed/cancelled.\n     * @param c the cancellable resource, null is allowed\n     */\n    void setCancellable(Cancellable c);\n}\n\n// emittercancel\n\nObservable.create(e ->{\n    e.setCacelation(() -view.setOnClickListener(null));\n    view.setOnClickListener(v -> e.onNext());\n})\n\n// leak View\n\nfromCallablecreatedata source\n\n```\n\n\n\n### 3. \n\n#### 3.1 observer<T>Subscriber<T>\n\nObservableFlowableObserverSubscriber\n\n```java\ninterface Observer<T>{\n  void onNext(T t);\n  void onComplete();\n  void onError(Throwable t);\n  void onSubscribe(Disposable d);\n}\n\ninterface Disposable{\n  void dispose();\n}\n\n\ninterface Subscriber<T>{\n  void onNext(T t);\n  void onComplete();\n  void onError(Throwable t);\n  void onSubscribe(Subscription s);\n}\n\ninterface Subscription{\n  void cancel(); //\n  void request(long r) ;//BackPressure\n}\n```\n## ()(Reactive)\nObservable -> subscribe -> Observer \n\nFlowable -> subscribe -> Subscription\n\n#### 3.2 onSubscribe\nbase class\n![](http://odzl05jxx.bkt.clouddn.com/4dab298b9f7ce29c43f9d8eaf686e02f.jpg?imageView2/2/w/600)\n```java\nObservable.just(\"Hello\").subscribe(new DisposableObserver<String>() {\n                    @Override\n                    public void onNext(String value) {\n                    }\n\n                    @Override\n                    public void onError(Throwable e) {\n                    }\n\n                    @Override\n                    public void onComplete() {\n                    }\n                });\n\n\n  DisposableObserverobserver.dispose\n  \n  Disposable disposable =   Observable.just(\"Hello\").subscribeWith(new DisposableObserver<String>() {\n                    @Override\n                    public void onNext(String value) {\n                    }\n\n                    @Override\n                    public void onError(Throwable e) {\n                    }\n\n                    @Override\n                    public void onComplete() {\n                    }\n                });\n\n   subscribeWithDisposablesubscribe    \n\n  CompositeDisposable,onDestroy  \n\n  ObservableSingleCompleteableMaybeFlowablesubscribewith\n\n\n```\n\n\n\n\n### 4. \n\n> Observable.subscribe  \n\n> Flowable.subscribe\nsbscribeWith\n\n```java\nObservable.fromCallable(new Callable<List<String>>() {\n            @Override\n            public List<String> call() throws Exception {\n                LogUtil.p(\"call do on thread any\");\n                blockThread(2000); // block 2s\n                return Arrays.asList(array);\n            }\n        }).subscribeOn(Schedulers.computation())\n                .observeOn(AndroidSchedulers.mainThread())\n                .doOnSubscribe(new Consumer<Disposable>() {\n                    @Override\n                    public void accept(Disposable disposable) throws Exception {\n                        LogUtil.p(\"\");\n                    }\n                }).doOnComplete(new Action() {\n            @Override\n            public void run() throws Exception {\n                LogUtil.p(\"\");\n            }\n        }).doOnNext(new Consumer<List<String>>() {\n            @Override\n            public void accept(List<String> strings) throws Exception {\n                LogUtil.p(\"\" + strings.get(0));\n            }\n        }).doAfterNext(new Consumer<List<String>>() {\n            @Override\n            public void accept(List<String> strings) throws Exception {\n                LogUtil.p(\"\"+strings.get(0));\n            }\n        }).subscribe(new Observer<List<String>>() {\n            @Override\n            public void onSubscribe(Disposable d) {\n                LogUtil.p(\"onSubscribe \" + d.isDisposed());\n            }\n\n            @Override\n            public void onNext(List<String> value) {\n                LogUtil.p(\" get Response \" + value.size());\n                value.set(0, \"change first element!\");\n            }\n\n            @Override\n            public void onError(Throwable e) {\n            }\n\n            @Override\n            public void onComplete() {\n                LogUtil.p(\"\");\n            }\n        });\n\nid \ndoOnsubscribe(1) -> onSubscribe(1) -> call(276) ->doOnNext(1)->onNext(1) -> doAfterNext(1) ->doOnComplete(1)->onComplete(1)\ndoOnXXX= doBeforeXXX,\nOkHttpinterecptergradletask\n\n```\n\n\n\n\n### 5. Operator and Threading\n```java\nObservable<String> greeting  = Observable.just(\"Hello\");\nObservable<String> yelling = greeting.map(s ->s.toUppercase())\n\nObservable.subscribeOn(Schedulers.io()) // \n```\nsubscribeOntask\n![Wrong](http://odzl05jxx.bkt.clouddn.com/reading%20network%20response%20on%20main%20thread.jpg?imageView2/2/w/600)\n![Ok](http://odzl05jxx.bkt.clouddn.com/observing%20on%20ui%20thred.jpg?imageView2/2/w/600)\n\n\n\n\n>Observable -> first() -> single\nObservable -> firsetElement -> Maybe\nObservable -> ignoreElements() ->Completable\n\n>Flowable -> first() -> single\nFlowable -> firsetElement -> Maybe\nFlowable -> ignoreElements() ->Completable\n\n- [Combining Observables](https://github.com/ReactiveX/RxJava/wiki/Combining-Observables) \n\n\n\n\n\n## objectRxjava2Rxjava1GC\n## quote: \n### RxJava 2 is not something new. Reactive programming is not new by any stretch, but Android itself is a highly reactive world that weve been taught to model in a very imperative, stateful fashion.\nReactive programming allow us to model it in the proper way: asynchronously. Embrace the asynchronicity of the sources, and instead of trying to manage all the state ourselves, compose them together such that our apps become truly reactive.\n\n\n\n\n### Reference\n\n-- [GOTO 2016  Exploring RxJava 2 for Android  Jake Wharton - YouTube](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=6&cad=rja&uact=8&ved=0ahUKEwjlvrfg8bnTAhUI0mMKHcXZC1MQtwIITDAF&url=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DhtIXKI5gOQU&usg=AFQjCNEYczqXGkjYXOUbovtP1CxDPARcXA&sig2=gmLYEd2cVOhI7C2WjOHr9g)","source":"_posts/2017-04-23-rxjava2-for-android.md","raw":"---\ntitle: Rxjava2 \ndate: 2017-04-23 13:56:07\ncategories: blog\ntags: [rxjava2,android]\n---\n\nJake WhartonRxjava2\n![](http://odzl05jxx.bkt.clouddn.com/f21a6a245edfe0b19804be5b3df24a3d.jpg?imageView2/2/w/600)\n<!--more-->\n\n\n### 1. Why Reactive? \nRxjava\nstartActivityFragmenttransactionRxjavaObservableBuilder PatternRxjavaWikiimmutable objectGC\n\n\n### 2. \nStream\n```\nsource of data\nlistener of data\nmethods for modifying data\n```\n![](http://odzl05jxx.bkt.clouddn.com/stream_compose.jpg?imageView2/2/w/600)\n\n#### 2.1 \nObservable<T> Flowable<T>BackPressureBackPressure. \nObservableFlowableObserverSubscriber\n\n```java\ninterface Observer<T>{\n  void onNext(T t);\n  void onComplete();\n  void onError(Throwable t);\n  void onSubscribe(Disposable d);\n}\n\ninterface Disposable{\n  void dispose();\n}\n\n\ninterface Subscriber<T>{\n  void onNext(T t)\n  void onComplete();;\n  void onError(Throwable t);\n  void onSubscribe(Subscription s);\n}\n\ninterface Subscription{\n  void cancel() //\n  void request(long r) //BackPressure\n}\n```\nDisposablesubscribeResurceResourceObservableFlowable,onSubscribeDisposableActivityonDestroycancel network request.\n\n\n#### 2.2 \n1. Single(SingleError)\n```java\npublic abstract class Single<T> implements SingleSource<T> {}\n\n```\n\n2. Completeable(completeableerrorreactive runnalecommand)\n```java\npublic abstract class Completable implements CompletableSource {}\n```\nerror\n```java\npublic void writeFile(Stirng data){} \n// model\nCompleteable writeFile(Stirng data){} \n```\n\n\n3. Maybe(optional)\n```java\npublic abstract class Maybe<T> implements MaybeSource<T> {}\n```\nstatic\n\n![from iterable](http://odzl05jxx.bkt.clouddn.com/creating_source_from_iterable.jpg?imageView2/2/w/600)\n\n\n![fromjust](http://odzl05jxx.bkt.clouddn.com/creating_source_from_just.jpg?imageView2/2/w/600)\n\n\n\n#### 1. fromCallable\n```java\nObservable.fromCallable(new Callable<String>(){\n\n  @override \n  public String call() throw Exception{\n      return getName() //  synchroniousgetasynchnous,OkHttpClient.newCall(request).execute(); //\n}\n})\n```\ncallobserveronNextonError\nfromCallableFlowable\n```java\nFlowable.fromCallable(() -> \"Hello Flowable\");\nObservable.fromCallable(() -> \"Hello Observable\");\nMaybe.fromCallable(() -> \"Hello Maybe\");\nSingle.fromCallable(() -> \"Hello Single\");\nCompleteable.fromCallable(() -> \"Hello Completeable\");\n```\n> fromCallable are for modeling synchronous sourse of a single source of data. \n\n\nMaybeCompleteable,\n```java\nMaybe.fromAction(() -> \"Hey jude\")\nMaybe.fromRunnable(() -> \"ignore\")\n\nCompleteable.fromAction(() -> \"Hey jude\")\nCompleteable.fromRunnable(() -> \"ignore\")\n\n```\n\n#### 2. create(Rxjava 1Rxjava2)\n```java\nObservable.create(new ObservableOnSubscribe<String>()){\n      @override\n      public void subscribe (ObservableEmitter<String> e) throws Exception{ //subscribe get called whenever there's a new subscriber, emitter is the person that's listening.\n      //\n         e.onNext(\"Hello\");\n         e.onComplete();\n      }\n}\n```\n\n//ObservablesubscriberonNextonNext\n\nlambda\n```java\nObservable.create(e ->{\n    e.onNext(\"Hello\");\n    e.onNext(\"Hello\");\n    e.onComplete();\n})\n\nOkhttpmodel\nObservable.create(e ->{\n   Call call = client.newCall(request);\n   call.enqueue(new Callback()){\n\n    @Override\n    public void   onResponse(Response r) throws IOException{\n      e.onNext(r.body().toString());\n      e.onComplete();\n    }\n\n    @Override\n    public void onFailure(IOException e){\n      e.onError(e);\n    }\n\n  }\n})\n\n// \npublic interface ObservableEmitter<T> extends Emitter<T> {\n    /**\n     * Sets a Cancellable on this emitter; any previous Disposable\n     * or Cancellation will be unsubscribed/cancelled.\n     * @param c the cancellable resource, null is allowed\n     */\n    void setCancellable(Cancellable c);\n}\n\n// emittercancel\n\nObservable.create(e ->{\n    e.setCacelation(() -view.setOnClickListener(null));\n    view.setOnClickListener(v -> e.onNext());\n})\n\n// leak View\n\nfromCallablecreatedata source\n\n```\n\n\n\n### 3. \n\n#### 3.1 observer<T>Subscriber<T>\n\nObservableFlowableObserverSubscriber\n\n```java\ninterface Observer<T>{\n  void onNext(T t);\n  void onComplete();\n  void onError(Throwable t);\n  void onSubscribe(Disposable d);\n}\n\ninterface Disposable{\n  void dispose();\n}\n\n\ninterface Subscriber<T>{\n  void onNext(T t);\n  void onComplete();\n  void onError(Throwable t);\n  void onSubscribe(Subscription s);\n}\n\ninterface Subscription{\n  void cancel(); //\n  void request(long r) ;//BackPressure\n}\n```\n## ()(Reactive)\nObservable -> subscribe -> Observer \n\nFlowable -> subscribe -> Subscription\n\n#### 3.2 onSubscribe\nbase class\n![](http://odzl05jxx.bkt.clouddn.com/4dab298b9f7ce29c43f9d8eaf686e02f.jpg?imageView2/2/w/600)\n```java\nObservable.just(\"Hello\").subscribe(new DisposableObserver<String>() {\n                    @Override\n                    public void onNext(String value) {\n                    }\n\n                    @Override\n                    public void onError(Throwable e) {\n                    }\n\n                    @Override\n                    public void onComplete() {\n                    }\n                });\n\n\n  DisposableObserverobserver.dispose\n  \n  Disposable disposable =   Observable.just(\"Hello\").subscribeWith(new DisposableObserver<String>() {\n                    @Override\n                    public void onNext(String value) {\n                    }\n\n                    @Override\n                    public void onError(Throwable e) {\n                    }\n\n                    @Override\n                    public void onComplete() {\n                    }\n                });\n\n   subscribeWithDisposablesubscribe    \n\n  CompositeDisposable,onDestroy  \n\n  ObservableSingleCompleteableMaybeFlowablesubscribewith\n\n\n```\n\n\n\n\n### 4. \n\n> Observable.subscribe  \n\n> Flowable.subscribe\nsbscribeWith\n\n```java\nObservable.fromCallable(new Callable<List<String>>() {\n            @Override\n            public List<String> call() throws Exception {\n                LogUtil.p(\"call do on thread any\");\n                blockThread(2000); // block 2s\n                return Arrays.asList(array);\n            }\n        }).subscribeOn(Schedulers.computation())\n                .observeOn(AndroidSchedulers.mainThread())\n                .doOnSubscribe(new Consumer<Disposable>() {\n                    @Override\n                    public void accept(Disposable disposable) throws Exception {\n                        LogUtil.p(\"\");\n                    }\n                }).doOnComplete(new Action() {\n            @Override\n            public void run() throws Exception {\n                LogUtil.p(\"\");\n            }\n        }).doOnNext(new Consumer<List<String>>() {\n            @Override\n            public void accept(List<String> strings) throws Exception {\n                LogUtil.p(\"\" + strings.get(0));\n            }\n        }).doAfterNext(new Consumer<List<String>>() {\n            @Override\n            public void accept(List<String> strings) throws Exception {\n                LogUtil.p(\"\"+strings.get(0));\n            }\n        }).subscribe(new Observer<List<String>>() {\n            @Override\n            public void onSubscribe(Disposable d) {\n                LogUtil.p(\"onSubscribe \" + d.isDisposed());\n            }\n\n            @Override\n            public void onNext(List<String> value) {\n                LogUtil.p(\" get Response \" + value.size());\n                value.set(0, \"change first element!\");\n            }\n\n            @Override\n            public void onError(Throwable e) {\n            }\n\n            @Override\n            public void onComplete() {\n                LogUtil.p(\"\");\n            }\n        });\n\nid \ndoOnsubscribe(1) -> onSubscribe(1) -> call(276) ->doOnNext(1)->onNext(1) -> doAfterNext(1) ->doOnComplete(1)->onComplete(1)\ndoOnXXX= doBeforeXXX,\nOkHttpinterecptergradletask\n\n```\n\n\n\n\n### 5. Operator and Threading\n```java\nObservable<String> greeting  = Observable.just(\"Hello\");\nObservable<String> yelling = greeting.map(s ->s.toUppercase())\n\nObservable.subscribeOn(Schedulers.io()) // \n```\nsubscribeOntask\n![Wrong](http://odzl05jxx.bkt.clouddn.com/reading%20network%20response%20on%20main%20thread.jpg?imageView2/2/w/600)\n![Ok](http://odzl05jxx.bkt.clouddn.com/observing%20on%20ui%20thred.jpg?imageView2/2/w/600)\n\n\n\n\n>Observable -> first() -> single\nObservable -> firsetElement -> Maybe\nObservable -> ignoreElements() ->Completable\n\n>Flowable -> first() -> single\nFlowable -> firsetElement -> Maybe\nFlowable -> ignoreElements() ->Completable\n\n- [Combining Observables](https://github.com/ReactiveX/RxJava/wiki/Combining-Observables) \n\n\n\n\n\n## objectRxjava2Rxjava1GC\n## quote: \n### RxJava 2 is not something new. Reactive programming is not new by any stretch, but Android itself is a highly reactive world that weve been taught to model in a very imperative, stateful fashion.\nReactive programming allow us to model it in the proper way: asynchronously. Embrace the asynchronicity of the sources, and instead of trying to manage all the state ourselves, compose them together such that our apps become truly reactive.\n\n\n\n\n### Reference\n\n-- [GOTO 2016  Exploring RxJava 2 for Android  Jake Wharton - YouTube](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=6&cad=rja&uact=8&ved=0ahUKEwjlvrfg8bnTAhUI0mMKHcXZC1MQtwIITDAF&url=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DhtIXKI5gOQU&usg=AFQjCNEYczqXGkjYXOUbovtP1CxDPARcXA&sig2=gmLYEd2cVOhI7C2WjOHr9g)","slug":"2017-04-23-rxjava2-for-android","published":1,"updated":"2017-07-12T00:36:03.172Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj50afgx5001ci4vrtn1j1kcw","content":"<p>Jake WhartonRxjava2<br><img src=\"http://odzl05jxx.bkt.clouddn.com/f21a6a245edfe0b19804be5b3df24a3d.jpg?imageView2/2/w/600\" alt=\"\"><br><a id=\"more\"></a></p>\n<h3 id=\"1-Why-Reactive\"><a href=\"#1-Why-Reactive\" class=\"headerlink\" title=\"1. Why Reactive?\"></a>1. Why Reactive?</h3><p>Rxjava<br>startActivityFragmenttransactionRxjavaObservableBuilder PatternRxjavaWikiimmutable objectGC</p>\n<h3 id=\"2-\"><a href=\"#2-\" class=\"headerlink\" title=\"2. \"></a>2. </h3><p>Stream<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">source of data</div><div class=\"line\">listener of data</div><div class=\"line\">methods for modifying data</div></pre></td></tr></table></figure></p>\n<p><img src=\"http://odzl05jxx.bkt.clouddn.com/stream_compose.jpg?imageView2/2/w/600\" alt=\"\"></p>\n<h4 id=\"2-1-\"><a href=\"#2-1-\" class=\"headerlink\" title=\"2.1 \"></a>2.1 </h4><p>Observable<T> Flowable<T>BackPressureBackPressure.<br>ObservableFlowableObserverSubscriber</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Observer</span>&lt;<span class=\"title\">T</span>&gt;</span>&#123;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">onNext</span><span class=\"params\">(T t)</span></span>;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">onComplete</span><span class=\"params\">()</span></span>;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">onError</span><span class=\"params\">(Throwable t)</span></span>;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">onSubscribe</span><span class=\"params\">(Disposable d)</span></span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Disposable</span></span>&#123;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">dispose</span><span class=\"params\">()</span></span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Subscriber</span>&lt;<span class=\"title\">T</span>&gt;</span>&#123;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">onNext</span><span class=\"params\">(T t)</span></div><div class=\"line\">  <span class=\"keyword\">void</span> <span class=\"title\">onComplete</span><span class=\"params\">()</span></span>;;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">onError</span><span class=\"params\">(Throwable t)</span></span>;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">onSubscribe</span><span class=\"params\">(Subscription s)</span></span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Subscription</span></span>&#123;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">cancel</span><span class=\"params\">()</span> <span class=\"comment\">//</span></div><div class=\"line\">  <span class=\"keyword\">void</span> <span class=\"title\">request</span><span class=\"params\">(<span class=\"keyword\">long</span> r)</span> <span class=\"comment\">//BackPressure</span></div><div class=\"line\">&#125;</span></div></pre></td></tr></table></figure>\n<p>DisposablesubscribeResurceResourceObservableFlowable,onSubscribeDisposableActivityonDestroycancel network request.</p>\n<h4 id=\"2-2-\"><a href=\"#2-2-\" class=\"headerlink\" title=\"2.2 \"></a>2.2 </h4><ol>\n<li><p>Single(SingleError)</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Single</span>&lt;<span class=\"title\">T</span>&gt; <span class=\"keyword\">implements</span> <span class=\"title\">SingleSource</span>&lt;<span class=\"title\">T</span>&gt; </span>&#123;&#125;</div></pre></td></tr></table></figure>\n</li>\n<li><p>Completeable(completeableerrorreactive runnalecommand)</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Completable</span> <span class=\"keyword\">implements</span> <span class=\"title\">CompletableSource</span> </span>&#123;&#125;</div></pre></td></tr></table></figure>\n</li>\n</ol>\n<p>error<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">writeFile</span><span class=\"params\">(Stirng data)</span></span>&#123;&#125; </div><div class=\"line\"><span class=\"comment\">// model</span></div><div class=\"line\"><span class=\"function\">Completeable <span class=\"title\">writeFile</span><span class=\"params\">(Stirng data)</span></span>&#123;&#125;</div></pre></td></tr></table></figure></p>\n<ol>\n<li>Maybe(optional)<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Maybe</span>&lt;<span class=\"title\">T</span>&gt; <span class=\"keyword\">implements</span> <span class=\"title\">MaybeSource</span>&lt;<span class=\"title\">T</span>&gt; </span>&#123;&#125;</div></pre></td></tr></table></figure>\n</li>\n</ol>\n<p>static<br><br><img src=\"http://odzl05jxx.bkt.clouddn.com/creating_source_from_iterable.jpg?imageView2/2/w/600\" alt=\"from iterable\"></p>\n<p><img src=\"http://odzl05jxx.bkt.clouddn.com/creating_source_from_just.jpg?imageView2/2/w/600\" alt=\"fromjust\"></p>\n<p></p>\n<h4 id=\"1-fromCallable\"><a href=\"#1-fromCallable\" class=\"headerlink\" title=\"1. fromCallable\"></a>1. fromCallable</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">Observable.fromCallable(<span class=\"keyword\">new</span> Callable&lt;String&gt;()&#123;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"meta\">@override</span> </div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">call</span><span class=\"params\">()</span> throw Exception</span>&#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> getName() <span class=\"comment\">//  synchroniousgetasynchnous,OkHttpClient.newCall(request).execute(); //</span></div><div class=\"line\">&#125;</div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure>\n<p>callobserveronNextonError<br>fromCallableFlowable<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">Flowable.fromCallable(() -&gt; <span class=\"string\">\"Hello Flowable\"</span>);</div><div class=\"line\">Observable.fromCallable(() -&gt; <span class=\"string\">\"Hello Observable\"</span>);</div><div class=\"line\">Maybe.fromCallable(() -&gt; <span class=\"string\">\"Hello Maybe\"</span>);</div><div class=\"line\">Single.fromCallable(() -&gt; <span class=\"string\">\"Hello Single\"</span>);</div><div class=\"line\">Completeable.fromCallable(() -&gt; <span class=\"string\">\"Hello Completeable\"</span>);</div></pre></td></tr></table></figure></p>\n<blockquote>\n<p>fromCallable are for modeling synchronous sourse of a single source of data. </p>\n</blockquote>\n<p><br>MaybeCompleteable,<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">Maybe.fromAction(() -&gt; <span class=\"string\">\"Hey jude\"</span>)</div><div class=\"line\">Maybe.fromRunnable(() -&gt; <span class=\"string\">\"ignore\"</span>)</div><div class=\"line\"></div><div class=\"line\">Completeable.fromAction(() -&gt; <span class=\"string\">\"Hey jude\"</span>)</div><div class=\"line\">Completeable.fromRunnable(() -&gt; <span class=\"string\">\"ignore\"</span>)</div></pre></td></tr></table></figure></p>\n<h4 id=\"2-create-Rxjava-1Rxjava2\"><a href=\"#2-create-Rxjava-1Rxjava2\" class=\"headerlink\" title=\"2. create(Rxjava 1Rxjava2)\"></a>2. create(Rxjava 1Rxjava2)</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">Observable.create(<span class=\"keyword\">new</span> ObservableOnSubscribe&lt;String&gt;())&#123;</div><div class=\"line\">      <span class=\"meta\">@override</span></div><div class=\"line\">      <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">subscribe</span> <span class=\"params\">(ObservableEmitter&lt;String&gt; e)</span> <span class=\"keyword\">throws</span> Exception</span>&#123; <span class=\"comment\">//subscribe get called whenever there's a new subscriber, emitter is the person that's listening.</span></div><div class=\"line\">      <span class=\"comment\">//</span></div><div class=\"line\">         e.onNext(<span class=\"string\">\"Hello\"</span>);</div><div class=\"line\">         e.onComplete();</div><div class=\"line\">      &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>//ObservablesubscriberonNextonNext</p>\n<p>lambda<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div></pre></td><td class=\"code\"><pre><div class=\"line\">Observable.create(e -&gt;&#123;</div><div class=\"line\">    e.onNext(<span class=\"string\">\"Hello\"</span>);</div><div class=\"line\">    e.onNext(<span class=\"string\">\"Hello\"</span>);</div><div class=\"line\">    e.onComplete();</div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\">Okhttpmodel</div><div class=\"line\">Observable.create(e -&gt;&#123;</div><div class=\"line\">   Call call = client.newCall(request);</div><div class=\"line\">   call.enqueue(<span class=\"keyword\">new</span> Callback())&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span>   <span class=\"title\">onResponse</span><span class=\"params\">(Response r)</span> <span class=\"keyword\">throws</span> IOException</span>&#123;</div><div class=\"line\">      e.onNext(r.body().toString());</div><div class=\"line\">      e.onComplete();</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onFailure</span><span class=\"params\">(IOException e)</span></span>&#123;</div><div class=\"line\">      e.onError(e);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">ObservableEmitter</span>&lt;<span class=\"title\">T</span>&gt; <span class=\"keyword\">extends</span> <span class=\"title\">Emitter</span>&lt;<span class=\"title\">T</span>&gt; </span>&#123;</div><div class=\"line\">    <span class=\"comment\">/**</div><div class=\"line\">     * Sets a Cancellable on this emitter; any previous Disposable</div><div class=\"line\">     * or Cancellation will be unsubscribed/cancelled.</div><div class=\"line\">     * <span class=\"doctag\">@param</span> c the cancellable resource, null is allowed</div><div class=\"line\">     */</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">setCancellable</span><span class=\"params\">(Cancellable c)</span></span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// emittercancel</span></div><div class=\"line\"></div><div class=\"line\">Observable.create(e -&gt;&#123;</div><div class=\"line\">    e.setCacelation(() -view.setOnClickListener(<span class=\"keyword\">null</span>));</div><div class=\"line\">    view.setOnClickListener(v -&gt; e.onNext());</div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// leak View</span></div><div class=\"line\"></div><div class=\"line\">fromCallablecreatedata source</div></pre></td></tr></table></figure></p>\n<h3 id=\"3-\"><a href=\"#3-\" class=\"headerlink\" title=\"3. \"></a>3. </h3><h4 id=\"3-1-observerSubscriber\"><a href=\"#3-1-observerSubscriber\" class=\"headerlink\" title=\"3.1 observerSubscriber\"></a>3.1 observer<T>Subscriber<T></h4><p>ObservableFlowableObserverSubscriber</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Observer</span>&lt;<span class=\"title\">T</span>&gt;</span>&#123;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">onNext</span><span class=\"params\">(T t)</span></span>;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">onComplete</span><span class=\"params\">()</span></span>;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">onError</span><span class=\"params\">(Throwable t)</span></span>;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">onSubscribe</span><span class=\"params\">(Disposable d)</span></span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Disposable</span></span>&#123;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">dispose</span><span class=\"params\">()</span></span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Subscriber</span>&lt;<span class=\"title\">T</span>&gt;</span>&#123;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">onNext</span><span class=\"params\">(T t)</span></span>;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">onComplete</span><span class=\"params\">()</span></span>;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">onError</span><span class=\"params\">(Throwable t)</span></span>;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">onSubscribe</span><span class=\"params\">(Subscription s)</span></span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Subscription</span></span>&#123;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">cancel</span><span class=\"params\">()</span></span>; <span class=\"comment\">//</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">request</span><span class=\"params\">(<span class=\"keyword\">long</span> r)</span> </span>;<span class=\"comment\">//BackPressure</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2 id=\"---Reactive\"><a href=\"#---Reactive\" class=\"headerlink\" title=\"()(Reactive)\"></a>()(Reactive)</h2><p>Observable -&gt; subscribe -&gt; Observer </p>\n<p>Flowable -&gt; subscribe -&gt; Subscription</p>\n<h4 id=\"3-2-onSubscribe\"><a href=\"#3-2-onSubscribe\" class=\"headerlink\" title=\"3.2 onSubscribe\"></a>3.2 onSubscribe</h4><p>base class<br><img src=\"http://odzl05jxx.bkt.clouddn.com/4dab298b9f7ce29c43f9d8eaf686e02f.jpg?imageView2/2/w/600\" alt=\"\"><br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div></pre></td><td class=\"code\"><pre><div class=\"line\">Observable.just(<span class=\"string\">\"Hello\"</span>).subscribe(<span class=\"keyword\">new</span> DisposableObserver&lt;String&gt;() &#123;</div><div class=\"line\">                    <span class=\"meta\">@Override</span></div><div class=\"line\">                    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onNext</span><span class=\"params\">(String value)</span> </span>&#123;</div><div class=\"line\">                    &#125;</div><div class=\"line\"></div><div class=\"line\">                    <span class=\"meta\">@Override</span></div><div class=\"line\">                    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onError</span><span class=\"params\">(Throwable e)</span> </span>&#123;</div><div class=\"line\">                    &#125;</div><div class=\"line\"></div><div class=\"line\">                    <span class=\"meta\">@Override</span></div><div class=\"line\">                    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onComplete</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">                    &#125;</div><div class=\"line\">                &#125;);</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">  DisposableObserverobserver.dispose</div><div class=\"line\">  </div><div class=\"line\">  Disposable disposable =   Observable.just(<span class=\"string\">\"Hello\"</span>).subscribeWith(<span class=\"keyword\">new</span> DisposableObserver&lt;String&gt;() &#123;</div><div class=\"line\">                    <span class=\"meta\">@Override</span></div><div class=\"line\">                    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onNext</span><span class=\"params\">(String value)</span> </span>&#123;</div><div class=\"line\">                    &#125;</div><div class=\"line\"></div><div class=\"line\">                    <span class=\"meta\">@Override</span></div><div class=\"line\">                    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onError</span><span class=\"params\">(Throwable e)</span> </span>&#123;</div><div class=\"line\">                    &#125;</div><div class=\"line\"></div><div class=\"line\">                    <span class=\"meta\">@Override</span></div><div class=\"line\">                    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onComplete</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">                    &#125;</div><div class=\"line\">                &#125;);</div><div class=\"line\"></div><div class=\"line\">   subscribeWithDisposablesubscribe    </div><div class=\"line\"></div><div class=\"line\">  CompositeDisposable,onDestroy  </div><div class=\"line\"></div><div class=\"line\">  ObservableSingleCompleteableMaybeFlowablesubscribewith</div></pre></td></tr></table></figure></p>\n<h3 id=\"4-\"><a href=\"#4-\" class=\"headerlink\" title=\"4. \"></a>4. </h3><blockquote>\n<p>Observable.subscribe<br><br>Flowable.subscribe<br>sbscribeWith<br><br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div></pre></td><td class=\"code\"><pre><div class=\"line\">Observable.fromCallable(<span class=\"keyword\">new</span> Callable&lt;List&lt;String&gt;&gt;() &#123;</div><div class=\"line\">            <span class=\"meta\">@Override</span></div><div class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> List&lt;String&gt; <span class=\"title\">call</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</div><div class=\"line\">                LogUtil.p(<span class=\"string\">\"call do on thread any\"</span>);</div><div class=\"line\">                blockThread(<span class=\"number\">2000</span>); <span class=\"comment\">// block 2s</span></div><div class=\"line\">                <span class=\"keyword\">return</span> Arrays.asList(array);</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;).subscribeOn(Schedulers.computation())</div><div class=\"line\">                .observeOn(AndroidSchedulers.mainThread())</div><div class=\"line\">                .doOnSubscribe(<span class=\"keyword\">new</span> Consumer&lt;Disposable&gt;() &#123;</div><div class=\"line\">                    <span class=\"meta\">@Override</span></div><div class=\"line\">                    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">accept</span><span class=\"params\">(Disposable disposable)</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</div><div class=\"line\">                        LogUtil.p(<span class=\"string\">\"\"</span>);</div><div class=\"line\">                    &#125;</div><div class=\"line\">                &#125;).doOnComplete(<span class=\"keyword\">new</span> Action() &#123;</div><div class=\"line\">            <span class=\"meta\">@Override</span></div><div class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</div><div class=\"line\">                LogUtil.p(<span class=\"string\">\"\"</span>);</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;).doOnNext(<span class=\"keyword\">new</span> Consumer&lt;List&lt;String&gt;&gt;() &#123;</div><div class=\"line\">            <span class=\"meta\">@Override</span></div><div class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">accept</span><span class=\"params\">(List&lt;String&gt; strings)</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</div><div class=\"line\">                LogUtil.p(<span class=\"string\">\"\"</span> + strings.get(<span class=\"number\">0</span>));</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;).doAfterNext(<span class=\"keyword\">new</span> Consumer&lt;List&lt;String&gt;&gt;() &#123;</div><div class=\"line\">            <span class=\"meta\">@Override</span></div><div class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">accept</span><span class=\"params\">(List&lt;String&gt; strings)</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</div><div class=\"line\">                LogUtil.p(<span class=\"string\">\"\"</span>+strings.get(<span class=\"number\">0</span>));</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;).subscribe(<span class=\"keyword\">new</span> Observer&lt;List&lt;String&gt;&gt;() &#123;</div><div class=\"line\">            <span class=\"meta\">@Override</span></div><div class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onSubscribe</span><span class=\"params\">(Disposable d)</span> </span>&#123;</div><div class=\"line\">                LogUtil.p(<span class=\"string\">\"onSubscribe \"</span> + d.isDisposed());</div><div class=\"line\">            &#125;</div><div class=\"line\"></div><div class=\"line\">            <span class=\"meta\">@Override</span></div><div class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onNext</span><span class=\"params\">(List&lt;String&gt; value)</span> </span>&#123;</div><div class=\"line\">                LogUtil.p(<span class=\"string\">\" get Response \"</span> + value.size());</div><div class=\"line\">                value.set(<span class=\"number\">0</span>, <span class=\"string\">\"change first element!\"</span>);</div><div class=\"line\">            &#125;</div><div class=\"line\"></div><div class=\"line\">            <span class=\"meta\">@Override</span></div><div class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onError</span><span class=\"params\">(Throwable e)</span> </span>&#123;</div><div class=\"line\">            &#125;</div><div class=\"line\"></div><div class=\"line\">            <span class=\"meta\">@Override</span></div><div class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onComplete</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">                LogUtil.p(<span class=\"string\">\"\"</span>);</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;);</div><div class=\"line\"></div><div class=\"line\">id </div><div class=\"line\">doOnsubscribe(<span class=\"number\">1</span>) -&gt; onSubscribe(<span class=\"number\">1</span>) -&gt; call(<span class=\"number\">276</span>) -&gt;doOnNext(<span class=\"number\">1</span>)-&gt;onNext(<span class=\"number\">1</span>) -&gt; doAfterNext(<span class=\"number\">1</span>) -&gt;doOnComplete(<span class=\"number\">1</span>)-&gt;onComplete(<span class=\"number\">1</span>)</div><div class=\"line\">doOnXXX= doBeforeXXX,</div><div class=\"line\">OkHttpinterecptergradletask</div></pre></td></tr></table></figure></p>\n</blockquote>\n<h3 id=\"5-Operator-and-Threading\"><a href=\"#5-Operator-and-Threading\" class=\"headerlink\" title=\"5. Operator and Threading\"></a>5. Operator and Threading</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">Observable&lt;String&gt; greeting  = Observable.just(<span class=\"string\">\"Hello\"</span>);</div><div class=\"line\">Observable&lt;String&gt; yelling = greeting.map(s -&gt;s.toUppercase())</div><div class=\"line\"></div><div class=\"line\">Observable.subscribeOn(Schedulers.io()) <span class=\"comment\">//</span></div></pre></td></tr></table></figure>\n<p>subscribeOntask<br><img src=\"http://odzl05jxx.bkt.clouddn.com/reading%20network%20response%20on%20main%20thread.jpg?imageView2/2/w/600\" alt=\"Wrong\"><br><img src=\"http://odzl05jxx.bkt.clouddn.com/observing%20on%20ui%20thred.jpg?imageView2/2/w/600\" alt=\"Ok\"></p>\n<p></p>\n<blockquote>\n<p>Observable -&gt; first() -&gt; single<br>Observable -&gt; firsetElement -&gt; Maybe<br>Observable -&gt; ignoreElements() -&gt;Completable</p>\n<p>Flowable -&gt; first() -&gt; single<br>Flowable -&gt; firsetElement -&gt; Maybe<br>Flowable -&gt; ignoreElements() -&gt;Completable</p>\n</blockquote>\n<ul>\n<li><a href=\"https://github.com/ReactiveX/RxJava/wiki/Combining-Observables\">Combining Observables</a> </li>\n</ul>\n<h2 id=\"objectRxjava2Rxjava1GC\"><a href=\"#objectRxjava2Rxjava1GC\" class=\"headerlink\" title=\"objectRxjava2Rxjava1GC\"></a>objectRxjava2Rxjava1GC</h2><h2 id=\"quote\"><a href=\"#quote\" class=\"headerlink\" title=\"quote:\"></a>quote:</h2><h3 id=\"RxJava-2-is-not-something-new-Reactive-programming-is-not-new-by-any-stretch-but-Android-itself-is-a-highly-reactive-world-that-weve-been-taught-to-model-in-a-very-imperative-stateful-fashion\"><a href=\"#RxJava-2-is-not-something-new-Reactive-programming-is-not-new-by-any-stretch-but-Android-itself-is-a-highly-reactive-world-that-weve-been-taught-to-model-in-a-very-imperative-stateful-fashion\" class=\"headerlink\" title=\"RxJava 2 is not something new. Reactive programming is not new by any stretch, but Android itself is a highly reactive world that weve been taught to model in a very imperative, stateful fashion.\"></a>RxJava 2 is not something new. Reactive programming is not new by any stretch, but Android itself is a highly reactive world that weve been taught to model in a very imperative, stateful fashion.</h3><p>Reactive programming allow us to model it in the proper way: asynchronously. Embrace the asynchronicity of the sources, and instead of trying to manage all the state ourselves, compose them together such that our apps become truly reactive.</p>\n<h3 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h3><p> <a href=\"https://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=6&amp;cad=rja&amp;uact=8&amp;ved=0ahUKEwjlvrfg8bnTAhUI0mMKHcXZC1MQtwIITDAF&amp;url=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DhtIXKI5gOQU&amp;usg=AFQjCNEYczqXGkjYXOUbovtP1CxDPARcXA&amp;sig2=gmLYEd2cVOhI7C2WjOHr9g\">GOTO 2016  Exploring RxJava 2 for Android  Jake Wharton - YouTube</a></p>\n","excerpt":"<p>Jake WhartonRxjava2<br><img src=\"http://odzl05jxx.bkt.clouddn.com/f21a6a245edfe0b19804be5b3df24a3d.jpg?imageView2/2/w/600\" alt=\"\"><br>","more":"</p>\n<h3 id=\"1-Why-Reactive\"><a href=\"#1-Why-Reactive\" class=\"headerlink\" title=\"1. Why Reactive?\"></a>1. Why Reactive?</h3><p>Rxjava<br>startActivityFragmenttransactionRxjavaObservableBuilder PatternRxjavaWikiimmutable objectGC</p>\n<h3 id=\"2-\"><a href=\"#2-\" class=\"headerlink\" title=\"2. \"></a>2. </h3><p>Stream<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">source of data</div><div class=\"line\">listener of data</div><div class=\"line\">methods for modifying data</div></pre></td></tr></table></figure></p>\n<p><img src=\"http://odzl05jxx.bkt.clouddn.com/stream_compose.jpg?imageView2/2/w/600\" alt=\"\"></p>\n<h4 id=\"2-1-\"><a href=\"#2-1-\" class=\"headerlink\" title=\"2.1 \"></a>2.1 </h4><p>Observable<T> Flowable<T>BackPressureBackPressure.<br>ObservableFlowableObserverSubscriber</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Observer</span>&lt;<span class=\"title\">T</span>&gt;</span>&#123;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">onNext</span><span class=\"params\">(T t)</span></span>;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">onComplete</span><span class=\"params\">()</span></span>;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">onError</span><span class=\"params\">(Throwable t)</span></span>;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">onSubscribe</span><span class=\"params\">(Disposable d)</span></span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Disposable</span></span>&#123;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">dispose</span><span class=\"params\">()</span></span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Subscriber</span>&lt;<span class=\"title\">T</span>&gt;</span>&#123;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">onNext</span><span class=\"params\">(T t)</span></div><div class=\"line\">  <span class=\"keyword\">void</span> <span class=\"title\">onComplete</span><span class=\"params\">()</span></span>;;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">onError</span><span class=\"params\">(Throwable t)</span></span>;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">onSubscribe</span><span class=\"params\">(Subscription s)</span></span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Subscription</span></span>&#123;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">cancel</span><span class=\"params\">()</span> <span class=\"comment\">//</span></div><div class=\"line\">  <span class=\"keyword\">void</span> <span class=\"title\">request</span><span class=\"params\">(<span class=\"keyword\">long</span> r)</span> <span class=\"comment\">//BackPressure</span></div><div class=\"line\">&#125;</span></div></pre></td></tr></table></figure>\n<p>DisposablesubscribeResurceResourceObservableFlowable,onSubscribeDisposableActivityonDestroycancel network request.</p>\n<h4 id=\"2-2-\"><a href=\"#2-2-\" class=\"headerlink\" title=\"2.2 \"></a>2.2 </h4><ol>\n<li><p>Single(SingleError)</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Single</span>&lt;<span class=\"title\">T</span>&gt; <span class=\"keyword\">implements</span> <span class=\"title\">SingleSource</span>&lt;<span class=\"title\">T</span>&gt; </span>&#123;&#125;</div></pre></td></tr></table></figure>\n</li>\n<li><p>Completeable(completeableerrorreactive runnalecommand)</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Completable</span> <span class=\"keyword\">implements</span> <span class=\"title\">CompletableSource</span> </span>&#123;&#125;</div></pre></td></tr></table></figure>\n</li>\n</ol>\n<p>error<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">writeFile</span><span class=\"params\">(Stirng data)</span></span>&#123;&#125; </div><div class=\"line\"><span class=\"comment\">// model</span></div><div class=\"line\"><span class=\"function\">Completeable <span class=\"title\">writeFile</span><span class=\"params\">(Stirng data)</span></span>&#123;&#125;</div></pre></td></tr></table></figure></p>\n<ol>\n<li>Maybe(optional)<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Maybe</span>&lt;<span class=\"title\">T</span>&gt; <span class=\"keyword\">implements</span> <span class=\"title\">MaybeSource</span>&lt;<span class=\"title\">T</span>&gt; </span>&#123;&#125;</div></pre></td></tr></table></figure>\n</li>\n</ol>\n<p>static<br><br><img src=\"http://odzl05jxx.bkt.clouddn.com/creating_source_from_iterable.jpg?imageView2/2/w/600\" alt=\"from iterable\"></p>\n<p><img src=\"http://odzl05jxx.bkt.clouddn.com/creating_source_from_just.jpg?imageView2/2/w/600\" alt=\"fromjust\"></p>\n<p></p>\n<h4 id=\"1-fromCallable\"><a href=\"#1-fromCallable\" class=\"headerlink\" title=\"1. fromCallable\"></a>1. fromCallable</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">Observable.fromCallable(<span class=\"keyword\">new</span> Callable&lt;String&gt;()&#123;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"meta\">@override</span> </div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">call</span><span class=\"params\">()</span> throw Exception</span>&#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> getName() <span class=\"comment\">//  synchroniousgetasynchnous,OkHttpClient.newCall(request).execute(); //</span></div><div class=\"line\">&#125;</div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure>\n<p>callobserveronNextonError<br>fromCallableFlowable<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">Flowable.fromCallable(() -&gt; <span class=\"string\">\"Hello Flowable\"</span>);</div><div class=\"line\">Observable.fromCallable(() -&gt; <span class=\"string\">\"Hello Observable\"</span>);</div><div class=\"line\">Maybe.fromCallable(() -&gt; <span class=\"string\">\"Hello Maybe\"</span>);</div><div class=\"line\">Single.fromCallable(() -&gt; <span class=\"string\">\"Hello Single\"</span>);</div><div class=\"line\">Completeable.fromCallable(() -&gt; <span class=\"string\">\"Hello Completeable\"</span>);</div></pre></td></tr></table></figure></p>\n<blockquote>\n<p>fromCallable are for modeling synchronous sourse of a single source of data. </p>\n</blockquote>\n<p><br>MaybeCompleteable,<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">Maybe.fromAction(() -&gt; <span class=\"string\">\"Hey jude\"</span>)</div><div class=\"line\">Maybe.fromRunnable(() -&gt; <span class=\"string\">\"ignore\"</span>)</div><div class=\"line\"></div><div class=\"line\">Completeable.fromAction(() -&gt; <span class=\"string\">\"Hey jude\"</span>)</div><div class=\"line\">Completeable.fromRunnable(() -&gt; <span class=\"string\">\"ignore\"</span>)</div></pre></td></tr></table></figure></p>\n<h4 id=\"2-create-Rxjava-1Rxjava2\"><a href=\"#2-create-Rxjava-1Rxjava2\" class=\"headerlink\" title=\"2. create(Rxjava 1Rxjava2)\"></a>2. create(Rxjava 1Rxjava2)</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">Observable.create(<span class=\"keyword\">new</span> ObservableOnSubscribe&lt;String&gt;())&#123;</div><div class=\"line\">      <span class=\"meta\">@override</span></div><div class=\"line\">      <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">subscribe</span> <span class=\"params\">(ObservableEmitter&lt;String&gt; e)</span> <span class=\"keyword\">throws</span> Exception</span>&#123; <span class=\"comment\">//subscribe get called whenever there's a new subscriber, emitter is the person that's listening.</span></div><div class=\"line\">      <span class=\"comment\">//</span></div><div class=\"line\">         e.onNext(<span class=\"string\">\"Hello\"</span>);</div><div class=\"line\">         e.onComplete();</div><div class=\"line\">      &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>//ObservablesubscriberonNextonNext</p>\n<p>lambda<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div></pre></td><td class=\"code\"><pre><div class=\"line\">Observable.create(e -&gt;&#123;</div><div class=\"line\">    e.onNext(<span class=\"string\">\"Hello\"</span>);</div><div class=\"line\">    e.onNext(<span class=\"string\">\"Hello\"</span>);</div><div class=\"line\">    e.onComplete();</div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\">Okhttpmodel</div><div class=\"line\">Observable.create(e -&gt;&#123;</div><div class=\"line\">   Call call = client.newCall(request);</div><div class=\"line\">   call.enqueue(<span class=\"keyword\">new</span> Callback())&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span>   <span class=\"title\">onResponse</span><span class=\"params\">(Response r)</span> <span class=\"keyword\">throws</span> IOException</span>&#123;</div><div class=\"line\">      e.onNext(r.body().toString());</div><div class=\"line\">      e.onComplete();</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onFailure</span><span class=\"params\">(IOException e)</span></span>&#123;</div><div class=\"line\">      e.onError(e);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">ObservableEmitter</span>&lt;<span class=\"title\">T</span>&gt; <span class=\"keyword\">extends</span> <span class=\"title\">Emitter</span>&lt;<span class=\"title\">T</span>&gt; </span>&#123;</div><div class=\"line\">    <span class=\"comment\">/**</div><div class=\"line\">     * Sets a Cancellable on this emitter; any previous Disposable</div><div class=\"line\">     * or Cancellation will be unsubscribed/cancelled.</div><div class=\"line\">     * <span class=\"doctag\">@param</span> c the cancellable resource, null is allowed</div><div class=\"line\">     */</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">setCancellable</span><span class=\"params\">(Cancellable c)</span></span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// emittercancel</span></div><div class=\"line\"></div><div class=\"line\">Observable.create(e -&gt;&#123;</div><div class=\"line\">    e.setCacelation(() -view.setOnClickListener(<span class=\"keyword\">null</span>));</div><div class=\"line\">    view.setOnClickListener(v -&gt; e.onNext());</div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// leak View</span></div><div class=\"line\"></div><div class=\"line\">fromCallablecreatedata source</div></pre></td></tr></table></figure></p>\n<h3 id=\"3-\"><a href=\"#3-\" class=\"headerlink\" title=\"3. \"></a>3. </h3><h4 id=\"3-1-observerSubscriber\"><a href=\"#3-1-observerSubscriber\" class=\"headerlink\" title=\"3.1 observerSubscriber\"></a>3.1 observer<T>Subscriber<T></h4><p>ObservableFlowableObserverSubscriber</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Observer</span>&lt;<span class=\"title\">T</span>&gt;</span>&#123;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">onNext</span><span class=\"params\">(T t)</span></span>;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">onComplete</span><span class=\"params\">()</span></span>;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">onError</span><span class=\"params\">(Throwable t)</span></span>;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">onSubscribe</span><span class=\"params\">(Disposable d)</span></span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Disposable</span></span>&#123;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">dispose</span><span class=\"params\">()</span></span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Subscriber</span>&lt;<span class=\"title\">T</span>&gt;</span>&#123;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">onNext</span><span class=\"params\">(T t)</span></span>;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">onComplete</span><span class=\"params\">()</span></span>;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">onError</span><span class=\"params\">(Throwable t)</span></span>;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">onSubscribe</span><span class=\"params\">(Subscription s)</span></span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Subscription</span></span>&#123;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">cancel</span><span class=\"params\">()</span></span>; <span class=\"comment\">//</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">request</span><span class=\"params\">(<span class=\"keyword\">long</span> r)</span> </span>;<span class=\"comment\">//BackPressure</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2 id=\"---Reactive\"><a href=\"#---Reactive\" class=\"headerlink\" title=\"()(Reactive)\"></a>()(Reactive)</h2><p>Observable -&gt; subscribe -&gt; Observer </p>\n<p>Flowable -&gt; subscribe -&gt; Subscription</p>\n<h4 id=\"3-2-onSubscribe\"><a href=\"#3-2-onSubscribe\" class=\"headerlink\" title=\"3.2 onSubscribe\"></a>3.2 onSubscribe</h4><p>base class<br><img src=\"http://odzl05jxx.bkt.clouddn.com/4dab298b9f7ce29c43f9d8eaf686e02f.jpg?imageView2/2/w/600\" alt=\"\"><br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div></pre></td><td class=\"code\"><pre><div class=\"line\">Observable.just(<span class=\"string\">\"Hello\"</span>).subscribe(<span class=\"keyword\">new</span> DisposableObserver&lt;String&gt;() &#123;</div><div class=\"line\">                    <span class=\"meta\">@Override</span></div><div class=\"line\">                    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onNext</span><span class=\"params\">(String value)</span> </span>&#123;</div><div class=\"line\">                    &#125;</div><div class=\"line\"></div><div class=\"line\">                    <span class=\"meta\">@Override</span></div><div class=\"line\">                    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onError</span><span class=\"params\">(Throwable e)</span> </span>&#123;</div><div class=\"line\">                    &#125;</div><div class=\"line\"></div><div class=\"line\">                    <span class=\"meta\">@Override</span></div><div class=\"line\">                    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onComplete</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">                    &#125;</div><div class=\"line\">                &#125;);</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">  DisposableObserverobserver.dispose</div><div class=\"line\">  </div><div class=\"line\">  Disposable disposable =   Observable.just(<span class=\"string\">\"Hello\"</span>).subscribeWith(<span class=\"keyword\">new</span> DisposableObserver&lt;String&gt;() &#123;</div><div class=\"line\">                    <span class=\"meta\">@Override</span></div><div class=\"line\">                    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onNext</span><span class=\"params\">(String value)</span> </span>&#123;</div><div class=\"line\">                    &#125;</div><div class=\"line\"></div><div class=\"line\">                    <span class=\"meta\">@Override</span></div><div class=\"line\">                    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onError</span><span class=\"params\">(Throwable e)</span> </span>&#123;</div><div class=\"line\">                    &#125;</div><div class=\"line\"></div><div class=\"line\">                    <span class=\"meta\">@Override</span></div><div class=\"line\">                    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onComplete</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">                    &#125;</div><div class=\"line\">                &#125;);</div><div class=\"line\"></div><div class=\"line\">   subscribeWithDisposablesubscribe    </div><div class=\"line\"></div><div class=\"line\">  CompositeDisposable,onDestroy  </div><div class=\"line\"></div><div class=\"line\">  ObservableSingleCompleteableMaybeFlowablesubscribewith</div></pre></td></tr></table></figure></p>\n<h3 id=\"4-\"><a href=\"#4-\" class=\"headerlink\" title=\"4. \"></a>4. </h3><blockquote>\n<p>Observable.subscribe<br><br>Flowable.subscribe<br>sbscribeWith<br><br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div></pre></td><td class=\"code\"><pre><div class=\"line\">Observable.fromCallable(<span class=\"keyword\">new</span> Callable&lt;List&lt;String&gt;&gt;() &#123;</div><div class=\"line\">            <span class=\"meta\">@Override</span></div><div class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> List&lt;String&gt; <span class=\"title\">call</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</div><div class=\"line\">                LogUtil.p(<span class=\"string\">\"call do on thread any\"</span>);</div><div class=\"line\">                blockThread(<span class=\"number\">2000</span>); <span class=\"comment\">// block 2s</span></div><div class=\"line\">                <span class=\"keyword\">return</span> Arrays.asList(array);</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;).subscribeOn(Schedulers.computation())</div><div class=\"line\">                .observeOn(AndroidSchedulers.mainThread())</div><div class=\"line\">                .doOnSubscribe(<span class=\"keyword\">new</span> Consumer&lt;Disposable&gt;() &#123;</div><div class=\"line\">                    <span class=\"meta\">@Override</span></div><div class=\"line\">                    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">accept</span><span class=\"params\">(Disposable disposable)</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</div><div class=\"line\">                        LogUtil.p(<span class=\"string\">\"\"</span>);</div><div class=\"line\">                    &#125;</div><div class=\"line\">                &#125;).doOnComplete(<span class=\"keyword\">new</span> Action() &#123;</div><div class=\"line\">            <span class=\"meta\">@Override</span></div><div class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</div><div class=\"line\">                LogUtil.p(<span class=\"string\">\"\"</span>);</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;).doOnNext(<span class=\"keyword\">new</span> Consumer&lt;List&lt;String&gt;&gt;() &#123;</div><div class=\"line\">            <span class=\"meta\">@Override</span></div><div class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">accept</span><span class=\"params\">(List&lt;String&gt; strings)</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</div><div class=\"line\">                LogUtil.p(<span class=\"string\">\"\"</span> + strings.get(<span class=\"number\">0</span>));</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;).doAfterNext(<span class=\"keyword\">new</span> Consumer&lt;List&lt;String&gt;&gt;() &#123;</div><div class=\"line\">            <span class=\"meta\">@Override</span></div><div class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">accept</span><span class=\"params\">(List&lt;String&gt; strings)</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</div><div class=\"line\">                LogUtil.p(<span class=\"string\">\"\"</span>+strings.get(<span class=\"number\">0</span>));</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;).subscribe(<span class=\"keyword\">new</span> Observer&lt;List&lt;String&gt;&gt;() &#123;</div><div class=\"line\">            <span class=\"meta\">@Override</span></div><div class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onSubscribe</span><span class=\"params\">(Disposable d)</span> </span>&#123;</div><div class=\"line\">                LogUtil.p(<span class=\"string\">\"onSubscribe \"</span> + d.isDisposed());</div><div class=\"line\">            &#125;</div><div class=\"line\"></div><div class=\"line\">            <span class=\"meta\">@Override</span></div><div class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onNext</span><span class=\"params\">(List&lt;String&gt; value)</span> </span>&#123;</div><div class=\"line\">                LogUtil.p(<span class=\"string\">\" get Response \"</span> + value.size());</div><div class=\"line\">                value.set(<span class=\"number\">0</span>, <span class=\"string\">\"change first element!\"</span>);</div><div class=\"line\">            &#125;</div><div class=\"line\"></div><div class=\"line\">            <span class=\"meta\">@Override</span></div><div class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onError</span><span class=\"params\">(Throwable e)</span> </span>&#123;</div><div class=\"line\">            &#125;</div><div class=\"line\"></div><div class=\"line\">            <span class=\"meta\">@Override</span></div><div class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onComplete</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">                LogUtil.p(<span class=\"string\">\"\"</span>);</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;);</div><div class=\"line\"></div><div class=\"line\">id </div><div class=\"line\">doOnsubscribe(<span class=\"number\">1</span>) -&gt; onSubscribe(<span class=\"number\">1</span>) -&gt; call(<span class=\"number\">276</span>) -&gt;doOnNext(<span class=\"number\">1</span>)-&gt;onNext(<span class=\"number\">1</span>) -&gt; doAfterNext(<span class=\"number\">1</span>) -&gt;doOnComplete(<span class=\"number\">1</span>)-&gt;onComplete(<span class=\"number\">1</span>)</div><div class=\"line\">doOnXXX= doBeforeXXX,</div><div class=\"line\">OkHttpinterecptergradletask</div></pre></td></tr></table></figure></p>\n</blockquote>\n<h3 id=\"5-Operator-and-Threading\"><a href=\"#5-Operator-and-Threading\" class=\"headerlink\" title=\"5. Operator and Threading\"></a>5. Operator and Threading</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">Observable&lt;String&gt; greeting  = Observable.just(<span class=\"string\">\"Hello\"</span>);</div><div class=\"line\">Observable&lt;String&gt; yelling = greeting.map(s -&gt;s.toUppercase())</div><div class=\"line\"></div><div class=\"line\">Observable.subscribeOn(Schedulers.io()) <span class=\"comment\">//</span></div></pre></td></tr></table></figure>\n<p>subscribeOntask<br><img src=\"http://odzl05jxx.bkt.clouddn.com/reading%20network%20response%20on%20main%20thread.jpg?imageView2/2/w/600\" alt=\"Wrong\"><br><img src=\"http://odzl05jxx.bkt.clouddn.com/observing%20on%20ui%20thred.jpg?imageView2/2/w/600\" alt=\"Ok\"></p>\n<p></p>\n<blockquote>\n<p>Observable -&gt; first() -&gt; single<br>Observable -&gt; firsetElement -&gt; Maybe<br>Observable -&gt; ignoreElements() -&gt;Completable</p>\n<p>Flowable -&gt; first() -&gt; single<br>Flowable -&gt; firsetElement -&gt; Maybe<br>Flowable -&gt; ignoreElements() -&gt;Completable</p>\n</blockquote>\n<ul>\n<li><a href=\"https://github.com/ReactiveX/RxJava/wiki/Combining-Observables\">Combining Observables</a> </li>\n</ul>\n<h2 id=\"objectRxjava2Rxjava1GC\"><a href=\"#objectRxjava2Rxjava1GC\" class=\"headerlink\" title=\"objectRxjava2Rxjava1GC\"></a>objectRxjava2Rxjava1GC</h2><h2 id=\"quote\"><a href=\"#quote\" class=\"headerlink\" title=\"quote:\"></a>quote:</h2><h3 id=\"RxJava-2-is-not-something-new-Reactive-programming-is-not-new-by-any-stretch-but-Android-itself-is-a-highly-reactive-world-that-weve-been-taught-to-model-in-a-very-imperative-stateful-fashion\"><a href=\"#RxJava-2-is-not-something-new-Reactive-programming-is-not-new-by-any-stretch-but-Android-itself-is-a-highly-reactive-world-that-weve-been-taught-to-model-in-a-very-imperative-stateful-fashion\" class=\"headerlink\" title=\"RxJava 2 is not something new. Reactive programming is not new by any stretch, but Android itself is a highly reactive world that weve been taught to model in a very imperative, stateful fashion.\"></a>RxJava 2 is not something new. Reactive programming is not new by any stretch, but Android itself is a highly reactive world that weve been taught to model in a very imperative, stateful fashion.</h3><p>Reactive programming allow us to model it in the proper way: asynchronously. Embrace the asynchronicity of the sources, and instead of trying to manage all the state ourselves, compose them together such that our apps become truly reactive.</p>\n<h3 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h3><p> <a href=\"https://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=6&amp;cad=rja&amp;uact=8&amp;ved=0ahUKEwjlvrfg8bnTAhUI0mMKHcXZC1MQtwIITDAF&amp;url=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DhtIXKI5gOQU&amp;usg=AFQjCNEYczqXGkjYXOUbovtP1CxDPARcXA&amp;sig2=gmLYEd2cVOhI7C2WjOHr9g\">GOTO 2016  Exploring RxJava 2 for Android  Jake Wharton - YouTube</a></p>"},{"title":"Kotlinjava","date":"2017-01-13T15:06:13.000Z","_content":"\nKotlinJetbrainjvmbytecodejava\n\n<!--more-->\n\n### 1. \n\n new\n ```\n \n fun main(args : Array<String>) {\n    for (i in args.indices) {\n       print(args[i])\n    }\n}\n\n\n\n\n ```\n fun getStringLength(obj: Any) :Int?{ //\n    if (obj is String) {\n        return obj.length\n    }\n    return 0\n}\n\n ```\n\n lambda\n fun maps(list: List<String>) {\n    list.filter { it.startsWith(\"a\") }\n            .sortedBy { it }\n            .map(String::toUpperCase)\n            .forEach(::print)\n}\n ```\n\n\n \n\n### 2. \n\n ```\n//index\n  val quoteParts = \" YOU JUST TALKED TO MUCH !\".split(\" \")\n            for ((index, value) in quoteParts.withIndex()) {\n                print(\"reading index $index: $value \")\n            }\n ```\n\n\n\n\n### ref\n\n1. [Kotlin in production](https://www.youtube.com/watch?v=mDpnc45WwlI&index=10&list=PLnVy79PaFHMXJha06t6pWfkYcATV4oPvC)\n2. [10 Kotlin Tricks in 10 ish minutes by Jake Wharton](https://www.youtube.com/watch?v=YKzUbeUtTak)\n3. [Try Kotlin](https://try.kotlinlang.org/#/Examples/Basic%20syntax%20walk-through/Null-checks/Null-checks.kt)\n\n","source":"_posts/2017-01-13-embracing-kotlin.md","raw":"---\ntitle: Kotlinjava\ndate: 2017-01-13 23:06:13\ncategories: blog \ntags: [kotlin]\n---\n\nKotlinJetbrainjvmbytecodejava\n\n<!--more-->\n\n### 1. \n\n new\n ```\n \n fun main(args : Array<String>) {\n    for (i in args.indices) {\n       print(args[i])\n    }\n}\n\n\n\n\n ```\n fun getStringLength(obj: Any) :Int?{ //\n    if (obj is String) {\n        return obj.length\n    }\n    return 0\n}\n\n ```\n\n lambda\n fun maps(list: List<String>) {\n    list.filter { it.startsWith(\"a\") }\n            .sortedBy { it }\n            .map(String::toUpperCase)\n            .forEach(::print)\n}\n ```\n\n\n \n\n### 2. \n\n ```\n//index\n  val quoteParts = \" YOU JUST TALKED TO MUCH !\".split(\" \")\n            for ((index, value) in quoteParts.withIndex()) {\n                print(\"reading index $index: $value \")\n            }\n ```\n\n\n\n\n### ref\n\n1. [Kotlin in production](https://www.youtube.com/watch?v=mDpnc45WwlI&index=10&list=PLnVy79PaFHMXJha06t6pWfkYcATV4oPvC)\n2. [10 Kotlin Tricks in 10 ish minutes by Jake Wharton](https://www.youtube.com/watch?v=YKzUbeUtTak)\n3. [Try Kotlin](https://try.kotlinlang.org/#/Examples/Basic%20syntax%20walk-through/Null-checks/Null-checks.kt)\n\n","slug":"2017-01-13-embracing-kotlin","published":1,"updated":"2017-06-25T15:01:31.077Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj50afgx5001gi4vrgvmjeexh","content":"<p>KotlinJetbrainjvmbytecodejava</p>\n<a id=\"more\"></a>\n<h3 id=\"1-\"><a href=\"#1-\" class=\"headerlink\" title=\"1. \"></a>1. </h3><p> new<br> <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"> </div><div class=\"line\"> fun main(args : Array&lt;String&gt;) &#123;</div><div class=\"line\">    for (i in args.indices) &#123;</div><div class=\"line\">       print(args[i])</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"></div></pre></td></tr></table></figure></p>\n<p> fun getStringLength(obj: Any) :Int?{ //<br>    if (obj is String) {<br>        return obj.length<br>    }<br>    return 0<br>}</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"> lambda</div><div class=\"line\"> fun maps(list: List&lt;String&gt;) &#123;</div><div class=\"line\">    list.filter &#123; it.startsWith(&quot;a&quot;) &#125;</div><div class=\"line\">            .sortedBy &#123; it &#125;</div><div class=\"line\">            .map(String::toUpperCase)</div><div class=\"line\">            .forEach(::print)</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"2-\"><a href=\"#2-\" class=\"headerlink\" title=\"2. \"></a>2. </h3> <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">//index</div><div class=\"line\">  val quoteParts = &quot; YOU JUST TALKED TO MUCH !&quot;.split(&quot; &quot;)</div><div class=\"line\">            for ((index, value) in quoteParts.withIndex()) &#123;</div><div class=\"line\">                print(&quot;reading index $index: $value &quot;)</div><div class=\"line\">            &#125;</div></pre></td></tr></table></figure>\n<h3 id=\"ref\"><a href=\"#ref\" class=\"headerlink\" title=\"ref\"></a>ref</h3><ol>\n<li><a href=\"https://www.youtube.com/watch?v=mDpnc45WwlI&amp;index=10&amp;list=PLnVy79PaFHMXJha06t6pWfkYcATV4oPvC\">Kotlin in production</a></li>\n<li><a href=\"https://www.youtube.com/watch?v=YKzUbeUtTak\">10 Kotlin Tricks in 10 ish minutes by Jake Wharton</a></li>\n<li><a href=\"https://try.kotlinlang.org/#/Examples/Basic%20syntax%20walk-through/Null-checks/Null-checks.kt\">Try Kotlin</a></li>\n</ol>\n","excerpt":"<p>KotlinJetbrainjvmbytecodejava</p>","more":"<h3 id=\"1-\"><a href=\"#1-\" class=\"headerlink\" title=\"1. \"></a>1. </h3><p> new<br> <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"> </div><div class=\"line\"> fun main(args : Array&lt;String&gt;) &#123;</div><div class=\"line\">    for (i in args.indices) &#123;</div><div class=\"line\">       print(args[i])</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"></div></pre></td></tr></table></figure></p>\n<p> fun getStringLength(obj: Any) :Int?{ //<br>    if (obj is String) {<br>        return obj.length<br>    }<br>    return 0<br>}</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"> lambda</div><div class=\"line\"> fun maps(list: List&lt;String&gt;) &#123;</div><div class=\"line\">    list.filter &#123; it.startsWith(&quot;a&quot;) &#125;</div><div class=\"line\">            .sortedBy &#123; it &#125;</div><div class=\"line\">            .map(String::toUpperCase)</div><div class=\"line\">            .forEach(::print)</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"2-\"><a href=\"#2-\" class=\"headerlink\" title=\"2. \"></a>2. </h3> <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">//index</div><div class=\"line\">  val quoteParts = &quot; YOU JUST TALKED TO MUCH !&quot;.split(&quot; &quot;)</div><div class=\"line\">            for ((index, value) in quoteParts.withIndex()) &#123;</div><div class=\"line\">                print(&quot;reading index $index: $value &quot;)</div><div class=\"line\">            &#125;</div></pre></td></tr></table></figure>\n<h3 id=\"ref\"><a href=\"#ref\" class=\"headerlink\" title=\"ref\"></a>ref</h3><ol>\n<li><a href=\"https://www.youtube.com/watch?v=mDpnc45WwlI&amp;index=10&amp;list=PLnVy79PaFHMXJha06t6pWfkYcATV4oPvC\">Kotlin in production</a></li>\n<li><a href=\"https://www.youtube.com/watch?v=YKzUbeUtTak\">10 Kotlin Tricks in 10 ish minutes by Jake Wharton</a></li>\n<li><a href=\"https://try.kotlinlang.org/#/Examples/Basic%20syntax%20walk-through/Null-checks/Null-checks.kt\">Try Kotlin</a></li>\n</ol>"},{"title":"View[]","date":"2017-04-03T03:38:10.000Z","_content":"\n[Android](http://www.codexiu.cn/android/blog/40141/)\n\n<!-- more -->\n\n```java\nandroid:alpha \nsetAlpha(float) : 0-101\nandroid:background \nsetBackgroundResource(int) : \nandroid:clickable \nsetClickable(boolean) : \nandroid:contentDescription \nsetContentDescription(CharSequence) : View,View\nandroid:drawingCacheQuality \nsetDrawingCacheQuality(int) : \"3 auto high low\"\nandroid:duplicateParentState \n: \nandroid:fadeScrollbars \nsetScrollbarFadingEnabled(boolean) : ScrollBar\nandroid:fadingEdgeLength \ngetVerticalFadingEdgeLength() : \nandroid:filterTouchesWhenObscured \nsetFilterTouchesWhenObscured(boolean) : view\nandroid:fitsSystemWindows \nsetFitsSystemWindows(boolean) : \nandroid:focusable \nsetFocusable(boolean) : requestFocus()EditTextEditTextfocusablefalseTouchfocusableInTouchModetrue\nandroid:focusableInTouchMode \nsetFocusableInTouchMode(boolean) : TouchView\nandroid:hapticFeedbackEnabled \nsetHapticFeedbackEnabled(boolean) : \nandroid:id \nsetId(int) : Viewlayout.xmlView.findViewById() Activity.findViewById()Viewlayout.xmlid\nandroid:importantForAccessibility \nsetImportantForAccessibility(int) : \nandroid:isScrollContainer \nsetScrollContainer(boolean) : ViewListView/ GridView/ ScrollViewEdidTextandroid:scrollbars\nandroid:keepScreenOn \nsetKeepScreenOn(boolean) : \nandroid:layerType \nsetLayerType(int,Paint) : \"3 none software hardware\"\nandroid:layoutDirection \nsetLayoutDirection(int) : \nandroid:longClickable \nsetLongClickable(boolean) : \nandroid:minHeight \nsetMinimumHeight(int) : \nandroid:minWidth \nsetMinimumWidth(int) : \nandroid:nextFocusDown \nsetNextFocusDownId(int) : viewid\nandroid:nextFocusForward \nsetNextFocusForwardId(int) : viewid\nandroid:nextFocusLeft \nsetNextFocusLeftId(int) : viewid\nandroid:nextFocusRight \nsetNextFocusRightId(int) : viewid\nandroid:nextFocusUp \nsetNextFocusUpId(int) : viewid\nandroid:onClick \nsetOnClick() onClick(View view): \nandroid:padding \nsetPaddingRelative(int,int,int,int) : \nandroid:paddingBottom \nsetPaddingRelative(int,int,int,int) : \nandroid:paddingEnd \nsetPaddingRelative(int,int,int,int) : android:paddingRight\nandroid:paddingLeft \nsetPadding(int,int,int,int) : \nandroid:paddingRight \nsetPadding(int,int,int,int) : \nandroid:paddingStart \nsetPaddingRelative(int,int,int,int) : android:paddingLeft\nandroid:paddingTop \nsetPaddingRelative(int,int,int,int) : \nandroid:requiresFadingEdge \nsetVerticalFadingEdgeEnabled(boolean) : \nandroid:rotation \nsetRotation(float) : \nandroid:rotationX \nsetRotationX(float) : \nandroid:rotationY \nsetRotationY(float) : \nandroid:saveEnabled \nsetSaveEnabled(boolean) : viewviewid\nandroid:scaleX \nsetScaleX(float) : \nandroid:scaleY \nsetScaleY(float) : \nandroid:scrollX \n: x\nandroid:scrollY \n: y\nandroid:scrollbarAlwaysDrawHorizontalTrack \n: \nandroid:scrollbarAlwaysDrawVerticalTrack \n: \nandroid:scrollbarDefaultDelayBeforeFade \nsetScrollBarDefaultDelayBeforeFade(int) : n\nandroid:scrollbarFadeDuration \nsetScrollBarFadeDuration(int) : \nandroid:scrollbarSize \nsetScrollBarSize(int) : \nandroid:scrollbarStyle \nsetScrollBarStyle(int) : \"4 insideOverlay insideInset outsideOverlay outsideInset insidepaddingoutsidepaddingviewOverlayInsetpadding\"\nandroid:scrollbarThumbHorizontal \n: drawable\nandroid:scrollbarThumbVertical \n: drawable\nandroid:scrollbarTrackHorizontal \n: drawable\nandroid:scrollbarTrackVertical \n: drawable\nandroid:scrollbars \n: \"3: none horizontal vertical\"\nandroid:soundEffectsEnabled \nsetSoundEffectsEnabled(boolean) : view\nandroid:tag \n: stringidid\nandroid:textAlignment \nsetTextAlignment(int) : \nandroid:textDirection \nsetTextDirection(int) : \nandroid:transformPivotX \nsetPivotX(float) : \nandroid:transformPivotY \nsetPivotY(float) : \nandroid:translationX \nsetTranslationX(float) : \nandroid:translationY \nsetTranslationY(float) : \nandroid:visibility \nsetVisibility(int) : \"view3 goneview invisibleview visible\"\nTextView\nTextView android:autoLink \nsetAutoLinkMask(int) : URL/email//map(none/web/email/phone/map/all)\nandroid:autoText \nsetKeyListener(KeyListener) : \nandroid:bufferType \nsetText(CharSequence,TextView.BufferType) : getText()editable StringBuildergetTextappend\nandroid:capitalize \nsetKeyListener(KeyListener) : 21\nandroid:cursorVisible \nsetCursorVisible(boolean) : /\nandroid:digits \nsetKeyListener(KeyListener) : 1234567890.+-*/%\\n()\nandroid:drawableBottom \nsetCompoundDrawablesWithIntrinsicBounds(int,int,int,int) : textdrawabletextbackground\nandroid:drawableEnd \nsetCompoundDrawablesRelativeWithIntrinsicBounds(int,int,int,int) : drawable\"@[+][package:]type:name\"\"?[package:][type:]name\"\"#rgb\", \"#argb\", \"#rrggbb\", or \"#aarrggbb\"\nandroid:drawableLeft \nsetCompoundDrawablesWithIntrinsicBounds(int,int,int,int) : textdrawable\nandroid:drawablePadding \nsetCompoundDrawablePadding(int) : textdrawabledrawableLeftdrawableRightdrawableTopdrawableBottom\nandroid:drawableRight \nsetCompoundDrawablesWithIntrinsicBounds(int,int,int,int) : textdrawable\nandroid:drawableStart \nsetCompoundDrawablesRelativeWithIntrinsicBounds(int,int,int,int) : drawable\"@[+][package:]type:name\"\"?[package:][type:]name\"\"#rgb\", \"#argb\", \"#rrggbb\", or \"#aarrggbb\"\nandroid:drawableTop \nsetCompoundDrawablesWithIntrinsicBounds(int,int,int,int) : textdrawable\nandroid:editable \n: EditView\nandroid:editorExtras \nsetInputExtras(int) : EditView\nandroid:ellipsize \nsetEllipsize(TextUtils.TruncateAt) : ,startendmiddle-marquee ()\nandroid:ems \nsetEms(int) : TextViewN\nandroid:fontFamily \nsetTypeface(Typeface) : \nandroid:freezesText \nsetFreezesText(boolean) : \nandroid:gravity \nsetGravity(int) : center\nandroid:height \nsetHeight(int) : px()/dp/sp/in/mm()\nandroid:hint \nsetHint(int) : TexttextColorHint\nandroid:imeActionId \nsetImeActionLabel(CharSequence,int) : IMEID\nandroid:imeActionLabel \nsetImeActionLabel(CharSequence,int) : IMEEditView\nandroid:imeOptions \nsetImeOptions(int) : IMEactionDone\nandroid:includeFontPadding \nsetIncludeFontPadding(boolean) : true\nandroid:inputMethod \nsetKeyListener(KeyListener) : com.google.android.inputmethod.pinyin\nandroid:inputType \nsetRawInputType(int) : EditView\nandroid:lineSpacingExtra \nsetLineSpacing(float,float) : \nandroid:lineSpacingMultiplier \nsetLineSpacing(float,float) : 1.2\nandroid:lines \nsetLines(int) : \nandroid:linksClickable \nsetLinksClickable(boolean) : autoLink\nandroid:marqueeRepeatLimit \nsetMarqueeRepeatLimit(int) : ellipsizemarqueemarquee_forever\nandroid:maxEms \nsetMaxEms(int) : TextViewNemsems\nandroid:maxHeight \nsetMaxHeight(int) : \nandroid:maxLength \nsetFilters(InputFilter) : \nandroid:maxLines \nsetMaxLines(int) : widthlayout_width\nandroid:maxWidth \nsetMaxWidth(int) : \nandroid:minEms \nsetMinEms(int) : TextViewNemsems\nandroid:minHeight \nsetMinHeight(int) : \nandroid:minLines \nsetMinLines(int) : lines\nandroid:minWidth \nsetMinWidth(int) : \nandroid:numeric \nsetKeyListener(KeyListener) : TextViewTextViewEdtiView\nandroid:password \nsetTransformationMethod(TransformationMethod) : .\nandroid:phoneNumber \nsetKeyListener(KeyListener) : \nandroid:privateImeOptions \nsetPrivateImeOptions(String) : EditText\nandroid:scrollHorizontally \nsetHorizontallyScrolling(boolean) : TextView\nandroid:selectAllOnFocus \nsetSelectAllOnFocus(boolean) : TextView\nandroid:shadowColor \nsetShadowLayer(float,float,float,int) : shadowRadius\nandroid:shadowDx \nsetShadowLayer(float,float,float,int) : \nandroid:shadowDy \nsetShadowLayer(float,float,float,int) : \nandroid:shadowRadius \nsetShadowLayer(float,float,float,int) : 0.13.0\nandroid:singleLine \nsetTransformationMethod(TransformationMethod) : layout_widthandroid:text=\"test_ singleLine \" android:singleLine=\"true\" android:layout_width=\"20dp\"tsingleLinefalse\nandroid:text \nsetText(CharSequence,TextView.BufferType) : .\nandroid:textAllCaps \nsetAllCaps(boolean) : \"true\"\"false\"\nandroid:textAppearance \n: ?android:attr/textAppearanceLargeInverse\nandroid:textColor \nsetTextColor(int) : \nandroid:textColorHighlight \nsetHighlightColor(int) : \nandroid:textColorHint \nsetHintTextColor(int) : hint\nandroid:textColorLink \nsetLinkTextColor(int) : .\nandroid:textIsSelectable \nisTextSelectable() : \"true\"\"false\"\nandroid:textScaleX \nsetTextScaleX(float) : 1.0f\nandroid:textSize \nsetTextSize(int,float) : sp15sp\nandroid:textStyle \nsetTypeface(Typeface) : [bold() 0, italic() 1, bolditalic() 2] |\nandroid:typeface \nsetTypeface(Typeface) : normal 0, sans 1, serif 2, monospace() 3]\nandroid:width \nsetWidth(int) : px()/dp/sp/in/mm()\nandroid:fadingEdgeLength\npxdpspinmm\nandroid:fitsSystemWindows\ntruefalse\nandroid:focusable\ntruefalse\nandroid:focusableInTouchMode\ntruefalse\nandroid:hapticFeedbackEnabled\ntruefalse\nandroid:id\nActivityViewfindViewByIdidandroid:id=@+id/id\nandroid:isScrollContainer\ntruefalse\nandroid:keepScreenOn\ntruefalse\nandroid:longClickable\ntruefalse\nandroid:minHeight\nandroid:fadingEdgeLength\nandroid:minWidth\nandroid:fadingEdgeLength\nandroid:nextFocusDown\nid\nandroid:nextFocusLeft\nid\nandroid:nextFocusRight\nid\nandroid:nextFocusUp\nid\nandroid:padding\n4android:fadingEdgeLength\nandroid:paddingBottom\nandroid:padding\nandroid:paddingLeft\nandroid:padding\nandroid:paddingRight\nandroid:padding\nandroid:paddingTop\nandroid:padding\nandroid:saveEnabled\ntruefalse\nandroid:scrollX\nandroid:padding\nandroid:scrollY\nandroid:padding\nandroid:scrollbarAlwaysDrawHorizontalTrack\ntruefalse\nandroid:scrollbarAlwaysDrawVerticalTrack\ntruefalse\nandroid:scrollbarSize\nandroid:padding\nandroid:scrollbarStyle\n\ninsideOverlay\ninsideInset\noutsideOverly\noutsideInset\nandroid:scrollbarThumbHorizontal\n\nandroid:scrollbarThumbVertical\n\nandroid:scrollbarTrackHorizontal\n\nandroid:scrollbarTrackVertical\n\nandroid:scrollbars\n\nnone\nhorizontal\nvertical\nandroid:soundEffectsEnabled\ntruefalse\nandroid:tag\nViewgetTagfindViewByTag\nandroid:visibility\n\nvisible\ninvisible\ngone\nLinearLayout\n\nandroid:baselineAligned\n\nandroid:baselineAlignedChildIndex\n\nandroid:gravity\n\ntop\nbottom\nleft\nright\ncenter_vertical\nfill_vertical\ncenter_horizontal\nfill_horizontal\ncenter\nfill\nclip_vertical\nclip_horizontal\nandroid:orientation\n\nhorizontal\nvertical\nandroid:weightSum\n\n\nLinearLayout_Layout\n\nandroid:layout_gravity\n\nandroid:layout_height\n\nandroid:layout_weight\n\nandroid:layout_width\n\n\nRalativeLayout\n\nandroid:gravity\n\nandroid:ignoreGravity\n\n\nRalativeLayout_Layout\n\nandroid:layout_above\nID\nandroid:layout_alignBaseline\nID\nandroid:layout_alignBottom\nID\nandroid:layout_alignLeft\nID\nandroid:layout_alignParenBottom\ntruefalse\nandroid:layout_alignParentLeft\ntruefalse\nandroid:layout_alignParentRight\ntruefalse\nandroid:layout_alignParentTop\ntruefalse\nandroid:layout_alignRight\nID\nandroid:layout_alignTop\nID\nandroid:layout_alignWithParentIfMissing\n truefalse\nandroid:layout_below\nID\nandroid:layout_centerHorizontal\n\nandroid:layout_centerInParent\n\nandroid:layout_centerVertical\n\nandroid:layout_toLeftOf\nID\nandroid:layout_toRightOf\nID\n\nAbsoluteLayout_Layout\n\nandroid:layout_x\nx\nandroid:layout_y\ny\n\nFrameLayout\n\nandroid:foreground\n\nandroid:foregroundGravity\n\nandroid:measureAllChildren\n\nandroid:layout_gravity\n\n\nFrameLayout_Layout\n\nandroid:layout_gravity\n\n\nTableLayout\n\nandroid:collapseColumns\n0,\nandroid:shrinkColumns\n0,\nandroid:stretchColumns\n0,\nTableRow_Cell\n\nandroid:layout_column\n0\nandroid:layout_span\n\n\nAbsListView\n\nandroid:cacheColorHint\n\nandroid:drawSelectorOnTop\ntruefalse\nandroid:fastScrollEnabled\n\nandroid:listSelector\n\nandroid:scrollingCache\ntruefalse\nandroid:smoothScrollbar\n\nandroid:stackFromBottom\n\nandroid:textFilterEnbled\n\nandroid:transcriptMode\n\nListView\n\nandroid:choiceMode\n\nandroid:divider\n\nandroid:dividerHeight\n\nandroid:entries\n\nandroid:footerDividersEnabled\n\nandroid:headerDividersEnabled\n\n\nGridView\n\nandroid:columnWidth\n\nandroid:gravity\n\nandroid:horizontalSpacing\n\nandroid:numColumns\n\nandroid:strechMode\n\nandroid:verticalSpacing\n\n\nGallery\n\nandroid:animationDuration\n\nandroid:gravity\n\nandroid:spacing\n\nandroid:unselectedAlpha\n\n\nTextView\n\nandroid:autoLink\n\nandroid:autoText\n\nandroid:bufferType\n\nandroid:capitalize\n\nandroid:cursorVisible\ntruefalse\nandroid:digits\n\nandroid:drawableBottom\n\nandroid:drawableLeft\n\nandroid: drawablePadding\n\nandroid: drawableRight\n\nandroid: drawableTop\n\nandroid:editable\ntruefalse\nandroid:editorExtras\nEditView\nandroid:ellipsize\n\nandroid:ems\nTextViewN\nandroid:enabled\ntruefalse\nandroid:freezesText\n\nandroid:gravity\n\nandroid:height\n\nandroid:hint\n\nandroid:imeActionId\nIMEID\nandroid:imeActionLabel\nIME\nandroid:imeOptions\n\nandroid:includeFontPadding\ntrue\nandroid:inputMethod\n\nandroid:inputType\n\nnone\ntext\ntextCapCharacters\ntextCapWords\ntextCapSentences\ntextAutoCorret\ntextAutoComplete\ntextMultiLine\ntextUriUri\ntextEmailAddress\ntextEmailSubject\ntextShortMessage\ntextLongMessage\ntextPersonName\ntextPostalAddress\ntextPassword\ntextVIsiblePassword\ntextWebEditText\ntextFilter\ntextPhonetic\nnumber\nnumberSigned\nnumberDecimal\nphone\ndatetime\ndate\ntime\nandroid:lineSpacingExtra\n \nandroid:lineSpacingMultiplier\n\nandroid:lines\n\nandroid:linksClickable\nautoLick\nandroid:marqueeRepeatLimit\n\nandroid:maxEms\nTextViewNemsems \nandroid:maxHeight\n\nandroid:maxLength\n\nandroid:maxLines\n\nandroid:minWidth\n\nandroid:minEms\nTextViewNemsems\n \nandroid:minHeight\n\nandroid:minLines\n\nandroid:minWidth\n\nandroid:numeric\n\nandroid:password\n\nandroid:phonenumber\n\nandroid:privateImeOptions\n \nandroid:scrollHorizontally\nTextView \nandroid:selectAllOnFocus\nTextView\nandroid:shadowColor\n\nandroid:shadowDx\n\nandroid:shadowDy\n\nandroid:shadowRadius\n\nandroid:singleLine\n\nandroid:text\n\nandroid:textApperance\n\nandroid:textColor\n\nandroid: textColorHighlight\n\nandroid: textColorHint\n\nandroid:textColorLink\n\nandroid:textScaleX\n\nandroid:textSize\n\nandroid:textStyle\n\nbold\nitalic\nbolditalic\nandroid:typeface\n\nandroid:width\n\n\nAutoCompleteTextView\n\nandroid:completionHint\n\nandroid:completionHintView\n\nandroid:completionThreshold\n\nandroid:dropDownAnchor\n\nandroid:dropDownSelector\n\nandroid:dropDownWIdth\n\n\nImageView\n\nandroid:adjustViewBounds\n\nandroid:baselineAlignBottom\n\nandroid:cropToPadding\n\nandroid:maxHeight\n\nandroid:maxWidth\n\nandroid:scaleType\n\nmatrix\nfitXY\nfitStart\nfitCenter\nfitEnd\ncenter\ncenterCrop\ncenterInside\nandroid:src\n\nandroid:tint\n\nandroid:layout_above=\"@id/xxx\" \nID \nandroid:layout_below=\"@id/xxx\"\nID\nandroid:layout_toLeftOf=\"@id/xxx\" \nID \nandroid:layout_toRightOf=\"@id/xxx\" \nID\nandroid:layout_alignLeft=\"@id/xxx\" \nID\nandroid:layout_alignTop=\"@id/xxx\" \nID\n \nandroid:layout_alignRight=\"@id/xxx\"\nID\nandroid:layout_alignBottom=\"@id/xxx\" \nID \nandroid:layout_alignParentLeft=\"true\" \n \nandroid:layout_alignParentTop=\"true\" \n \nandroid:layout_alignParentRight=\"true\" \n \nandroid:layout_alignParentBottom=\"true\" \n\n android:layout_centerInParent=\"true\" \n  \n \n android:layout_centerHorizontal=\"true\" \n  \n \n android:layout_centerVertical=\"true\" \n \n ```\n","source":"_posts/2017-04-03-properties-of-view.md","raw":"---\ntitle: View[]\ndate: 2017-04-03 11:38:10\ncategories: blog \ntags: [android,notes]\n---\n\n[Android](http://www.codexiu.cn/android/blog/40141/)\n\n<!-- more -->\n\n```java\nandroid:alpha \nsetAlpha(float) : 0-101\nandroid:background \nsetBackgroundResource(int) : \nandroid:clickable \nsetClickable(boolean) : \nandroid:contentDescription \nsetContentDescription(CharSequence) : View,View\nandroid:drawingCacheQuality \nsetDrawingCacheQuality(int) : \"3 auto high low\"\nandroid:duplicateParentState \n: \nandroid:fadeScrollbars \nsetScrollbarFadingEnabled(boolean) : ScrollBar\nandroid:fadingEdgeLength \ngetVerticalFadingEdgeLength() : \nandroid:filterTouchesWhenObscured \nsetFilterTouchesWhenObscured(boolean) : view\nandroid:fitsSystemWindows \nsetFitsSystemWindows(boolean) : \nandroid:focusable \nsetFocusable(boolean) : requestFocus()EditTextEditTextfocusablefalseTouchfocusableInTouchModetrue\nandroid:focusableInTouchMode \nsetFocusableInTouchMode(boolean) : TouchView\nandroid:hapticFeedbackEnabled \nsetHapticFeedbackEnabled(boolean) : \nandroid:id \nsetId(int) : Viewlayout.xmlView.findViewById() Activity.findViewById()Viewlayout.xmlid\nandroid:importantForAccessibility \nsetImportantForAccessibility(int) : \nandroid:isScrollContainer \nsetScrollContainer(boolean) : ViewListView/ GridView/ ScrollViewEdidTextandroid:scrollbars\nandroid:keepScreenOn \nsetKeepScreenOn(boolean) : \nandroid:layerType \nsetLayerType(int,Paint) : \"3 none software hardware\"\nandroid:layoutDirection \nsetLayoutDirection(int) : \nandroid:longClickable \nsetLongClickable(boolean) : \nandroid:minHeight \nsetMinimumHeight(int) : \nandroid:minWidth \nsetMinimumWidth(int) : \nandroid:nextFocusDown \nsetNextFocusDownId(int) : viewid\nandroid:nextFocusForward \nsetNextFocusForwardId(int) : viewid\nandroid:nextFocusLeft \nsetNextFocusLeftId(int) : viewid\nandroid:nextFocusRight \nsetNextFocusRightId(int) : viewid\nandroid:nextFocusUp \nsetNextFocusUpId(int) : viewid\nandroid:onClick \nsetOnClick() onClick(View view): \nandroid:padding \nsetPaddingRelative(int,int,int,int) : \nandroid:paddingBottom \nsetPaddingRelative(int,int,int,int) : \nandroid:paddingEnd \nsetPaddingRelative(int,int,int,int) : android:paddingRight\nandroid:paddingLeft \nsetPadding(int,int,int,int) : \nandroid:paddingRight \nsetPadding(int,int,int,int) : \nandroid:paddingStart \nsetPaddingRelative(int,int,int,int) : android:paddingLeft\nandroid:paddingTop \nsetPaddingRelative(int,int,int,int) : \nandroid:requiresFadingEdge \nsetVerticalFadingEdgeEnabled(boolean) : \nandroid:rotation \nsetRotation(float) : \nandroid:rotationX \nsetRotationX(float) : \nandroid:rotationY \nsetRotationY(float) : \nandroid:saveEnabled \nsetSaveEnabled(boolean) : viewviewid\nandroid:scaleX \nsetScaleX(float) : \nandroid:scaleY \nsetScaleY(float) : \nandroid:scrollX \n: x\nandroid:scrollY \n: y\nandroid:scrollbarAlwaysDrawHorizontalTrack \n: \nandroid:scrollbarAlwaysDrawVerticalTrack \n: \nandroid:scrollbarDefaultDelayBeforeFade \nsetScrollBarDefaultDelayBeforeFade(int) : n\nandroid:scrollbarFadeDuration \nsetScrollBarFadeDuration(int) : \nandroid:scrollbarSize \nsetScrollBarSize(int) : \nandroid:scrollbarStyle \nsetScrollBarStyle(int) : \"4 insideOverlay insideInset outsideOverlay outsideInset insidepaddingoutsidepaddingviewOverlayInsetpadding\"\nandroid:scrollbarThumbHorizontal \n: drawable\nandroid:scrollbarThumbVertical \n: drawable\nandroid:scrollbarTrackHorizontal \n: drawable\nandroid:scrollbarTrackVertical \n: drawable\nandroid:scrollbars \n: \"3: none horizontal vertical\"\nandroid:soundEffectsEnabled \nsetSoundEffectsEnabled(boolean) : view\nandroid:tag \n: stringidid\nandroid:textAlignment \nsetTextAlignment(int) : \nandroid:textDirection \nsetTextDirection(int) : \nandroid:transformPivotX \nsetPivotX(float) : \nandroid:transformPivotY \nsetPivotY(float) : \nandroid:translationX \nsetTranslationX(float) : \nandroid:translationY \nsetTranslationY(float) : \nandroid:visibility \nsetVisibility(int) : \"view3 goneview invisibleview visible\"\nTextView\nTextView android:autoLink \nsetAutoLinkMask(int) : URL/email//map(none/web/email/phone/map/all)\nandroid:autoText \nsetKeyListener(KeyListener) : \nandroid:bufferType \nsetText(CharSequence,TextView.BufferType) : getText()editable StringBuildergetTextappend\nandroid:capitalize \nsetKeyListener(KeyListener) : 21\nandroid:cursorVisible \nsetCursorVisible(boolean) : /\nandroid:digits \nsetKeyListener(KeyListener) : 1234567890.+-*/%\\n()\nandroid:drawableBottom \nsetCompoundDrawablesWithIntrinsicBounds(int,int,int,int) : textdrawabletextbackground\nandroid:drawableEnd \nsetCompoundDrawablesRelativeWithIntrinsicBounds(int,int,int,int) : drawable\"@[+][package:]type:name\"\"?[package:][type:]name\"\"#rgb\", \"#argb\", \"#rrggbb\", or \"#aarrggbb\"\nandroid:drawableLeft \nsetCompoundDrawablesWithIntrinsicBounds(int,int,int,int) : textdrawable\nandroid:drawablePadding \nsetCompoundDrawablePadding(int) : textdrawabledrawableLeftdrawableRightdrawableTopdrawableBottom\nandroid:drawableRight \nsetCompoundDrawablesWithIntrinsicBounds(int,int,int,int) : textdrawable\nandroid:drawableStart \nsetCompoundDrawablesRelativeWithIntrinsicBounds(int,int,int,int) : drawable\"@[+][package:]type:name\"\"?[package:][type:]name\"\"#rgb\", \"#argb\", \"#rrggbb\", or \"#aarrggbb\"\nandroid:drawableTop \nsetCompoundDrawablesWithIntrinsicBounds(int,int,int,int) : textdrawable\nandroid:editable \n: EditView\nandroid:editorExtras \nsetInputExtras(int) : EditView\nandroid:ellipsize \nsetEllipsize(TextUtils.TruncateAt) : ,startendmiddle-marquee ()\nandroid:ems \nsetEms(int) : TextViewN\nandroid:fontFamily \nsetTypeface(Typeface) : \nandroid:freezesText \nsetFreezesText(boolean) : \nandroid:gravity \nsetGravity(int) : center\nandroid:height \nsetHeight(int) : px()/dp/sp/in/mm()\nandroid:hint \nsetHint(int) : TexttextColorHint\nandroid:imeActionId \nsetImeActionLabel(CharSequence,int) : IMEID\nandroid:imeActionLabel \nsetImeActionLabel(CharSequence,int) : IMEEditView\nandroid:imeOptions \nsetImeOptions(int) : IMEactionDone\nandroid:includeFontPadding \nsetIncludeFontPadding(boolean) : true\nandroid:inputMethod \nsetKeyListener(KeyListener) : com.google.android.inputmethod.pinyin\nandroid:inputType \nsetRawInputType(int) : EditView\nandroid:lineSpacingExtra \nsetLineSpacing(float,float) : \nandroid:lineSpacingMultiplier \nsetLineSpacing(float,float) : 1.2\nandroid:lines \nsetLines(int) : \nandroid:linksClickable \nsetLinksClickable(boolean) : autoLink\nandroid:marqueeRepeatLimit \nsetMarqueeRepeatLimit(int) : ellipsizemarqueemarquee_forever\nandroid:maxEms \nsetMaxEms(int) : TextViewNemsems\nandroid:maxHeight \nsetMaxHeight(int) : \nandroid:maxLength \nsetFilters(InputFilter) : \nandroid:maxLines \nsetMaxLines(int) : widthlayout_width\nandroid:maxWidth \nsetMaxWidth(int) : \nandroid:minEms \nsetMinEms(int) : TextViewNemsems\nandroid:minHeight \nsetMinHeight(int) : \nandroid:minLines \nsetMinLines(int) : lines\nandroid:minWidth \nsetMinWidth(int) : \nandroid:numeric \nsetKeyListener(KeyListener) : TextViewTextViewEdtiView\nandroid:password \nsetTransformationMethod(TransformationMethod) : .\nandroid:phoneNumber \nsetKeyListener(KeyListener) : \nandroid:privateImeOptions \nsetPrivateImeOptions(String) : EditText\nandroid:scrollHorizontally \nsetHorizontallyScrolling(boolean) : TextView\nandroid:selectAllOnFocus \nsetSelectAllOnFocus(boolean) : TextView\nandroid:shadowColor \nsetShadowLayer(float,float,float,int) : shadowRadius\nandroid:shadowDx \nsetShadowLayer(float,float,float,int) : \nandroid:shadowDy \nsetShadowLayer(float,float,float,int) : \nandroid:shadowRadius \nsetShadowLayer(float,float,float,int) : 0.13.0\nandroid:singleLine \nsetTransformationMethod(TransformationMethod) : layout_widthandroid:text=\"test_ singleLine \" android:singleLine=\"true\" android:layout_width=\"20dp\"tsingleLinefalse\nandroid:text \nsetText(CharSequence,TextView.BufferType) : .\nandroid:textAllCaps \nsetAllCaps(boolean) : \"true\"\"false\"\nandroid:textAppearance \n: ?android:attr/textAppearanceLargeInverse\nandroid:textColor \nsetTextColor(int) : \nandroid:textColorHighlight \nsetHighlightColor(int) : \nandroid:textColorHint \nsetHintTextColor(int) : hint\nandroid:textColorLink \nsetLinkTextColor(int) : .\nandroid:textIsSelectable \nisTextSelectable() : \"true\"\"false\"\nandroid:textScaleX \nsetTextScaleX(float) : 1.0f\nandroid:textSize \nsetTextSize(int,float) : sp15sp\nandroid:textStyle \nsetTypeface(Typeface) : [bold() 0, italic() 1, bolditalic() 2] |\nandroid:typeface \nsetTypeface(Typeface) : normal 0, sans 1, serif 2, monospace() 3]\nandroid:width \nsetWidth(int) : px()/dp/sp/in/mm()\nandroid:fadingEdgeLength\npxdpspinmm\nandroid:fitsSystemWindows\ntruefalse\nandroid:focusable\ntruefalse\nandroid:focusableInTouchMode\ntruefalse\nandroid:hapticFeedbackEnabled\ntruefalse\nandroid:id\nActivityViewfindViewByIdidandroid:id=@+id/id\nandroid:isScrollContainer\ntruefalse\nandroid:keepScreenOn\ntruefalse\nandroid:longClickable\ntruefalse\nandroid:minHeight\nandroid:fadingEdgeLength\nandroid:minWidth\nandroid:fadingEdgeLength\nandroid:nextFocusDown\nid\nandroid:nextFocusLeft\nid\nandroid:nextFocusRight\nid\nandroid:nextFocusUp\nid\nandroid:padding\n4android:fadingEdgeLength\nandroid:paddingBottom\nandroid:padding\nandroid:paddingLeft\nandroid:padding\nandroid:paddingRight\nandroid:padding\nandroid:paddingTop\nandroid:padding\nandroid:saveEnabled\ntruefalse\nandroid:scrollX\nandroid:padding\nandroid:scrollY\nandroid:padding\nandroid:scrollbarAlwaysDrawHorizontalTrack\ntruefalse\nandroid:scrollbarAlwaysDrawVerticalTrack\ntruefalse\nandroid:scrollbarSize\nandroid:padding\nandroid:scrollbarStyle\n\ninsideOverlay\ninsideInset\noutsideOverly\noutsideInset\nandroid:scrollbarThumbHorizontal\n\nandroid:scrollbarThumbVertical\n\nandroid:scrollbarTrackHorizontal\n\nandroid:scrollbarTrackVertical\n\nandroid:scrollbars\n\nnone\nhorizontal\nvertical\nandroid:soundEffectsEnabled\ntruefalse\nandroid:tag\nViewgetTagfindViewByTag\nandroid:visibility\n\nvisible\ninvisible\ngone\nLinearLayout\n\nandroid:baselineAligned\n\nandroid:baselineAlignedChildIndex\n\nandroid:gravity\n\ntop\nbottom\nleft\nright\ncenter_vertical\nfill_vertical\ncenter_horizontal\nfill_horizontal\ncenter\nfill\nclip_vertical\nclip_horizontal\nandroid:orientation\n\nhorizontal\nvertical\nandroid:weightSum\n\n\nLinearLayout_Layout\n\nandroid:layout_gravity\n\nandroid:layout_height\n\nandroid:layout_weight\n\nandroid:layout_width\n\n\nRalativeLayout\n\nandroid:gravity\n\nandroid:ignoreGravity\n\n\nRalativeLayout_Layout\n\nandroid:layout_above\nID\nandroid:layout_alignBaseline\nID\nandroid:layout_alignBottom\nID\nandroid:layout_alignLeft\nID\nandroid:layout_alignParenBottom\ntruefalse\nandroid:layout_alignParentLeft\ntruefalse\nandroid:layout_alignParentRight\ntruefalse\nandroid:layout_alignParentTop\ntruefalse\nandroid:layout_alignRight\nID\nandroid:layout_alignTop\nID\nandroid:layout_alignWithParentIfMissing\n truefalse\nandroid:layout_below\nID\nandroid:layout_centerHorizontal\n\nandroid:layout_centerInParent\n\nandroid:layout_centerVertical\n\nandroid:layout_toLeftOf\nID\nandroid:layout_toRightOf\nID\n\nAbsoluteLayout_Layout\n\nandroid:layout_x\nx\nandroid:layout_y\ny\n\nFrameLayout\n\nandroid:foreground\n\nandroid:foregroundGravity\n\nandroid:measureAllChildren\n\nandroid:layout_gravity\n\n\nFrameLayout_Layout\n\nandroid:layout_gravity\n\n\nTableLayout\n\nandroid:collapseColumns\n0,\nandroid:shrinkColumns\n0,\nandroid:stretchColumns\n0,\nTableRow_Cell\n\nandroid:layout_column\n0\nandroid:layout_span\n\n\nAbsListView\n\nandroid:cacheColorHint\n\nandroid:drawSelectorOnTop\ntruefalse\nandroid:fastScrollEnabled\n\nandroid:listSelector\n\nandroid:scrollingCache\ntruefalse\nandroid:smoothScrollbar\n\nandroid:stackFromBottom\n\nandroid:textFilterEnbled\n\nandroid:transcriptMode\n\nListView\n\nandroid:choiceMode\n\nandroid:divider\n\nandroid:dividerHeight\n\nandroid:entries\n\nandroid:footerDividersEnabled\n\nandroid:headerDividersEnabled\n\n\nGridView\n\nandroid:columnWidth\n\nandroid:gravity\n\nandroid:horizontalSpacing\n\nandroid:numColumns\n\nandroid:strechMode\n\nandroid:verticalSpacing\n\n\nGallery\n\nandroid:animationDuration\n\nandroid:gravity\n\nandroid:spacing\n\nandroid:unselectedAlpha\n\n\nTextView\n\nandroid:autoLink\n\nandroid:autoText\n\nandroid:bufferType\n\nandroid:capitalize\n\nandroid:cursorVisible\ntruefalse\nandroid:digits\n\nandroid:drawableBottom\n\nandroid:drawableLeft\n\nandroid: drawablePadding\n\nandroid: drawableRight\n\nandroid: drawableTop\n\nandroid:editable\ntruefalse\nandroid:editorExtras\nEditView\nandroid:ellipsize\n\nandroid:ems\nTextViewN\nandroid:enabled\ntruefalse\nandroid:freezesText\n\nandroid:gravity\n\nandroid:height\n\nandroid:hint\n\nandroid:imeActionId\nIMEID\nandroid:imeActionLabel\nIME\nandroid:imeOptions\n\nandroid:includeFontPadding\ntrue\nandroid:inputMethod\n\nandroid:inputType\n\nnone\ntext\ntextCapCharacters\ntextCapWords\ntextCapSentences\ntextAutoCorret\ntextAutoComplete\ntextMultiLine\ntextUriUri\ntextEmailAddress\ntextEmailSubject\ntextShortMessage\ntextLongMessage\ntextPersonName\ntextPostalAddress\ntextPassword\ntextVIsiblePassword\ntextWebEditText\ntextFilter\ntextPhonetic\nnumber\nnumberSigned\nnumberDecimal\nphone\ndatetime\ndate\ntime\nandroid:lineSpacingExtra\n \nandroid:lineSpacingMultiplier\n\nandroid:lines\n\nandroid:linksClickable\nautoLick\nandroid:marqueeRepeatLimit\n\nandroid:maxEms\nTextViewNemsems \nandroid:maxHeight\n\nandroid:maxLength\n\nandroid:maxLines\n\nandroid:minWidth\n\nandroid:minEms\nTextViewNemsems\n \nandroid:minHeight\n\nandroid:minLines\n\nandroid:minWidth\n\nandroid:numeric\n\nandroid:password\n\nandroid:phonenumber\n\nandroid:privateImeOptions\n \nandroid:scrollHorizontally\nTextView \nandroid:selectAllOnFocus\nTextView\nandroid:shadowColor\n\nandroid:shadowDx\n\nandroid:shadowDy\n\nandroid:shadowRadius\n\nandroid:singleLine\n\nandroid:text\n\nandroid:textApperance\n\nandroid:textColor\n\nandroid: textColorHighlight\n\nandroid: textColorHint\n\nandroid:textColorLink\n\nandroid:textScaleX\n\nandroid:textSize\n\nandroid:textStyle\n\nbold\nitalic\nbolditalic\nandroid:typeface\n\nandroid:width\n\n\nAutoCompleteTextView\n\nandroid:completionHint\n\nandroid:completionHintView\n\nandroid:completionThreshold\n\nandroid:dropDownAnchor\n\nandroid:dropDownSelector\n\nandroid:dropDownWIdth\n\n\nImageView\n\nandroid:adjustViewBounds\n\nandroid:baselineAlignBottom\n\nandroid:cropToPadding\n\nandroid:maxHeight\n\nandroid:maxWidth\n\nandroid:scaleType\n\nmatrix\nfitXY\nfitStart\nfitCenter\nfitEnd\ncenter\ncenterCrop\ncenterInside\nandroid:src\n\nandroid:tint\n\nandroid:layout_above=\"@id/xxx\" \nID \nandroid:layout_below=\"@id/xxx\"\nID\nandroid:layout_toLeftOf=\"@id/xxx\" \nID \nandroid:layout_toRightOf=\"@id/xxx\" \nID\nandroid:layout_alignLeft=\"@id/xxx\" \nID\nandroid:layout_alignTop=\"@id/xxx\" \nID\n \nandroid:layout_alignRight=\"@id/xxx\"\nID\nandroid:layout_alignBottom=\"@id/xxx\" \nID \nandroid:layout_alignParentLeft=\"true\" \n \nandroid:layout_alignParentTop=\"true\" \n \nandroid:layout_alignParentRight=\"true\" \n \nandroid:layout_alignParentBottom=\"true\" \n\n android:layout_centerInParent=\"true\" \n  \n \n android:layout_centerHorizontal=\"true\" \n  \n \n android:layout_centerVertical=\"true\" \n \n ```\n","slug":"2017-04-03-properties-of-view","published":1,"updated":"2017-06-15T15:20:22.769Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj50afgx5001ji4vrjnwiyj0f","content":"<p><a href=\"http://www.codexiu.cn/android/blog/40141/\">Android</a></p>\n<a id=\"more\"></a>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div><div class=\"line\">103</div><div class=\"line\">104</div><div class=\"line\">105</div><div class=\"line\">106</div><div class=\"line\">107</div><div class=\"line\">108</div><div class=\"line\">109</div><div class=\"line\">110</div><div class=\"line\">111</div><div class=\"line\">112</div><div class=\"line\">113</div><div class=\"line\">114</div><div class=\"line\">115</div><div class=\"line\">116</div><div class=\"line\">117</div><div class=\"line\">118</div><div class=\"line\">119</div><div class=\"line\">120</div><div class=\"line\">121</div><div class=\"line\">122</div><div class=\"line\">123</div><div class=\"line\">124</div><div class=\"line\">125</div><div class=\"line\">126</div><div class=\"line\">127</div><div class=\"line\">128</div><div class=\"line\">129</div><div class=\"line\">130</div><div class=\"line\">131</div><div class=\"line\">132</div><div class=\"line\">133</div><div class=\"line\">134</div><div class=\"line\">135</div><div class=\"line\">136</div><div class=\"line\">137</div><div class=\"line\">138</div><div class=\"line\">139</div><div class=\"line\">140</div><div class=\"line\">141</div><div class=\"line\">142</div><div class=\"line\">143</div><div class=\"line\">144</div><div class=\"line\">145</div><div class=\"line\">146</div><div class=\"line\">147</div><div class=\"line\">148</div><div class=\"line\">149</div><div class=\"line\">150</div><div class=\"line\">151</div><div class=\"line\">152</div><div class=\"line\">153</div><div class=\"line\">154</div><div class=\"line\">155</div><div class=\"line\">156</div><div class=\"line\">157</div><div class=\"line\">158</div><div class=\"line\">159</div><div class=\"line\">160</div><div class=\"line\">161</div><div class=\"line\">162</div><div class=\"line\">163</div><div class=\"line\">164</div><div class=\"line\">165</div><div class=\"line\">166</div><div class=\"line\">167</div><div class=\"line\">168</div><div class=\"line\">169</div><div class=\"line\">170</div><div class=\"line\">171</div><div class=\"line\">172</div><div class=\"line\">173</div><div class=\"line\">174</div><div class=\"line\">175</div><div class=\"line\">176</div><div class=\"line\">177</div><div class=\"line\">178</div><div class=\"line\">179</div><div class=\"line\">180</div><div class=\"line\">181</div><div class=\"line\">182</div><div class=\"line\">183</div><div class=\"line\">184</div><div class=\"line\">185</div><div class=\"line\">186</div><div class=\"line\">187</div><div class=\"line\">188</div><div class=\"line\">189</div><div class=\"line\">190</div><div class=\"line\">191</div><div class=\"line\">192</div><div class=\"line\">193</div><div class=\"line\">194</div><div class=\"line\">195</div><div class=\"line\">196</div><div class=\"line\">197</div><div class=\"line\">198</div><div class=\"line\">199</div><div class=\"line\">200</div><div class=\"line\">201</div><div class=\"line\">202</div><div class=\"line\">203</div><div class=\"line\">204</div><div class=\"line\">205</div><div class=\"line\">206</div><div class=\"line\">207</div><div class=\"line\">208</div><div class=\"line\">209</div><div class=\"line\">210</div><div class=\"line\">211</div><div class=\"line\">212</div><div class=\"line\">213</div><div class=\"line\">214</div><div class=\"line\">215</div><div class=\"line\">216</div><div class=\"line\">217</div><div class=\"line\">218</div><div class=\"line\">219</div><div class=\"line\">220</div><div class=\"line\">221</div><div class=\"line\">222</div><div class=\"line\">223</div><div class=\"line\">224</div><div class=\"line\">225</div><div class=\"line\">226</div><div class=\"line\">227</div><div class=\"line\">228</div><div class=\"line\">229</div><div class=\"line\">230</div><div class=\"line\">231</div><div class=\"line\">232</div><div class=\"line\">233</div><div class=\"line\">234</div><div class=\"line\">235</div><div class=\"line\">236</div><div class=\"line\">237</div><div class=\"line\">238</div><div class=\"line\">239</div><div class=\"line\">240</div><div class=\"line\">241</div><div class=\"line\">242</div><div class=\"line\">243</div><div class=\"line\">244</div><div class=\"line\">245</div><div class=\"line\">246</div><div class=\"line\">247</div><div class=\"line\">248</div><div class=\"line\">249</div><div class=\"line\">250</div><div class=\"line\">251</div><div class=\"line\">252</div><div class=\"line\">253</div><div class=\"line\">254</div><div class=\"line\">255</div><div class=\"line\">256</div><div class=\"line\">257</div><div class=\"line\">258</div><div class=\"line\">259</div><div class=\"line\">260</div><div class=\"line\">261</div><div class=\"line\">262</div><div class=\"line\">263</div><div class=\"line\">264</div><div class=\"line\">265</div><div class=\"line\">266</div><div class=\"line\">267</div><div class=\"line\">268</div><div class=\"line\">269</div><div class=\"line\">270</div><div class=\"line\">271</div><div class=\"line\">272</div><div class=\"line\">273</div><div class=\"line\">274</div><div class=\"line\">275</div><div class=\"line\">276</div><div class=\"line\">277</div><div class=\"line\">278</div><div class=\"line\">279</div><div class=\"line\">280</div><div class=\"line\">281</div><div class=\"line\">282</div><div class=\"line\">283</div><div class=\"line\">284</div><div class=\"line\">285</div><div class=\"line\">286</div><div class=\"line\">287</div><div class=\"line\">288</div><div class=\"line\">289</div><div class=\"line\">290</div><div class=\"line\">291</div><div class=\"line\">292</div><div class=\"line\">293</div><div class=\"line\">294</div><div class=\"line\">295</div><div class=\"line\">296</div><div class=\"line\">297</div><div class=\"line\">298</div><div class=\"line\">299</div><div class=\"line\">300</div><div class=\"line\">301</div><div class=\"line\">302</div><div class=\"line\">303</div><div class=\"line\">304</div><div class=\"line\">305</div><div class=\"line\">306</div><div class=\"line\">307</div><div class=\"line\">308</div><div class=\"line\">309</div><div class=\"line\">310</div><div class=\"line\">311</div><div class=\"line\">312</div><div class=\"line\">313</div><div class=\"line\">314</div><div class=\"line\">315</div><div class=\"line\">316</div><div class=\"line\">317</div><div class=\"line\">318</div><div class=\"line\">319</div><div class=\"line\">320</div><div class=\"line\">321</div><div class=\"line\">322</div><div class=\"line\">323</div><div class=\"line\">324</div><div class=\"line\">325</div><div class=\"line\">326</div><div class=\"line\">327</div><div class=\"line\">328</div><div class=\"line\">329</div><div class=\"line\">330</div><div class=\"line\">331</div><div class=\"line\">332</div><div class=\"line\">333</div><div class=\"line\">334</div><div class=\"line\">335</div><div class=\"line\">336</div><div class=\"line\">337</div><div class=\"line\">338</div><div class=\"line\">339</div><div class=\"line\">340</div><div class=\"line\">341</div><div class=\"line\">342</div><div class=\"line\">343</div><div class=\"line\">344</div><div class=\"line\">345</div><div class=\"line\">346</div><div class=\"line\">347</div><div class=\"line\">348</div><div class=\"line\">349</div><div class=\"line\">350</div><div class=\"line\">351</div><div class=\"line\">352</div><div class=\"line\">353</div><div class=\"line\">354</div><div class=\"line\">355</div><div class=\"line\">356</div><div class=\"line\">357</div><div class=\"line\">358</div><div class=\"line\">359</div><div class=\"line\">360</div><div class=\"line\">361</div><div class=\"line\">362</div><div class=\"line\">363</div><div class=\"line\">364</div><div class=\"line\">365</div><div class=\"line\">366</div><div class=\"line\">367</div><div class=\"line\">368</div><div class=\"line\">369</div><div class=\"line\">370</div><div class=\"line\">371</div><div class=\"line\">372</div><div class=\"line\">373</div><div class=\"line\">374</div><div class=\"line\">375</div><div class=\"line\">376</div><div class=\"line\">377</div><div class=\"line\">378</div><div class=\"line\">379</div><div class=\"line\">380</div><div class=\"line\">381</div><div class=\"line\">382</div><div class=\"line\">383</div><div class=\"line\">384</div><div class=\"line\">385</div><div class=\"line\">386</div><div class=\"line\">387</div><div class=\"line\">388</div><div class=\"line\">389</div><div class=\"line\">390</div><div class=\"line\">391</div><div class=\"line\">392</div><div class=\"line\">393</div><div class=\"line\">394</div><div class=\"line\">395</div><div class=\"line\">396</div><div class=\"line\">397</div><div class=\"line\">398</div><div class=\"line\">399</div><div class=\"line\">400</div><div class=\"line\">401</div><div class=\"line\">402</div><div class=\"line\">403</div><div class=\"line\">404</div><div class=\"line\">405</div><div class=\"line\">406</div><div class=\"line\">407</div><div class=\"line\">408</div><div class=\"line\">409</div><div class=\"line\">410</div><div class=\"line\">411</div><div class=\"line\">412</div><div class=\"line\">413</div><div class=\"line\">414</div><div class=\"line\">415</div><div class=\"line\">416</div><div class=\"line\">417</div><div class=\"line\">418</div><div class=\"line\">419</div><div class=\"line\">420</div><div class=\"line\">421</div><div class=\"line\">422</div><div class=\"line\">423</div><div class=\"line\">424</div><div class=\"line\">425</div><div class=\"line\">426</div><div class=\"line\">427</div><div class=\"line\">428</div><div class=\"line\">429</div><div class=\"line\">430</div><div class=\"line\">431</div><div class=\"line\">432</div><div class=\"line\">433</div><div class=\"line\">434</div><div class=\"line\">435</div><div class=\"line\">436</div><div class=\"line\">437</div><div class=\"line\">438</div><div class=\"line\">439</div><div class=\"line\">440</div><div class=\"line\">441</div><div class=\"line\">442</div><div class=\"line\">443</div><div class=\"line\">444</div><div class=\"line\">445</div><div class=\"line\">446</div><div class=\"line\">447</div><div class=\"line\">448</div><div class=\"line\">449</div><div class=\"line\">450</div><div class=\"line\">451</div><div class=\"line\">452</div><div class=\"line\">453</div><div class=\"line\">454</div><div class=\"line\">455</div><div class=\"line\">456</div><div class=\"line\">457</div><div class=\"line\">458</div><div class=\"line\">459</div><div class=\"line\">460</div><div class=\"line\">461</div><div class=\"line\">462</div><div class=\"line\">463</div><div class=\"line\">464</div><div class=\"line\">465</div><div class=\"line\">466</div><div class=\"line\">467</div><div class=\"line\">468</div><div class=\"line\">469</div><div class=\"line\">470</div><div class=\"line\">471</div><div class=\"line\">472</div><div class=\"line\">473</div><div class=\"line\">474</div><div class=\"line\">475</div><div class=\"line\">476</div><div class=\"line\">477</div><div class=\"line\">478</div><div class=\"line\">479</div><div class=\"line\">480</div><div class=\"line\">481</div><div class=\"line\">482</div><div class=\"line\">483</div><div class=\"line\">484</div><div class=\"line\">485</div><div class=\"line\">486</div><div class=\"line\">487</div><div class=\"line\">488</div><div class=\"line\">489</div><div class=\"line\">490</div><div class=\"line\">491</div><div class=\"line\">492</div><div class=\"line\">493</div><div class=\"line\">494</div><div class=\"line\">495</div><div class=\"line\">496</div><div class=\"line\">497</div><div class=\"line\">498</div><div class=\"line\">499</div><div class=\"line\">500</div><div class=\"line\">501</div><div class=\"line\">502</div><div class=\"line\">503</div><div class=\"line\">504</div><div class=\"line\">505</div><div class=\"line\">506</div><div class=\"line\">507</div><div class=\"line\">508</div><div class=\"line\">509</div><div class=\"line\">510</div><div class=\"line\">511</div><div class=\"line\">512</div><div class=\"line\">513</div><div class=\"line\">514</div><div class=\"line\">515</div><div class=\"line\">516</div><div class=\"line\">517</div><div class=\"line\">518</div><div class=\"line\">519</div><div class=\"line\">520</div><div class=\"line\">521</div><div class=\"line\">522</div><div class=\"line\">523</div><div class=\"line\">524</div><div class=\"line\">525</div><div class=\"line\">526</div><div class=\"line\">527</div><div class=\"line\">528</div><div class=\"line\">529</div><div class=\"line\">530</div><div class=\"line\">531</div><div class=\"line\">532</div><div class=\"line\">533</div><div class=\"line\">534</div><div class=\"line\">535</div><div class=\"line\">536</div><div class=\"line\">537</div><div class=\"line\">538</div><div class=\"line\">539</div><div class=\"line\">540</div><div class=\"line\">541</div><div class=\"line\">542</div><div class=\"line\">543</div><div class=\"line\">544</div><div class=\"line\">545</div><div class=\"line\">546</div><div class=\"line\">547</div><div class=\"line\">548</div><div class=\"line\">549</div><div class=\"line\">550</div><div class=\"line\">551</div><div class=\"line\">552</div><div class=\"line\">553</div><div class=\"line\">554</div><div class=\"line\">555</div><div class=\"line\">556</div><div class=\"line\">557</div><div class=\"line\">558</div><div class=\"line\">559</div><div class=\"line\">560</div><div class=\"line\">561</div><div class=\"line\">562</div><div class=\"line\">563</div><div class=\"line\">564</div><div class=\"line\">565</div><div class=\"line\">566</div><div class=\"line\">567</div><div class=\"line\">568</div><div class=\"line\">569</div><div class=\"line\">570</div><div class=\"line\">571</div><div class=\"line\">572</div><div class=\"line\">573</div><div class=\"line\">574</div><div class=\"line\">575</div><div class=\"line\">576</div><div class=\"line\">577</div><div class=\"line\">578</div><div class=\"line\">579</div><div class=\"line\">580</div><div class=\"line\">581</div><div class=\"line\">582</div><div class=\"line\">583</div><div class=\"line\">584</div><div class=\"line\">585</div><div class=\"line\">586</div><div class=\"line\">587</div><div class=\"line\">588</div><div class=\"line\">589</div><div class=\"line\">590</div><div class=\"line\">591</div><div class=\"line\">592</div><div class=\"line\">593</div><div class=\"line\">594</div><div class=\"line\">595</div><div class=\"line\">596</div><div class=\"line\">597</div><div class=\"line\">598</div><div class=\"line\">599</div><div class=\"line\">600</div><div class=\"line\">601</div><div class=\"line\">602</div><div class=\"line\">603</div><div class=\"line\">604</div><div class=\"line\">605</div><div class=\"line\">606</div><div class=\"line\">607</div><div class=\"line\">608</div><div class=\"line\">609</div><div class=\"line\">610</div><div class=\"line\">611</div><div class=\"line\">612</div><div class=\"line\">613</div><div class=\"line\">614</div><div class=\"line\">615</div><div class=\"line\">616</div><div class=\"line\">617</div><div class=\"line\">618</div><div class=\"line\">619</div><div class=\"line\">620</div><div class=\"line\">621</div><div class=\"line\">622</div><div class=\"line\">623</div><div class=\"line\">624</div><div class=\"line\">625</div><div class=\"line\">626</div><div class=\"line\">627</div><div class=\"line\">628</div><div class=\"line\">629</div><div class=\"line\">630</div><div class=\"line\">631</div><div class=\"line\">632</div><div class=\"line\">633</div><div class=\"line\">634</div><div class=\"line\">635</div><div class=\"line\">636</div><div class=\"line\">637</div><div class=\"line\">638</div><div class=\"line\">639</div><div class=\"line\">640</div><div class=\"line\">641</div><div class=\"line\">642</div><div class=\"line\">643</div><div class=\"line\">644</div><div class=\"line\">645</div><div class=\"line\">646</div><div class=\"line\">647</div><div class=\"line\">648</div><div class=\"line\">649</div><div class=\"line\">650</div><div class=\"line\">651</div><div class=\"line\">652</div><div class=\"line\">653</div><div class=\"line\">654</div><div class=\"line\">655</div><div class=\"line\">656</div><div class=\"line\">657</div><div class=\"line\">658</div><div class=\"line\">659</div><div class=\"line\">660</div><div class=\"line\">661</div><div class=\"line\">662</div><div class=\"line\">663</div><div class=\"line\">664</div><div class=\"line\">665</div><div class=\"line\">666</div><div class=\"line\">667</div><div class=\"line\">668</div><div class=\"line\">669</div><div class=\"line\">670</div><div class=\"line\">671</div><div class=\"line\">672</div><div class=\"line\">673</div><div class=\"line\">674</div><div class=\"line\">675</div><div class=\"line\">676</div><div class=\"line\">677</div><div class=\"line\">678</div><div class=\"line\">679</div><div class=\"line\">680</div><div class=\"line\">681</div><div class=\"line\">682</div><div class=\"line\">683</div><div class=\"line\">684</div><div class=\"line\">685</div><div class=\"line\">686</div><div class=\"line\">687</div><div class=\"line\">688</div><div class=\"line\">689</div><div class=\"line\">690</div><div class=\"line\">691</div><div class=\"line\">692</div><div class=\"line\">693</div><div class=\"line\">694</div><div class=\"line\">695</div><div class=\"line\">696</div><div class=\"line\">697</div><div class=\"line\">698</div><div class=\"line\">699</div><div class=\"line\">700</div><div class=\"line\">701</div><div class=\"line\">702</div><div class=\"line\">703</div><div class=\"line\">704</div><div class=\"line\">705</div><div class=\"line\">706</div><div class=\"line\">707</div><div class=\"line\">708</div><div class=\"line\">709</div><div class=\"line\">710</div><div class=\"line\">711</div><div class=\"line\">712</div><div class=\"line\">713</div><div class=\"line\">714</div><div class=\"line\">715</div><div class=\"line\">716</div><div class=\"line\">717</div><div class=\"line\">718</div><div class=\"line\">719</div><div class=\"line\">720</div><div class=\"line\">721</div><div class=\"line\">722</div><div class=\"line\">723</div><div class=\"line\">724</div><div class=\"line\">725</div><div class=\"line\">726</div><div class=\"line\">727</div><div class=\"line\">728</div><div class=\"line\">729</div><div class=\"line\">730</div><div class=\"line\">731</div><div class=\"line\">732</div><div class=\"line\">733</div><div class=\"line\">734</div><div class=\"line\">735</div><div class=\"line\">736</div><div class=\"line\">737</div><div class=\"line\">738</div><div class=\"line\">739</div><div class=\"line\">740</div><div class=\"line\">741</div><div class=\"line\">742</div><div class=\"line\">743</div><div class=\"line\">744</div><div class=\"line\">745</div><div class=\"line\">746</div><div class=\"line\">747</div><div class=\"line\">748</div><div class=\"line\">749</div><div class=\"line\">750</div><div class=\"line\">751</div><div class=\"line\">752</div><div class=\"line\">753</div><div class=\"line\">754</div></pre></td><td class=\"code\"><pre><div class=\"line\">android:<span class=\"function\">alpha </div><div class=\"line\"><span class=\"title\">setAlpha</span><span class=\"params\">(<span class=\"keyword\">float</span>)</span> : 0-101</div><div class=\"line\">android:background </div><div class=\"line\"><span class=\"title\">setBackgroundResource</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : </div><div class=\"line\">android:clickable </div><div class=\"line\"><span class=\"title\">setClickable</span><span class=\"params\">(<span class=\"keyword\">boolean</span>)</span> : </div><div class=\"line\">android:contentDescription </div><div class=\"line\"><span class=\"title\">setContentDescription</span><span class=\"params\">(CharSequence)</span> : View,View</div><div class=\"line\">android:drawingCacheQuality </div><div class=\"line\"><span class=\"title\">setDrawingCacheQuality</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : \"3 auto high low\"</div><div class=\"line\">android:duplicateParentState </div><div class=\"line\">: </div><div class=\"line\">android:fadeScrollbars </div><div class=\"line\"><span class=\"title\">setScrollbarFadingEnabled</span><span class=\"params\">(<span class=\"keyword\">boolean</span>)</span> : ScrollBar</div><div class=\"line\">android:fadingEdgeLength </div><div class=\"line\"><span class=\"title\">getVerticalFadingEdgeLength</span><span class=\"params\">()</span> : </div><div class=\"line\">android:filterTouchesWhenObscured </div><div class=\"line\"><span class=\"title\">setFilterTouchesWhenObscured</span><span class=\"params\">(<span class=\"keyword\">boolean</span>)</span> : view</div><div class=\"line\">android:fitsSystemWindows </div><div class=\"line\"><span class=\"title\">setFitsSystemWindows</span><span class=\"params\">(<span class=\"keyword\">boolean</span>)</span> : </div><div class=\"line\">android:focusable </div><div class=\"line\"><span class=\"title\">setFocusable</span><span class=\"params\">(<span class=\"keyword\">boolean</span>)</span> : <span class=\"title\">requestFocus</span><span class=\"params\">()</span>EditTextEditTextfocusable<span class=\"keyword\">false</span>TouchfocusableInTouchMode<span class=\"keyword\">true</span></div><div class=\"line\">android:focusableInTouchMode </div><div class=\"line\"><span class=\"title\">setFocusableInTouchMode</span><span class=\"params\">(<span class=\"keyword\">boolean</span>)</span> : TouchView</div><div class=\"line\">android:hapticFeedbackEnabled </div><div class=\"line\"><span class=\"title\">setHapticFeedbackEnabled</span><span class=\"params\">(<span class=\"keyword\">boolean</span>)</span> : </div><div class=\"line\">android:id </div><div class=\"line\"><span class=\"title\">setId</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : Viewlayout.xmlView.<span class=\"title\">findViewById</span><span class=\"params\">()</span> Activity.<span class=\"title\">findViewById</span><span class=\"params\">()</span>Viewlayout.xmlid</div><div class=\"line\">android:importantForAccessibility </div><div class=\"line\"><span class=\"title\">setImportantForAccessibility</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : </div><div class=\"line\">android:isScrollContainer </div><div class=\"line\"><span class=\"title\">setScrollContainer</span><span class=\"params\">(<span class=\"keyword\">boolean</span>)</span> : ViewListView/ GridView/ ScrollViewEdidTextandroid:scrollbars</div><div class=\"line\">android:keepScreenOn </div><div class=\"line\"><span class=\"title\">setKeepScreenOn</span><span class=\"params\">(<span class=\"keyword\">boolean</span>)</span> : </div><div class=\"line\">android:layerType </div><div class=\"line\"><span class=\"title\">setLayerType</span><span class=\"params\">(<span class=\"keyword\">int</span>,Paint)</span> : \"3 none software hardware\"</div><div class=\"line\">android:layoutDirection </div><div class=\"line\"><span class=\"title\">setLayoutDirection</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : </div><div class=\"line\">android:longClickable </div><div class=\"line\"><span class=\"title\">setLongClickable</span><span class=\"params\">(<span class=\"keyword\">boolean</span>)</span> : </div><div class=\"line\">android:minHeight </div><div class=\"line\"><span class=\"title\">setMinimumHeight</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : </div><div class=\"line\">android:minWidth </div><div class=\"line\"><span class=\"title\">setMinimumWidth</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : </div><div class=\"line\">android:nextFocusDown </div><div class=\"line\"><span class=\"title\">setNextFocusDownId</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : viewid</div><div class=\"line\">android:nextFocusForward </div><div class=\"line\"><span class=\"title\">setNextFocusForwardId</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : viewid</div><div class=\"line\">android:nextFocusLeft </div><div class=\"line\"><span class=\"title\">setNextFocusLeftId</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : viewid</div><div class=\"line\">android:nextFocusRight </div><div class=\"line\"><span class=\"title\">setNextFocusRightId</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : viewid</div><div class=\"line\">android:nextFocusUp </div><div class=\"line\"><span class=\"title\">setNextFocusUpId</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : viewid</div><div class=\"line\">android:onClick </div><div class=\"line\"><span class=\"title\">setOnClick</span><span class=\"params\">()</span> <span class=\"title\">onClick</span><span class=\"params\">(View view)</span>: </div><div class=\"line\">android:padding </div><div class=\"line\"><span class=\"title\">setPaddingRelative</span><span class=\"params\">(<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>)</span> : </div><div class=\"line\">android:paddingBottom </div><div class=\"line\"><span class=\"title\">setPaddingRelative</span><span class=\"params\">(<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>)</span> : </div><div class=\"line\">android:paddingEnd </div><div class=\"line\"><span class=\"title\">setPaddingRelative</span><span class=\"params\">(<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>)</span> : android:paddingRight</div><div class=\"line\">android:paddingLeft </div><div class=\"line\"><span class=\"title\">setPadding</span><span class=\"params\">(<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>)</span> : </div><div class=\"line\">android:paddingRight </div><div class=\"line\"><span class=\"title\">setPadding</span><span class=\"params\">(<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>)</span> : </div><div class=\"line\">android:paddingStart </div><div class=\"line\"><span class=\"title\">setPaddingRelative</span><span class=\"params\">(<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>)</span> : android:paddingLeft</div><div class=\"line\">android:paddingTop </div><div class=\"line\"><span class=\"title\">setPaddingRelative</span><span class=\"params\">(<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>)</span> : </div><div class=\"line\">android:requiresFadingEdge </div><div class=\"line\"><span class=\"title\">setVerticalFadingEdgeEnabled</span><span class=\"params\">(<span class=\"keyword\">boolean</span>)</span> : </div><div class=\"line\">android:rotation </div><div class=\"line\"><span class=\"title\">setRotation</span><span class=\"params\">(<span class=\"keyword\">float</span>)</span> : </div><div class=\"line\">android:rotationX </div><div class=\"line\"><span class=\"title\">setRotationX</span><span class=\"params\">(<span class=\"keyword\">float</span>)</span> : </div><div class=\"line\">android:rotationY </div><div class=\"line\"><span class=\"title\">setRotationY</span><span class=\"params\">(<span class=\"keyword\">float</span>)</span> : </div><div class=\"line\">android:saveEnabled </div><div class=\"line\"><span class=\"title\">setSaveEnabled</span><span class=\"params\">(<span class=\"keyword\">boolean</span>)</span> : viewviewid</div><div class=\"line\">android:scaleX </div><div class=\"line\"><span class=\"title\">setScaleX</span><span class=\"params\">(<span class=\"keyword\">float</span>)</span> : </div><div class=\"line\">android:scaleY </div><div class=\"line\"><span class=\"title\">setScaleY</span><span class=\"params\">(<span class=\"keyword\">float</span>)</span> : </div><div class=\"line\">android:scrollX </div><div class=\"line\">: x</div><div class=\"line\">android:scrollY </div><div class=\"line\">: y</div><div class=\"line\">android:scrollbarAlwaysDrawHorizontalTrack </div><div class=\"line\">: </div><div class=\"line\">android:scrollbarAlwaysDrawVerticalTrack </div><div class=\"line\">: </div><div class=\"line\">android:scrollbarDefaultDelayBeforeFade </div><div class=\"line\"><span class=\"title\">setScrollBarDefaultDelayBeforeFade</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : n</div><div class=\"line\">android:scrollbarFadeDuration </div><div class=\"line\"><span class=\"title\">setScrollBarFadeDuration</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : </div><div class=\"line\">android:scrollbarSize </div><div class=\"line\"><span class=\"title\">setScrollBarSize</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : </div><div class=\"line\">android:scrollbarStyle </div><div class=\"line\"><span class=\"title\">setScrollBarStyle</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : \"4 insideOverlay insideInset outsideOverlay outsideInset insidepaddingoutsidepaddingviewOverlayInsetpadding\"</div><div class=\"line\">android:scrollbarThumbHorizontal </div><div class=\"line\">: drawable</div><div class=\"line\">android:scrollbarThumbVertical </div><div class=\"line\">: drawable</div><div class=\"line\">android:scrollbarTrackHorizontal </div><div class=\"line\">: drawable</div><div class=\"line\">android:scrollbarTrackVertical </div><div class=\"line\">: drawable</div><div class=\"line\">android:scrollbars </div><div class=\"line\">: \"3: none horizontal vertical\"</div><div class=\"line\">android:soundEffectsEnabled </div><div class=\"line\"><span class=\"title\">setSoundEffectsEnabled</span><span class=\"params\">(<span class=\"keyword\">boolean</span>)</span> : view</div><div class=\"line\">android:tag </div><div class=\"line\">: stringidid</div><div class=\"line\">android:textAlignment </div><div class=\"line\"><span class=\"title\">setTextAlignment</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : </div><div class=\"line\">android:textDirection </div><div class=\"line\"><span class=\"title\">setTextDirection</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : </div><div class=\"line\">android:transformPivotX </div><div class=\"line\"><span class=\"title\">setPivotX</span><span class=\"params\">(<span class=\"keyword\">float</span>)</span> : </div><div class=\"line\">android:transformPivotY </div><div class=\"line\"><span class=\"title\">setPivotY</span><span class=\"params\">(<span class=\"keyword\">float</span>)</span> : </div><div class=\"line\">android:translationX </div><div class=\"line\"><span class=\"title\">setTranslationX</span><span class=\"params\">(<span class=\"keyword\">float</span>)</span> : </div><div class=\"line\">android:translationY </div><div class=\"line\"><span class=\"title\">setTranslationY</span><span class=\"params\">(<span class=\"keyword\">float</span>)</span> : </div><div class=\"line\">android:visibility </div><div class=\"line\"><span class=\"title\">setVisibility</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : \"view3 goneview invisibleview visible\"</div><div class=\"line\">TextView</div><div class=\"line\">TextView android:autoLink </div><div class=\"line\"><span class=\"title\">setAutoLinkMask</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : URL/email//map<span class=\"params\">(none/web/email/phone/map/all)</span></div><div class=\"line\">android:autoText </div><div class=\"line\"><span class=\"title\">setKeyListener</span><span class=\"params\">(KeyListener)</span> : </div><div class=\"line\">android:bufferType </div><div class=\"line\"><span class=\"title\">setText</span><span class=\"params\">(CharSequence,TextView.BufferType)</span> : <span class=\"title\">getText</span><span class=\"params\">()</span>editable StringBuildergetTextappend</div><div class=\"line\">android:capitalize </div><div class=\"line\"><span class=\"title\">setKeyListener</span><span class=\"params\">(KeyListener)</span> : 21</div><div class=\"line\">android:cursorVisible </div><div class=\"line\"><span class=\"title\">setCursorVisible</span><span class=\"params\">(<span class=\"keyword\">boolean</span>)</span> : /</div><div class=\"line\">android:digits </div><div class=\"line\"><span class=\"title\">setKeyListener</span><span class=\"params\">(KeyListener)</span> : 1234567890.+-*/%\\<span class=\"title\">n</span><span class=\"params\">()</span></div><div class=\"line\">android:drawableBottom </div><div class=\"line\"><span class=\"title\">setCompoundDrawablesWithIntrinsicBounds</span><span class=\"params\">(<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>)</span> : textdrawabletextbackground</div><div class=\"line\">android:drawableEnd </div><div class=\"line\"><span class=\"title\">setCompoundDrawablesRelativeWithIntrinsicBounds</span><span class=\"params\">(<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>)</span> : drawable\"@[+][<span class=\"keyword\">package</span>:]type:name\"\"?[<span class=\"keyword\">package</span>:][type:]name\"\"#rgb\", \"#argb\", \"#rrggbb\", or \"#aarrggbb\"</div><div class=\"line\">android:drawableLeft </div><div class=\"line\"><span class=\"title\">setCompoundDrawablesWithIntrinsicBounds</span><span class=\"params\">(<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>)</span> : textdrawable</div><div class=\"line\">android:drawablePadding </div><div class=\"line\"><span class=\"title\">setCompoundDrawablePadding</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : textdrawabledrawableLeftdrawableRightdrawableTopdrawableBottom</div><div class=\"line\">android:drawableRight </div><div class=\"line\"><span class=\"title\">setCompoundDrawablesWithIntrinsicBounds</span><span class=\"params\">(<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>)</span> : textdrawable</div><div class=\"line\">android:drawableStart </div><div class=\"line\"><span class=\"title\">setCompoundDrawablesRelativeWithIntrinsicBounds</span><span class=\"params\">(<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>)</span> : drawable\"@[+][<span class=\"keyword\">package</span>:]type:name\"\"?[<span class=\"keyword\">package</span>:][type:]name\"\"#rgb\", \"#argb\", \"#rrggbb\", or \"#aarrggbb\"</div><div class=\"line\">android:drawableTop </div><div class=\"line\"><span class=\"title\">setCompoundDrawablesWithIntrinsicBounds</span><span class=\"params\">(<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>)</span> : textdrawable</div><div class=\"line\">android:editable </div><div class=\"line\">: EditView</div><div class=\"line\">android:editorExtras </div><div class=\"line\"><span class=\"title\">setInputExtras</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : EditView</div><div class=\"line\">android:ellipsize </div><div class=\"line\"><span class=\"title\">setEllipsize</span><span class=\"params\">(TextUtils.TruncateAt)</span> : ,startendmiddle-marquee <span class=\"params\">()</span></div><div class=\"line\">android:ems </div><div class=\"line\"><span class=\"title\">setEms</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : TextViewN</div><div class=\"line\">android:fontFamily </div><div class=\"line\"><span class=\"title\">setTypeface</span><span class=\"params\">(Typeface)</span> : </div><div class=\"line\">android:freezesText </div><div class=\"line\"><span class=\"title\">setFreezesText</span><span class=\"params\">(<span class=\"keyword\">boolean</span>)</span> : </div><div class=\"line\">android:gravity </div><div class=\"line\"><span class=\"title\">setGravity</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : center</div><div class=\"line\">android:height </div><div class=\"line\"><span class=\"title\">setHeight</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : <span class=\"title\">px</span><span class=\"params\">()</span>/dp/sp/in/<span class=\"title\">mm</span><span class=\"params\">()</span></div><div class=\"line\">android:hint </div><div class=\"line\"><span class=\"title\">setHint</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : TexttextColorHint</div><div class=\"line\">android:imeActionId </div><div class=\"line\"><span class=\"title\">setImeActionLabel</span><span class=\"params\">(CharSequence,<span class=\"keyword\">int</span>)</span> : IMEID</div><div class=\"line\">android:imeActionLabel </div><div class=\"line\"><span class=\"title\">setImeActionLabel</span><span class=\"params\">(CharSequence,<span class=\"keyword\">int</span>)</span> : IMEEditView</div><div class=\"line\">android:imeOptions </div><div class=\"line\"><span class=\"title\">setImeOptions</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : IMEactionDone</div><div class=\"line\">android:includeFontPadding </div><div class=\"line\"><span class=\"title\">setIncludeFontPadding</span><span class=\"params\">(<span class=\"keyword\">boolean</span>)</span> : <span class=\"keyword\">true</span></div><div class=\"line\">android:inputMethod </div><div class=\"line\"><span class=\"title\">setKeyListener</span><span class=\"params\">(KeyListener)</span> : com.google.android.inputmethod.pinyin</div><div class=\"line\">android:inputType </div><div class=\"line\"><span class=\"title\">setRawInputType</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : EditView</div><div class=\"line\">android:lineSpacingExtra </div><div class=\"line\"><span class=\"title\">setLineSpacing</span><span class=\"params\">(<span class=\"keyword\">float</span>,<span class=\"keyword\">float</span>)</span> : </div><div class=\"line\">android:lineSpacingMultiplier </div><div class=\"line\"><span class=\"title\">setLineSpacing</span><span class=\"params\">(<span class=\"keyword\">float</span>,<span class=\"keyword\">float</span>)</span> : 1.2</div><div class=\"line\">android:lines </div><div class=\"line\"><span class=\"title\">setLines</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : </div><div class=\"line\">android:linksClickable </div><div class=\"line\"><span class=\"title\">setLinksClickable</span><span class=\"params\">(<span class=\"keyword\">boolean</span>)</span> : autoLink</div><div class=\"line\">android:marqueeRepeatLimit </div><div class=\"line\"><span class=\"title\">setMarqueeRepeatLimit</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : ellipsizemarqueemarquee_forever</div><div class=\"line\">android:maxEms </div><div class=\"line\"><span class=\"title\">setMaxEms</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : TextViewNemsems</div><div class=\"line\">android:maxHeight </div><div class=\"line\"><span class=\"title\">setMaxHeight</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : </div><div class=\"line\">android:maxLength </div><div class=\"line\"><span class=\"title\">setFilters</span><span class=\"params\">(InputFilter)</span> : </div><div class=\"line\">android:maxLines </div><div class=\"line\"><span class=\"title\">setMaxLines</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : widthlayout_width</div><div class=\"line\">android:maxWidth </div><div class=\"line\"><span class=\"title\">setMaxWidth</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : </div><div class=\"line\">android:minEms </div><div class=\"line\"><span class=\"title\">setMinEms</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : TextViewNemsems</div><div class=\"line\">android:minHeight </div><div class=\"line\"><span class=\"title\">setMinHeight</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : </div><div class=\"line\">android:minLines </div><div class=\"line\"><span class=\"title\">setMinLines</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : lines</div><div class=\"line\">android:minWidth </div><div class=\"line\"><span class=\"title\">setMinWidth</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : </div><div class=\"line\">android:numeric </div><div class=\"line\"><span class=\"title\">setKeyListener</span><span class=\"params\">(KeyListener)</span> : TextViewTextViewEdtiView</div><div class=\"line\">android:password </div><div class=\"line\"><span class=\"title\">setTransformationMethod</span><span class=\"params\">(TransformationMethod)</span> : .</div><div class=\"line\">android:phoneNumber </div><div class=\"line\"><span class=\"title\">setKeyListener</span><span class=\"params\">(KeyListener)</span> : </div><div class=\"line\">android:privateImeOptions </div><div class=\"line\"><span class=\"title\">setPrivateImeOptions</span><span class=\"params\">(String)</span> : EditText</div><div class=\"line\">android:scrollHorizontally </div><div class=\"line\"><span class=\"title\">setHorizontallyScrolling</span><span class=\"params\">(<span class=\"keyword\">boolean</span>)</span> : TextView</div><div class=\"line\">android:selectAllOnFocus </div><div class=\"line\"><span class=\"title\">setSelectAllOnFocus</span><span class=\"params\">(<span class=\"keyword\">boolean</span>)</span> : TextView</div><div class=\"line\">android:shadowColor </div><div class=\"line\"><span class=\"title\">setShadowLayer</span><span class=\"params\">(<span class=\"keyword\">float</span>,<span class=\"keyword\">float</span>,<span class=\"keyword\">float</span>,<span class=\"keyword\">int</span>)</span> : shadowRadius</div><div class=\"line\">android:shadowDx </div><div class=\"line\"><span class=\"title\">setShadowLayer</span><span class=\"params\">(<span class=\"keyword\">float</span>,<span class=\"keyword\">float</span>,<span class=\"keyword\">float</span>,<span class=\"keyword\">int</span>)</span> : </div><div class=\"line\">android:shadowDy </div><div class=\"line\"><span class=\"title\">setShadowLayer</span><span class=\"params\">(<span class=\"keyword\">float</span>,<span class=\"keyword\">float</span>,<span class=\"keyword\">float</span>,<span class=\"keyword\">int</span>)</span> : </div><div class=\"line\">android:shadowRadius </div><div class=\"line\"><span class=\"title\">setShadowLayer</span><span class=\"params\">(<span class=\"keyword\">float</span>,<span class=\"keyword\">float</span>,<span class=\"keyword\">float</span>,<span class=\"keyword\">int</span>)</span> : 0.13.0</div><div class=\"line\">android:singleLine </div><div class=\"line\"><span class=\"title\">setTransformationMethod</span><span class=\"params\">(TransformationMethod)</span> : layout_widthandroid:text</span>=<span class=\"string\">\"test_ singleLine \"</span> android:singleLine=<span class=\"string\">\"true\"</span> android:layout_width=<span class=\"string\">\"20dp\"</span>tsingleLine<span class=\"keyword\">false</span></div><div class=\"line\">android:<span class=\"function\">text </div><div class=\"line\"><span class=\"title\">setText</span><span class=\"params\">(CharSequence,TextView.BufferType)</span> : .</div><div class=\"line\">android:textAllCaps </div><div class=\"line\"><span class=\"title\">setAllCaps</span><span class=\"params\">(<span class=\"keyword\">boolean</span>)</span> : \"<span class=\"keyword\">true</span>\"\"<span class=\"keyword\">false</span>\"</div><div class=\"line\">android:textAppearance </div><div class=\"line\">: ?android:attr/textAppearanceLargeInverse</div><div class=\"line\">android:textColor </div><div class=\"line\"><span class=\"title\">setTextColor</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : </div><div class=\"line\">android:textColorHighlight </div><div class=\"line\"><span class=\"title\">setHighlightColor</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : </div><div class=\"line\">android:textColorHint </div><div class=\"line\"><span class=\"title\">setHintTextColor</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : hint</div><div class=\"line\">android:textColorLink </div><div class=\"line\"><span class=\"title\">setLinkTextColor</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : .</div><div class=\"line\">android:textIsSelectable </div><div class=\"line\"><span class=\"title\">isTextSelectable</span><span class=\"params\">()</span> : \"<span class=\"keyword\">true</span>\"\"<span class=\"keyword\">false</span>\"</div><div class=\"line\">android:textScaleX </div><div class=\"line\"><span class=\"title\">setTextScaleX</span><span class=\"params\">(<span class=\"keyword\">float</span>)</span> : 1.0f</div><div class=\"line\">android:textSize </div><div class=\"line\"><span class=\"title\">setTextSize</span><span class=\"params\">(<span class=\"keyword\">int</span>,<span class=\"keyword\">float</span>)</span> : sp15sp</div><div class=\"line\">android:textStyle </div><div class=\"line\"><span class=\"title\">setTypeface</span><span class=\"params\">(Typeface)</span> : [<span class=\"title\">bold</span><span class=\"params\">()</span> 0, <span class=\"title\">italic</span><span class=\"params\">()</span> 1, <span class=\"title\">bolditalic</span><span class=\"params\">()</span> 2] |</div><div class=\"line\">android:typeface </div><div class=\"line\"><span class=\"title\">setTypeface</span><span class=\"params\">(Typeface)</span> : normal 0, sans 1, serif 2, <span class=\"title\">monospace</span><span class=\"params\">()</span> 3]</div><div class=\"line\">android:width </div><div class=\"line\"><span class=\"title\">setWidth</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : <span class=\"title\">px</span><span class=\"params\">()</span>/dp/sp/in/<span class=\"title\">mm</span><span class=\"params\">()</span></div><div class=\"line\">android:fadingEdgeLength</div><div class=\"line\">pxdpspinmm</div><div class=\"line\">android:fitsSystemWindows</div><div class=\"line\"><span class=\"keyword\">true</span><span class=\"keyword\">false</span></div><div class=\"line\">android:focusable</div><div class=\"line\"><span class=\"keyword\">true</span><span class=\"keyword\">false</span></div><div class=\"line\">android:focusableInTouchMode</div><div class=\"line\"><span class=\"keyword\">true</span><span class=\"keyword\">false</span></div><div class=\"line\">android:hapticFeedbackEnabled</div><div class=\"line\"><span class=\"keyword\">true</span><span class=\"keyword\">false</span></div><div class=\"line\">android:id</div><div class=\"line\">ActivityViewfindViewByIdidandroid:id</span>=@+id/id</div><div class=\"line\">android:isScrollContainer</div><div class=\"line\"><span class=\"keyword\">true</span><span class=\"keyword\">false</span></div><div class=\"line\">android:keepScreenOn</div><div class=\"line\"><span class=\"keyword\">true</span><span class=\"keyword\">false</span></div><div class=\"line\">android:longClickable</div><div class=\"line\"><span class=\"keyword\">true</span><span class=\"keyword\">false</span></div><div class=\"line\">android:minHeight</div><div class=\"line\">android:fadingEdgeLength</div><div class=\"line\">android:minWidth</div><div class=\"line\">android:fadingEdgeLength</div><div class=\"line\">android:nextFocusDown</div><div class=\"line\">id</div><div class=\"line\">android:nextFocusLeft</div><div class=\"line\">id</div><div class=\"line\">android:nextFocusRight</div><div class=\"line\">id</div><div class=\"line\">android:nextFocusUp</div><div class=\"line\">id</div><div class=\"line\">android:padding</div><div class=\"line\"><span class=\"number\">4</span>android:fadingEdgeLength</div><div class=\"line\">android:paddingBottom</div><div class=\"line\">android:padding</div><div class=\"line\">android:paddingLeft</div><div class=\"line\">android:padding</div><div class=\"line\">android:paddingRight</div><div class=\"line\">android:padding</div><div class=\"line\">android:paddingTop</div><div class=\"line\">android:padding</div><div class=\"line\">android:saveEnabled</div><div class=\"line\"><span class=\"keyword\">true</span><span class=\"keyword\">false</span></div><div class=\"line\">android:scrollX</div><div class=\"line\">android:padding</div><div class=\"line\">android:scrollY</div><div class=\"line\">android:padding</div><div class=\"line\">android:scrollbarAlwaysDrawHorizontalTrack</div><div class=\"line\"><span class=\"keyword\">true</span><span class=\"keyword\">false</span></div><div class=\"line\">android:scrollbarAlwaysDrawVerticalTrack</div><div class=\"line\"><span class=\"keyword\">true</span><span class=\"keyword\">false</span></div><div class=\"line\">android:scrollbarSize</div><div class=\"line\">android:padding</div><div class=\"line\">android:scrollbarStyle</div><div class=\"line\"></div><div class=\"line\">insideOverlay</div><div class=\"line\">insideInset</div><div class=\"line\">outsideOverly</div><div class=\"line\">outsideInset</div><div class=\"line\">android:scrollbarThumbHorizontal</div><div class=\"line\"></div><div class=\"line\">android:scrollbarThumbVertical</div><div class=\"line\"></div><div class=\"line\">android:scrollbarTrackHorizontal</div><div class=\"line\"></div><div class=\"line\">android:scrollbarTrackVertical</div><div class=\"line\"></div><div class=\"line\">android:scrollbars</div><div class=\"line\"></div><div class=\"line\">none</div><div class=\"line\">horizontal</div><div class=\"line\">vertical</div><div class=\"line\">android:soundEffectsEnabled</div><div class=\"line\"><span class=\"keyword\">true</span><span class=\"keyword\">false</span></div><div class=\"line\">android:tag</div><div class=\"line\">ViewgetTagfindViewByTag</div><div class=\"line\">android:visibility</div><div class=\"line\"></div><div class=\"line\">visible</div><div class=\"line\">invisible</div><div class=\"line\">gone</div><div class=\"line\">LinearLayout</div><div class=\"line\"></div><div class=\"line\">android:baselineAligned</div><div class=\"line\"></div><div class=\"line\">android:baselineAlignedChildIndex</div><div class=\"line\"></div><div class=\"line\">android:gravity</div><div class=\"line\"></div><div class=\"line\">top</div><div class=\"line\">bottom</div><div class=\"line\">left</div><div class=\"line\">right</div><div class=\"line\">center_vertical</div><div class=\"line\">fill_vertical</div><div class=\"line\">center_horizontal</div><div class=\"line\">fill_horizontal</div><div class=\"line\">center</div><div class=\"line\">fill</div><div class=\"line\">clip_vertical</div><div class=\"line\">clip_horizontal</div><div class=\"line\">android:orientation</div><div class=\"line\"></div><div class=\"line\">horizontal</div><div class=\"line\">vertical</div><div class=\"line\">android:weightSum</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">LinearLayout_Layout</div><div class=\"line\"></div><div class=\"line\">android:layout_gravity</div><div class=\"line\"></div><div class=\"line\">android:layout_height</div><div class=\"line\"></div><div class=\"line\">android:layout_weight</div><div class=\"line\"></div><div class=\"line\">android:layout_width</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">RalativeLayout</div><div class=\"line\"></div><div class=\"line\">android:gravity</div><div class=\"line\"></div><div class=\"line\">android:ignoreGravity</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">RalativeLayout_Layout</div><div class=\"line\"></div><div class=\"line\">android:layout_above</div><div class=\"line\">ID</div><div class=\"line\">android:layout_alignBaseline</div><div class=\"line\">ID</div><div class=\"line\">android:layout_alignBottom</div><div class=\"line\">ID</div><div class=\"line\">android:layout_alignLeft</div><div class=\"line\">ID</div><div class=\"line\">android:layout_alignParenBottom</div><div class=\"line\"><span class=\"keyword\">true</span><span class=\"keyword\">false</span></div><div class=\"line\">android:layout_alignParentLeft</div><div class=\"line\"><span class=\"keyword\">true</span><span class=\"keyword\">false</span></div><div class=\"line\">android:layout_alignParentRight</div><div class=\"line\"><span class=\"keyword\">true</span><span class=\"keyword\">false</span></div><div class=\"line\">android:layout_alignParentTop</div><div class=\"line\"><span class=\"keyword\">true</span><span class=\"keyword\">false</span></div><div class=\"line\">android:layout_alignRight</div><div class=\"line\">ID</div><div class=\"line\">android:layout_alignTop</div><div class=\"line\">ID</div><div class=\"line\">android:layout_alignWithParentIfMissing</div><div class=\"line\"> <span class=\"keyword\">true</span><span class=\"keyword\">false</span></div><div class=\"line\">android:layout_below</div><div class=\"line\">ID</div><div class=\"line\">android:layout_centerHorizontal</div><div class=\"line\"></div><div class=\"line\">android:layout_centerInParent</div><div class=\"line\"></div><div class=\"line\">android:layout_centerVertical</div><div class=\"line\"></div><div class=\"line\">android:layout_toLeftOf</div><div class=\"line\">ID</div><div class=\"line\">android:layout_toRightOf</div><div class=\"line\">ID</div><div class=\"line\"></div><div class=\"line\">AbsoluteLayout_Layout</div><div class=\"line\"></div><div class=\"line\">android:layout_x</div><div class=\"line\">x</div><div class=\"line\">android:layout_y</div><div class=\"line\">y</div><div class=\"line\"></div><div class=\"line\">FrameLayout</div><div class=\"line\"></div><div class=\"line\">android:foreground</div><div class=\"line\"></div><div class=\"line\">android:foregroundGravity</div><div class=\"line\"></div><div class=\"line\">android:measureAllChildren</div><div class=\"line\"></div><div class=\"line\">android:layout_gravity</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">FrameLayout_Layout</div><div class=\"line\"></div><div class=\"line\">android:layout_gravity</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">TableLayout</div><div class=\"line\"></div><div class=\"line\">android:collapseColumns</div><div class=\"line\"><span class=\"number\">0</span>,</div><div class=\"line\">android:shrinkColumns</div><div class=\"line\"><span class=\"number\">0</span>,</div><div class=\"line\">android:stretchColumns</div><div class=\"line\"><span class=\"number\">0</span>,</div><div class=\"line\">TableRow_Cell</div><div class=\"line\"></div><div class=\"line\">android:layout_column</div><div class=\"line\"><span class=\"number\">0</span></div><div class=\"line\">android:layout_span</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">AbsListView</div><div class=\"line\"></div><div class=\"line\">android:cacheColorHint</div><div class=\"line\"></div><div class=\"line\">android:drawSelectorOnTop</div><div class=\"line\"><span class=\"keyword\">true</span><span class=\"keyword\">false</span></div><div class=\"line\">android:fastScrollEnabled</div><div class=\"line\"></div><div class=\"line\">android:listSelector</div><div class=\"line\"></div><div class=\"line\">android:scrollingCache</div><div class=\"line\"><span class=\"keyword\">true</span><span class=\"keyword\">false</span></div><div class=\"line\">android:smoothScrollbar</div><div class=\"line\"></div><div class=\"line\">android:stackFromBottom</div><div class=\"line\"></div><div class=\"line\">android:textFilterEnbled</div><div class=\"line\"></div><div class=\"line\">android:transcriptMode</div><div class=\"line\"></div><div class=\"line\">ListView</div><div class=\"line\"></div><div class=\"line\">android:choiceMode</div><div class=\"line\"></div><div class=\"line\">android:divider</div><div class=\"line\"></div><div class=\"line\">android:dividerHeight</div><div class=\"line\"></div><div class=\"line\">android:entries</div><div class=\"line\"></div><div class=\"line\">android:footerDividersEnabled</div><div class=\"line\"></div><div class=\"line\">android:headerDividersEnabled</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">GridView</div><div class=\"line\"></div><div class=\"line\">android:columnWidth</div><div class=\"line\"></div><div class=\"line\">android:gravity</div><div class=\"line\"></div><div class=\"line\">android:horizontalSpacing</div><div class=\"line\"></div><div class=\"line\">android:numColumns</div><div class=\"line\"></div><div class=\"line\">android:strechMode</div><div class=\"line\"></div><div class=\"line\">android:verticalSpacing</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">Gallery</div><div class=\"line\"></div><div class=\"line\">android:animationDuration</div><div class=\"line\"></div><div class=\"line\">android:gravity</div><div class=\"line\"></div><div class=\"line\">android:spacing</div><div class=\"line\"></div><div class=\"line\">android:unselectedAlpha</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">TextView</div><div class=\"line\"></div><div class=\"line\">android:autoLink</div><div class=\"line\"></div><div class=\"line\">android:autoText</div><div class=\"line\"></div><div class=\"line\">android:bufferType</div><div class=\"line\"></div><div class=\"line\">android:capitalize</div><div class=\"line\"></div><div class=\"line\">android:cursorVisible</div><div class=\"line\"><span class=\"keyword\">true</span><span class=\"keyword\">false</span></div><div class=\"line\">android:digits</div><div class=\"line\"></div><div class=\"line\">android:drawableBottom</div><div class=\"line\"></div><div class=\"line\">android:drawableLeft</div><div class=\"line\"></div><div class=\"line\">android: drawablePadding</div><div class=\"line\"></div><div class=\"line\">android: drawableRight</div><div class=\"line\"></div><div class=\"line\">android: drawableTop</div><div class=\"line\"></div><div class=\"line\">android:editable</div><div class=\"line\"><span class=\"keyword\">true</span><span class=\"keyword\">false</span></div><div class=\"line\">android:editorExtras</div><div class=\"line\">EditView</div><div class=\"line\">android:ellipsize</div><div class=\"line\"></div><div class=\"line\">android:ems</div><div class=\"line\">TextViewN</div><div class=\"line\">android:enabled</div><div class=\"line\"><span class=\"keyword\">true</span><span class=\"keyword\">false</span></div><div class=\"line\">android:freezesText</div><div class=\"line\"></div><div class=\"line\">android:gravity</div><div class=\"line\"></div><div class=\"line\">android:height</div><div class=\"line\"></div><div class=\"line\">android:hint</div><div class=\"line\"></div><div class=\"line\">android:imeActionId</div><div class=\"line\">IMEID</div><div class=\"line\">android:imeActionLabel</div><div class=\"line\">IME</div><div class=\"line\">android:imeOptions</div><div class=\"line\"></div><div class=\"line\">android:includeFontPadding</div><div class=\"line\"><span class=\"keyword\">true</span></div><div class=\"line\">android:inputMethod</div><div class=\"line\"></div><div class=\"line\">android:inputType</div><div class=\"line\"></div><div class=\"line\">none</div><div class=\"line\">text</div><div class=\"line\">textCapCharacters</div><div class=\"line\">textCapWords</div><div class=\"line\">textCapSentences</div><div class=\"line\">textAutoCorret</div><div class=\"line\">textAutoComplete</div><div class=\"line\">textMultiLine</div><div class=\"line\">textUriUri</div><div class=\"line\">textEmailAddress</div><div class=\"line\">textEmailSubject</div><div class=\"line\">textShortMessage</div><div class=\"line\">textLongMessage</div><div class=\"line\">textPersonName</div><div class=\"line\">textPostalAddress</div><div class=\"line\">textPassword</div><div class=\"line\">textVIsiblePassword</div><div class=\"line\">textWebEditText</div><div class=\"line\">textFilter</div><div class=\"line\">textPhonetic</div><div class=\"line\">number</div><div class=\"line\">numberSigned</div><div class=\"line\">numberDecimal</div><div class=\"line\">phone</div><div class=\"line\">datetime</div><div class=\"line\">date</div><div class=\"line\">time</div><div class=\"line\">android:lineSpacingExtra</div><div class=\"line\"> </div><div class=\"line\">android:lineSpacingMultiplier</div><div class=\"line\"></div><div class=\"line\">android:lines</div><div class=\"line\"></div><div class=\"line\">android:linksClickable</div><div class=\"line\">autoLick</div><div class=\"line\">android:marqueeRepeatLimit</div><div class=\"line\"></div><div class=\"line\">android:maxEms</div><div class=\"line\">TextViewNemsems </div><div class=\"line\">android:maxHeight</div><div class=\"line\"></div><div class=\"line\">android:maxLength</div><div class=\"line\"></div><div class=\"line\">android:maxLines</div><div class=\"line\"></div><div class=\"line\">android:minWidth</div><div class=\"line\"></div><div class=\"line\">android:minEms</div><div class=\"line\">TextViewNemsems</div><div class=\"line\"> </div><div class=\"line\">android:minHeight</div><div class=\"line\"></div><div class=\"line\">android:minLines</div><div class=\"line\"></div><div class=\"line\">android:minWidth</div><div class=\"line\"></div><div class=\"line\">android:numeric</div><div class=\"line\"></div><div class=\"line\">android:password</div><div class=\"line\"></div><div class=\"line\">android:phonenumber</div><div class=\"line\"></div><div class=\"line\">android:privateImeOptions</div><div class=\"line\"> </div><div class=\"line\">android:scrollHorizontally</div><div class=\"line\">TextView </div><div class=\"line\">android:selectAllOnFocus</div><div class=\"line\">TextView</div><div class=\"line\">android:shadowColor</div><div class=\"line\"></div><div class=\"line\">android:shadowDx</div><div class=\"line\"></div><div class=\"line\">android:shadowDy</div><div class=\"line\"></div><div class=\"line\">android:shadowRadius</div><div class=\"line\"></div><div class=\"line\">android:singleLine</div><div class=\"line\"></div><div class=\"line\">android:text</div><div class=\"line\"></div><div class=\"line\">android:textApperance</div><div class=\"line\"></div><div class=\"line\">android:textColor</div><div class=\"line\"></div><div class=\"line\">android: textColorHighlight</div><div class=\"line\"></div><div class=\"line\">android: textColorHint</div><div class=\"line\"></div><div class=\"line\">android:textColorLink</div><div class=\"line\"></div><div class=\"line\">android:textScaleX</div><div class=\"line\"></div><div class=\"line\">android:textSize</div><div class=\"line\"></div><div class=\"line\">android:textStyle</div><div class=\"line\"></div><div class=\"line\">bold</div><div class=\"line\">italic</div><div class=\"line\">bolditalic</div><div class=\"line\">android:typeface</div><div class=\"line\"></div><div class=\"line\">android:width</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">AutoCompleteTextView</div><div class=\"line\"></div><div class=\"line\">android:completionHint</div><div class=\"line\"></div><div class=\"line\">android:completionHintView</div><div class=\"line\"></div><div class=\"line\">android:completionThreshold</div><div class=\"line\"></div><div class=\"line\">android:dropDownAnchor</div><div class=\"line\"></div><div class=\"line\">android:dropDownSelector</div><div class=\"line\"></div><div class=\"line\">android:dropDownWIdth</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">ImageView</div><div class=\"line\"></div><div class=\"line\">android:adjustViewBounds</div><div class=\"line\"></div><div class=\"line\">android:baselineAlignBottom</div><div class=\"line\"></div><div class=\"line\">android:cropToPadding</div><div class=\"line\"></div><div class=\"line\">android:maxHeight</div><div class=\"line\"></div><div class=\"line\">android:maxWidth</div><div class=\"line\"></div><div class=\"line\">android:scaleType</div><div class=\"line\"></div><div class=\"line\">matrix</div><div class=\"line\">fitXY</div><div class=\"line\">fitStart</div><div class=\"line\">fitCenter</div><div class=\"line\">fitEnd</div><div class=\"line\">center</div><div class=\"line\">centerCrop</div><div class=\"line\">centerInside</div><div class=\"line\">android:src</div><div class=\"line\"></div><div class=\"line\">android:tint</div><div class=\"line\"></div><div class=\"line\">android:layout_above=<span class=\"string\">\"@id/xxx\"</span> </div><div class=\"line\">ID </div><div class=\"line\">android:layout_below=<span class=\"string\">\"@id/xxx\"</span></div><div class=\"line\">ID</div><div class=\"line\">android:layout_toLeftOf=<span class=\"string\">\"@id/xxx\"</span> </div><div class=\"line\">ID </div><div class=\"line\">android:layout_toRightOf=<span class=\"string\">\"@id/xxx\"</span> </div><div class=\"line\">ID</div><div class=\"line\">android:layout_alignLeft=<span class=\"string\">\"@id/xxx\"</span> </div><div class=\"line\">ID</div><div class=\"line\">android:layout_alignTop=<span class=\"string\">\"@id/xxx\"</span> </div><div class=\"line\">ID</div><div class=\"line\"> </div><div class=\"line\">android:layout_alignRight=<span class=\"string\">\"@id/xxx\"</span></div><div class=\"line\">ID</div><div class=\"line\">android:layout_alignBottom=<span class=\"string\">\"@id/xxx\"</span> </div><div class=\"line\">ID </div><div class=\"line\">android:layout_alignParentLeft=<span class=\"string\">\"true\"</span> </div><div class=\"line\"> </div><div class=\"line\">android:layout_alignParentTop=<span class=\"string\">\"true\"</span> </div><div class=\"line\"> </div><div class=\"line\">android:layout_alignParentRight=<span class=\"string\">\"true\"</span> </div><div class=\"line\"> </div><div class=\"line\">android:layout_alignParentBottom=<span class=\"string\">\"true\"</span> </div><div class=\"line\"></div><div class=\"line\"> android:layout_centerInParent=<span class=\"string\">\"true\"</span> </div><div class=\"line\">  </div><div class=\"line\"> </div><div class=\"line\"> android:layout_centerHorizontal=<span class=\"string\">\"true\"</span> </div><div class=\"line\">  </div><div class=\"line\"> </div><div class=\"line\"> android:layout_centerVertical=<span class=\"string\">\"true\"</span> </div><div class=\"line\"> </div></pre></td></tr></table></figure>\n","excerpt":"<p><a href=\"http://www.codexiu.cn/android/blog/40141/\">Android</a></p>","more":"<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div><div class=\"line\">103</div><div class=\"line\">104</div><div class=\"line\">105</div><div class=\"line\">106</div><div class=\"line\">107</div><div class=\"line\">108</div><div class=\"line\">109</div><div class=\"line\">110</div><div class=\"line\">111</div><div class=\"line\">112</div><div class=\"line\">113</div><div class=\"line\">114</div><div class=\"line\">115</div><div class=\"line\">116</div><div class=\"line\">117</div><div class=\"line\">118</div><div class=\"line\">119</div><div class=\"line\">120</div><div class=\"line\">121</div><div class=\"line\">122</div><div class=\"line\">123</div><div class=\"line\">124</div><div class=\"line\">125</div><div class=\"line\">126</div><div class=\"line\">127</div><div class=\"line\">128</div><div class=\"line\">129</div><div class=\"line\">130</div><div class=\"line\">131</div><div class=\"line\">132</div><div class=\"line\">133</div><div class=\"line\">134</div><div class=\"line\">135</div><div class=\"line\">136</div><div class=\"line\">137</div><div class=\"line\">138</div><div class=\"line\">139</div><div class=\"line\">140</div><div class=\"line\">141</div><div class=\"line\">142</div><div class=\"line\">143</div><div class=\"line\">144</div><div class=\"line\">145</div><div class=\"line\">146</div><div class=\"line\">147</div><div class=\"line\">148</div><div class=\"line\">149</div><div class=\"line\">150</div><div class=\"line\">151</div><div class=\"line\">152</div><div class=\"line\">153</div><div class=\"line\">154</div><div class=\"line\">155</div><div class=\"line\">156</div><div class=\"line\">157</div><div class=\"line\">158</div><div class=\"line\">159</div><div class=\"line\">160</div><div class=\"line\">161</div><div class=\"line\">162</div><div class=\"line\">163</div><div class=\"line\">164</div><div class=\"line\">165</div><div class=\"line\">166</div><div class=\"line\">167</div><div class=\"line\">168</div><div class=\"line\">169</div><div class=\"line\">170</div><div class=\"line\">171</div><div class=\"line\">172</div><div class=\"line\">173</div><div class=\"line\">174</div><div class=\"line\">175</div><div class=\"line\">176</div><div class=\"line\">177</div><div class=\"line\">178</div><div class=\"line\">179</div><div class=\"line\">180</div><div class=\"line\">181</div><div class=\"line\">182</div><div class=\"line\">183</div><div class=\"line\">184</div><div class=\"line\">185</div><div class=\"line\">186</div><div class=\"line\">187</div><div class=\"line\">188</div><div class=\"line\">189</div><div class=\"line\">190</div><div class=\"line\">191</div><div class=\"line\">192</div><div class=\"line\">193</div><div class=\"line\">194</div><div class=\"line\">195</div><div class=\"line\">196</div><div class=\"line\">197</div><div class=\"line\">198</div><div class=\"line\">199</div><div class=\"line\">200</div><div class=\"line\">201</div><div class=\"line\">202</div><div class=\"line\">203</div><div class=\"line\">204</div><div class=\"line\">205</div><div class=\"line\">206</div><div class=\"line\">207</div><div class=\"line\">208</div><div class=\"line\">209</div><div class=\"line\">210</div><div class=\"line\">211</div><div class=\"line\">212</div><div class=\"line\">213</div><div class=\"line\">214</div><div class=\"line\">215</div><div class=\"line\">216</div><div class=\"line\">217</div><div class=\"line\">218</div><div class=\"line\">219</div><div class=\"line\">220</div><div class=\"line\">221</div><div class=\"line\">222</div><div class=\"line\">223</div><div class=\"line\">224</div><div class=\"line\">225</div><div class=\"line\">226</div><div class=\"line\">227</div><div class=\"line\">228</div><div class=\"line\">229</div><div class=\"line\">230</div><div class=\"line\">231</div><div class=\"line\">232</div><div class=\"line\">233</div><div class=\"line\">234</div><div class=\"line\">235</div><div class=\"line\">236</div><div class=\"line\">237</div><div class=\"line\">238</div><div class=\"line\">239</div><div class=\"line\">240</div><div class=\"line\">241</div><div class=\"line\">242</div><div class=\"line\">243</div><div class=\"line\">244</div><div class=\"line\">245</div><div class=\"line\">246</div><div class=\"line\">247</div><div class=\"line\">248</div><div class=\"line\">249</div><div class=\"line\">250</div><div class=\"line\">251</div><div class=\"line\">252</div><div class=\"line\">253</div><div class=\"line\">254</div><div class=\"line\">255</div><div class=\"line\">256</div><div class=\"line\">257</div><div class=\"line\">258</div><div class=\"line\">259</div><div class=\"line\">260</div><div class=\"line\">261</div><div class=\"line\">262</div><div class=\"line\">263</div><div class=\"line\">264</div><div class=\"line\">265</div><div class=\"line\">266</div><div class=\"line\">267</div><div class=\"line\">268</div><div class=\"line\">269</div><div class=\"line\">270</div><div class=\"line\">271</div><div class=\"line\">272</div><div class=\"line\">273</div><div class=\"line\">274</div><div class=\"line\">275</div><div class=\"line\">276</div><div class=\"line\">277</div><div class=\"line\">278</div><div class=\"line\">279</div><div class=\"line\">280</div><div class=\"line\">281</div><div class=\"line\">282</div><div class=\"line\">283</div><div class=\"line\">284</div><div class=\"line\">285</div><div class=\"line\">286</div><div class=\"line\">287</div><div class=\"line\">288</div><div class=\"line\">289</div><div class=\"line\">290</div><div class=\"line\">291</div><div class=\"line\">292</div><div class=\"line\">293</div><div class=\"line\">294</div><div class=\"line\">295</div><div class=\"line\">296</div><div class=\"line\">297</div><div class=\"line\">298</div><div class=\"line\">299</div><div class=\"line\">300</div><div class=\"line\">301</div><div class=\"line\">302</div><div class=\"line\">303</div><div class=\"line\">304</div><div class=\"line\">305</div><div class=\"line\">306</div><div class=\"line\">307</div><div class=\"line\">308</div><div class=\"line\">309</div><div class=\"line\">310</div><div class=\"line\">311</div><div class=\"line\">312</div><div class=\"line\">313</div><div class=\"line\">314</div><div class=\"line\">315</div><div class=\"line\">316</div><div class=\"line\">317</div><div class=\"line\">318</div><div class=\"line\">319</div><div class=\"line\">320</div><div class=\"line\">321</div><div class=\"line\">322</div><div class=\"line\">323</div><div class=\"line\">324</div><div class=\"line\">325</div><div class=\"line\">326</div><div class=\"line\">327</div><div class=\"line\">328</div><div class=\"line\">329</div><div class=\"line\">330</div><div class=\"line\">331</div><div class=\"line\">332</div><div class=\"line\">333</div><div class=\"line\">334</div><div class=\"line\">335</div><div class=\"line\">336</div><div class=\"line\">337</div><div class=\"line\">338</div><div class=\"line\">339</div><div class=\"line\">340</div><div class=\"line\">341</div><div class=\"line\">342</div><div class=\"line\">343</div><div class=\"line\">344</div><div class=\"line\">345</div><div class=\"line\">346</div><div class=\"line\">347</div><div class=\"line\">348</div><div class=\"line\">349</div><div class=\"line\">350</div><div class=\"line\">351</div><div class=\"line\">352</div><div class=\"line\">353</div><div class=\"line\">354</div><div class=\"line\">355</div><div class=\"line\">356</div><div class=\"line\">357</div><div class=\"line\">358</div><div class=\"line\">359</div><div class=\"line\">360</div><div class=\"line\">361</div><div class=\"line\">362</div><div class=\"line\">363</div><div class=\"line\">364</div><div class=\"line\">365</div><div class=\"line\">366</div><div class=\"line\">367</div><div class=\"line\">368</div><div class=\"line\">369</div><div class=\"line\">370</div><div class=\"line\">371</div><div class=\"line\">372</div><div class=\"line\">373</div><div class=\"line\">374</div><div class=\"line\">375</div><div class=\"line\">376</div><div class=\"line\">377</div><div class=\"line\">378</div><div class=\"line\">379</div><div class=\"line\">380</div><div class=\"line\">381</div><div class=\"line\">382</div><div class=\"line\">383</div><div class=\"line\">384</div><div class=\"line\">385</div><div class=\"line\">386</div><div class=\"line\">387</div><div class=\"line\">388</div><div class=\"line\">389</div><div class=\"line\">390</div><div class=\"line\">391</div><div class=\"line\">392</div><div class=\"line\">393</div><div class=\"line\">394</div><div class=\"line\">395</div><div class=\"line\">396</div><div class=\"line\">397</div><div class=\"line\">398</div><div class=\"line\">399</div><div class=\"line\">400</div><div class=\"line\">401</div><div class=\"line\">402</div><div class=\"line\">403</div><div class=\"line\">404</div><div class=\"line\">405</div><div class=\"line\">406</div><div class=\"line\">407</div><div class=\"line\">408</div><div class=\"line\">409</div><div class=\"line\">410</div><div class=\"line\">411</div><div class=\"line\">412</div><div class=\"line\">413</div><div class=\"line\">414</div><div class=\"line\">415</div><div class=\"line\">416</div><div class=\"line\">417</div><div class=\"line\">418</div><div class=\"line\">419</div><div class=\"line\">420</div><div class=\"line\">421</div><div class=\"line\">422</div><div class=\"line\">423</div><div class=\"line\">424</div><div class=\"line\">425</div><div class=\"line\">426</div><div class=\"line\">427</div><div class=\"line\">428</div><div class=\"line\">429</div><div class=\"line\">430</div><div class=\"line\">431</div><div class=\"line\">432</div><div class=\"line\">433</div><div class=\"line\">434</div><div class=\"line\">435</div><div class=\"line\">436</div><div class=\"line\">437</div><div class=\"line\">438</div><div class=\"line\">439</div><div class=\"line\">440</div><div class=\"line\">441</div><div class=\"line\">442</div><div class=\"line\">443</div><div class=\"line\">444</div><div class=\"line\">445</div><div class=\"line\">446</div><div class=\"line\">447</div><div class=\"line\">448</div><div class=\"line\">449</div><div class=\"line\">450</div><div class=\"line\">451</div><div class=\"line\">452</div><div class=\"line\">453</div><div class=\"line\">454</div><div class=\"line\">455</div><div class=\"line\">456</div><div class=\"line\">457</div><div class=\"line\">458</div><div class=\"line\">459</div><div class=\"line\">460</div><div class=\"line\">461</div><div class=\"line\">462</div><div class=\"line\">463</div><div class=\"line\">464</div><div class=\"line\">465</div><div class=\"line\">466</div><div class=\"line\">467</div><div class=\"line\">468</div><div class=\"line\">469</div><div class=\"line\">470</div><div class=\"line\">471</div><div class=\"line\">472</div><div class=\"line\">473</div><div class=\"line\">474</div><div class=\"line\">475</div><div class=\"line\">476</div><div class=\"line\">477</div><div class=\"line\">478</div><div class=\"line\">479</div><div class=\"line\">480</div><div class=\"line\">481</div><div class=\"line\">482</div><div class=\"line\">483</div><div class=\"line\">484</div><div class=\"line\">485</div><div class=\"line\">486</div><div class=\"line\">487</div><div class=\"line\">488</div><div class=\"line\">489</div><div class=\"line\">490</div><div class=\"line\">491</div><div class=\"line\">492</div><div class=\"line\">493</div><div class=\"line\">494</div><div class=\"line\">495</div><div class=\"line\">496</div><div class=\"line\">497</div><div class=\"line\">498</div><div class=\"line\">499</div><div class=\"line\">500</div><div class=\"line\">501</div><div class=\"line\">502</div><div class=\"line\">503</div><div class=\"line\">504</div><div class=\"line\">505</div><div class=\"line\">506</div><div class=\"line\">507</div><div class=\"line\">508</div><div class=\"line\">509</div><div class=\"line\">510</div><div class=\"line\">511</div><div class=\"line\">512</div><div class=\"line\">513</div><div class=\"line\">514</div><div class=\"line\">515</div><div class=\"line\">516</div><div class=\"line\">517</div><div class=\"line\">518</div><div class=\"line\">519</div><div class=\"line\">520</div><div class=\"line\">521</div><div class=\"line\">522</div><div class=\"line\">523</div><div class=\"line\">524</div><div class=\"line\">525</div><div class=\"line\">526</div><div class=\"line\">527</div><div class=\"line\">528</div><div class=\"line\">529</div><div class=\"line\">530</div><div class=\"line\">531</div><div class=\"line\">532</div><div class=\"line\">533</div><div class=\"line\">534</div><div class=\"line\">535</div><div class=\"line\">536</div><div class=\"line\">537</div><div class=\"line\">538</div><div class=\"line\">539</div><div class=\"line\">540</div><div class=\"line\">541</div><div class=\"line\">542</div><div class=\"line\">543</div><div class=\"line\">544</div><div class=\"line\">545</div><div class=\"line\">546</div><div class=\"line\">547</div><div class=\"line\">548</div><div class=\"line\">549</div><div class=\"line\">550</div><div class=\"line\">551</div><div class=\"line\">552</div><div class=\"line\">553</div><div class=\"line\">554</div><div class=\"line\">555</div><div class=\"line\">556</div><div class=\"line\">557</div><div class=\"line\">558</div><div class=\"line\">559</div><div class=\"line\">560</div><div class=\"line\">561</div><div class=\"line\">562</div><div class=\"line\">563</div><div class=\"line\">564</div><div class=\"line\">565</div><div class=\"line\">566</div><div class=\"line\">567</div><div class=\"line\">568</div><div class=\"line\">569</div><div class=\"line\">570</div><div class=\"line\">571</div><div class=\"line\">572</div><div class=\"line\">573</div><div class=\"line\">574</div><div class=\"line\">575</div><div class=\"line\">576</div><div class=\"line\">577</div><div class=\"line\">578</div><div class=\"line\">579</div><div class=\"line\">580</div><div class=\"line\">581</div><div class=\"line\">582</div><div class=\"line\">583</div><div class=\"line\">584</div><div class=\"line\">585</div><div class=\"line\">586</div><div class=\"line\">587</div><div class=\"line\">588</div><div class=\"line\">589</div><div class=\"line\">590</div><div class=\"line\">591</div><div class=\"line\">592</div><div class=\"line\">593</div><div class=\"line\">594</div><div class=\"line\">595</div><div class=\"line\">596</div><div class=\"line\">597</div><div class=\"line\">598</div><div class=\"line\">599</div><div class=\"line\">600</div><div class=\"line\">601</div><div class=\"line\">602</div><div class=\"line\">603</div><div class=\"line\">604</div><div class=\"line\">605</div><div class=\"line\">606</div><div class=\"line\">607</div><div class=\"line\">608</div><div class=\"line\">609</div><div class=\"line\">610</div><div class=\"line\">611</div><div class=\"line\">612</div><div class=\"line\">613</div><div class=\"line\">614</div><div class=\"line\">615</div><div class=\"line\">616</div><div class=\"line\">617</div><div class=\"line\">618</div><div class=\"line\">619</div><div class=\"line\">620</div><div class=\"line\">621</div><div class=\"line\">622</div><div class=\"line\">623</div><div class=\"line\">624</div><div class=\"line\">625</div><div class=\"line\">626</div><div class=\"line\">627</div><div class=\"line\">628</div><div class=\"line\">629</div><div class=\"line\">630</div><div class=\"line\">631</div><div class=\"line\">632</div><div class=\"line\">633</div><div class=\"line\">634</div><div class=\"line\">635</div><div class=\"line\">636</div><div class=\"line\">637</div><div class=\"line\">638</div><div class=\"line\">639</div><div class=\"line\">640</div><div class=\"line\">641</div><div class=\"line\">642</div><div class=\"line\">643</div><div class=\"line\">644</div><div class=\"line\">645</div><div class=\"line\">646</div><div class=\"line\">647</div><div class=\"line\">648</div><div class=\"line\">649</div><div class=\"line\">650</div><div class=\"line\">651</div><div class=\"line\">652</div><div class=\"line\">653</div><div class=\"line\">654</div><div class=\"line\">655</div><div class=\"line\">656</div><div class=\"line\">657</div><div class=\"line\">658</div><div class=\"line\">659</div><div class=\"line\">660</div><div class=\"line\">661</div><div class=\"line\">662</div><div class=\"line\">663</div><div class=\"line\">664</div><div class=\"line\">665</div><div class=\"line\">666</div><div class=\"line\">667</div><div class=\"line\">668</div><div class=\"line\">669</div><div class=\"line\">670</div><div class=\"line\">671</div><div class=\"line\">672</div><div class=\"line\">673</div><div class=\"line\">674</div><div class=\"line\">675</div><div class=\"line\">676</div><div class=\"line\">677</div><div class=\"line\">678</div><div class=\"line\">679</div><div class=\"line\">680</div><div class=\"line\">681</div><div class=\"line\">682</div><div class=\"line\">683</div><div class=\"line\">684</div><div class=\"line\">685</div><div class=\"line\">686</div><div class=\"line\">687</div><div class=\"line\">688</div><div class=\"line\">689</div><div class=\"line\">690</div><div class=\"line\">691</div><div class=\"line\">692</div><div class=\"line\">693</div><div class=\"line\">694</div><div class=\"line\">695</div><div class=\"line\">696</div><div class=\"line\">697</div><div class=\"line\">698</div><div class=\"line\">699</div><div class=\"line\">700</div><div class=\"line\">701</div><div class=\"line\">702</div><div class=\"line\">703</div><div class=\"line\">704</div><div class=\"line\">705</div><div class=\"line\">706</div><div class=\"line\">707</div><div class=\"line\">708</div><div class=\"line\">709</div><div class=\"line\">710</div><div class=\"line\">711</div><div class=\"line\">712</div><div class=\"line\">713</div><div class=\"line\">714</div><div class=\"line\">715</div><div class=\"line\">716</div><div class=\"line\">717</div><div class=\"line\">718</div><div class=\"line\">719</div><div class=\"line\">720</div><div class=\"line\">721</div><div class=\"line\">722</div><div class=\"line\">723</div><div class=\"line\">724</div><div class=\"line\">725</div><div class=\"line\">726</div><div class=\"line\">727</div><div class=\"line\">728</div><div class=\"line\">729</div><div class=\"line\">730</div><div class=\"line\">731</div><div class=\"line\">732</div><div class=\"line\">733</div><div class=\"line\">734</div><div class=\"line\">735</div><div class=\"line\">736</div><div class=\"line\">737</div><div class=\"line\">738</div><div class=\"line\">739</div><div class=\"line\">740</div><div class=\"line\">741</div><div class=\"line\">742</div><div class=\"line\">743</div><div class=\"line\">744</div><div class=\"line\">745</div><div class=\"line\">746</div><div class=\"line\">747</div><div class=\"line\">748</div><div class=\"line\">749</div><div class=\"line\">750</div><div class=\"line\">751</div><div class=\"line\">752</div><div class=\"line\">753</div><div class=\"line\">754</div></pre></td><td class=\"code\"><pre><div class=\"line\">android:<span class=\"function\">alpha </div><div class=\"line\"><span class=\"title\">setAlpha</span><span class=\"params\">(<span class=\"keyword\">float</span>)</span> : 0-101</div><div class=\"line\">android:background </div><div class=\"line\"><span class=\"title\">setBackgroundResource</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : </div><div class=\"line\">android:clickable </div><div class=\"line\"><span class=\"title\">setClickable</span><span class=\"params\">(<span class=\"keyword\">boolean</span>)</span> : </div><div class=\"line\">android:contentDescription </div><div class=\"line\"><span class=\"title\">setContentDescription</span><span class=\"params\">(CharSequence)</span> : View,View</div><div class=\"line\">android:drawingCacheQuality </div><div class=\"line\"><span class=\"title\">setDrawingCacheQuality</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : \"3 auto high low\"</div><div class=\"line\">android:duplicateParentState </div><div class=\"line\">: </div><div class=\"line\">android:fadeScrollbars </div><div class=\"line\"><span class=\"title\">setScrollbarFadingEnabled</span><span class=\"params\">(<span class=\"keyword\">boolean</span>)</span> : ScrollBar</div><div class=\"line\">android:fadingEdgeLength </div><div class=\"line\"><span class=\"title\">getVerticalFadingEdgeLength</span><span class=\"params\">()</span> : </div><div class=\"line\">android:filterTouchesWhenObscured </div><div class=\"line\"><span class=\"title\">setFilterTouchesWhenObscured</span><span class=\"params\">(<span class=\"keyword\">boolean</span>)</span> : view</div><div class=\"line\">android:fitsSystemWindows </div><div class=\"line\"><span class=\"title\">setFitsSystemWindows</span><span class=\"params\">(<span class=\"keyword\">boolean</span>)</span> : </div><div class=\"line\">android:focusable </div><div class=\"line\"><span class=\"title\">setFocusable</span><span class=\"params\">(<span class=\"keyword\">boolean</span>)</span> : <span class=\"title\">requestFocus</span><span class=\"params\">()</span>EditTextEditTextfocusable<span class=\"keyword\">false</span>TouchfocusableInTouchMode<span class=\"keyword\">true</span></div><div class=\"line\">android:focusableInTouchMode </div><div class=\"line\"><span class=\"title\">setFocusableInTouchMode</span><span class=\"params\">(<span class=\"keyword\">boolean</span>)</span> : TouchView</div><div class=\"line\">android:hapticFeedbackEnabled </div><div class=\"line\"><span class=\"title\">setHapticFeedbackEnabled</span><span class=\"params\">(<span class=\"keyword\">boolean</span>)</span> : </div><div class=\"line\">android:id </div><div class=\"line\"><span class=\"title\">setId</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : Viewlayout.xmlView.<span class=\"title\">findViewById</span><span class=\"params\">()</span> Activity.<span class=\"title\">findViewById</span><span class=\"params\">()</span>Viewlayout.xmlid</div><div class=\"line\">android:importantForAccessibility </div><div class=\"line\"><span class=\"title\">setImportantForAccessibility</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : </div><div class=\"line\">android:isScrollContainer </div><div class=\"line\"><span class=\"title\">setScrollContainer</span><span class=\"params\">(<span class=\"keyword\">boolean</span>)</span> : ViewListView/ GridView/ ScrollViewEdidTextandroid:scrollbars</div><div class=\"line\">android:keepScreenOn </div><div class=\"line\"><span class=\"title\">setKeepScreenOn</span><span class=\"params\">(<span class=\"keyword\">boolean</span>)</span> : </div><div class=\"line\">android:layerType </div><div class=\"line\"><span class=\"title\">setLayerType</span><span class=\"params\">(<span class=\"keyword\">int</span>,Paint)</span> : \"3 none software hardware\"</div><div class=\"line\">android:layoutDirection </div><div class=\"line\"><span class=\"title\">setLayoutDirection</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : </div><div class=\"line\">android:longClickable </div><div class=\"line\"><span class=\"title\">setLongClickable</span><span class=\"params\">(<span class=\"keyword\">boolean</span>)</span> : </div><div class=\"line\">android:minHeight </div><div class=\"line\"><span class=\"title\">setMinimumHeight</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : </div><div class=\"line\">android:minWidth </div><div class=\"line\"><span class=\"title\">setMinimumWidth</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : </div><div class=\"line\">android:nextFocusDown </div><div class=\"line\"><span class=\"title\">setNextFocusDownId</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : viewid</div><div class=\"line\">android:nextFocusForward </div><div class=\"line\"><span class=\"title\">setNextFocusForwardId</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : viewid</div><div class=\"line\">android:nextFocusLeft </div><div class=\"line\"><span class=\"title\">setNextFocusLeftId</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : viewid</div><div class=\"line\">android:nextFocusRight </div><div class=\"line\"><span class=\"title\">setNextFocusRightId</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : viewid</div><div class=\"line\">android:nextFocusUp </div><div class=\"line\"><span class=\"title\">setNextFocusUpId</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : viewid</div><div class=\"line\">android:onClick </div><div class=\"line\"><span class=\"title\">setOnClick</span><span class=\"params\">()</span> <span class=\"title\">onClick</span><span class=\"params\">(View view)</span>: </div><div class=\"line\">android:padding </div><div class=\"line\"><span class=\"title\">setPaddingRelative</span><span class=\"params\">(<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>)</span> : </div><div class=\"line\">android:paddingBottom </div><div class=\"line\"><span class=\"title\">setPaddingRelative</span><span class=\"params\">(<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>)</span> : </div><div class=\"line\">android:paddingEnd </div><div class=\"line\"><span class=\"title\">setPaddingRelative</span><span class=\"params\">(<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>)</span> : android:paddingRight</div><div class=\"line\">android:paddingLeft </div><div class=\"line\"><span class=\"title\">setPadding</span><span class=\"params\">(<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>)</span> : </div><div class=\"line\">android:paddingRight </div><div class=\"line\"><span class=\"title\">setPadding</span><span class=\"params\">(<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>)</span> : </div><div class=\"line\">android:paddingStart </div><div class=\"line\"><span class=\"title\">setPaddingRelative</span><span class=\"params\">(<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>)</span> : android:paddingLeft</div><div class=\"line\">android:paddingTop </div><div class=\"line\"><span class=\"title\">setPaddingRelative</span><span class=\"params\">(<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>)</span> : </div><div class=\"line\">android:requiresFadingEdge </div><div class=\"line\"><span class=\"title\">setVerticalFadingEdgeEnabled</span><span class=\"params\">(<span class=\"keyword\">boolean</span>)</span> : </div><div class=\"line\">android:rotation </div><div class=\"line\"><span class=\"title\">setRotation</span><span class=\"params\">(<span class=\"keyword\">float</span>)</span> : </div><div class=\"line\">android:rotationX </div><div class=\"line\"><span class=\"title\">setRotationX</span><span class=\"params\">(<span class=\"keyword\">float</span>)</span> : </div><div class=\"line\">android:rotationY </div><div class=\"line\"><span class=\"title\">setRotationY</span><span class=\"params\">(<span class=\"keyword\">float</span>)</span> : </div><div class=\"line\">android:saveEnabled </div><div class=\"line\"><span class=\"title\">setSaveEnabled</span><span class=\"params\">(<span class=\"keyword\">boolean</span>)</span> : viewviewid</div><div class=\"line\">android:scaleX </div><div class=\"line\"><span class=\"title\">setScaleX</span><span class=\"params\">(<span class=\"keyword\">float</span>)</span> : </div><div class=\"line\">android:scaleY </div><div class=\"line\"><span class=\"title\">setScaleY</span><span class=\"params\">(<span class=\"keyword\">float</span>)</span> : </div><div class=\"line\">android:scrollX </div><div class=\"line\">: x</div><div class=\"line\">android:scrollY </div><div class=\"line\">: y</div><div class=\"line\">android:scrollbarAlwaysDrawHorizontalTrack </div><div class=\"line\">: </div><div class=\"line\">android:scrollbarAlwaysDrawVerticalTrack </div><div class=\"line\">: </div><div class=\"line\">android:scrollbarDefaultDelayBeforeFade </div><div class=\"line\"><span class=\"title\">setScrollBarDefaultDelayBeforeFade</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : n</div><div class=\"line\">android:scrollbarFadeDuration </div><div class=\"line\"><span class=\"title\">setScrollBarFadeDuration</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : </div><div class=\"line\">android:scrollbarSize </div><div class=\"line\"><span class=\"title\">setScrollBarSize</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : </div><div class=\"line\">android:scrollbarStyle </div><div class=\"line\"><span class=\"title\">setScrollBarStyle</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : \"4 insideOverlay insideInset outsideOverlay outsideInset insidepaddingoutsidepaddingviewOverlayInsetpadding\"</div><div class=\"line\">android:scrollbarThumbHorizontal </div><div class=\"line\">: drawable</div><div class=\"line\">android:scrollbarThumbVertical </div><div class=\"line\">: drawable</div><div class=\"line\">android:scrollbarTrackHorizontal </div><div class=\"line\">: drawable</div><div class=\"line\">android:scrollbarTrackVertical </div><div class=\"line\">: drawable</div><div class=\"line\">android:scrollbars </div><div class=\"line\">: \"3: none horizontal vertical\"</div><div class=\"line\">android:soundEffectsEnabled </div><div class=\"line\"><span class=\"title\">setSoundEffectsEnabled</span><span class=\"params\">(<span class=\"keyword\">boolean</span>)</span> : view</div><div class=\"line\">android:tag </div><div class=\"line\">: stringidid</div><div class=\"line\">android:textAlignment </div><div class=\"line\"><span class=\"title\">setTextAlignment</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : </div><div class=\"line\">android:textDirection </div><div class=\"line\"><span class=\"title\">setTextDirection</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : </div><div class=\"line\">android:transformPivotX </div><div class=\"line\"><span class=\"title\">setPivotX</span><span class=\"params\">(<span class=\"keyword\">float</span>)</span> : </div><div class=\"line\">android:transformPivotY </div><div class=\"line\"><span class=\"title\">setPivotY</span><span class=\"params\">(<span class=\"keyword\">float</span>)</span> : </div><div class=\"line\">android:translationX </div><div class=\"line\"><span class=\"title\">setTranslationX</span><span class=\"params\">(<span class=\"keyword\">float</span>)</span> : </div><div class=\"line\">android:translationY </div><div class=\"line\"><span class=\"title\">setTranslationY</span><span class=\"params\">(<span class=\"keyword\">float</span>)</span> : </div><div class=\"line\">android:visibility </div><div class=\"line\"><span class=\"title\">setVisibility</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : \"view3 goneview invisibleview visible\"</div><div class=\"line\">TextView</div><div class=\"line\">TextView android:autoLink </div><div class=\"line\"><span class=\"title\">setAutoLinkMask</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : URL/email//map<span class=\"params\">(none/web/email/phone/map/all)</span></div><div class=\"line\">android:autoText </div><div class=\"line\"><span class=\"title\">setKeyListener</span><span class=\"params\">(KeyListener)</span> : </div><div class=\"line\">android:bufferType </div><div class=\"line\"><span class=\"title\">setText</span><span class=\"params\">(CharSequence,TextView.BufferType)</span> : <span class=\"title\">getText</span><span class=\"params\">()</span>editable StringBuildergetTextappend</div><div class=\"line\">android:capitalize </div><div class=\"line\"><span class=\"title\">setKeyListener</span><span class=\"params\">(KeyListener)</span> : 21</div><div class=\"line\">android:cursorVisible </div><div class=\"line\"><span class=\"title\">setCursorVisible</span><span class=\"params\">(<span class=\"keyword\">boolean</span>)</span> : /</div><div class=\"line\">android:digits </div><div class=\"line\"><span class=\"title\">setKeyListener</span><span class=\"params\">(KeyListener)</span> : 1234567890.+-*/%\\<span class=\"title\">n</span><span class=\"params\">()</span></div><div class=\"line\">android:drawableBottom </div><div class=\"line\"><span class=\"title\">setCompoundDrawablesWithIntrinsicBounds</span><span class=\"params\">(<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>)</span> : textdrawabletextbackground</div><div class=\"line\">android:drawableEnd </div><div class=\"line\"><span class=\"title\">setCompoundDrawablesRelativeWithIntrinsicBounds</span><span class=\"params\">(<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>)</span> : drawable\"@[+][<span class=\"keyword\">package</span>:]type:name\"\"?[<span class=\"keyword\">package</span>:][type:]name\"\"#rgb\", \"#argb\", \"#rrggbb\", or \"#aarrggbb\"</div><div class=\"line\">android:drawableLeft </div><div class=\"line\"><span class=\"title\">setCompoundDrawablesWithIntrinsicBounds</span><span class=\"params\">(<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>)</span> : textdrawable</div><div class=\"line\">android:drawablePadding </div><div class=\"line\"><span class=\"title\">setCompoundDrawablePadding</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : textdrawabledrawableLeftdrawableRightdrawableTopdrawableBottom</div><div class=\"line\">android:drawableRight </div><div class=\"line\"><span class=\"title\">setCompoundDrawablesWithIntrinsicBounds</span><span class=\"params\">(<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>)</span> : textdrawable</div><div class=\"line\">android:drawableStart </div><div class=\"line\"><span class=\"title\">setCompoundDrawablesRelativeWithIntrinsicBounds</span><span class=\"params\">(<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>)</span> : drawable\"@[+][<span class=\"keyword\">package</span>:]type:name\"\"?[<span class=\"keyword\">package</span>:][type:]name\"\"#rgb\", \"#argb\", \"#rrggbb\", or \"#aarrggbb\"</div><div class=\"line\">android:drawableTop </div><div class=\"line\"><span class=\"title\">setCompoundDrawablesWithIntrinsicBounds</span><span class=\"params\">(<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>,<span class=\"keyword\">int</span>)</span> : textdrawable</div><div class=\"line\">android:editable </div><div class=\"line\">: EditView</div><div class=\"line\">android:editorExtras </div><div class=\"line\"><span class=\"title\">setInputExtras</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : EditView</div><div class=\"line\">android:ellipsize </div><div class=\"line\"><span class=\"title\">setEllipsize</span><span class=\"params\">(TextUtils.TruncateAt)</span> : ,startendmiddle-marquee <span class=\"params\">()</span></div><div class=\"line\">android:ems </div><div class=\"line\"><span class=\"title\">setEms</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : TextViewN</div><div class=\"line\">android:fontFamily </div><div class=\"line\"><span class=\"title\">setTypeface</span><span class=\"params\">(Typeface)</span> : </div><div class=\"line\">android:freezesText </div><div class=\"line\"><span class=\"title\">setFreezesText</span><span class=\"params\">(<span class=\"keyword\">boolean</span>)</span> : </div><div class=\"line\">android:gravity </div><div class=\"line\"><span class=\"title\">setGravity</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : center</div><div class=\"line\">android:height </div><div class=\"line\"><span class=\"title\">setHeight</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : <span class=\"title\">px</span><span class=\"params\">()</span>/dp/sp/in/<span class=\"title\">mm</span><span class=\"params\">()</span></div><div class=\"line\">android:hint </div><div class=\"line\"><span class=\"title\">setHint</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : TexttextColorHint</div><div class=\"line\">android:imeActionId </div><div class=\"line\"><span class=\"title\">setImeActionLabel</span><span class=\"params\">(CharSequence,<span class=\"keyword\">int</span>)</span> : IMEID</div><div class=\"line\">android:imeActionLabel </div><div class=\"line\"><span class=\"title\">setImeActionLabel</span><span class=\"params\">(CharSequence,<span class=\"keyword\">int</span>)</span> : IMEEditView</div><div class=\"line\">android:imeOptions </div><div class=\"line\"><span class=\"title\">setImeOptions</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : IMEactionDone</div><div class=\"line\">android:includeFontPadding </div><div class=\"line\"><span class=\"title\">setIncludeFontPadding</span><span class=\"params\">(<span class=\"keyword\">boolean</span>)</span> : <span class=\"keyword\">true</span></div><div class=\"line\">android:inputMethod </div><div class=\"line\"><span class=\"title\">setKeyListener</span><span class=\"params\">(KeyListener)</span> : com.google.android.inputmethod.pinyin</div><div class=\"line\">android:inputType </div><div class=\"line\"><span class=\"title\">setRawInputType</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : EditView</div><div class=\"line\">android:lineSpacingExtra </div><div class=\"line\"><span class=\"title\">setLineSpacing</span><span class=\"params\">(<span class=\"keyword\">float</span>,<span class=\"keyword\">float</span>)</span> : </div><div class=\"line\">android:lineSpacingMultiplier </div><div class=\"line\"><span class=\"title\">setLineSpacing</span><span class=\"params\">(<span class=\"keyword\">float</span>,<span class=\"keyword\">float</span>)</span> : 1.2</div><div class=\"line\">android:lines </div><div class=\"line\"><span class=\"title\">setLines</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : </div><div class=\"line\">android:linksClickable </div><div class=\"line\"><span class=\"title\">setLinksClickable</span><span class=\"params\">(<span class=\"keyword\">boolean</span>)</span> : autoLink</div><div class=\"line\">android:marqueeRepeatLimit </div><div class=\"line\"><span class=\"title\">setMarqueeRepeatLimit</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : ellipsizemarqueemarquee_forever</div><div class=\"line\">android:maxEms </div><div class=\"line\"><span class=\"title\">setMaxEms</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : TextViewNemsems</div><div class=\"line\">android:maxHeight </div><div class=\"line\"><span class=\"title\">setMaxHeight</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : </div><div class=\"line\">android:maxLength </div><div class=\"line\"><span class=\"title\">setFilters</span><span class=\"params\">(InputFilter)</span> : </div><div class=\"line\">android:maxLines </div><div class=\"line\"><span class=\"title\">setMaxLines</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : widthlayout_width</div><div class=\"line\">android:maxWidth </div><div class=\"line\"><span class=\"title\">setMaxWidth</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : </div><div class=\"line\">android:minEms </div><div class=\"line\"><span class=\"title\">setMinEms</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : TextViewNemsems</div><div class=\"line\">android:minHeight </div><div class=\"line\"><span class=\"title\">setMinHeight</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : </div><div class=\"line\">android:minLines </div><div class=\"line\"><span class=\"title\">setMinLines</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : lines</div><div class=\"line\">android:minWidth </div><div class=\"line\"><span class=\"title\">setMinWidth</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : </div><div class=\"line\">android:numeric </div><div class=\"line\"><span class=\"title\">setKeyListener</span><span class=\"params\">(KeyListener)</span> : TextViewTextViewEdtiView</div><div class=\"line\">android:password </div><div class=\"line\"><span class=\"title\">setTransformationMethod</span><span class=\"params\">(TransformationMethod)</span> : .</div><div class=\"line\">android:phoneNumber </div><div class=\"line\"><span class=\"title\">setKeyListener</span><span class=\"params\">(KeyListener)</span> : </div><div class=\"line\">android:privateImeOptions </div><div class=\"line\"><span class=\"title\">setPrivateImeOptions</span><span class=\"params\">(String)</span> : EditText</div><div class=\"line\">android:scrollHorizontally </div><div class=\"line\"><span class=\"title\">setHorizontallyScrolling</span><span class=\"params\">(<span class=\"keyword\">boolean</span>)</span> : TextView</div><div class=\"line\">android:selectAllOnFocus </div><div class=\"line\"><span class=\"title\">setSelectAllOnFocus</span><span class=\"params\">(<span class=\"keyword\">boolean</span>)</span> : TextView</div><div class=\"line\">android:shadowColor </div><div class=\"line\"><span class=\"title\">setShadowLayer</span><span class=\"params\">(<span class=\"keyword\">float</span>,<span class=\"keyword\">float</span>,<span class=\"keyword\">float</span>,<span class=\"keyword\">int</span>)</span> : shadowRadius</div><div class=\"line\">android:shadowDx </div><div class=\"line\"><span class=\"title\">setShadowLayer</span><span class=\"params\">(<span class=\"keyword\">float</span>,<span class=\"keyword\">float</span>,<span class=\"keyword\">float</span>,<span class=\"keyword\">int</span>)</span> : </div><div class=\"line\">android:shadowDy </div><div class=\"line\"><span class=\"title\">setShadowLayer</span><span class=\"params\">(<span class=\"keyword\">float</span>,<span class=\"keyword\">float</span>,<span class=\"keyword\">float</span>,<span class=\"keyword\">int</span>)</span> : </div><div class=\"line\">android:shadowRadius </div><div class=\"line\"><span class=\"title\">setShadowLayer</span><span class=\"params\">(<span class=\"keyword\">float</span>,<span class=\"keyword\">float</span>,<span class=\"keyword\">float</span>,<span class=\"keyword\">int</span>)</span> : 0.13.0</div><div class=\"line\">android:singleLine </div><div class=\"line\"><span class=\"title\">setTransformationMethod</span><span class=\"params\">(TransformationMethod)</span> : layout_widthandroid:text</span>=<span class=\"string\">\"test_ singleLine \"</span> android:singleLine=<span class=\"string\">\"true\"</span> android:layout_width=<span class=\"string\">\"20dp\"</span>tsingleLine<span class=\"keyword\">false</span></div><div class=\"line\">android:<span class=\"function\">text </div><div class=\"line\"><span class=\"title\">setText</span><span class=\"params\">(CharSequence,TextView.BufferType)</span> : .</div><div class=\"line\">android:textAllCaps </div><div class=\"line\"><span class=\"title\">setAllCaps</span><span class=\"params\">(<span class=\"keyword\">boolean</span>)</span> : \"<span class=\"keyword\">true</span>\"\"<span class=\"keyword\">false</span>\"</div><div class=\"line\">android:textAppearance </div><div class=\"line\">: ?android:attr/textAppearanceLargeInverse</div><div class=\"line\">android:textColor </div><div class=\"line\"><span class=\"title\">setTextColor</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : </div><div class=\"line\">android:textColorHighlight </div><div class=\"line\"><span class=\"title\">setHighlightColor</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : </div><div class=\"line\">android:textColorHint </div><div class=\"line\"><span class=\"title\">setHintTextColor</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : hint</div><div class=\"line\">android:textColorLink </div><div class=\"line\"><span class=\"title\">setLinkTextColor</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : .</div><div class=\"line\">android:textIsSelectable </div><div class=\"line\"><span class=\"title\">isTextSelectable</span><span class=\"params\">()</span> : \"<span class=\"keyword\">true</span>\"\"<span class=\"keyword\">false</span>\"</div><div class=\"line\">android:textScaleX </div><div class=\"line\"><span class=\"title\">setTextScaleX</span><span class=\"params\">(<span class=\"keyword\">float</span>)</span> : 1.0f</div><div class=\"line\">android:textSize </div><div class=\"line\"><span class=\"title\">setTextSize</span><span class=\"params\">(<span class=\"keyword\">int</span>,<span class=\"keyword\">float</span>)</span> : sp15sp</div><div class=\"line\">android:textStyle </div><div class=\"line\"><span class=\"title\">setTypeface</span><span class=\"params\">(Typeface)</span> : [<span class=\"title\">bold</span><span class=\"params\">()</span> 0, <span class=\"title\">italic</span><span class=\"params\">()</span> 1, <span class=\"title\">bolditalic</span><span class=\"params\">()</span> 2] |</div><div class=\"line\">android:typeface </div><div class=\"line\"><span class=\"title\">setTypeface</span><span class=\"params\">(Typeface)</span> : normal 0, sans 1, serif 2, <span class=\"title\">monospace</span><span class=\"params\">()</span> 3]</div><div class=\"line\">android:width </div><div class=\"line\"><span class=\"title\">setWidth</span><span class=\"params\">(<span class=\"keyword\">int</span>)</span> : <span class=\"title\">px</span><span class=\"params\">()</span>/dp/sp/in/<span class=\"title\">mm</span><span class=\"params\">()</span></div><div class=\"line\">android:fadingEdgeLength</div><div class=\"line\">pxdpspinmm</div><div class=\"line\">android:fitsSystemWindows</div><div class=\"line\"><span class=\"keyword\">true</span><span class=\"keyword\">false</span></div><div class=\"line\">android:focusable</div><div class=\"line\"><span class=\"keyword\">true</span><span class=\"keyword\">false</span></div><div class=\"line\">android:focusableInTouchMode</div><div class=\"line\"><span class=\"keyword\">true</span><span class=\"keyword\">false</span></div><div class=\"line\">android:hapticFeedbackEnabled</div><div class=\"line\"><span class=\"keyword\">true</span><span class=\"keyword\">false</span></div><div class=\"line\">android:id</div><div class=\"line\">ActivityViewfindViewByIdidandroid:id</span>=@+id/id</div><div class=\"line\">android:isScrollContainer</div><div class=\"line\"><span class=\"keyword\">true</span><span class=\"keyword\">false</span></div><div class=\"line\">android:keepScreenOn</div><div class=\"line\"><span class=\"keyword\">true</span><span class=\"keyword\">false</span></div><div class=\"line\">android:longClickable</div><div class=\"line\"><span class=\"keyword\">true</span><span class=\"keyword\">false</span></div><div class=\"line\">android:minHeight</div><div class=\"line\">android:fadingEdgeLength</div><div class=\"line\">android:minWidth</div><div class=\"line\">android:fadingEdgeLength</div><div class=\"line\">android:nextFocusDown</div><div class=\"line\">id</div><div class=\"line\">android:nextFocusLeft</div><div class=\"line\">id</div><div class=\"line\">android:nextFocusRight</div><div class=\"line\">id</div><div class=\"line\">android:nextFocusUp</div><div class=\"line\">id</div><div class=\"line\">android:padding</div><div class=\"line\"><span class=\"number\">4</span>android:fadingEdgeLength</div><div class=\"line\">android:paddingBottom</div><div class=\"line\">android:padding</div><div class=\"line\">android:paddingLeft</div><div class=\"line\">android:padding</div><div class=\"line\">android:paddingRight</div><div class=\"line\">android:padding</div><div class=\"line\">android:paddingTop</div><div class=\"line\">android:padding</div><div class=\"line\">android:saveEnabled</div><div class=\"line\"><span class=\"keyword\">true</span><span class=\"keyword\">false</span></div><div class=\"line\">android:scrollX</div><div class=\"line\">android:padding</div><div class=\"line\">android:scrollY</div><div class=\"line\">android:padding</div><div class=\"line\">android:scrollbarAlwaysDrawHorizontalTrack</div><div class=\"line\"><span class=\"keyword\">true</span><span class=\"keyword\">false</span></div><div class=\"line\">android:scrollbarAlwaysDrawVerticalTrack</div><div class=\"line\"><span class=\"keyword\">true</span><span class=\"keyword\">false</span></div><div class=\"line\">android:scrollbarSize</div><div class=\"line\">android:padding</div><div class=\"line\">android:scrollbarStyle</div><div class=\"line\"></div><div class=\"line\">insideOverlay</div><div class=\"line\">insideInset</div><div class=\"line\">outsideOverly</div><div class=\"line\">outsideInset</div><div class=\"line\">android:scrollbarThumbHorizontal</div><div class=\"line\"></div><div class=\"line\">android:scrollbarThumbVertical</div><div class=\"line\"></div><div class=\"line\">android:scrollbarTrackHorizontal</div><div class=\"line\"></div><div class=\"line\">android:scrollbarTrackVertical</div><div class=\"line\"></div><div class=\"line\">android:scrollbars</div><div class=\"line\"></div><div class=\"line\">none</div><div class=\"line\">horizontal</div><div class=\"line\">vertical</div><div class=\"line\">android:soundEffectsEnabled</div><div class=\"line\"><span class=\"keyword\">true</span><span class=\"keyword\">false</span></div><div class=\"line\">android:tag</div><div class=\"line\">ViewgetTagfindViewByTag</div><div class=\"line\">android:visibility</div><div class=\"line\"></div><div class=\"line\">visible</div><div class=\"line\">invisible</div><div class=\"line\">gone</div><div class=\"line\">LinearLayout</div><div class=\"line\"></div><div class=\"line\">android:baselineAligned</div><div class=\"line\"></div><div class=\"line\">android:baselineAlignedChildIndex</div><div class=\"line\"></div><div class=\"line\">android:gravity</div><div class=\"line\"></div><div class=\"line\">top</div><div class=\"line\">bottom</div><div class=\"line\">left</div><div class=\"line\">right</div><div class=\"line\">center_vertical</div><div class=\"line\">fill_vertical</div><div class=\"line\">center_horizontal</div><div class=\"line\">fill_horizontal</div><div class=\"line\">center</div><div class=\"line\">fill</div><div class=\"line\">clip_vertical</div><div class=\"line\">clip_horizontal</div><div class=\"line\">android:orientation</div><div class=\"line\"></div><div class=\"line\">horizontal</div><div class=\"line\">vertical</div><div class=\"line\">android:weightSum</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">LinearLayout_Layout</div><div class=\"line\"></div><div class=\"line\">android:layout_gravity</div><div class=\"line\"></div><div class=\"line\">android:layout_height</div><div class=\"line\"></div><div class=\"line\">android:layout_weight</div><div class=\"line\"></div><div class=\"line\">android:layout_width</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">RalativeLayout</div><div class=\"line\"></div><div class=\"line\">android:gravity</div><div class=\"line\"></div><div class=\"line\">android:ignoreGravity</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">RalativeLayout_Layout</div><div class=\"line\"></div><div class=\"line\">android:layout_above</div><div class=\"line\">ID</div><div class=\"line\">android:layout_alignBaseline</div><div class=\"line\">ID</div><div class=\"line\">android:layout_alignBottom</div><div class=\"line\">ID</div><div class=\"line\">android:layout_alignLeft</div><div class=\"line\">ID</div><div class=\"line\">android:layout_alignParenBottom</div><div class=\"line\"><span class=\"keyword\">true</span><span class=\"keyword\">false</span></div><div class=\"line\">android:layout_alignParentLeft</div><div class=\"line\"><span class=\"keyword\">true</span><span class=\"keyword\">false</span></div><div class=\"line\">android:layout_alignParentRight</div><div class=\"line\"><span class=\"keyword\">true</span><span class=\"keyword\">false</span></div><div class=\"line\">android:layout_alignParentTop</div><div class=\"line\"><span class=\"keyword\">true</span><span class=\"keyword\">false</span></div><div class=\"line\">android:layout_alignRight</div><div class=\"line\">ID</div><div class=\"line\">android:layout_alignTop</div><div class=\"line\">ID</div><div class=\"line\">android:layout_alignWithParentIfMissing</div><div class=\"line\"> <span class=\"keyword\">true</span><span class=\"keyword\">false</span></div><div class=\"line\">android:layout_below</div><div class=\"line\">ID</div><div class=\"line\">android:layout_centerHorizontal</div><div class=\"line\"></div><div class=\"line\">android:layout_centerInParent</div><div class=\"line\"></div><div class=\"line\">android:layout_centerVertical</div><div class=\"line\"></div><div class=\"line\">android:layout_toLeftOf</div><div class=\"line\">ID</div><div class=\"line\">android:layout_toRightOf</div><div class=\"line\">ID</div><div class=\"line\"></div><div class=\"line\">AbsoluteLayout_Layout</div><div class=\"line\"></div><div class=\"line\">android:layout_x</div><div class=\"line\">x</div><div class=\"line\">android:layout_y</div><div class=\"line\">y</div><div class=\"line\"></div><div class=\"line\">FrameLayout</div><div class=\"line\"></div><div class=\"line\">android:foreground</div><div class=\"line\"></div><div class=\"line\">android:foregroundGravity</div><div class=\"line\"></div><div class=\"line\">android:measureAllChildren</div><div class=\"line\"></div><div class=\"line\">android:layout_gravity</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">FrameLayout_Layout</div><div class=\"line\"></div><div class=\"line\">android:layout_gravity</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">TableLayout</div><div class=\"line\"></div><div class=\"line\">android:collapseColumns</div><div class=\"line\"><span class=\"number\">0</span>,</div><div class=\"line\">android:shrinkColumns</div><div class=\"line\"><span class=\"number\">0</span>,</div><div class=\"line\">android:stretchColumns</div><div class=\"line\"><span class=\"number\">0</span>,</div><div class=\"line\">TableRow_Cell</div><div class=\"line\"></div><div class=\"line\">android:layout_column</div><div class=\"line\"><span class=\"number\">0</span></div><div class=\"line\">android:layout_span</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">AbsListView</div><div class=\"line\"></div><div class=\"line\">android:cacheColorHint</div><div class=\"line\"></div><div class=\"line\">android:drawSelectorOnTop</div><div class=\"line\"><span class=\"keyword\">true</span><span class=\"keyword\">false</span></div><div class=\"line\">android:fastScrollEnabled</div><div class=\"line\"></div><div class=\"line\">android:listSelector</div><div class=\"line\"></div><div class=\"line\">android:scrollingCache</div><div class=\"line\"><span class=\"keyword\">true</span><span class=\"keyword\">false</span></div><div class=\"line\">android:smoothScrollbar</div><div class=\"line\"></div><div class=\"line\">android:stackFromBottom</div><div class=\"line\"></div><div class=\"line\">android:textFilterEnbled</div><div class=\"line\"></div><div class=\"line\">android:transcriptMode</div><div class=\"line\"></div><div class=\"line\">ListView</div><div class=\"line\"></div><div class=\"line\">android:choiceMode</div><div class=\"line\"></div><div class=\"line\">android:divider</div><div class=\"line\"></div><div class=\"line\">android:dividerHeight</div><div class=\"line\"></div><div class=\"line\">android:entries</div><div class=\"line\"></div><div class=\"line\">android:footerDividersEnabled</div><div class=\"line\"></div><div class=\"line\">android:headerDividersEnabled</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">GridView</div><div class=\"line\"></div><div class=\"line\">android:columnWidth</div><div class=\"line\"></div><div class=\"line\">android:gravity</div><div class=\"line\"></div><div class=\"line\">android:horizontalSpacing</div><div class=\"line\"></div><div class=\"line\">android:numColumns</div><div class=\"line\"></div><div class=\"line\">android:strechMode</div><div class=\"line\"></div><div class=\"line\">android:verticalSpacing</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">Gallery</div><div class=\"line\"></div><div class=\"line\">android:animationDuration</div><div class=\"line\"></div><div class=\"line\">android:gravity</div><div class=\"line\"></div><div class=\"line\">android:spacing</div><div class=\"line\"></div><div class=\"line\">android:unselectedAlpha</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">TextView</div><div class=\"line\"></div><div class=\"line\">android:autoLink</div><div class=\"line\"></div><div class=\"line\">android:autoText</div><div class=\"line\"></div><div class=\"line\">android:bufferType</div><div class=\"line\"></div><div class=\"line\">android:capitalize</div><div class=\"line\"></div><div class=\"line\">android:cursorVisible</div><div class=\"line\"><span class=\"keyword\">true</span><span class=\"keyword\">false</span></div><div class=\"line\">android:digits</div><div class=\"line\"></div><div class=\"line\">android:drawableBottom</div><div class=\"line\"></div><div class=\"line\">android:drawableLeft</div><div class=\"line\"></div><div class=\"line\">android: drawablePadding</div><div class=\"line\"></div><div class=\"line\">android: drawableRight</div><div class=\"line\"></div><div class=\"line\">android: drawableTop</div><div class=\"line\"></div><div class=\"line\">android:editable</div><div class=\"line\"><span class=\"keyword\">true</span><span class=\"keyword\">false</span></div><div class=\"line\">android:editorExtras</div><div class=\"line\">EditView</div><div class=\"line\">android:ellipsize</div><div class=\"line\"></div><div class=\"line\">android:ems</div><div class=\"line\">TextViewN</div><div class=\"line\">android:enabled</div><div class=\"line\"><span class=\"keyword\">true</span><span class=\"keyword\">false</span></div><div class=\"line\">android:freezesText</div><div class=\"line\"></div><div class=\"line\">android:gravity</div><div class=\"line\"></div><div class=\"line\">android:height</div><div class=\"line\"></div><div class=\"line\">android:hint</div><div class=\"line\"></div><div class=\"line\">android:imeActionId</div><div class=\"line\">IMEID</div><div class=\"line\">android:imeActionLabel</div><div class=\"line\">IME</div><div class=\"line\">android:imeOptions</div><div class=\"line\"></div><div class=\"line\">android:includeFontPadding</div><div class=\"line\"><span class=\"keyword\">true</span></div><div class=\"line\">android:inputMethod</div><div class=\"line\"></div><div class=\"line\">android:inputType</div><div class=\"line\"></div><div class=\"line\">none</div><div class=\"line\">text</div><div class=\"line\">textCapCharacters</div><div class=\"line\">textCapWords</div><div class=\"line\">textCapSentences</div><div class=\"line\">textAutoCorret</div><div class=\"line\">textAutoComplete</div><div class=\"line\">textMultiLine</div><div class=\"line\">textUriUri</div><div class=\"line\">textEmailAddress</div><div class=\"line\">textEmailSubject</div><div class=\"line\">textShortMessage</div><div class=\"line\">textLongMessage</div><div class=\"line\">textPersonName</div><div class=\"line\">textPostalAddress</div><div class=\"line\">textPassword</div><div class=\"line\">textVIsiblePassword</div><div class=\"line\">textWebEditText</div><div class=\"line\">textFilter</div><div class=\"line\">textPhonetic</div><div class=\"line\">number</div><div class=\"line\">numberSigned</div><div class=\"line\">numberDecimal</div><div class=\"line\">phone</div><div class=\"line\">datetime</div><div class=\"line\">date</div><div class=\"line\">time</div><div class=\"line\">android:lineSpacingExtra</div><div class=\"line\"> </div><div class=\"line\">android:lineSpacingMultiplier</div><div class=\"line\"></div><div class=\"line\">android:lines</div><div class=\"line\"></div><div class=\"line\">android:linksClickable</div><div class=\"line\">autoLick</div><div class=\"line\">android:marqueeRepeatLimit</div><div class=\"line\"></div><div class=\"line\">android:maxEms</div><div class=\"line\">TextViewNemsems </div><div class=\"line\">android:maxHeight</div><div class=\"line\"></div><div class=\"line\">android:maxLength</div><div class=\"line\"></div><div class=\"line\">android:maxLines</div><div class=\"line\"></div><div class=\"line\">android:minWidth</div><div class=\"line\"></div><div class=\"line\">android:minEms</div><div class=\"line\">TextViewNemsems</div><div class=\"line\"> </div><div class=\"line\">android:minHeight</div><div class=\"line\"></div><div class=\"line\">android:minLines</div><div class=\"line\"></div><div class=\"line\">android:minWidth</div><div class=\"line\"></div><div class=\"line\">android:numeric</div><div class=\"line\"></div><div class=\"line\">android:password</div><div class=\"line\"></div><div class=\"line\">android:phonenumber</div><div class=\"line\"></div><div class=\"line\">android:privateImeOptions</div><div class=\"line\"> </div><div class=\"line\">android:scrollHorizontally</div><div class=\"line\">TextView </div><div class=\"line\">android:selectAllOnFocus</div><div class=\"line\">TextView</div><div class=\"line\">android:shadowColor</div><div class=\"line\"></div><div class=\"line\">android:shadowDx</div><div class=\"line\"></div><div class=\"line\">android:shadowDy</div><div class=\"line\"></div><div class=\"line\">android:shadowRadius</div><div class=\"line\"></div><div class=\"line\">android:singleLine</div><div class=\"line\"></div><div class=\"line\">android:text</div><div class=\"line\"></div><div class=\"line\">android:textApperance</div><div class=\"line\"></div><div class=\"line\">android:textColor</div><div class=\"line\"></div><div class=\"line\">android: textColorHighlight</div><div class=\"line\"></div><div class=\"line\">android: textColorHint</div><div class=\"line\"></div><div class=\"line\">android:textColorLink</div><div class=\"line\"></div><div class=\"line\">android:textScaleX</div><div class=\"line\"></div><div class=\"line\">android:textSize</div><div class=\"line\"></div><div class=\"line\">android:textStyle</div><div class=\"line\"></div><div class=\"line\">bold</div><div class=\"line\">italic</div><div class=\"line\">bolditalic</div><div class=\"line\">android:typeface</div><div class=\"line\"></div><div class=\"line\">android:width</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">AutoCompleteTextView</div><div class=\"line\"></div><div class=\"line\">android:completionHint</div><div class=\"line\"></div><div class=\"line\">android:completionHintView</div><div class=\"line\"></div><div class=\"line\">android:completionThreshold</div><div class=\"line\"></div><div class=\"line\">android:dropDownAnchor</div><div class=\"line\"></div><div class=\"line\">android:dropDownSelector</div><div class=\"line\"></div><div class=\"line\">android:dropDownWIdth</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">ImageView</div><div class=\"line\"></div><div class=\"line\">android:adjustViewBounds</div><div class=\"line\"></div><div class=\"line\">android:baselineAlignBottom</div><div class=\"line\"></div><div class=\"line\">android:cropToPadding</div><div class=\"line\"></div><div class=\"line\">android:maxHeight</div><div class=\"line\"></div><div class=\"line\">android:maxWidth</div><div class=\"line\"></div><div class=\"line\">android:scaleType</div><div class=\"line\"></div><div class=\"line\">matrix</div><div class=\"line\">fitXY</div><div class=\"line\">fitStart</div><div class=\"line\">fitCenter</div><div class=\"line\">fitEnd</div><div class=\"line\">center</div><div class=\"line\">centerCrop</div><div class=\"line\">centerInside</div><div class=\"line\">android:src</div><div class=\"line\"></div><div class=\"line\">android:tint</div><div class=\"line\"></div><div class=\"line\">android:layout_above=<span class=\"string\">\"@id/xxx\"</span> </div><div class=\"line\">ID </div><div class=\"line\">android:layout_below=<span class=\"string\">\"@id/xxx\"</span></div><div class=\"line\">ID</div><div class=\"line\">android:layout_toLeftOf=<span class=\"string\">\"@id/xxx\"</span> </div><div class=\"line\">ID </div><div class=\"line\">android:layout_toRightOf=<span class=\"string\">\"@id/xxx\"</span> </div><div class=\"line\">ID</div><div class=\"line\">android:layout_alignLeft=<span class=\"string\">\"@id/xxx\"</span> </div><div class=\"line\">ID</div><div class=\"line\">android:layout_alignTop=<span class=\"string\">\"@id/xxx\"</span> </div><div class=\"line\">ID</div><div class=\"line\"> </div><div class=\"line\">android:layout_alignRight=<span class=\"string\">\"@id/xxx\"</span></div><div class=\"line\">ID</div><div class=\"line\">android:layout_alignBottom=<span class=\"string\">\"@id/xxx\"</span> </div><div class=\"line\">ID </div><div class=\"line\">android:layout_alignParentLeft=<span class=\"string\">\"true\"</span> </div><div class=\"line\"> </div><div class=\"line\">android:layout_alignParentTop=<span class=\"string\">\"true\"</span> </div><div class=\"line\"> </div><div class=\"line\">android:layout_alignParentRight=<span class=\"string\">\"true\"</span> </div><div class=\"line\"> </div><div class=\"line\">android:layout_alignParentBottom=<span class=\"string\">\"true\"</span> </div><div class=\"line\"></div><div class=\"line\"> android:layout_centerInParent=<span class=\"string\">\"true\"</span> </div><div class=\"line\">  </div><div class=\"line\"> </div><div class=\"line\"> android:layout_centerHorizontal=<span class=\"string\">\"true\"</span> </div><div class=\"line\">  </div><div class=\"line\"> </div><div class=\"line\"> android:layout_centerVertical=<span class=\"string\">\"true\"</span> </div><div class=\"line\"> </div></pre></td></tr></table></figure>"},{"title":"Python localHost","date":"2017-05-01T00:57:27.000Z","_content":"\n\n>  python -m http.server 8000 --bind 127.0.0.1 \n\n127.0.0.1  GET\n![](http://odzl05jxx.bkt.clouddn.com/ChMkJ1fAMmKIIFpWAA_5Us41gQkAAUv1QE2Pp8AD_lq599.jpg?imageView2/2/w/600)\n<!--more-->\n\nSimpleHttpServer\n```python\n#!/usr/bin/python\n# -*- coding: UTF-8 -*-\nimport sys\nfrom http.server import SimpleHTTPRequestHandler\nfrom http.server import BaseHTTPRequestHandler, HTTPServer\n\n\ndef test(HandlerClass=SimpleHTTPRequestHandler,\n         ServerClass=HTTPServer):\n    protocol = \"HTTP/1.0\"\n    host = ''\n    port = 8000\n    if len(sys.argv) > 1:\n        arg = sys.argv[1]\n        if ':' in arg:\n            host, port = arg.split(':')\n            port = int(port)\n        else:\n            try:\n                port = int(sys.argv[1])\n            except:\n                host = sys.argv[1]\n\n    server_address = (host, port)\n\n    HandlerClass.protocol_version = protocol\n    httpd = ServerClass(server_address, HandlerClass)\n\n    sa = httpd.socket.getsockname()\n    print(\"Serving HTTP on\", sa[0], \"port\", sa[1], \"...\")\n    httpd.serve_forever()\n\n\nif __name__ == \"__main__\":\n    test()\n```\n\n\n### 2 .sys.args[]\ncmd\n> python\n\nPython 3.6.1 (v3.6.1:69c0db5, Mar 21 2017, 17:54:52) [MSC v.1900 32 bit (Intel)] on win32\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>>\n\n ctrl+Z\n\n ,test.py\n\n```python\n#!/usr/bin/env python3\n# -*- coding: utf-8 -*-\nimport sys\n\n# sys.argv\n# cmd\n\ndef run1():\n    print('I\\'m action1')\n\n\ndef run2():\n    print('I\\'m action2')\n\n\nif 2 > len(sys.argv):\n    print('none')\nelse:\n    action1 = sys.argv[0]\n    action2 = sys.argv[1]\n    <!-- if 'run1' == action1:\n        run1()\n    if 'run2' == action2:\n        run2() -->\n\n    print(action1)\n    print(action2)    \n\n```\n\n python test.py run1\n test.py 'run1'","source":"_posts/2017-05-01-python-server-test.md","raw":"---\ntitle: Python localHost\ndate: 2017-05-01 08:57:27\ncategories: blog\ntags: [python]\n---\n\n\n>  python -m http.server 8000 --bind 127.0.0.1 \n\n127.0.0.1  GET\n![](http://odzl05jxx.bkt.clouddn.com/ChMkJ1fAMmKIIFpWAA_5Us41gQkAAUv1QE2Pp8AD_lq599.jpg?imageView2/2/w/600)\n<!--more-->\n\nSimpleHttpServer\n```python\n#!/usr/bin/python\n# -*- coding: UTF-8 -*-\nimport sys\nfrom http.server import SimpleHTTPRequestHandler\nfrom http.server import BaseHTTPRequestHandler, HTTPServer\n\n\ndef test(HandlerClass=SimpleHTTPRequestHandler,\n         ServerClass=HTTPServer):\n    protocol = \"HTTP/1.0\"\n    host = ''\n    port = 8000\n    if len(sys.argv) > 1:\n        arg = sys.argv[1]\n        if ':' in arg:\n            host, port = arg.split(':')\n            port = int(port)\n        else:\n            try:\n                port = int(sys.argv[1])\n            except:\n                host = sys.argv[1]\n\n    server_address = (host, port)\n\n    HandlerClass.protocol_version = protocol\n    httpd = ServerClass(server_address, HandlerClass)\n\n    sa = httpd.socket.getsockname()\n    print(\"Serving HTTP on\", sa[0], \"port\", sa[1], \"...\")\n    httpd.serve_forever()\n\n\nif __name__ == \"__main__\":\n    test()\n```\n\n\n### 2 .sys.args[]\ncmd\n> python\n\nPython 3.6.1 (v3.6.1:69c0db5, Mar 21 2017, 17:54:52) [MSC v.1900 32 bit (Intel)] on win32\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>>\n\n ctrl+Z\n\n ,test.py\n\n```python\n#!/usr/bin/env python3\n# -*- coding: utf-8 -*-\nimport sys\n\n# sys.argv\n# cmd\n\ndef run1():\n    print('I\\'m action1')\n\n\ndef run2():\n    print('I\\'m action2')\n\n\nif 2 > len(sys.argv):\n    print('none')\nelse:\n    action1 = sys.argv[0]\n    action2 = sys.argv[1]\n    <!-- if 'run1' == action1:\n        run1()\n    if 'run2' == action2:\n        run2() -->\n\n    print(action1)\n    print(action2)    \n\n```\n\n python test.py run1\n test.py 'run1'","slug":"2017-05-01-python-server-test","published":1,"updated":"2017-06-25T14:44:59.886Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj50afgxl001ni4vr5z27zhzh","content":"<p></p>\n<blockquote>\n<p> python -m http.server 8000 bind 127.0.0.1 </p>\n</blockquote>\n<p>127.0.0.1  GET<br><img src=\"http://odzl05jxx.bkt.clouddn.com/ChMkJ1fAMmKIIFpWAA_5Us41gQkAAUv1QE2Pp8AD_lq599.jpg?imageView2/2/w/600\" alt=\"\"><br><a id=\"more\"></a></p>\n<p>SimpleHttpServer<br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">#!/usr/bin/python</span></div><div class=\"line\"><span class=\"comment\"># -*- coding: UTF-8 -*-</span></div><div class=\"line\"><span class=\"keyword\">import</span> sys</div><div class=\"line\"><span class=\"keyword\">from</span> http.server <span class=\"keyword\">import</span> SimpleHTTPRequestHandler</div><div class=\"line\"><span class=\"keyword\">from</span> http.server <span class=\"keyword\">import</span> BaseHTTPRequestHandler, HTTPServer</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">test</span><span class=\"params\">(HandlerClass=SimpleHTTPRequestHandler,</div><div class=\"line\">         ServerClass=HTTPServer)</span>:</span></div><div class=\"line\">    protocol = <span class=\"string\">\"HTTP/1.0\"</span></div><div class=\"line\">    host = <span class=\"string\">''</span></div><div class=\"line\">    port = <span class=\"number\">8000</span></div><div class=\"line\">    <span class=\"keyword\">if</span> len(sys.argv) &gt; <span class=\"number\">1</span>:</div><div class=\"line\">        arg = sys.argv[<span class=\"number\">1</span>]</div><div class=\"line\">        <span class=\"keyword\">if</span> <span class=\"string\">':'</span> <span class=\"keyword\">in</span> arg:</div><div class=\"line\">            host, port = arg.split(<span class=\"string\">':'</span>)</div><div class=\"line\">            port = int(port)</div><div class=\"line\">        <span class=\"keyword\">else</span>:</div><div class=\"line\">            <span class=\"keyword\">try</span>:</div><div class=\"line\">                port = int(sys.argv[<span class=\"number\">1</span>])</div><div class=\"line\">            <span class=\"keyword\">except</span>:</div><div class=\"line\">                host = sys.argv[<span class=\"number\">1</span>]</div><div class=\"line\"></div><div class=\"line\">    server_address = (host, port)</div><div class=\"line\"></div><div class=\"line\">    HandlerClass.protocol_version = protocol</div><div class=\"line\">    httpd = ServerClass(server_address, HandlerClass)</div><div class=\"line\"></div><div class=\"line\">    sa = httpd.socket.getsockname()</div><div class=\"line\">    print(<span class=\"string\">\"Serving HTTP on\"</span>, sa[<span class=\"number\">0</span>], <span class=\"string\">\"port\"</span>, sa[<span class=\"number\">1</span>], <span class=\"string\">\"...\"</span>)</div><div class=\"line\">    httpd.serve_forever()</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">\"__main__\"</span>:</div><div class=\"line\">    test()</div></pre></td></tr></table></figure></p>\n<h3 id=\"2-sys-args-\"><a href=\"#2-sys-args-\" class=\"headerlink\" title=\"2 .sys.args[]\"></a>2 .sys.args[]</h3><p>cmd</p>\n<blockquote>\n<p>python</p>\n</blockquote>\n<p>Python 3.6.1 (v3.6.1:69c0db5, Mar 21 2017, 17:54:52) [MSC v.1900 32 bit (Intel)] on win32<br>Type help, copyright, credits or license for more information.</p>\n<blockquote>\n<blockquote>\n<p>&gt;</p>\n</blockquote>\n</blockquote>\n<p> ctrl+Z</p>\n<p> ,test.py</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div></pre></td><td class=\"code\"><pre><div class=\"line\">#!/usr/bin/env python3</div><div class=\"line\"># -*- coding: utf-8 -*-</div><div class=\"line\">import sys</div><div class=\"line\"></div><div class=\"line\"># sys.argv</div><div class=\"line\"># cmd</div><div class=\"line\"></div><div class=\"line\">def run1():</div><div class=\"line\">    print('I\\'m action1')</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">def run2():</div><div class=\"line\">    print('I\\'m action2')</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">if 2 &gt; len(sys.argv):</div><div class=\"line\">    print('none')</div><div class=\"line\">else:</div><div class=\"line\">    action1 = sys.argv[0]</div><div class=\"line\">    action2 = sys.argv[1]</div><div class=\"line\">    &lt;!-- if 'run1' == action1:</div><div class=\"line\">        run1()</div><div class=\"line\">    if 'run2' == action2:</div><div class=\"line\">        run2() --&gt;</div><div class=\"line\"></div><div class=\"line\">    print(action1)</div><div class=\"line\">    print(action2)</div></pre></td></tr></table></figure>\n<p> python test.py run1<br> test.py run1</p>\n","excerpt":"<p></p>\n<blockquote>\n<p> python -m http.server 8000 bind 127.0.0.1 </p>\n</blockquote>\n<p>127.0.0.1  GET<br><img src=\"http://odzl05jxx.bkt.clouddn.com/ChMkJ1fAMmKIIFpWAA_5Us41gQkAAUv1QE2Pp8AD_lq599.jpg?imageView2/2/w/600\" alt=\"\"><br>","more":"</p>\n<p>SimpleHttpServer<br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">#!/usr/bin/python</span></div><div class=\"line\"><span class=\"comment\"># -*- coding: UTF-8 -*-</span></div><div class=\"line\"><span class=\"keyword\">import</span> sys</div><div class=\"line\"><span class=\"keyword\">from</span> http.server <span class=\"keyword\">import</span> SimpleHTTPRequestHandler</div><div class=\"line\"><span class=\"keyword\">from</span> http.server <span class=\"keyword\">import</span> BaseHTTPRequestHandler, HTTPServer</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">test</span><span class=\"params\">(HandlerClass=SimpleHTTPRequestHandler,</div><div class=\"line\">         ServerClass=HTTPServer)</span>:</span></div><div class=\"line\">    protocol = <span class=\"string\">\"HTTP/1.0\"</span></div><div class=\"line\">    host = <span class=\"string\">''</span></div><div class=\"line\">    port = <span class=\"number\">8000</span></div><div class=\"line\">    <span class=\"keyword\">if</span> len(sys.argv) &gt; <span class=\"number\">1</span>:</div><div class=\"line\">        arg = sys.argv[<span class=\"number\">1</span>]</div><div class=\"line\">        <span class=\"keyword\">if</span> <span class=\"string\">':'</span> <span class=\"keyword\">in</span> arg:</div><div class=\"line\">            host, port = arg.split(<span class=\"string\">':'</span>)</div><div class=\"line\">            port = int(port)</div><div class=\"line\">        <span class=\"keyword\">else</span>:</div><div class=\"line\">            <span class=\"keyword\">try</span>:</div><div class=\"line\">                port = int(sys.argv[<span class=\"number\">1</span>])</div><div class=\"line\">            <span class=\"keyword\">except</span>:</div><div class=\"line\">                host = sys.argv[<span class=\"number\">1</span>]</div><div class=\"line\"></div><div class=\"line\">    server_address = (host, port)</div><div class=\"line\"></div><div class=\"line\">    HandlerClass.protocol_version = protocol</div><div class=\"line\">    httpd = ServerClass(server_address, HandlerClass)</div><div class=\"line\"></div><div class=\"line\">    sa = httpd.socket.getsockname()</div><div class=\"line\">    print(<span class=\"string\">\"Serving HTTP on\"</span>, sa[<span class=\"number\">0</span>], <span class=\"string\">\"port\"</span>, sa[<span class=\"number\">1</span>], <span class=\"string\">\"...\"</span>)</div><div class=\"line\">    httpd.serve_forever()</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">\"__main__\"</span>:</div><div class=\"line\">    test()</div></pre></td></tr></table></figure></p>\n<h3 id=\"2-sys-args-\"><a href=\"#2-sys-args-\" class=\"headerlink\" title=\"2 .sys.args[]\"></a>2 .sys.args[]</h3><p>cmd</p>\n<blockquote>\n<p>python</p>\n</blockquote>\n<p>Python 3.6.1 (v3.6.1:69c0db5, Mar 21 2017, 17:54:52) [MSC v.1900 32 bit (Intel)] on win32<br>Type help, copyright, credits or license for more information.</p>\n<blockquote>\n<blockquote>\n<p>&gt;</p>\n</blockquote>\n</blockquote>\n<p> ctrl+Z</p>\n<p> ,test.py</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div></pre></td><td class=\"code\"><pre><div class=\"line\">#!/usr/bin/env python3</div><div class=\"line\"># -*- coding: utf-8 -*-</div><div class=\"line\">import sys</div><div class=\"line\"></div><div class=\"line\"># sys.argv</div><div class=\"line\"># cmd</div><div class=\"line\"></div><div class=\"line\">def run1():</div><div class=\"line\">    print('I\\'m action1')</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">def run2():</div><div class=\"line\">    print('I\\'m action2')</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">if 2 &gt; len(sys.argv):</div><div class=\"line\">    print('none')</div><div class=\"line\">else:</div><div class=\"line\">    action1 = sys.argv[0]</div><div class=\"line\">    action2 = sys.argv[1]</div><div class=\"line\">    &lt;!-- if 'run1' == action1:</div><div class=\"line\">        run1()</div><div class=\"line\">    if 'run2' == action2:</div><div class=\"line\">        run2() --&gt;</div><div class=\"line\"></div><div class=\"line\">    print(action1)</div><div class=\"line\">    print(action2)</div></pre></td></tr></table></figure>\n<p> python test.py run1<br> test.py run1</p>"},{"title":"Java","date":"2017-06-25T14:56:33.000Z","_content":"\nCollections()Map()jdk1.8java.utiljdkclass(LinkedList)java1.8since 1.8\n![](http://odzl05jxx.bkt.clouddn.com/16d714eb6e8ecc23e4d6ba20d0be17a0.jpg?imageView2/2/w/600)\n \n<!--more-->\n\njava[Java](http://www.jianshu.com/p/2cd7be850540)jdk 1.6\n\n\n## List\nArrayList (newsizenull)\nLinkedList(not recommended)\nVector,\n\n## Set\nHashSet (HashMap)\nTreeSet()\nLinkedHashSet(LinkedHashMap)\n\n## Queue\n\nStack ArrayDeque()\n\n## Map\nHashMap null,\nTreeMap()\nHashTable(null)\nSparseArray(Android)\n\nJava 1.5\n[](http://blog.csdn.net/lonelyroamer/article/details/7868820)Object[](https://zh.wikipedia.org/wiki/%E7%B1%BB%E5%9E%8B%E6%93%A6%E9%99%A4)\n\n## 1. List\n\n### 1.1 ArrayList\n\n- \n```java\n public static void main(String[] args) {\n    String[] array = new String[]{\"a\", \"b\", \"c\", \"d\"};\n    List<String> l = Arrays.asList(array);\n    l.add(\"d\");\n}\n\nException in thread \"main\" java.lang.UnsupportedOperationException\n    at java.util.AbstractList.add(AbstractList.java:148)\n    at java.util.AbstractList.add(AbstractList.java:108)\n    at com.example.demo.main(ConcurrentModificationListDemo.java:13)\n```\nArrays.asList**java.util.Arrays.ArrayList****java.util.ArrayList**ListArraysprivate class\nnew ArrayListlist()copyaddAll()\nArrayList.toArray(T[] a)elementsSystem.arraycopy(elementData, 0, a, 0, size);a\n\n- System.arraycopy\n```java\n  public void add(int index, E element) {\n        rangeCheckForAdd(index);\n        ensureCapacityInternal(size + 1);  // Increments modCount!!\n        System.arraycopy(elementData, index, elementData, index + 1,\n                         size - index);  \n        elementData[index] = element;\n        size++;\n    }\n```\nSystem.arrayCopy\n\n- \n\n```java\n//ArrayList implements java.io.Serializable\nprivate void writeObject(java.io.ObjectOutputStream s)\nprivate void readObject(java.io.ObjectInputStream s)\n\nprotected void removeRange(int fromIndex, int toIndex) \n\npublic boolean removeAll(Collection<?> c) //list\npublic boolean retainAll(Collection<?> c) //  list\n\npublic void trimToSize() // 1.50.5\n```\n\n\n\n\n> VectorArrayListArrayListVectorCopyOnWriteArrayList\n\n\n### 1.2 LinkedList\nLinkedList T Node<T> LinkedListNull\nLinkedListgetset\naddjdk 1.8\n\n```java\n   public boolean add(E e) {\n        linkLast(e);\n        return true;\n    }\n\n/**\n     * Links e as last element.\n     */\n    void linkLast(E e) {\n        final Node<E> l = last;  //\n        final Node<E> newNode = new Node<>(l, e, null); // addnewEntry\n        last = newNode; //Node\n        if (l == null) //size = 0\n            first = newNode; //NodeNull\n        else\n            l.next = newNode; //nextEntry.\n\n        size++;\n        modCount++;\n    }\n\n```\n\naddnewenteryremove\n\nget\n\n```java\n public E get(int index) {\n        checkElementIndex(index);\n        return node(index).item;\n    }\n\n  /**\n     * Returns the (non-null) Node at the specified element index.\n     */\n    Node<E> node(int index) {\n        // assert isElementIndex(index);\n\n        if (index < (size >> 1)) {\n            Node<E> x = first;\n            for (int i = 0; i < index; i++)\n                x = x.next; //index\n            return x;\n        } else {\n            Node<E> x = last;\n            for (int i = size - 1; i > index; i--)\n                x = x.prev;\n            return x;\n        }\n    }\n\n```\n\n\nArrayList implement RandomAccessLinkedListRandomAccess\n\n> * Marker interface used by <tt>List</tt> implementations to indicate that\n * they support fast (generally constant time) random access.  The primary\n * purpose of this interface is to allow generic algorithms to alter their\n * behavior to provide good performance when applied to either random or\n * sequential access lists.\n *\n * <p>The best algorithms for manipulating random access lists (such as\n * <tt>ArrayList</tt>) can produce quadratic behavior when applied to\n * sequential access lists (such as <tt>LinkedList</tt>).  Generic list\n * algorithms are encouraged to check whether the given list is an\n * <tt>instanceof</tt> this interface before applying an algorithm that would\n * provide poor performance if it were applied to a sequential access list,\n * and to alter their behavior if necessary to guarantee acceptable\n * performance.\n *\n * <p>It is recognized that the distinction between random and sequential\n * access is often fuzzy.  For example, some <tt>List</tt> implementations\n * provide asymptotically linear access times if they get huge, but constant\n * access times in practice.  Such a <tt>List</tt> implementation\n * should generally implement this interface.  As a rule of thumb, a\n * List implementation should implement this interface if,\n * for typical instances of the class, this loop:\n *     for (int i=0, n=list.size(); i &lt; n; i++)\n *         list.get(i); //get\n * runs faster than this loop:\n *     for (Iterator i=list.iterator(); i.hasNext(); )\n *         i.next(); \n\n\n\n\nlinkedListfor loopListIterator<T>\n(MD)\n\n[ArryListLinkedList](http://www.jianshu.com/p/d5ec2ff72b33) \n\n> 1ArrayList\n> 2LinkedListArrayList\n> 3ArrayListLinkedList\n> 4LinkedListArrayListSystem.arrayCopynative\n\n\n## 2. Map\n### 2.1 HashMap \n\n>public class HashMap<K,V> extends AbstractMap<K,V>\n    implements Map<K,V>, Cloneable, Serializable \n   \nHashMapKeyValuenull(getput)\n\nHashMap\n\n    16\n    static final int DEFAULT_INITIAL_CAPACITY = 1 << 4; // aka 16 \n\n    0.75f Hashmap\n    static final float DEFAULT_LOAD_FACTOR = 0.75f; //\n\n\n\n```java\n public HashMap(int initialCapacity, float loadFactor)  //\n public HashMap(int initialCapacity) // ArrayList\n public HashMap() //16\n public HashMap(Map<? extends K, ? extends V> m)\n```\n[2n](https://stackoverflow.com/questions/8352378/why-does-hashmap-require-that-the-initial-capacity-be-a-power-of-two)\n\nCURD(jdk 1.8jdk1.6)\n```java\n public V put(K key, V value) {\n        return putVal(hash(key), key, value, false, true);\n    }\n\n /**\n     * Implements Map.put and related methods\n     *\n     * @param hash hash for key\n     * @param key the key\n     * @param value the value to put\n     * @param onlyIfAbsent if true, don't change existing value\n     * @param evict if false, the table is in creation mode.\n     * @return previous value, or null if none\n     */\n    final V putVal(int hash, K key, V value, boolean onlyIfAbsent,\n                   boolean evict) {\n        Node<K,V>[] tab; Node<K,V> p; int n, i;\n        if ((tab = table) == null || (n = tab.length) == 0)\n            n = (tab = resize()).length; //tableNode resize\n        if ((p = tab[i = (n - 1) & hash]) == null)\n            tab[i] = newNode(hash, key, value, null);\n        else {\n            Node<K,V> e; K k;\n            if (p.hash == hash &&\n                ((k = p.key) == key || (key != null && key.equals(k))))\n                e = p; //Table\n            else if (p instanceof TreeNode)//pprevious  \n                e = ((TreeNode<K,V>)p).putTreeVal(this, tab, hash, key, value);\n            else {//\n                for (int binCount = 0; ; ++binCount) {\n                    if ((e = p.next) == null) {\n                        p.next = newNode(hash, key, value, null); //\n                        if (binCount >= TREEIFY_THRESHOLD - 1) // -1 for 1st\n                            treeifyBin(tab, hash);\n                        break;\n                    }\n                    if (e.hash == hash &&\n                        ((k = e.key) == key || (key != null && key.equals(k))))\n                        break;\n                    p = e;\n                }\n            }\n            if (e != null) { // existing mapping for key\n                V oldValue = e.value;\n                if (!onlyIfAbsent || oldValue == null)\n                    e.value = value;\n                afterNodeAccess(e); //\n                return oldValue;\n            }\n        }\n        ++modCount;\n        if (++size > threshold)\n            resize();\n        afterNodeInsertion(evict);//\n        return null;\n    }\n\n```\n\nget\n```java \n  public V get(Object key) {\n        Node<K,V> e;\n        return (e = getNode(hash(key), key)) == null ? null : e.value;//keyvalue\n    }\n    /**\n     * Implements Map.get and related methods\n     *\n     * @param hash hash for key\n     * @param key the key\n     * @return the node, or null if none\n     */\n    final Node<K,V> getNode(int hash, Object key) {\n        Node<K,V>[] tab; Node<K,V> first, e; int n; K k;\n        if ((tab = table) != null && (n = tab.length) > 0 &&\n            (first = tab[(n - 1) & hash]) != null) { //tableput\n            if (first.hash == hash && // always check first node\n                ((k = first.key) == key || (key != null && key.equals(k))))\n                return first;\n            if ((e = first.next) != null) {\n                if (first instanceof TreeNode)\n                    return ((TreeNode<K,V>)first).getTreeNode(hash, key);\n                do {\n                    if (e.hash == hash &&\n                        ((k = e.key) == key || (key != null && key.equals(k))))\n                        return e;\n                } while ((e = e.next) != null);\n            }\n        }\n        return null;\n    }\n\n\n  public V get(Object key) {\n        Node<K,V> e;\n        return (e = getNode(hash(key), key)) == null ? null : e.value;\n    }\n\n    /**\n     * Implements Map.get and related methods\n     *\n     * @param hash hash for key\n     * @param key the key\n     * @return the node, or null if none\n     */\n    final Node<K,V> getNode(int hash, Object key) {\n        Node<K,V>[] tab; Node<K,V> first, e; int n; K k;\n        if ((tab = table) != null && (n = tab.length) > 0 &&\n            (first = tab[(n - 1) & hash]) != null) {\n            if (first.hash == hash && // always check first node\n                ((k = first.key) == key || (key != null && key.equals(k))))\n                return first;\n            if ((e = first.next) != null) {\n                if (first instanceof TreeNode)\n                    return ((TreeNode<K,V>)first).getTreeNode(hash, key);\n                do {\n                    if (e.hash == hash && \n                        ((k = e.key) == key || (key != null && key.equals(k))))\n                        return e;\n    //hashintkey()  key equals(equalshashcode)\n                } while ((e = e.next) != null);\n            }\n        }\n        return null;\n    }\n\n```\n\nHashMap\n```java\nlong i = 0;\nIterator<Map.Entry<Integer, Integer>> it = map.entrySet().iterator();\nwhile (it.hasNext()) {\n    Map.Entry<Integer, Integer> pair = it.next(); //getnext\n    i += pair.getKey() + pair.getValue();\n}\n```\n\nentrySetMap\n```\nSet<Map.Entry<K, V>> entrySet();\n   * Returns a Set view of the mappings contained in this map.\n     * The set is backed by the map, so changes to the map are\n     * reflected in the set, and vice-versa.  If the map is modified\n     * while an iteration over the set is in progress (except through\n     * the iterator's own <tt>remove</tt> operation, or through the\n     * <tt>setValue</tt> operation on a map entry returned by the\n     * iterator) the results of the iteration are undefined.  The set\n     * supports element removal, which removes the corresponding\n     * mapping from the map, via the <tt>Iterator.remove</tt>,\n     * <tt>Set.remove</tt>, <tt>removeAll</tt>, <tt>retainAll</tt> and\n     * <tt>clear</tt> operations.  It does not support the\n     * <tt>add</tt> or <tt>addAll</tt> operations.\n     *\n     * @return a set view of the mappings contained in this map\n```\n   \n mapSetSetmapentrySetmapremoveSetmappingadd\n\nHashMap\ntransient Set<Map.Entry<K,V>> entrySet; //\nenterySet\n```java\n  public Set<Map.Entry<K,V>> entrySet() {\n        Set<Map.Entry<K,V>> es;\n        return (es = entrySet) == null ? (entrySet = new EntrySet()) : es;\n    }\n\n// EntrySet\n  final class EntrySet extends AbstractSet<Map.Entry<K,V>> {\n        public final int size()                 { return size; }\n        public final void clear()               { HashMap.this.clear(); }\n        public final Iterator<Map.Entry<K,V>> iterator() {\n            return new EntryIterator();\n        }\n        public final boolean contains(Object o) {\n            if (!(o instanceof Map.Entry))\n                return false;\n            Map.Entry<?,?> e = (Map.Entry<?,?>) o;\n            Object key = e.getKey();\n            Node<K,V> candidate = getNode(hash(key), key);\n            return candidate != null && candidate.equals(e);\n        }\n        public final boolean remove(Object o) {\n            if (o instanceof Map.Entry) {\n                Map.Entry<?,?> e = (Map.Entry<?,?>) o;\n                Object key = e.getKey();\n                Object value = e.getValue();\n                return removeNode(hash(key), key, value, true, true) != null;\n            }\n            return false;\n        }\n    }\n\n```\nremoveNodegetNodeputVal\n```java\n   final Node<K,V> removeNode(int hash, Object key, Object value,\n                               boolean matchValue, boolean movable) {\n        Node<K,V>[] tab; Node<K,V> p; int n, index;\n        if ((tab = table) != null && (n = tab.length) > 0 &&\n            (p = tab[index = (n - 1) & hash]) != null) {\n            Node<K,V> node = null, e; K k; V v;\n            if (p.hash == hash &&\n                ((k = p.key) == key || (key != null && key.equals(k))))\n                node = p;\n            else if ((e = p.next) != null) {\n                if (p instanceof TreeNode)\n                    node = ((TreeNode<K,V>)p).getTreeNode(hash, key);\n                else {\n                    do {\n                        if (e.hash == hash &&\n                            ((k = e.key) == key ||\n                             (key != null && key.equals(k)))) {\n                            node = e;\n                            break;\n                        }\n                        p = e;\n                    } while ((e = e.next) != null);\n                }\n            } //p(previous)matchValuemovabletrue\n            // node Node\n            if (node != null && (!matchValue || (v = node.value) == value ||\n                                 (value != null && value.equals(v)))) {\n                if (node instanceof TreeNode)\n                    ((TreeNode<K,V>)node).removeTreeNode(this, tab, movable);\n                else if (node == p) //\n                    tab[index] = node.next;//\n                else\n                    p.next = node.next; //\n                ++modCount;\n                --size;\n                afterNodeRemoval(node);\n                return node;\n            }\n        }\n        return null;\n    }\n```\n\n> e.hash == hash || (key!=null &&key.equals(k)) //hashCode\n\n\n```java\n  public boolean containsKey(Object key) {\n        return getNode(hash(key), key) != null; //keyNode\n    }\n\n   public boolean containsValue(Object value) {\n        Node<K,V>[] tab; V v;\n        if ((tab = table) != null && size > 0) {\n            for (int i = 0; i < tab.length; ++i) {\n                for (Node<K,V> e = tab[i]; e != null; e = e.next) {\n                    if ((v = e.value) == value ||\n                        (value != null && value.equals(v)))\n                        return true; //\n                }\n            }\n        }\n        return false;\n    } \n```\n\nArrayListLinkedListHashMaphashCodeHashMaphashCodehash CollisionObjecthashCode[](https://stackoverflow.com/questions/6493605/how-does-a-java-hashmap-handle-different-objects-with-the-same-hash-code)\nHashMap(key,value)keyhashvalueNext(getkeyhashCodekey.equals)\n\n### 2.2 LinkedHashMap\n\npublic class LinkedHashMap<K,V>\n    extends HashMap<K,V>\n    implements Map<K,V>\nHashMapLinkedHashMap\n  \nfinal boolean accessOrder; false\n> The iteration ordering method for this linked hash map: <tt>true</tt>\nfor access-order, false for insertion-order.\n\nLinkedHashMap\n\n\n### 3. Set\nSetHashSetTreeSetLinkedHashSetjdk\n\npublic class HashSet<E>\n    extends AbstractSet<E>\n    implements Set<E>, Cloneable, java.io.Serializable\nSet****Sete1e2e1.equals(e2)\nHashSetmapHashMapSet\n\n### 4. \n\n    VetorStackArrayDeque,Queue\n\n    VectorList,synchronized\n\n    QueueinterfaceList(FIFO)\n    PriorityQueue\n    java.util.concurrent.LinkedBlockingQueue\n    java.util.concurrent.LinkedBlockingQueue\n    java.util.concurrent.PriorityBlockingQueue\n    Doug Lea\n\n    StackVector(LIFO)\n    The Stack class represents a last-in-first-out (LIFO) stack of object\n\n    Deque()\n\n\n### 5. concurrentHashMap\njdk1.8concurrentHashMapsynchronizedDoug LeaCAS\n\n### 6. WeakHaskMap\nWeakHashMapKeyWeakReferenceValue\n\n\n```java\nString a = \"a\";\nmap.put(1,a);\na = null;\n//mapamapagc\n```\n\nAndroid [](https://developer.android.com/reference/java/util/WeakHashMap.html)\n\n> Implementation note: The value objects in a WeakHashMap are held by ordinary strong references. Thus care should be taken to ensure that value objects do not strongly refer to their own keys, either directly or indirectly, since that will prevent the keys from being discarded. Note that a value object may refer indirectly to its key via the WeakHashMap itself; that is, a value object may strongly refer to some other key object whose associated value object, in turn, strongly refers to the key of the first value object. If the values in the map do not rely on the map holding strong references to them, one way to deal with this is to wrap values themselves within WeakReferences before inserting, as in: m.put(key, new WeakReference(value)), and then unwrapping upon each get.\n\nWeakHashMapvaluekeykey,value\n\n\n## 7. java 8\nlist.replaceAll(String::toUpperCase) //method reference \ncan not change the elemeet type, for that you need an stream\n[Collections Refuled by Stuart Marks](https://www.youtube.com/watch?v=q6zF3vf114M)\n\n## 8.\n8.1 [Doug Lea](https://en.wikipedia.org/wiki/Doug_Lea) jdk\n8.2 jdkListMapApachejdk\n8.3 ArrayListHashMap****\n8.4 [Stuart Mark](https://blogs.oracle.com/java/collections-refueled)class**@deprecated**\n8.5 [Joshua Bloch](https://www.youtube.com/watch?v=V1vQf4qyMXg) By the way , he said Doug Lea is very smart .\n\n\n\n### Reference \n1. [Collections Refuled by Stuart Marks](https://www.youtube.com/watch?v=q6zF3vf114M)\n2. [From Java Code to Java Heap: Understanding the Memory Usage of Your Application](https://www.youtube.com/watch?v=FLcXf9pO27w)\n3. [Java](http://www.jianshu.com/p/2cd7be850540)\n4. [Arrays.asList()Listjva.util.ArrayList](http://www.programcreek.com/2014/01/java%E7%A8%8B%E5%BA%8F%E5%91%98%E5%B8%B8%E7%8A%AF%E7%9A%8410%E4%B8%AA%E9%94%99%E8%AF%AF/)\n5. [WeakHashMapHashMap](http://blog.csdn.net/yangzl2008/article/details/6980709)\n","source":"_posts/2017-06-12-Collections-Refuled-by-Stuart-Marks.md","raw":"---\ntitle: Java \ndate: 2017-06-25 22:56:33\ncategories: blog\ntags: [java]\n---\n\nCollections()Map()jdk1.8java.utiljdkclass(LinkedList)java1.8since 1.8\n![](http://odzl05jxx.bkt.clouddn.com/16d714eb6e8ecc23e4d6ba20d0be17a0.jpg?imageView2/2/w/600)\n \n<!--more-->\n\njava[Java](http://www.jianshu.com/p/2cd7be850540)jdk 1.6\n\n\n## List\nArrayList (newsizenull)\nLinkedList(not recommended)\nVector,\n\n## Set\nHashSet (HashMap)\nTreeSet()\nLinkedHashSet(LinkedHashMap)\n\n## Queue\n\nStack ArrayDeque()\n\n## Map\nHashMap null,\nTreeMap()\nHashTable(null)\nSparseArray(Android)\n\nJava 1.5\n[](http://blog.csdn.net/lonelyroamer/article/details/7868820)Object[](https://zh.wikipedia.org/wiki/%E7%B1%BB%E5%9E%8B%E6%93%A6%E9%99%A4)\n\n## 1. List\n\n### 1.1 ArrayList\n\n- \n```java\n public static void main(String[] args) {\n    String[] array = new String[]{\"a\", \"b\", \"c\", \"d\"};\n    List<String> l = Arrays.asList(array);\n    l.add(\"d\");\n}\n\nException in thread \"main\" java.lang.UnsupportedOperationException\n    at java.util.AbstractList.add(AbstractList.java:148)\n    at java.util.AbstractList.add(AbstractList.java:108)\n    at com.example.demo.main(ConcurrentModificationListDemo.java:13)\n```\nArrays.asList**java.util.Arrays.ArrayList****java.util.ArrayList**ListArraysprivate class\nnew ArrayListlist()copyaddAll()\nArrayList.toArray(T[] a)elementsSystem.arraycopy(elementData, 0, a, 0, size);a\n\n- System.arraycopy\n```java\n  public void add(int index, E element) {\n        rangeCheckForAdd(index);\n        ensureCapacityInternal(size + 1);  // Increments modCount!!\n        System.arraycopy(elementData, index, elementData, index + 1,\n                         size - index);  \n        elementData[index] = element;\n        size++;\n    }\n```\nSystem.arrayCopy\n\n- \n\n```java\n//ArrayList implements java.io.Serializable\nprivate void writeObject(java.io.ObjectOutputStream s)\nprivate void readObject(java.io.ObjectInputStream s)\n\nprotected void removeRange(int fromIndex, int toIndex) \n\npublic boolean removeAll(Collection<?> c) //list\npublic boolean retainAll(Collection<?> c) //  list\n\npublic void trimToSize() // 1.50.5\n```\n\n\n\n\n> VectorArrayListArrayListVectorCopyOnWriteArrayList\n\n\n### 1.2 LinkedList\nLinkedList T Node<T> LinkedListNull\nLinkedListgetset\naddjdk 1.8\n\n```java\n   public boolean add(E e) {\n        linkLast(e);\n        return true;\n    }\n\n/**\n     * Links e as last element.\n     */\n    void linkLast(E e) {\n        final Node<E> l = last;  //\n        final Node<E> newNode = new Node<>(l, e, null); // addnewEntry\n        last = newNode; //Node\n        if (l == null) //size = 0\n            first = newNode; //NodeNull\n        else\n            l.next = newNode; //nextEntry.\n\n        size++;\n        modCount++;\n    }\n\n```\n\naddnewenteryremove\n\nget\n\n```java\n public E get(int index) {\n        checkElementIndex(index);\n        return node(index).item;\n    }\n\n  /**\n     * Returns the (non-null) Node at the specified element index.\n     */\n    Node<E> node(int index) {\n        // assert isElementIndex(index);\n\n        if (index < (size >> 1)) {\n            Node<E> x = first;\n            for (int i = 0; i < index; i++)\n                x = x.next; //index\n            return x;\n        } else {\n            Node<E> x = last;\n            for (int i = size - 1; i > index; i--)\n                x = x.prev;\n            return x;\n        }\n    }\n\n```\n\n\nArrayList implement RandomAccessLinkedListRandomAccess\n\n> * Marker interface used by <tt>List</tt> implementations to indicate that\n * they support fast (generally constant time) random access.  The primary\n * purpose of this interface is to allow generic algorithms to alter their\n * behavior to provide good performance when applied to either random or\n * sequential access lists.\n *\n * <p>The best algorithms for manipulating random access lists (such as\n * <tt>ArrayList</tt>) can produce quadratic behavior when applied to\n * sequential access lists (such as <tt>LinkedList</tt>).  Generic list\n * algorithms are encouraged to check whether the given list is an\n * <tt>instanceof</tt> this interface before applying an algorithm that would\n * provide poor performance if it were applied to a sequential access list,\n * and to alter their behavior if necessary to guarantee acceptable\n * performance.\n *\n * <p>It is recognized that the distinction between random and sequential\n * access is often fuzzy.  For example, some <tt>List</tt> implementations\n * provide asymptotically linear access times if they get huge, but constant\n * access times in practice.  Such a <tt>List</tt> implementation\n * should generally implement this interface.  As a rule of thumb, a\n * List implementation should implement this interface if,\n * for typical instances of the class, this loop:\n *     for (int i=0, n=list.size(); i &lt; n; i++)\n *         list.get(i); //get\n * runs faster than this loop:\n *     for (Iterator i=list.iterator(); i.hasNext(); )\n *         i.next(); \n\n\n\n\nlinkedListfor loopListIterator<T>\n(MD)\n\n[ArryListLinkedList](http://www.jianshu.com/p/d5ec2ff72b33) \n\n> 1ArrayList\n> 2LinkedListArrayList\n> 3ArrayListLinkedList\n> 4LinkedListArrayListSystem.arrayCopynative\n\n\n## 2. Map\n### 2.1 HashMap \n\n>public class HashMap<K,V> extends AbstractMap<K,V>\n    implements Map<K,V>, Cloneable, Serializable \n   \nHashMapKeyValuenull(getput)\n\nHashMap\n\n    16\n    static final int DEFAULT_INITIAL_CAPACITY = 1 << 4; // aka 16 \n\n    0.75f Hashmap\n    static final float DEFAULT_LOAD_FACTOR = 0.75f; //\n\n\n\n```java\n public HashMap(int initialCapacity, float loadFactor)  //\n public HashMap(int initialCapacity) // ArrayList\n public HashMap() //16\n public HashMap(Map<? extends K, ? extends V> m)\n```\n[2n](https://stackoverflow.com/questions/8352378/why-does-hashmap-require-that-the-initial-capacity-be-a-power-of-two)\n\nCURD(jdk 1.8jdk1.6)\n```java\n public V put(K key, V value) {\n        return putVal(hash(key), key, value, false, true);\n    }\n\n /**\n     * Implements Map.put and related methods\n     *\n     * @param hash hash for key\n     * @param key the key\n     * @param value the value to put\n     * @param onlyIfAbsent if true, don't change existing value\n     * @param evict if false, the table is in creation mode.\n     * @return previous value, or null if none\n     */\n    final V putVal(int hash, K key, V value, boolean onlyIfAbsent,\n                   boolean evict) {\n        Node<K,V>[] tab; Node<K,V> p; int n, i;\n        if ((tab = table) == null || (n = tab.length) == 0)\n            n = (tab = resize()).length; //tableNode resize\n        if ((p = tab[i = (n - 1) & hash]) == null)\n            tab[i] = newNode(hash, key, value, null);\n        else {\n            Node<K,V> e; K k;\n            if (p.hash == hash &&\n                ((k = p.key) == key || (key != null && key.equals(k))))\n                e = p; //Table\n            else if (p instanceof TreeNode)//pprevious  \n                e = ((TreeNode<K,V>)p).putTreeVal(this, tab, hash, key, value);\n            else {//\n                for (int binCount = 0; ; ++binCount) {\n                    if ((e = p.next) == null) {\n                        p.next = newNode(hash, key, value, null); //\n                        if (binCount >= TREEIFY_THRESHOLD - 1) // -1 for 1st\n                            treeifyBin(tab, hash);\n                        break;\n                    }\n                    if (e.hash == hash &&\n                        ((k = e.key) == key || (key != null && key.equals(k))))\n                        break;\n                    p = e;\n                }\n            }\n            if (e != null) { // existing mapping for key\n                V oldValue = e.value;\n                if (!onlyIfAbsent || oldValue == null)\n                    e.value = value;\n                afterNodeAccess(e); //\n                return oldValue;\n            }\n        }\n        ++modCount;\n        if (++size > threshold)\n            resize();\n        afterNodeInsertion(evict);//\n        return null;\n    }\n\n```\n\nget\n```java \n  public V get(Object key) {\n        Node<K,V> e;\n        return (e = getNode(hash(key), key)) == null ? null : e.value;//keyvalue\n    }\n    /**\n     * Implements Map.get and related methods\n     *\n     * @param hash hash for key\n     * @param key the key\n     * @return the node, or null if none\n     */\n    final Node<K,V> getNode(int hash, Object key) {\n        Node<K,V>[] tab; Node<K,V> first, e; int n; K k;\n        if ((tab = table) != null && (n = tab.length) > 0 &&\n            (first = tab[(n - 1) & hash]) != null) { //tableput\n            if (first.hash == hash && // always check first node\n                ((k = first.key) == key || (key != null && key.equals(k))))\n                return first;\n            if ((e = first.next) != null) {\n                if (first instanceof TreeNode)\n                    return ((TreeNode<K,V>)first).getTreeNode(hash, key);\n                do {\n                    if (e.hash == hash &&\n                        ((k = e.key) == key || (key != null && key.equals(k))))\n                        return e;\n                } while ((e = e.next) != null);\n            }\n        }\n        return null;\n    }\n\n\n  public V get(Object key) {\n        Node<K,V> e;\n        return (e = getNode(hash(key), key)) == null ? null : e.value;\n    }\n\n    /**\n     * Implements Map.get and related methods\n     *\n     * @param hash hash for key\n     * @param key the key\n     * @return the node, or null if none\n     */\n    final Node<K,V> getNode(int hash, Object key) {\n        Node<K,V>[] tab; Node<K,V> first, e; int n; K k;\n        if ((tab = table) != null && (n = tab.length) > 0 &&\n            (first = tab[(n - 1) & hash]) != null) {\n            if (first.hash == hash && // always check first node\n                ((k = first.key) == key || (key != null && key.equals(k))))\n                return first;\n            if ((e = first.next) != null) {\n                if (first instanceof TreeNode)\n                    return ((TreeNode<K,V>)first).getTreeNode(hash, key);\n                do {\n                    if (e.hash == hash && \n                        ((k = e.key) == key || (key != null && key.equals(k))))\n                        return e;\n    //hashintkey()  key equals(equalshashcode)\n                } while ((e = e.next) != null);\n            }\n        }\n        return null;\n    }\n\n```\n\nHashMap\n```java\nlong i = 0;\nIterator<Map.Entry<Integer, Integer>> it = map.entrySet().iterator();\nwhile (it.hasNext()) {\n    Map.Entry<Integer, Integer> pair = it.next(); //getnext\n    i += pair.getKey() + pair.getValue();\n}\n```\n\nentrySetMap\n```\nSet<Map.Entry<K, V>> entrySet();\n   * Returns a Set view of the mappings contained in this map.\n     * The set is backed by the map, so changes to the map are\n     * reflected in the set, and vice-versa.  If the map is modified\n     * while an iteration over the set is in progress (except through\n     * the iterator's own <tt>remove</tt> operation, or through the\n     * <tt>setValue</tt> operation on a map entry returned by the\n     * iterator) the results of the iteration are undefined.  The set\n     * supports element removal, which removes the corresponding\n     * mapping from the map, via the <tt>Iterator.remove</tt>,\n     * <tt>Set.remove</tt>, <tt>removeAll</tt>, <tt>retainAll</tt> and\n     * <tt>clear</tt> operations.  It does not support the\n     * <tt>add</tt> or <tt>addAll</tt> operations.\n     *\n     * @return a set view of the mappings contained in this map\n```\n   \n mapSetSetmapentrySetmapremoveSetmappingadd\n\nHashMap\ntransient Set<Map.Entry<K,V>> entrySet; //\nenterySet\n```java\n  public Set<Map.Entry<K,V>> entrySet() {\n        Set<Map.Entry<K,V>> es;\n        return (es = entrySet) == null ? (entrySet = new EntrySet()) : es;\n    }\n\n// EntrySet\n  final class EntrySet extends AbstractSet<Map.Entry<K,V>> {\n        public final int size()                 { return size; }\n        public final void clear()               { HashMap.this.clear(); }\n        public final Iterator<Map.Entry<K,V>> iterator() {\n            return new EntryIterator();\n        }\n        public final boolean contains(Object o) {\n            if (!(o instanceof Map.Entry))\n                return false;\n            Map.Entry<?,?> e = (Map.Entry<?,?>) o;\n            Object key = e.getKey();\n            Node<K,V> candidate = getNode(hash(key), key);\n            return candidate != null && candidate.equals(e);\n        }\n        public final boolean remove(Object o) {\n            if (o instanceof Map.Entry) {\n                Map.Entry<?,?> e = (Map.Entry<?,?>) o;\n                Object key = e.getKey();\n                Object value = e.getValue();\n                return removeNode(hash(key), key, value, true, true) != null;\n            }\n            return false;\n        }\n    }\n\n```\nremoveNodegetNodeputVal\n```java\n   final Node<K,V> removeNode(int hash, Object key, Object value,\n                               boolean matchValue, boolean movable) {\n        Node<K,V>[] tab; Node<K,V> p; int n, index;\n        if ((tab = table) != null && (n = tab.length) > 0 &&\n            (p = tab[index = (n - 1) & hash]) != null) {\n            Node<K,V> node = null, e; K k; V v;\n            if (p.hash == hash &&\n                ((k = p.key) == key || (key != null && key.equals(k))))\n                node = p;\n            else if ((e = p.next) != null) {\n                if (p instanceof TreeNode)\n                    node = ((TreeNode<K,V>)p).getTreeNode(hash, key);\n                else {\n                    do {\n                        if (e.hash == hash &&\n                            ((k = e.key) == key ||\n                             (key != null && key.equals(k)))) {\n                            node = e;\n                            break;\n                        }\n                        p = e;\n                    } while ((e = e.next) != null);\n                }\n            } //p(previous)matchValuemovabletrue\n            // node Node\n            if (node != null && (!matchValue || (v = node.value) == value ||\n                                 (value != null && value.equals(v)))) {\n                if (node instanceof TreeNode)\n                    ((TreeNode<K,V>)node).removeTreeNode(this, tab, movable);\n                else if (node == p) //\n                    tab[index] = node.next;//\n                else\n                    p.next = node.next; //\n                ++modCount;\n                --size;\n                afterNodeRemoval(node);\n                return node;\n            }\n        }\n        return null;\n    }\n```\n\n> e.hash == hash || (key!=null &&key.equals(k)) //hashCode\n\n\n```java\n  public boolean containsKey(Object key) {\n        return getNode(hash(key), key) != null; //keyNode\n    }\n\n   public boolean containsValue(Object value) {\n        Node<K,V>[] tab; V v;\n        if ((tab = table) != null && size > 0) {\n            for (int i = 0; i < tab.length; ++i) {\n                for (Node<K,V> e = tab[i]; e != null; e = e.next) {\n                    if ((v = e.value) == value ||\n                        (value != null && value.equals(v)))\n                        return true; //\n                }\n            }\n        }\n        return false;\n    } \n```\n\nArrayListLinkedListHashMaphashCodeHashMaphashCodehash CollisionObjecthashCode[](https://stackoverflow.com/questions/6493605/how-does-a-java-hashmap-handle-different-objects-with-the-same-hash-code)\nHashMap(key,value)keyhashvalueNext(getkeyhashCodekey.equals)\n\n### 2.2 LinkedHashMap\n\npublic class LinkedHashMap<K,V>\n    extends HashMap<K,V>\n    implements Map<K,V>\nHashMapLinkedHashMap\n  \nfinal boolean accessOrder; false\n> The iteration ordering method for this linked hash map: <tt>true</tt>\nfor access-order, false for insertion-order.\n\nLinkedHashMap\n\n\n### 3. Set\nSetHashSetTreeSetLinkedHashSetjdk\n\npublic class HashSet<E>\n    extends AbstractSet<E>\n    implements Set<E>, Cloneable, java.io.Serializable\nSet****Sete1e2e1.equals(e2)\nHashSetmapHashMapSet\n\n### 4. \n\n    VetorStackArrayDeque,Queue\n\n    VectorList,synchronized\n\n    QueueinterfaceList(FIFO)\n    PriorityQueue\n    java.util.concurrent.LinkedBlockingQueue\n    java.util.concurrent.LinkedBlockingQueue\n    java.util.concurrent.PriorityBlockingQueue\n    Doug Lea\n\n    StackVector(LIFO)\n    The Stack class represents a last-in-first-out (LIFO) stack of object\n\n    Deque()\n\n\n### 5. concurrentHashMap\njdk1.8concurrentHashMapsynchronizedDoug LeaCAS\n\n### 6. WeakHaskMap\nWeakHashMapKeyWeakReferenceValue\n\n\n```java\nString a = \"a\";\nmap.put(1,a);\na = null;\n//mapamapagc\n```\n\nAndroid [](https://developer.android.com/reference/java/util/WeakHashMap.html)\n\n> Implementation note: The value objects in a WeakHashMap are held by ordinary strong references. Thus care should be taken to ensure that value objects do not strongly refer to their own keys, either directly or indirectly, since that will prevent the keys from being discarded. Note that a value object may refer indirectly to its key via the WeakHashMap itself; that is, a value object may strongly refer to some other key object whose associated value object, in turn, strongly refers to the key of the first value object. If the values in the map do not rely on the map holding strong references to them, one way to deal with this is to wrap values themselves within WeakReferences before inserting, as in: m.put(key, new WeakReference(value)), and then unwrapping upon each get.\n\nWeakHashMapvaluekeykey,value\n\n\n## 7. java 8\nlist.replaceAll(String::toUpperCase) //method reference \ncan not change the elemeet type, for that you need an stream\n[Collections Refuled by Stuart Marks](https://www.youtube.com/watch?v=q6zF3vf114M)\n\n## 8.\n8.1 [Doug Lea](https://en.wikipedia.org/wiki/Doug_Lea) jdk\n8.2 jdkListMapApachejdk\n8.3 ArrayListHashMap****\n8.4 [Stuart Mark](https://blogs.oracle.com/java/collections-refueled)class**@deprecated**\n8.5 [Joshua Bloch](https://www.youtube.com/watch?v=V1vQf4qyMXg) By the way , he said Doug Lea is very smart .\n\n\n\n### Reference \n1. [Collections Refuled by Stuart Marks](https://www.youtube.com/watch?v=q6zF3vf114M)\n2. [From Java Code to Java Heap: Understanding the Memory Usage of Your Application](https://www.youtube.com/watch?v=FLcXf9pO27w)\n3. [Java](http://www.jianshu.com/p/2cd7be850540)\n4. [Arrays.asList()Listjva.util.ArrayList](http://www.programcreek.com/2014/01/java%E7%A8%8B%E5%BA%8F%E5%91%98%E5%B8%B8%E7%8A%AF%E7%9A%8410%E4%B8%AA%E9%94%99%E8%AF%AF/)\n5. [WeakHashMapHashMap](http://blog.csdn.net/yangzl2008/article/details/6980709)\n","slug":"2017-06-12-Collections-Refuled-by-Stuart-Marks","published":1,"updated":"2017-07-09T10:31:10.313Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj50afgxl001qi4vrj68xfkbs","content":"<p>Collections()Map()jdk1.8java.utiljdkclass(LinkedList)java1.8since 1.8<br><img src=\"http://odzl05jxx.bkt.clouddn.com/16d714eb6e8ecc23e4d6ba20d0be17a0.jpg?imageView2/2/w/600\" alt=\"\"></p>\n<a id=\"more\"></a>\n<p>java<a href=\"http://www.jianshu.com/p/2cd7be850540\">Java</a>jdk 1.6</p>\n<h2 id=\"List\"><a href=\"#List\" class=\"headerlink\" title=\"List\"></a>List</h2><p>ArrayList (newsizenull)<br>LinkedList(not recommended)<br>Vector,</p>\n<h2 id=\"Set\"><a href=\"#Set\" class=\"headerlink\" title=\"Set\"></a>Set</h2><p>HashSet (HashMap)<br>TreeSet()<br>LinkedHashSet(LinkedHashMap)</p>\n<h2 id=\"Queue\"><a href=\"#Queue\" class=\"headerlink\" title=\"Queue\"></a>Queue</h2><p>Stack ArrayDeque()</p>\n<h2 id=\"Map\"><a href=\"#Map\" class=\"headerlink\" title=\"Map\"></a>Map</h2><p>HashMap null,<br>TreeMap()<br>HashTable(null)<br>SparseArray(Android)</p>\n<p>Java 1.5<br><a href=\"http://blog.csdn.net/lonelyroamer/article/details/7868820\"></a>Object<a href=\"https://zh.wikipedia.org/wiki/%E7%B1%BB%E5%9E%8B%E6%93%A6%E9%99%A4\"></a></p>\n<h2 id=\"1-List\"><a href=\"#1-List\" class=\"headerlink\" title=\"1. List\"></a>1. List</h2><h3 id=\"1-1-ArrayList\"><a href=\"#1-1-ArrayList\" class=\"headerlink\" title=\"1.1 ArrayList\"></a>1.1 ArrayList</h3><ul>\n<li><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"> <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</div><div class=\"line\">    String[] array = <span class=\"keyword\">new</span> String[]&#123;<span class=\"string\">\"a\"</span>, <span class=\"string\">\"b\"</span>, <span class=\"string\">\"c\"</span>, <span class=\"string\">\"d\"</span>&#125;;</div><div class=\"line\">    List&lt;String&gt; l = Arrays.asList(array);</div><div class=\"line\">    l.add(<span class=\"string\">\"d\"</span>);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">Exception in thread <span class=\"string\">\"main\"</span> java.lang.UnsupportedOperationException</div><div class=\"line\">    at java.util.AbstractList.add(AbstractList.java:<span class=\"number\">148</span>)</div><div class=\"line\">    at java.util.AbstractList.add(AbstractList.java:<span class=\"number\">108</span>)</div><div class=\"line\">    at com.example.demo.main(ConcurrentModificationListDemo.java:<span class=\"number\">13</span>)</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>Arrays.asList<strong>java.util.Arrays.ArrayList</strong><strong>java.util.ArrayList</strong>ListArraysprivate class<br>new ArrayListlist()copyaddAll()<br>ArrayList.toArray(T[] a)elementsSystem.arraycopy(elementData, 0, a, 0, size);a</p>\n<ul>\n<li>System.arraycopy<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">add</span><span class=\"params\">(<span class=\"keyword\">int</span> index, E element)</span> </span>&#123;</div><div class=\"line\">      rangeCheckForAdd(index);</div><div class=\"line\">      ensureCapacityInternal(size + <span class=\"number\">1</span>);  <span class=\"comment\">// Increments modCount!!</span></div><div class=\"line\">      System.arraycopy(elementData, index, elementData, index + <span class=\"number\">1</span>,</div><div class=\"line\">                       size - index);  </div><div class=\"line\">      elementData[index] = element;</div><div class=\"line\">      size++;</div><div class=\"line\">  &#125;</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>System.arrayCopy</p>\n<ul>\n<li></li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//ArrayList implements java.io.Serializable</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">writeObject</span><span class=\"params\">(java.io.ObjectOutputStream s)</span></div><div class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">readObject</span><span class=\"params\">(java.io.ObjectInputStream s)</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">removeRange</span><span class=\"params\">(<span class=\"keyword\">int</span> fromIndex, <span class=\"keyword\">int</span> toIndex)</span> </div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">removeAll</span><span class=\"params\">(Collection&lt;?&gt; c)</span> <span class=\"comment\">//list</span></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">retainAll</span><span class=\"params\">(Collection&lt;?&gt; c)</span> <span class=\"comment\">//  list</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">trimToSize</span><span class=\"params\">()</span> <span class=\"comment\">// 1.50.5</span></span></div></pre></td></tr></table></figure>\n<p></p>\n<blockquote>\n<p>VectorArrayListArrayListVectorCopyOnWriteArrayList</p>\n</blockquote>\n<h3 id=\"1-2-LinkedList\"><a href=\"#1-2-LinkedList\" class=\"headerlink\" title=\"1.2 LinkedList\"></a>1.2 LinkedList</h3><p>LinkedList T Node<T> LinkedListNull<br>LinkedListgetset<br>addjdk 1.8</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">add</span><span class=\"params\">(E e)</span> </span>&#123;</div><div class=\"line\">        linkLast(e);</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">/**</div><div class=\"line\">     * Links e as last element.</div><div class=\"line\">     */</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">linkLast</span><span class=\"params\">(E e)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">final</span> Node&lt;E&gt; l = last;  <span class=\"comment\">//</span></div><div class=\"line\">        <span class=\"keyword\">final</span> Node&lt;E&gt; newNode = <span class=\"keyword\">new</span> Node&lt;&gt;(l, e, <span class=\"keyword\">null</span>); <span class=\"comment\">// addnewEntry</span></div><div class=\"line\">        last = newNode; <span class=\"comment\">//Node</span></div><div class=\"line\">        <span class=\"keyword\">if</span> (l == <span class=\"keyword\">null</span>) <span class=\"comment\">//size = 0</span></div><div class=\"line\">            first = newNode; <span class=\"comment\">//NodeNull</span></div><div class=\"line\">        <span class=\"keyword\">else</span></div><div class=\"line\">            l.next = newNode; <span class=\"comment\">//nextEntry.</span></div><div class=\"line\"></div><div class=\"line\">        size++;</div><div class=\"line\">        modCount++;</div><div class=\"line\">    &#125;</div></pre></td></tr></table></figure>\n<p>addnewenteryremove</p>\n<p>get</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> E <span class=\"title\">get</span><span class=\"params\">(<span class=\"keyword\">int</span> index)</span> </span>&#123;</div><div class=\"line\">       checkElementIndex(index);</div><div class=\"line\">       <span class=\"keyword\">return</span> node(index).item;</div><div class=\"line\">   &#125;</div><div class=\"line\"></div><div class=\"line\"> <span class=\"comment\">/**</div><div class=\"line\">    * Returns the (non-null) Node at the specified element index.</div><div class=\"line\">    */</span></div><div class=\"line\">   <span class=\"function\">Node&lt;E&gt; <span class=\"title\">node</span><span class=\"params\">(<span class=\"keyword\">int</span> index)</span> </span>&#123;</div><div class=\"line\">       <span class=\"comment\">// assert isElementIndex(index);</span></div><div class=\"line\"></div><div class=\"line\">       <span class=\"keyword\">if</span> (index &lt; (size &gt;&gt; <span class=\"number\">1</span>)) &#123;</div><div class=\"line\">           Node&lt;E&gt; x = first;</div><div class=\"line\">           <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; index; i++)</div><div class=\"line\">               x = x.next; <span class=\"comment\">//index</span></div><div class=\"line\">           <span class=\"keyword\">return</span> x;</div><div class=\"line\">       &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">           Node&lt;E&gt; x = last;</div><div class=\"line\">           <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = size - <span class=\"number\">1</span>; i &gt; index; i--)</div><div class=\"line\">               x = x.prev;</div><div class=\"line\">           <span class=\"keyword\">return</span> x;</div><div class=\"line\">       &#125;</div><div class=\"line\">   &#125;</div></pre></td></tr></table></figure>\n<p><br>ArrayList implement RandomAccessLinkedListRandomAccess</p>\n<blockquote>\n<ul>\n<li>Marker interface used by <tt>List</tt> implementations to indicate that<ul>\n<li>they support fast (generally constant time) random access.  The primary</li>\n<li>purpose of this interface is to allow generic algorithms to alter their</li>\n<li>behavior to provide good performance when applied to either random or</li>\n<li>sequential access lists.<br>*</li>\n<li><p>The best algorithms for manipulating random access lists (such as</li>\n<li><tt>ArrayList</tt>) can produce quadratic behavior when applied to</li>\n<li>sequential access lists (such as <tt>LinkedList</tt>).  Generic list</li>\n<li>algorithms are encouraged to check whether the given list is an</li>\n<li><tt>instanceof</tt> this interface before applying an algorithm that would</li>\n<li>provide poor performance if it were applied to a sequential access list,</li>\n<li>and to alter their behavior if necessary to guarantee acceptable</li>\n<li>performance.<br>*</li>\n<li><p>It is recognized that the distinction between random and sequential</li>\n<li>access is often fuzzy.  For example, some <tt>List</tt> implementations</li>\n<li>provide asymptotically linear access times if they get huge, but constant</li>\n<li>access times in practice.  Such a <tt>List</tt> implementation</li>\n<li>should generally implement this interface.  As a rule of thumb, a</li>\n<li>List implementation should implement this interface if,</li>\n<li>for typical instances of the class, this loop:</li>\n<li>for (int i=0, n=list.size(); i &lt; n; i++)</li>\n<li>list.get(i); //get</li>\n<li>runs faster than this loop:</li>\n<li>for (Iterator i=list.iterator(); i.hasNext(); )</li>\n<li>i.next(); </li>\n</ul>\n</li>\n</ul>\n</blockquote>\n<p></p>\n<p>linkedListfor loopListIterator<T><br>(MD)</p>\n<p><a href=\"http://www.jianshu.com/p/d5ec2ff72b33\">ArryListLinkedList</a> </p>\n<blockquote>\n<p>1ArrayList<br>2LinkedListArrayList<br>3ArrayListLinkedList<br>4LinkedListArrayListSystem.arrayCopynative</p>\n</blockquote>\n<h2 id=\"2-Map\"><a href=\"#2-Map\" class=\"headerlink\" title=\"2. Map\"></a>2. Map</h2><h3 id=\"2-1-HashMap\"><a href=\"#2-1-HashMap\" class=\"headerlink\" title=\"2.1 HashMap\"></a>2.1 HashMap</h3><blockquote>\n<p>public class HashMap<K,V> extends AbstractMap<K,V><br>    implements Map<K,V>, Cloneable, Serializable </p>\n</blockquote>\n<p>HashMapKeyValuenull(getput)</p>\n<p>HashMap</p>\n<pre><code>16\nstatic final int DEFAULT_INITIAL_CAPACITY = 1 &lt;&lt; 4; // aka 16 \n\n0.75f Hashmap\nstatic final float DEFAULT_LOAD_FACTOR = 0.75f; //\n</code></pre><p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">HashMap</span><span class=\"params\">(<span class=\"keyword\">int</span> initialCapacity, <span class=\"keyword\">float</span> loadFactor)</span>  <span class=\"comment\">//</span></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"title\">HashMap</span><span class=\"params\">(<span class=\"keyword\">int</span> initialCapacity)</span> <span class=\"comment\">// ArrayList</span></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"title\">HashMap</span><span class=\"params\">()</span> <span class=\"comment\">//16</span></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"title\">HashMap</span><span class=\"params\">(Map&lt;? extends K, ? extends V&gt; m)</span></span></div></pre></td></tr></table></figure>\n<p><a href=\"https://stackoverflow.com/questions/8352378/why-does-hashmap-require-that-the-initial-capacity-be-a-power-of-two\">2n</a></p>\n<p>CURD(jdk 1.8jdk1.6)<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> V <span class=\"title\">put</span><span class=\"params\">(K key, V value)</span> </span>&#123;</div><div class=\"line\">       <span class=\"keyword\">return</span> putVal(hash(key), key, value, <span class=\"keyword\">false</span>, <span class=\"keyword\">true</span>);</div><div class=\"line\">   &#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">/**</div><div class=\"line\">    * Implements Map.put and related methods</div><div class=\"line\">    *</div><div class=\"line\">    * <span class=\"doctag\">@param</span> hash hash for key</div><div class=\"line\">    * <span class=\"doctag\">@param</span> key the key</div><div class=\"line\">    * <span class=\"doctag\">@param</span> value the value to put</div><div class=\"line\">    * <span class=\"doctag\">@param</span> onlyIfAbsent if true, don't change existing value</div><div class=\"line\">    * <span class=\"doctag\">@param</span> evict if false, the table is in creation mode.</div><div class=\"line\">    * <span class=\"doctag\">@return</span> previous value, or null if none</div><div class=\"line\">    */</span></div><div class=\"line\">   <span class=\"function\"><span class=\"keyword\">final</span> V <span class=\"title\">putVal</span><span class=\"params\">(<span class=\"keyword\">int</span> hash, K key, V value, <span class=\"keyword\">boolean</span> onlyIfAbsent,</div><div class=\"line\">                  <span class=\"keyword\">boolean</span> evict)</span> </span>&#123;</div><div class=\"line\">       Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; <span class=\"keyword\">int</span> n, i;</div><div class=\"line\">       <span class=\"keyword\">if</span> ((tab = table) == <span class=\"keyword\">null</span> || (n = tab.length) == <span class=\"number\">0</span>)</div><div class=\"line\">           n = (tab = resize()).length; <span class=\"comment\">//tableNode resize</span></div><div class=\"line\">       <span class=\"keyword\">if</span> ((p = tab[i = (n - <span class=\"number\">1</span>) &amp; hash]) == <span class=\"keyword\">null</span>)</div><div class=\"line\">           tab[i] = newNode(hash, key, value, <span class=\"keyword\">null</span>);</div><div class=\"line\">       <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">           Node&lt;K,V&gt; e; K k;</div><div class=\"line\">           <span class=\"keyword\">if</span> (p.hash == hash &amp;&amp;</div><div class=\"line\">               ((k = p.key) == key || (key != <span class=\"keyword\">null</span> &amp;&amp; key.equals(k))))</div><div class=\"line\">               e = p; <span class=\"comment\">//Table</span></div><div class=\"line\">           <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (p <span class=\"keyword\">instanceof</span> TreeNode)<span class=\"comment\">//pprevious  </span></div><div class=\"line\">               e = ((TreeNode&lt;K,V&gt;)p).putTreeVal(<span class=\"keyword\">this</span>, tab, hash, key, value);</div><div class=\"line\">           <span class=\"keyword\">else</span> &#123;<span class=\"comment\">//</span></div><div class=\"line\">               <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> binCount = <span class=\"number\">0</span>; ; ++binCount) &#123;</div><div class=\"line\">                   <span class=\"keyword\">if</span> ((e = p.next) == <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">                       p.next = newNode(hash, key, value, <span class=\"keyword\">null</span>); <span class=\"comment\">//</span></div><div class=\"line\">                       <span class=\"keyword\">if</span> (binCount &gt;= TREEIFY_THRESHOLD - <span class=\"number\">1</span>) <span class=\"comment\">// -1 for 1st</span></div><div class=\"line\">                           treeifyBin(tab, hash);</div><div class=\"line\">                       <span class=\"keyword\">break</span>;</div><div class=\"line\">                   &#125;</div><div class=\"line\">                   <span class=\"keyword\">if</span> (e.hash == hash &amp;&amp;</div><div class=\"line\">                       ((k = e.key) == key || (key != <span class=\"keyword\">null</span> &amp;&amp; key.equals(k))))</div><div class=\"line\">                       <span class=\"keyword\">break</span>;</div><div class=\"line\">                   p = e;</div><div class=\"line\">               &#125;</div><div class=\"line\">           &#125;</div><div class=\"line\">           <span class=\"keyword\">if</span> (e != <span class=\"keyword\">null</span>) &#123; <span class=\"comment\">// existing mapping for key</span></div><div class=\"line\">               V oldValue = e.value;</div><div class=\"line\">               <span class=\"keyword\">if</span> (!onlyIfAbsent || oldValue == <span class=\"keyword\">null</span>)</div><div class=\"line\">                   e.value = value;</div><div class=\"line\">               afterNodeAccess(e); <span class=\"comment\">//</span></div><div class=\"line\">               <span class=\"keyword\">return</span> oldValue;</div><div class=\"line\">           &#125;</div><div class=\"line\">       &#125;</div><div class=\"line\">       ++modCount;</div><div class=\"line\">       <span class=\"keyword\">if</span> (++size &gt; threshold)</div><div class=\"line\">           resize();</div><div class=\"line\">       afterNodeInsertion(evict);<span class=\"comment\">//</span></div><div class=\"line\">       <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</div><div class=\"line\">   &#125;</div></pre></td></tr></table></figure></p>\n<p>get<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> V <span class=\"title\">get</span><span class=\"params\">(Object key)</span> </span>&#123;</div><div class=\"line\">      Node&lt;K,V&gt; e;</div><div class=\"line\">      <span class=\"keyword\">return</span> (e = getNode(hash(key), key)) == <span class=\"keyword\">null</span> ? <span class=\"keyword\">null</span> : e.value;<span class=\"comment\">//keyvalue</span></div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"comment\">/**</div><div class=\"line\">   * Implements Map.get and related methods</div><div class=\"line\">   *</div><div class=\"line\">   * <span class=\"doctag\">@param</span> hash hash for key</div><div class=\"line\">   * <span class=\"doctag\">@param</span> key the key</div><div class=\"line\">   * <span class=\"doctag\">@return</span> the node, or null if none</div><div class=\"line\">   */</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">final</span> Node&lt;K,V&gt; <span class=\"title\">getNode</span><span class=\"params\">(<span class=\"keyword\">int</span> hash, Object key)</span> </span>&#123;</div><div class=\"line\">      Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; first, e; <span class=\"keyword\">int</span> n; K k;</div><div class=\"line\">      <span class=\"keyword\">if</span> ((tab = table) != <span class=\"keyword\">null</span> &amp;&amp; (n = tab.length) &gt; <span class=\"number\">0</span> &amp;&amp;</div><div class=\"line\">          (first = tab[(n - <span class=\"number\">1</span>) &amp; hash]) != <span class=\"keyword\">null</span>) &#123; <span class=\"comment\">//tableput</span></div><div class=\"line\">          <span class=\"keyword\">if</span> (first.hash == hash &amp;&amp; <span class=\"comment\">// always check first node</span></div><div class=\"line\">              ((k = first.key) == key || (key != <span class=\"keyword\">null</span> &amp;&amp; key.equals(k))))</div><div class=\"line\">              <span class=\"keyword\">return</span> first;</div><div class=\"line\">          <span class=\"keyword\">if</span> ((e = first.next) != <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">              <span class=\"keyword\">if</span> (first <span class=\"keyword\">instanceof</span> TreeNode)</div><div class=\"line\">                  <span class=\"keyword\">return</span> ((TreeNode&lt;K,V&gt;)first).getTreeNode(hash, key);</div><div class=\"line\">              do &#123;</div><div class=\"line\">                  <span class=\"keyword\">if</span> (e.hash == hash &amp;&amp;</div><div class=\"line\">                      ((k = e.key) == key || (key != <span class=\"keyword\">null</span> &amp;&amp; key.equals(k))))</div><div class=\"line\">                      <span class=\"keyword\">return</span> e;</div><div class=\"line\">              &#125; <span class=\"keyword\">while</span> ((e = e.next) != <span class=\"keyword\">null</span>);</div><div class=\"line\">          &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> V <span class=\"title\">get</span><span class=\"params\">(Object key)</span> </span>&#123;</div><div class=\"line\">      Node&lt;K,V&gt; e;</div><div class=\"line\">      <span class=\"keyword\">return</span> (e = getNode(hash(key), key)) == <span class=\"keyword\">null</span> ? <span class=\"keyword\">null</span> : e.value;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">/**</div><div class=\"line\">   * Implements Map.get and related methods</div><div class=\"line\">   *</div><div class=\"line\">   * <span class=\"doctag\">@param</span> hash hash for key</div><div class=\"line\">   * <span class=\"doctag\">@param</span> key the key</div><div class=\"line\">   * <span class=\"doctag\">@return</span> the node, or null if none</div><div class=\"line\">   */</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">final</span> Node&lt;K,V&gt; <span class=\"title\">getNode</span><span class=\"params\">(<span class=\"keyword\">int</span> hash, Object key)</span> </span>&#123;</div><div class=\"line\">      Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; first, e; <span class=\"keyword\">int</span> n; K k;</div><div class=\"line\">      <span class=\"keyword\">if</span> ((tab = table) != <span class=\"keyword\">null</span> &amp;&amp; (n = tab.length) &gt; <span class=\"number\">0</span> &amp;&amp;</div><div class=\"line\">          (first = tab[(n - <span class=\"number\">1</span>) &amp; hash]) != <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">          <span class=\"keyword\">if</span> (first.hash == hash &amp;&amp; <span class=\"comment\">// always check first node</span></div><div class=\"line\">              ((k = first.key) == key || (key != <span class=\"keyword\">null</span> &amp;&amp; key.equals(k))))</div><div class=\"line\">              <span class=\"keyword\">return</span> first;</div><div class=\"line\">          <span class=\"keyword\">if</span> ((e = first.next) != <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">              <span class=\"keyword\">if</span> (first <span class=\"keyword\">instanceof</span> TreeNode)</div><div class=\"line\">                  <span class=\"keyword\">return</span> ((TreeNode&lt;K,V&gt;)first).getTreeNode(hash, key);</div><div class=\"line\">              do &#123;</div><div class=\"line\">                  <span class=\"keyword\">if</span> (e.hash == hash &amp;&amp; </div><div class=\"line\">                      ((k = e.key) == key || (key != <span class=\"keyword\">null</span> &amp;&amp; key.equals(k))))</div><div class=\"line\">                      <span class=\"keyword\">return</span> e;</div><div class=\"line\">  <span class=\"comment\">//hashintkey()  key equals(equalshashcode)</span></div><div class=\"line\">              &#125; <span class=\"keyword\">while</span> ((e = e.next) != <span class=\"keyword\">null</span>);</div><div class=\"line\">          &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</div><div class=\"line\">  &#125;</div></pre></td></tr></table></figure></p>\n<p>HashMap<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">long</span> i = <span class=\"number\">0</span>;</div><div class=\"line\">Iterator&lt;Map.Entry&lt;Integer, Integer&gt;&gt; it = map.entrySet().iterator();</div><div class=\"line\"><span class=\"keyword\">while</span> (it.hasNext()) &#123;</div><div class=\"line\">    Map.Entry&lt;Integer, Integer&gt; pair = it.next(); <span class=\"comment\">//getnext</span></div><div class=\"line\">    i += pair.getKey() + pair.getValue();</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>entrySetMap<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\">Set&lt;Map.Entry&lt;K, V&gt;&gt; entrySet();</div><div class=\"line\">   * Returns a Set view of the mappings contained in this map.</div><div class=\"line\">     * The set is backed by the map, so changes to the map are</div><div class=\"line\">     * reflected in the set, and vice-versa.  If the map is modified</div><div class=\"line\">     * while an iteration over the set is in progress (except through</div><div class=\"line\">     * the iterator&apos;s own &lt;tt&gt;remove&lt;/tt&gt; operation, or through the</div><div class=\"line\">     * &lt;tt&gt;setValue&lt;/tt&gt; operation on a map entry returned by the</div><div class=\"line\">     * iterator) the results of the iteration are undefined.  The set</div><div class=\"line\">     * supports element removal, which removes the corresponding</div><div class=\"line\">     * mapping from the map, via the &lt;tt&gt;Iterator.remove&lt;/tt&gt;,</div><div class=\"line\">     * &lt;tt&gt;Set.remove&lt;/tt&gt;, &lt;tt&gt;removeAll&lt;/tt&gt;, &lt;tt&gt;retainAll&lt;/tt&gt; and</div><div class=\"line\">     * &lt;tt&gt;clear&lt;/tt&gt; operations.  It does not support the</div><div class=\"line\">     * &lt;tt&gt;add&lt;/tt&gt; or &lt;tt&gt;addAll&lt;/tt&gt; operations.</div><div class=\"line\">     *</div><div class=\"line\">     * @return a set view of the mappings contained in this map</div></pre></td></tr></table></figure></p>\n<p> mapSetSetmapentrySetmapremoveSetmappingadd</p>\n<p>HashMap<br>transient Set<Map.Entry<K,V>&gt; entrySet; //<br>enterySet<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div></pre></td><td class=\"code\"><pre><div class=\"line\">  <span class=\"keyword\">public</span> Set&lt;Map.Entry&lt;K,V&gt;&gt; entrySet() &#123;</div><div class=\"line\">        Set&lt;Map.Entry&lt;K,V&gt;&gt; es;</div><div class=\"line\">        <span class=\"keyword\">return</span> (es = entrySet) == <span class=\"keyword\">null</span> ? (entrySet = <span class=\"keyword\">new</span> EntrySet()) : es;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// EntrySet</span></div><div class=\"line\">  <span class=\"keyword\">final</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">EntrySet</span> <span class=\"keyword\">extends</span> <span class=\"title\">AbstractSet</span>&lt;<span class=\"title\">Map</span>.<span class=\"title\">Entry</span>&lt;<span class=\"title\">K</span>,<span class=\"title\">V</span>&gt;&gt; </span>&#123;</div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> <span class=\"title\">size</span><span class=\"params\">()</span>                 </span>&#123; <span class=\"keyword\">return</span> size; &#125;</div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">final</span> <span class=\"keyword\">void</span> <span class=\"title\">clear</span><span class=\"params\">()</span>               </span>&#123; HashMap.<span class=\"keyword\">this</span>.clear(); &#125;</div><div class=\"line\">        <span class=\"keyword\">public</span> <span class=\"keyword\">final</span> Iterator&lt;Map.Entry&lt;K,V&gt;&gt; iterator() &#123;</div><div class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> EntryIterator();</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">final</span> <span class=\"keyword\">boolean</span> <span class=\"title\">contains</span><span class=\"params\">(Object o)</span> </span>&#123;</div><div class=\"line\">            <span class=\"keyword\">if</span> (!(o <span class=\"keyword\">instanceof</span> Map.Entry))</div><div class=\"line\">                <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</div><div class=\"line\">            Map.Entry&lt;?,?&gt; e = (Map.Entry&lt;?,?&gt;) o;</div><div class=\"line\">            Object key = e.getKey();</div><div class=\"line\">            Node&lt;K,V&gt; candidate = getNode(hash(key), key);</div><div class=\"line\">            <span class=\"keyword\">return</span> candidate != <span class=\"keyword\">null</span> &amp;&amp; candidate.equals(e);</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">final</span> <span class=\"keyword\">boolean</span> <span class=\"title\">remove</span><span class=\"params\">(Object o)</span> </span>&#123;</div><div class=\"line\">            <span class=\"keyword\">if</span> (o <span class=\"keyword\">instanceof</span> Map.Entry) &#123;</div><div class=\"line\">                Map.Entry&lt;?,?&gt; e = (Map.Entry&lt;?,?&gt;) o;</div><div class=\"line\">                Object key = e.getKey();</div><div class=\"line\">                Object value = e.getValue();</div><div class=\"line\">                <span class=\"keyword\">return</span> removeNode(hash(key), key, value, <span class=\"keyword\">true</span>, <span class=\"keyword\">true</span>) != <span class=\"keyword\">null</span>;</div><div class=\"line\">            &#125;</div><div class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div></pre></td></tr></table></figure></p>\n<p>removeNodegetNodeputVal<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">final</span> Node&lt;K,V&gt; <span class=\"title\">removeNode</span><span class=\"params\">(<span class=\"keyword\">int</span> hash, Object key, Object value,</div><div class=\"line\">                            <span class=\"keyword\">boolean</span> matchValue, <span class=\"keyword\">boolean</span> movable)</span> </span>&#123;</div><div class=\"line\">     Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; <span class=\"keyword\">int</span> n, index;</div><div class=\"line\">     <span class=\"keyword\">if</span> ((tab = table) != <span class=\"keyword\">null</span> &amp;&amp; (n = tab.length) &gt; <span class=\"number\">0</span> &amp;&amp;</div><div class=\"line\">         (p = tab[index = (n - <span class=\"number\">1</span>) &amp; hash]) != <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">         Node&lt;K,V&gt; node = <span class=\"keyword\">null</span>, e; K k; V v;</div><div class=\"line\">         <span class=\"keyword\">if</span> (p.hash == hash &amp;&amp;</div><div class=\"line\">             ((k = p.key) == key || (key != <span class=\"keyword\">null</span> &amp;&amp; key.equals(k))))</div><div class=\"line\">             node = p;</div><div class=\"line\">         <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> ((e = p.next) != <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">             <span class=\"keyword\">if</span> (p <span class=\"keyword\">instanceof</span> TreeNode)</div><div class=\"line\">                 node = ((TreeNode&lt;K,V&gt;)p).getTreeNode(hash, key);</div><div class=\"line\">             <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">                 do &#123;</div><div class=\"line\">                     <span class=\"keyword\">if</span> (e.hash == hash &amp;&amp;</div><div class=\"line\">                         ((k = e.key) == key ||</div><div class=\"line\">                          (key != <span class=\"keyword\">null</span> &amp;&amp; key.equals(k)))) &#123;</div><div class=\"line\">                         node = e;</div><div class=\"line\">                         <span class=\"keyword\">break</span>;</div><div class=\"line\">                     &#125;</div><div class=\"line\">                     p = e;</div><div class=\"line\">                 &#125; <span class=\"keyword\">while</span> ((e = e.next) != <span class=\"keyword\">null</span>);</div><div class=\"line\">             &#125;</div><div class=\"line\">         &#125; <span class=\"comment\">//p(previous)matchValuemovabletrue</span></div><div class=\"line\">         <span class=\"comment\">// node Node</span></div><div class=\"line\">         <span class=\"keyword\">if</span> (node != <span class=\"keyword\">null</span> &amp;&amp; (!matchValue || (v = node.value) == value ||</div><div class=\"line\">                              (value != <span class=\"keyword\">null</span> &amp;&amp; value.equals(v)))) &#123;</div><div class=\"line\">             <span class=\"keyword\">if</span> (node <span class=\"keyword\">instanceof</span> TreeNode)</div><div class=\"line\">                 ((TreeNode&lt;K,V&gt;)node).removeTreeNode(<span class=\"keyword\">this</span>, tab, movable);</div><div class=\"line\">             <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (node == p) <span class=\"comment\">//</span></div><div class=\"line\">                 tab[index] = node.next;<span class=\"comment\">//</span></div><div class=\"line\">             <span class=\"keyword\">else</span></div><div class=\"line\">                 p.next = node.next; <span class=\"comment\">//</span></div><div class=\"line\">             ++modCount;</div><div class=\"line\">             --size;</div><div class=\"line\">             afterNodeRemoval(node);</div><div class=\"line\">             <span class=\"keyword\">return</span> node;</div><div class=\"line\">         &#125;</div><div class=\"line\">     &#125;</div><div class=\"line\">     <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</div><div class=\"line\"> &#125;</div></pre></td></tr></table></figure></p>\n<p></p>\n<blockquote>\n<p>e.hash == hash || (key!=null &amp;&amp;key.equals(k)) //hashCode</p>\n</blockquote>\n<p><br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">containsKey</span><span class=\"params\">(Object key)</span> </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> getNode(hash(key), key) != <span class=\"keyword\">null</span>; <span class=\"comment\">//keyNode</span></div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\"> <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">containsValue</span><span class=\"params\">(Object value)</span> </span>&#123;</div><div class=\"line\">      Node&lt;K,V&gt;[] tab; V v;</div><div class=\"line\">      <span class=\"keyword\">if</span> ((tab = table) != <span class=\"keyword\">null</span> &amp;&amp; size &gt; <span class=\"number\">0</span>) &#123;</div><div class=\"line\">          <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; tab.length; ++i) &#123;</div><div class=\"line\">              <span class=\"keyword\">for</span> (Node&lt;K,V&gt; e = tab[i]; e != <span class=\"keyword\">null</span>; e = e.next) &#123;</div><div class=\"line\">                  <span class=\"keyword\">if</span> ((v = e.value) == value ||</div><div class=\"line\">                      (value != <span class=\"keyword\">null</span> &amp;&amp; value.equals(v)))</div><div class=\"line\">                      <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>; <span class=\"comment\">//</span></div><div class=\"line\">              &#125;</div><div class=\"line\">          &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</div><div class=\"line\">  &#125;</div></pre></td></tr></table></figure></p>\n<p>ArrayListLinkedListHashMaphashCodeHashMaphashCodehash CollisionObjecthashCode<a href=\"https://stackoverflow.com/questions/6493605/how-does-a-java-hashmap-handle-different-objects-with-the-same-hash-code\"></a><br>HashMap(key,value)keyhashvalueNext(getkeyhashCodekey.equals)</p>\n<h3 id=\"2-2-LinkedHashMap\"><a href=\"#2-2-LinkedHashMap\" class=\"headerlink\" title=\"2.2 LinkedHashMap\"></a>2.2 LinkedHashMap</h3><p>public class LinkedHashMap<K,V><br>    extends HashMap<K,V><br>    implements Map<K,V><br>HashMapLinkedHashMap<br><br>final boolean accessOrder; false</p>\n<blockquote>\n<p>The iteration ordering method for this linked hash map: <tt>true</tt><br>for access-order, false for insertion-order.</p>\n</blockquote>\n<p>LinkedHashMap</p>\n<h3 id=\"3-Set\"><a href=\"#3-Set\" class=\"headerlink\" title=\"3. Set\"></a>3. Set</h3><p>SetHashSetTreeSetLinkedHashSetjdk</p>\n<p>public class HashSet<E><br>    extends AbstractSet<E><br>    implements Set<E>, Cloneable, java.io.Serializable<br>Set<strong></strong>Sete1e2e1.equals(e2)<br>HashSetmapHashMapSet</p>\n<h3 id=\"4-\"><a href=\"#4-\" class=\"headerlink\" title=\"4. \"></a>4. </h3><pre><code>VetorStackArrayDeque,Queue\n\nVectorList,synchronized\n\nQueueinterfaceList(FIFO)\nPriorityQueue\njava.util.concurrent.LinkedBlockingQueue\njava.util.concurrent.LinkedBlockingQueue\njava.util.concurrent.PriorityBlockingQueue\nDoug Lea\n\nStackVector(LIFO)\nThe Stack class represents a last-in-first-out (LIFO) stack of object\n\nDeque()\n</code></pre><h3 id=\"5-concurrentHashMap\"><a href=\"#5-concurrentHashMap\" class=\"headerlink\" title=\"5. concurrentHashMap\"></a>5. concurrentHashMap</h3><p>jdk1.8concurrentHashMapsynchronizedDoug LeaCAS</p>\n<h3 id=\"6-WeakHaskMap\"><a href=\"#6-WeakHaskMap\" class=\"headerlink\" title=\"6. WeakHaskMap\"></a>6. WeakHaskMap</h3><p>WeakHashMapKeyWeakReferenceValue<br></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">String a = <span class=\"string\">\"a\"</span>;</div><div class=\"line\">map.put(<span class=\"number\">1</span>,a);</div><div class=\"line\">a = <span class=\"keyword\">null</span>;</div><div class=\"line\"><span class=\"comment\">//mapamapagc</span></div></pre></td></tr></table></figure>\n<p>Android <a href=\"https://developer.android.com/reference/java/util/WeakHashMap.html\"></a></p>\n<blockquote>\n<p>Implementation note: The value objects in a WeakHashMap are held by ordinary strong references. Thus care should be taken to ensure that value objects do not strongly refer to their own keys, either directly or indirectly, since that will prevent the keys from being discarded. Note that a value object may refer indirectly to its key via the WeakHashMap itself; that is, a value object may strongly refer to some other key object whose associated value object, in turn, strongly refers to the key of the first value object. If the values in the map do not rely on the map holding strong references to them, one way to deal with this is to wrap values themselves within WeakReferences before inserting, as in: m.put(key, new WeakReference(value)), and then unwrapping upon each get.</p>\n</blockquote>\n<p>WeakHashMapvaluekeykey,value</p>\n<h2 id=\"7-java-8\"><a href=\"#7-java-8\" class=\"headerlink\" title=\"7. java 8\"></a>7. java 8</h2><p>list.replaceAll(String::toUpperCase) //method reference<br>can not change the elemeet type, for that you need an stream<br><a href=\"https://www.youtube.com/watch?v=q6zF3vf114M\">Collections Refuled by Stuart Marks</a></p>\n<h2 id=\"8-\"><a href=\"#8-\" class=\"headerlink\" title=\"8.\"></a>8.</h2><p>8.1 <a href=\"https://en.wikipedia.org/wiki/Doug_Lea\">Doug Lea</a> jdk<br>8.2 jdkListMapApachejdk<br>8.3 ArrayListHashMap<strong></strong><br>8.4 <a href=\"https://blogs.oracle.com/java/collections-refueled\">Stuart Mark</a>class<strong>@deprecated</strong><br>8.5 <a href=\"https://www.youtube.com/watch?v=V1vQf4qyMXg\">Joshua Bloch</a> By the way , he said Doug Lea is very smart .</p>\n<h3 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h3><ol>\n<li><a href=\"https://www.youtube.com/watch?v=q6zF3vf114M\">Collections Refuled by Stuart Marks</a></li>\n<li><a href=\"https://www.youtube.com/watch?v=FLcXf9pO27w\">From Java Code to Java Heap: Understanding the Memory Usage of Your Application</a></li>\n<li><a href=\"http://www.jianshu.com/p/2cd7be850540\">Java</a></li>\n<li><a href=\"http://www.programcreek.com/2014/01/java%E7%A8%8B%E5%BA%8F%E5%91%98%E5%B8%B8%E7%8A%AF%E7%9A%8410%E4%B8%AA%E9%94%99%E8%AF%AF/\">Arrays.asList()Listjva.util.ArrayList</a></li>\n<li><a href=\"http://blog.csdn.net/yangzl2008/article/details/6980709\">WeakHashMapHashMap</a></li>\n</ol>\n","excerpt":"<p>Collections()Map()jdk1.8java.utiljdkclass(LinkedList)java1.8since 1.8<br><img src=\"http://odzl05jxx.bkt.clouddn.com/16d714eb6e8ecc23e4d6ba20d0be17a0.jpg?imageView2/2/w/600\" alt=\"\"></p>","more":"<p>java<a href=\"http://www.jianshu.com/p/2cd7be850540\">Java</a>jdk 1.6</p>\n<h2 id=\"List\"><a href=\"#List\" class=\"headerlink\" title=\"List\"></a>List</h2><p>ArrayList (newsizenull)<br>LinkedList(not recommended)<br>Vector,</p>\n<h2 id=\"Set\"><a href=\"#Set\" class=\"headerlink\" title=\"Set\"></a>Set</h2><p>HashSet (HashMap)<br>TreeSet()<br>LinkedHashSet(LinkedHashMap)</p>\n<h2 id=\"Queue\"><a href=\"#Queue\" class=\"headerlink\" title=\"Queue\"></a>Queue</h2><p>Stack ArrayDeque()</p>\n<h2 id=\"Map\"><a href=\"#Map\" class=\"headerlink\" title=\"Map\"></a>Map</h2><p>HashMap null,<br>TreeMap()<br>HashTable(null)<br>SparseArray(Android)</p>\n<p>Java 1.5<br><a href=\"http://blog.csdn.net/lonelyroamer/article/details/7868820\"></a>Object<a href=\"https://zh.wikipedia.org/wiki/%E7%B1%BB%E5%9E%8B%E6%93%A6%E9%99%A4\"></a></p>\n<h2 id=\"1-List\"><a href=\"#1-List\" class=\"headerlink\" title=\"1. List\"></a>1. List</h2><h3 id=\"1-1-ArrayList\"><a href=\"#1-1-ArrayList\" class=\"headerlink\" title=\"1.1 ArrayList\"></a>1.1 ArrayList</h3><ul>\n<li><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"> <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</div><div class=\"line\">    String[] array = <span class=\"keyword\">new</span> String[]&#123;<span class=\"string\">\"a\"</span>, <span class=\"string\">\"b\"</span>, <span class=\"string\">\"c\"</span>, <span class=\"string\">\"d\"</span>&#125;;</div><div class=\"line\">    List&lt;String&gt; l = Arrays.asList(array);</div><div class=\"line\">    l.add(<span class=\"string\">\"d\"</span>);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">Exception in thread <span class=\"string\">\"main\"</span> java.lang.UnsupportedOperationException</div><div class=\"line\">    at java.util.AbstractList.add(AbstractList.java:<span class=\"number\">148</span>)</div><div class=\"line\">    at java.util.AbstractList.add(AbstractList.java:<span class=\"number\">108</span>)</div><div class=\"line\">    at com.example.demo.main(ConcurrentModificationListDemo.java:<span class=\"number\">13</span>)</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>Arrays.asList<strong>java.util.Arrays.ArrayList</strong><strong>java.util.ArrayList</strong>ListArraysprivate class<br>new ArrayListlist()copyaddAll()<br>ArrayList.toArray(T[] a)elementsSystem.arraycopy(elementData, 0, a, 0, size);a</p>\n<ul>\n<li>System.arraycopy<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">add</span><span class=\"params\">(<span class=\"keyword\">int</span> index, E element)</span> </span>&#123;</div><div class=\"line\">      rangeCheckForAdd(index);</div><div class=\"line\">      ensureCapacityInternal(size + <span class=\"number\">1</span>);  <span class=\"comment\">// Increments modCount!!</span></div><div class=\"line\">      System.arraycopy(elementData, index, elementData, index + <span class=\"number\">1</span>,</div><div class=\"line\">                       size - index);  </div><div class=\"line\">      elementData[index] = element;</div><div class=\"line\">      size++;</div><div class=\"line\">  &#125;</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>System.arrayCopy</p>\n<ul>\n<li></li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//ArrayList implements java.io.Serializable</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">writeObject</span><span class=\"params\">(java.io.ObjectOutputStream s)</span></div><div class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">readObject</span><span class=\"params\">(java.io.ObjectInputStream s)</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">removeRange</span><span class=\"params\">(<span class=\"keyword\">int</span> fromIndex, <span class=\"keyword\">int</span> toIndex)</span> </div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">removeAll</span><span class=\"params\">(Collection&lt;?&gt; c)</span> <span class=\"comment\">//list</span></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">retainAll</span><span class=\"params\">(Collection&lt;?&gt; c)</span> <span class=\"comment\">//  list</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">trimToSize</span><span class=\"params\">()</span> <span class=\"comment\">// 1.50.5</span></span></div></pre></td></tr></table></figure>\n<p></p>\n<blockquote>\n<p>VectorArrayListArrayListVectorCopyOnWriteArrayList</p>\n</blockquote>\n<h3 id=\"1-2-LinkedList\"><a href=\"#1-2-LinkedList\" class=\"headerlink\" title=\"1.2 LinkedList\"></a>1.2 LinkedList</h3><p>LinkedList T Node<T> LinkedListNull<br>LinkedListgetset<br>addjdk 1.8</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">add</span><span class=\"params\">(E e)</span> </span>&#123;</div><div class=\"line\">        linkLast(e);</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">/**</div><div class=\"line\">     * Links e as last element.</div><div class=\"line\">     */</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">linkLast</span><span class=\"params\">(E e)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">final</span> Node&lt;E&gt; l = last;  <span class=\"comment\">//</span></div><div class=\"line\">        <span class=\"keyword\">final</span> Node&lt;E&gt; newNode = <span class=\"keyword\">new</span> Node&lt;&gt;(l, e, <span class=\"keyword\">null</span>); <span class=\"comment\">// addnewEntry</span></div><div class=\"line\">        last = newNode; <span class=\"comment\">//Node</span></div><div class=\"line\">        <span class=\"keyword\">if</span> (l == <span class=\"keyword\">null</span>) <span class=\"comment\">//size = 0</span></div><div class=\"line\">            first = newNode; <span class=\"comment\">//NodeNull</span></div><div class=\"line\">        <span class=\"keyword\">else</span></div><div class=\"line\">            l.next = newNode; <span class=\"comment\">//nextEntry.</span></div><div class=\"line\"></div><div class=\"line\">        size++;</div><div class=\"line\">        modCount++;</div><div class=\"line\">    &#125;</div></pre></td></tr></table></figure>\n<p>addnewenteryremove</p>\n<p>get</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> E <span class=\"title\">get</span><span class=\"params\">(<span class=\"keyword\">int</span> index)</span> </span>&#123;</div><div class=\"line\">       checkElementIndex(index);</div><div class=\"line\">       <span class=\"keyword\">return</span> node(index).item;</div><div class=\"line\">   &#125;</div><div class=\"line\"></div><div class=\"line\"> <span class=\"comment\">/**</div><div class=\"line\">    * Returns the (non-null) Node at the specified element index.</div><div class=\"line\">    */</span></div><div class=\"line\">   <span class=\"function\">Node&lt;E&gt; <span class=\"title\">node</span><span class=\"params\">(<span class=\"keyword\">int</span> index)</span> </span>&#123;</div><div class=\"line\">       <span class=\"comment\">// assert isElementIndex(index);</span></div><div class=\"line\"></div><div class=\"line\">       <span class=\"keyword\">if</span> (index &lt; (size &gt;&gt; <span class=\"number\">1</span>)) &#123;</div><div class=\"line\">           Node&lt;E&gt; x = first;</div><div class=\"line\">           <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; index; i++)</div><div class=\"line\">               x = x.next; <span class=\"comment\">//index</span></div><div class=\"line\">           <span class=\"keyword\">return</span> x;</div><div class=\"line\">       &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">           Node&lt;E&gt; x = last;</div><div class=\"line\">           <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = size - <span class=\"number\">1</span>; i &gt; index; i--)</div><div class=\"line\">               x = x.prev;</div><div class=\"line\">           <span class=\"keyword\">return</span> x;</div><div class=\"line\">       &#125;</div><div class=\"line\">   &#125;</div></pre></td></tr></table></figure>\n<p><br>ArrayList implement RandomAccessLinkedListRandomAccess</p>\n<blockquote>\n<ul>\n<li>Marker interface used by <tt>List</tt> implementations to indicate that<ul>\n<li>they support fast (generally constant time) random access.  The primary</li>\n<li>purpose of this interface is to allow generic algorithms to alter their</li>\n<li>behavior to provide good performance when applied to either random or</li>\n<li>sequential access lists.<br>*</li>\n<li><p>The best algorithms for manipulating random access lists (such as</li>\n<li><tt>ArrayList</tt>) can produce quadratic behavior when applied to</li>\n<li>sequential access lists (such as <tt>LinkedList</tt>).  Generic list</li>\n<li>algorithms are encouraged to check whether the given list is an</li>\n<li><tt>instanceof</tt> this interface before applying an algorithm that would</li>\n<li>provide poor performance if it were applied to a sequential access list,</li>\n<li>and to alter their behavior if necessary to guarantee acceptable</li>\n<li>performance.<br>*</li>\n<li><p>It is recognized that the distinction between random and sequential</li>\n<li>access is often fuzzy.  For example, some <tt>List</tt> implementations</li>\n<li>provide asymptotically linear access times if they get huge, but constant</li>\n<li>access times in practice.  Such a <tt>List</tt> implementation</li>\n<li>should generally implement this interface.  As a rule of thumb, a</li>\n<li>List implementation should implement this interface if,</li>\n<li>for typical instances of the class, this loop:</li>\n<li>for (int i=0, n=list.size(); i &lt; n; i++)</li>\n<li>list.get(i); //get</li>\n<li>runs faster than this loop:</li>\n<li>for (Iterator i=list.iterator(); i.hasNext(); )</li>\n<li>i.next(); </li>\n</ul>\n</li>\n</ul>\n</blockquote>\n<p></p>\n<p>linkedListfor loopListIterator<T><br>(MD)</p>\n<p><a href=\"http://www.jianshu.com/p/d5ec2ff72b33\">ArryListLinkedList</a> </p>\n<blockquote>\n<p>1ArrayList<br>2LinkedListArrayList<br>3ArrayListLinkedList<br>4LinkedListArrayListSystem.arrayCopynative</p>\n</blockquote>\n<h2 id=\"2-Map\"><a href=\"#2-Map\" class=\"headerlink\" title=\"2. Map\"></a>2. Map</h2><h3 id=\"2-1-HashMap\"><a href=\"#2-1-HashMap\" class=\"headerlink\" title=\"2.1 HashMap\"></a>2.1 HashMap</h3><blockquote>\n<p>public class HashMap<K,V> extends AbstractMap<K,V><br>    implements Map<K,V>, Cloneable, Serializable </p>\n</blockquote>\n<p>HashMapKeyValuenull(getput)</p>\n<p>HashMap</p>\n<pre><code>16\nstatic final int DEFAULT_INITIAL_CAPACITY = 1 &lt;&lt; 4; // aka 16 \n\n0.75f Hashmap\nstatic final float DEFAULT_LOAD_FACTOR = 0.75f; //\n</code></pre><p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">HashMap</span><span class=\"params\">(<span class=\"keyword\">int</span> initialCapacity, <span class=\"keyword\">float</span> loadFactor)</span>  <span class=\"comment\">//</span></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"title\">HashMap</span><span class=\"params\">(<span class=\"keyword\">int</span> initialCapacity)</span> <span class=\"comment\">// ArrayList</span></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"title\">HashMap</span><span class=\"params\">()</span> <span class=\"comment\">//16</span></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"title\">HashMap</span><span class=\"params\">(Map&lt;? extends K, ? extends V&gt; m)</span></span></div></pre></td></tr></table></figure>\n<p><a href=\"https://stackoverflow.com/questions/8352378/why-does-hashmap-require-that-the-initial-capacity-be-a-power-of-two\">2n</a></p>\n<p>CURD(jdk 1.8jdk1.6)<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> V <span class=\"title\">put</span><span class=\"params\">(K key, V value)</span> </span>&#123;</div><div class=\"line\">       <span class=\"keyword\">return</span> putVal(hash(key), key, value, <span class=\"keyword\">false</span>, <span class=\"keyword\">true</span>);</div><div class=\"line\">   &#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">/**</div><div class=\"line\">    * Implements Map.put and related methods</div><div class=\"line\">    *</div><div class=\"line\">    * <span class=\"doctag\">@param</span> hash hash for key</div><div class=\"line\">    * <span class=\"doctag\">@param</span> key the key</div><div class=\"line\">    * <span class=\"doctag\">@param</span> value the value to put</div><div class=\"line\">    * <span class=\"doctag\">@param</span> onlyIfAbsent if true, don't change existing value</div><div class=\"line\">    * <span class=\"doctag\">@param</span> evict if false, the table is in creation mode.</div><div class=\"line\">    * <span class=\"doctag\">@return</span> previous value, or null if none</div><div class=\"line\">    */</span></div><div class=\"line\">   <span class=\"function\"><span class=\"keyword\">final</span> V <span class=\"title\">putVal</span><span class=\"params\">(<span class=\"keyword\">int</span> hash, K key, V value, <span class=\"keyword\">boolean</span> onlyIfAbsent,</div><div class=\"line\">                  <span class=\"keyword\">boolean</span> evict)</span> </span>&#123;</div><div class=\"line\">       Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; <span class=\"keyword\">int</span> n, i;</div><div class=\"line\">       <span class=\"keyword\">if</span> ((tab = table) == <span class=\"keyword\">null</span> || (n = tab.length) == <span class=\"number\">0</span>)</div><div class=\"line\">           n = (tab = resize()).length; <span class=\"comment\">//tableNode resize</span></div><div class=\"line\">       <span class=\"keyword\">if</span> ((p = tab[i = (n - <span class=\"number\">1</span>) &amp; hash]) == <span class=\"keyword\">null</span>)</div><div class=\"line\">           tab[i] = newNode(hash, key, value, <span class=\"keyword\">null</span>);</div><div class=\"line\">       <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">           Node&lt;K,V&gt; e; K k;</div><div class=\"line\">           <span class=\"keyword\">if</span> (p.hash == hash &amp;&amp;</div><div class=\"line\">               ((k = p.key) == key || (key != <span class=\"keyword\">null</span> &amp;&amp; key.equals(k))))</div><div class=\"line\">               e = p; <span class=\"comment\">//Table</span></div><div class=\"line\">           <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (p <span class=\"keyword\">instanceof</span> TreeNode)<span class=\"comment\">//pprevious  </span></div><div class=\"line\">               e = ((TreeNode&lt;K,V&gt;)p).putTreeVal(<span class=\"keyword\">this</span>, tab, hash, key, value);</div><div class=\"line\">           <span class=\"keyword\">else</span> &#123;<span class=\"comment\">//</span></div><div class=\"line\">               <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> binCount = <span class=\"number\">0</span>; ; ++binCount) &#123;</div><div class=\"line\">                   <span class=\"keyword\">if</span> ((e = p.next) == <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">                       p.next = newNode(hash, key, value, <span class=\"keyword\">null</span>); <span class=\"comment\">//</span></div><div class=\"line\">                       <span class=\"keyword\">if</span> (binCount &gt;= TREEIFY_THRESHOLD - <span class=\"number\">1</span>) <span class=\"comment\">// -1 for 1st</span></div><div class=\"line\">                           treeifyBin(tab, hash);</div><div class=\"line\">                       <span class=\"keyword\">break</span>;</div><div class=\"line\">                   &#125;</div><div class=\"line\">                   <span class=\"keyword\">if</span> (e.hash == hash &amp;&amp;</div><div class=\"line\">                       ((k = e.key) == key || (key != <span class=\"keyword\">null</span> &amp;&amp; key.equals(k))))</div><div class=\"line\">                       <span class=\"keyword\">break</span>;</div><div class=\"line\">                   p = e;</div><div class=\"line\">               &#125;</div><div class=\"line\">           &#125;</div><div class=\"line\">           <span class=\"keyword\">if</span> (e != <span class=\"keyword\">null</span>) &#123; <span class=\"comment\">// existing mapping for key</span></div><div class=\"line\">               V oldValue = e.value;</div><div class=\"line\">               <span class=\"keyword\">if</span> (!onlyIfAbsent || oldValue == <span class=\"keyword\">null</span>)</div><div class=\"line\">                   e.value = value;</div><div class=\"line\">               afterNodeAccess(e); <span class=\"comment\">//</span></div><div class=\"line\">               <span class=\"keyword\">return</span> oldValue;</div><div class=\"line\">           &#125;</div><div class=\"line\">       &#125;</div><div class=\"line\">       ++modCount;</div><div class=\"line\">       <span class=\"keyword\">if</span> (++size &gt; threshold)</div><div class=\"line\">           resize();</div><div class=\"line\">       afterNodeInsertion(evict);<span class=\"comment\">//</span></div><div class=\"line\">       <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</div><div class=\"line\">   &#125;</div></pre></td></tr></table></figure></p>\n<p>get<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> V <span class=\"title\">get</span><span class=\"params\">(Object key)</span> </span>&#123;</div><div class=\"line\">      Node&lt;K,V&gt; e;</div><div class=\"line\">      <span class=\"keyword\">return</span> (e = getNode(hash(key), key)) == <span class=\"keyword\">null</span> ? <span class=\"keyword\">null</span> : e.value;<span class=\"comment\">//keyvalue</span></div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"comment\">/**</div><div class=\"line\">   * Implements Map.get and related methods</div><div class=\"line\">   *</div><div class=\"line\">   * <span class=\"doctag\">@param</span> hash hash for key</div><div class=\"line\">   * <span class=\"doctag\">@param</span> key the key</div><div class=\"line\">   * <span class=\"doctag\">@return</span> the node, or null if none</div><div class=\"line\">   */</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">final</span> Node&lt;K,V&gt; <span class=\"title\">getNode</span><span class=\"params\">(<span class=\"keyword\">int</span> hash, Object key)</span> </span>&#123;</div><div class=\"line\">      Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; first, e; <span class=\"keyword\">int</span> n; K k;</div><div class=\"line\">      <span class=\"keyword\">if</span> ((tab = table) != <span class=\"keyword\">null</span> &amp;&amp; (n = tab.length) &gt; <span class=\"number\">0</span> &amp;&amp;</div><div class=\"line\">          (first = tab[(n - <span class=\"number\">1</span>) &amp; hash]) != <span class=\"keyword\">null</span>) &#123; <span class=\"comment\">//tableput</span></div><div class=\"line\">          <span class=\"keyword\">if</span> (first.hash == hash &amp;&amp; <span class=\"comment\">// always check first node</span></div><div class=\"line\">              ((k = first.key) == key || (key != <span class=\"keyword\">null</span> &amp;&amp; key.equals(k))))</div><div class=\"line\">              <span class=\"keyword\">return</span> first;</div><div class=\"line\">          <span class=\"keyword\">if</span> ((e = first.next) != <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">              <span class=\"keyword\">if</span> (first <span class=\"keyword\">instanceof</span> TreeNode)</div><div class=\"line\">                  <span class=\"keyword\">return</span> ((TreeNode&lt;K,V&gt;)first).getTreeNode(hash, key);</div><div class=\"line\">              do &#123;</div><div class=\"line\">                  <span class=\"keyword\">if</span> (e.hash == hash &amp;&amp;</div><div class=\"line\">                      ((k = e.key) == key || (key != <span class=\"keyword\">null</span> &amp;&amp; key.equals(k))))</div><div class=\"line\">                      <span class=\"keyword\">return</span> e;</div><div class=\"line\">              &#125; <span class=\"keyword\">while</span> ((e = e.next) != <span class=\"keyword\">null</span>);</div><div class=\"line\">          &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> V <span class=\"title\">get</span><span class=\"params\">(Object key)</span> </span>&#123;</div><div class=\"line\">      Node&lt;K,V&gt; e;</div><div class=\"line\">      <span class=\"keyword\">return</span> (e = getNode(hash(key), key)) == <span class=\"keyword\">null</span> ? <span class=\"keyword\">null</span> : e.value;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">/**</div><div class=\"line\">   * Implements Map.get and related methods</div><div class=\"line\">   *</div><div class=\"line\">   * <span class=\"doctag\">@param</span> hash hash for key</div><div class=\"line\">   * <span class=\"doctag\">@param</span> key the key</div><div class=\"line\">   * <span class=\"doctag\">@return</span> the node, or null if none</div><div class=\"line\">   */</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">final</span> Node&lt;K,V&gt; <span class=\"title\">getNode</span><span class=\"params\">(<span class=\"keyword\">int</span> hash, Object key)</span> </span>&#123;</div><div class=\"line\">      Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; first, e; <span class=\"keyword\">int</span> n; K k;</div><div class=\"line\">      <span class=\"keyword\">if</span> ((tab = table) != <span class=\"keyword\">null</span> &amp;&amp; (n = tab.length) &gt; <span class=\"number\">0</span> &amp;&amp;</div><div class=\"line\">          (first = tab[(n - <span class=\"number\">1</span>) &amp; hash]) != <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">          <span class=\"keyword\">if</span> (first.hash == hash &amp;&amp; <span class=\"comment\">// always check first node</span></div><div class=\"line\">              ((k = first.key) == key || (key != <span class=\"keyword\">null</span> &amp;&amp; key.equals(k))))</div><div class=\"line\">              <span class=\"keyword\">return</span> first;</div><div class=\"line\">          <span class=\"keyword\">if</span> ((e = first.next) != <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">              <span class=\"keyword\">if</span> (first <span class=\"keyword\">instanceof</span> TreeNode)</div><div class=\"line\">                  <span class=\"keyword\">return</span> ((TreeNode&lt;K,V&gt;)first).getTreeNode(hash, key);</div><div class=\"line\">              do &#123;</div><div class=\"line\">                  <span class=\"keyword\">if</span> (e.hash == hash &amp;&amp; </div><div class=\"line\">                      ((k = e.key) == key || (key != <span class=\"keyword\">null</span> &amp;&amp; key.equals(k))))</div><div class=\"line\">                      <span class=\"keyword\">return</span> e;</div><div class=\"line\">  <span class=\"comment\">//hashintkey()  key equals(equalshashcode)</span></div><div class=\"line\">              &#125; <span class=\"keyword\">while</span> ((e = e.next) != <span class=\"keyword\">null</span>);</div><div class=\"line\">          &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</div><div class=\"line\">  &#125;</div></pre></td></tr></table></figure></p>\n<p>HashMap<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">long</span> i = <span class=\"number\">0</span>;</div><div class=\"line\">Iterator&lt;Map.Entry&lt;Integer, Integer&gt;&gt; it = map.entrySet().iterator();</div><div class=\"line\"><span class=\"keyword\">while</span> (it.hasNext()) &#123;</div><div class=\"line\">    Map.Entry&lt;Integer, Integer&gt; pair = it.next(); <span class=\"comment\">//getnext</span></div><div class=\"line\">    i += pair.getKey() + pair.getValue();</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>entrySetMap<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\">Set&lt;Map.Entry&lt;K, V&gt;&gt; entrySet();</div><div class=\"line\">   * Returns a Set view of the mappings contained in this map.</div><div class=\"line\">     * The set is backed by the map, so changes to the map are</div><div class=\"line\">     * reflected in the set, and vice-versa.  If the map is modified</div><div class=\"line\">     * while an iteration over the set is in progress (except through</div><div class=\"line\">     * the iterator&apos;s own &lt;tt&gt;remove&lt;/tt&gt; operation, or through the</div><div class=\"line\">     * &lt;tt&gt;setValue&lt;/tt&gt; operation on a map entry returned by the</div><div class=\"line\">     * iterator) the results of the iteration are undefined.  The set</div><div class=\"line\">     * supports element removal, which removes the corresponding</div><div class=\"line\">     * mapping from the map, via the &lt;tt&gt;Iterator.remove&lt;/tt&gt;,</div><div class=\"line\">     * &lt;tt&gt;Set.remove&lt;/tt&gt;, &lt;tt&gt;removeAll&lt;/tt&gt;, &lt;tt&gt;retainAll&lt;/tt&gt; and</div><div class=\"line\">     * &lt;tt&gt;clear&lt;/tt&gt; operations.  It does not support the</div><div class=\"line\">     * &lt;tt&gt;add&lt;/tt&gt; or &lt;tt&gt;addAll&lt;/tt&gt; operations.</div><div class=\"line\">     *</div><div class=\"line\">     * @return a set view of the mappings contained in this map</div></pre></td></tr></table></figure></p>\n<p> mapSetSetmapentrySetmapremoveSetmappingadd</p>\n<p>HashMap<br>transient Set<Map.Entry<K,V>&gt; entrySet; //<br>enterySet<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div></pre></td><td class=\"code\"><pre><div class=\"line\">  <span class=\"keyword\">public</span> Set&lt;Map.Entry&lt;K,V&gt;&gt; entrySet() &#123;</div><div class=\"line\">        Set&lt;Map.Entry&lt;K,V&gt;&gt; es;</div><div class=\"line\">        <span class=\"keyword\">return</span> (es = entrySet) == <span class=\"keyword\">null</span> ? (entrySet = <span class=\"keyword\">new</span> EntrySet()) : es;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// EntrySet</span></div><div class=\"line\">  <span class=\"keyword\">final</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">EntrySet</span> <span class=\"keyword\">extends</span> <span class=\"title\">AbstractSet</span>&lt;<span class=\"title\">Map</span>.<span class=\"title\">Entry</span>&lt;<span class=\"title\">K</span>,<span class=\"title\">V</span>&gt;&gt; </span>&#123;</div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> <span class=\"title\">size</span><span class=\"params\">()</span>                 </span>&#123; <span class=\"keyword\">return</span> size; &#125;</div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">final</span> <span class=\"keyword\">void</span> <span class=\"title\">clear</span><span class=\"params\">()</span>               </span>&#123; HashMap.<span class=\"keyword\">this</span>.clear(); &#125;</div><div class=\"line\">        <span class=\"keyword\">public</span> <span class=\"keyword\">final</span> Iterator&lt;Map.Entry&lt;K,V&gt;&gt; iterator() &#123;</div><div class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> EntryIterator();</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">final</span> <span class=\"keyword\">boolean</span> <span class=\"title\">contains</span><span class=\"params\">(Object o)</span> </span>&#123;</div><div class=\"line\">            <span class=\"keyword\">if</span> (!(o <span class=\"keyword\">instanceof</span> Map.Entry))</div><div class=\"line\">                <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</div><div class=\"line\">            Map.Entry&lt;?,?&gt; e = (Map.Entry&lt;?,?&gt;) o;</div><div class=\"line\">            Object key = e.getKey();</div><div class=\"line\">            Node&lt;K,V&gt; candidate = getNode(hash(key), key);</div><div class=\"line\">            <span class=\"keyword\">return</span> candidate != <span class=\"keyword\">null</span> &amp;&amp; candidate.equals(e);</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">final</span> <span class=\"keyword\">boolean</span> <span class=\"title\">remove</span><span class=\"params\">(Object o)</span> </span>&#123;</div><div class=\"line\">            <span class=\"keyword\">if</span> (o <span class=\"keyword\">instanceof</span> Map.Entry) &#123;</div><div class=\"line\">                Map.Entry&lt;?,?&gt; e = (Map.Entry&lt;?,?&gt;) o;</div><div class=\"line\">                Object key = e.getKey();</div><div class=\"line\">                Object value = e.getValue();</div><div class=\"line\">                <span class=\"keyword\">return</span> removeNode(hash(key), key, value, <span class=\"keyword\">true</span>, <span class=\"keyword\">true</span>) != <span class=\"keyword\">null</span>;</div><div class=\"line\">            &#125;</div><div class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div></pre></td></tr></table></figure></p>\n<p>removeNodegetNodeputVal<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">final</span> Node&lt;K,V&gt; <span class=\"title\">removeNode</span><span class=\"params\">(<span class=\"keyword\">int</span> hash, Object key, Object value,</div><div class=\"line\">                            <span class=\"keyword\">boolean</span> matchValue, <span class=\"keyword\">boolean</span> movable)</span> </span>&#123;</div><div class=\"line\">     Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; <span class=\"keyword\">int</span> n, index;</div><div class=\"line\">     <span class=\"keyword\">if</span> ((tab = table) != <span class=\"keyword\">null</span> &amp;&amp; (n = tab.length) &gt; <span class=\"number\">0</span> &amp;&amp;</div><div class=\"line\">         (p = tab[index = (n - <span class=\"number\">1</span>) &amp; hash]) != <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">         Node&lt;K,V&gt; node = <span class=\"keyword\">null</span>, e; K k; V v;</div><div class=\"line\">         <span class=\"keyword\">if</span> (p.hash == hash &amp;&amp;</div><div class=\"line\">             ((k = p.key) == key || (key != <span class=\"keyword\">null</span> &amp;&amp; key.equals(k))))</div><div class=\"line\">             node = p;</div><div class=\"line\">         <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> ((e = p.next) != <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">             <span class=\"keyword\">if</span> (p <span class=\"keyword\">instanceof</span> TreeNode)</div><div class=\"line\">                 node = ((TreeNode&lt;K,V&gt;)p).getTreeNode(hash, key);</div><div class=\"line\">             <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">                 do &#123;</div><div class=\"line\">                     <span class=\"keyword\">if</span> (e.hash == hash &amp;&amp;</div><div class=\"line\">                         ((k = e.key) == key ||</div><div class=\"line\">                          (key != <span class=\"keyword\">null</span> &amp;&amp; key.equals(k)))) &#123;</div><div class=\"line\">                         node = e;</div><div class=\"line\">                         <span class=\"keyword\">break</span>;</div><div class=\"line\">                     &#125;</div><div class=\"line\">                     p = e;</div><div class=\"line\">                 &#125; <span class=\"keyword\">while</span> ((e = e.next) != <span class=\"keyword\">null</span>);</div><div class=\"line\">             &#125;</div><div class=\"line\">         &#125; <span class=\"comment\">//p(previous)matchValuemovabletrue</span></div><div class=\"line\">         <span class=\"comment\">// node Node</span></div><div class=\"line\">         <span class=\"keyword\">if</span> (node != <span class=\"keyword\">null</span> &amp;&amp; (!matchValue || (v = node.value) == value ||</div><div class=\"line\">                              (value != <span class=\"keyword\">null</span> &amp;&amp; value.equals(v)))) &#123;</div><div class=\"line\">             <span class=\"keyword\">if</span> (node <span class=\"keyword\">instanceof</span> TreeNode)</div><div class=\"line\">                 ((TreeNode&lt;K,V&gt;)node).removeTreeNode(<span class=\"keyword\">this</span>, tab, movable);</div><div class=\"line\">             <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (node == p) <span class=\"comment\">//</span></div><div class=\"line\">                 tab[index] = node.next;<span class=\"comment\">//</span></div><div class=\"line\">             <span class=\"keyword\">else</span></div><div class=\"line\">                 p.next = node.next; <span class=\"comment\">//</span></div><div class=\"line\">             ++modCount;</div><div class=\"line\">             --size;</div><div class=\"line\">             afterNodeRemoval(node);</div><div class=\"line\">             <span class=\"keyword\">return</span> node;</div><div class=\"line\">         &#125;</div><div class=\"line\">     &#125;</div><div class=\"line\">     <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</div><div class=\"line\"> &#125;</div></pre></td></tr></table></figure></p>\n<p></p>\n<blockquote>\n<p>e.hash == hash || (key!=null &amp;&amp;key.equals(k)) //hashCode</p>\n</blockquote>\n<p><br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">containsKey</span><span class=\"params\">(Object key)</span> </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> getNode(hash(key), key) != <span class=\"keyword\">null</span>; <span class=\"comment\">//keyNode</span></div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\"> <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">containsValue</span><span class=\"params\">(Object value)</span> </span>&#123;</div><div class=\"line\">      Node&lt;K,V&gt;[] tab; V v;</div><div class=\"line\">      <span class=\"keyword\">if</span> ((tab = table) != <span class=\"keyword\">null</span> &amp;&amp; size &gt; <span class=\"number\">0</span>) &#123;</div><div class=\"line\">          <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; tab.length; ++i) &#123;</div><div class=\"line\">              <span class=\"keyword\">for</span> (Node&lt;K,V&gt; e = tab[i]; e != <span class=\"keyword\">null</span>; e = e.next) &#123;</div><div class=\"line\">                  <span class=\"keyword\">if</span> ((v = e.value) == value ||</div><div class=\"line\">                      (value != <span class=\"keyword\">null</span> &amp;&amp; value.equals(v)))</div><div class=\"line\">                      <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>; <span class=\"comment\">//</span></div><div class=\"line\">              &#125;</div><div class=\"line\">          &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</div><div class=\"line\">  &#125;</div></pre></td></tr></table></figure></p>\n<p>ArrayListLinkedListHashMaphashCodeHashMaphashCodehash CollisionObjecthashCode<a href=\"https://stackoverflow.com/questions/6493605/how-does-a-java-hashmap-handle-different-objects-with-the-same-hash-code\"></a><br>HashMap(key,value)keyhashvalueNext(getkeyhashCodekey.equals)</p>\n<h3 id=\"2-2-LinkedHashMap\"><a href=\"#2-2-LinkedHashMap\" class=\"headerlink\" title=\"2.2 LinkedHashMap\"></a>2.2 LinkedHashMap</h3><p>public class LinkedHashMap<K,V><br>    extends HashMap<K,V><br>    implements Map<K,V><br>HashMapLinkedHashMap<br><br>final boolean accessOrder; false</p>\n<blockquote>\n<p>The iteration ordering method for this linked hash map: <tt>true</tt><br>for access-order, false for insertion-order.</p>\n</blockquote>\n<p>LinkedHashMap</p>\n<h3 id=\"3-Set\"><a href=\"#3-Set\" class=\"headerlink\" title=\"3. Set\"></a>3. Set</h3><p>SetHashSetTreeSetLinkedHashSetjdk</p>\n<p>public class HashSet<E><br>    extends AbstractSet<E><br>    implements Set<E>, Cloneable, java.io.Serializable<br>Set<strong></strong>Sete1e2e1.equals(e2)<br>HashSetmapHashMapSet</p>\n<h3 id=\"4-\"><a href=\"#4-\" class=\"headerlink\" title=\"4. \"></a>4. </h3><pre><code>VetorStackArrayDeque,Queue\n\nVectorList,synchronized\n\nQueueinterfaceList(FIFO)\nPriorityQueue\njava.util.concurrent.LinkedBlockingQueue\njava.util.concurrent.LinkedBlockingQueue\njava.util.concurrent.PriorityBlockingQueue\nDoug Lea\n\nStackVector(LIFO)\nThe Stack class represents a last-in-first-out (LIFO) stack of object\n\nDeque()\n</code></pre><h3 id=\"5-concurrentHashMap\"><a href=\"#5-concurrentHashMap\" class=\"headerlink\" title=\"5. concurrentHashMap\"></a>5. concurrentHashMap</h3><p>jdk1.8concurrentHashMapsynchronizedDoug LeaCAS</p>\n<h3 id=\"6-WeakHaskMap\"><a href=\"#6-WeakHaskMap\" class=\"headerlink\" title=\"6. WeakHaskMap\"></a>6. WeakHaskMap</h3><p>WeakHashMapKeyWeakReferenceValue<br></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">String a = <span class=\"string\">\"a\"</span>;</div><div class=\"line\">map.put(<span class=\"number\">1</span>,a);</div><div class=\"line\">a = <span class=\"keyword\">null</span>;</div><div class=\"line\"><span class=\"comment\">//mapamapagc</span></div></pre></td></tr></table></figure>\n<p>Android <a href=\"https://developer.android.com/reference/java/util/WeakHashMap.html\"></a></p>\n<blockquote>\n<p>Implementation note: The value objects in a WeakHashMap are held by ordinary strong references. Thus care should be taken to ensure that value objects do not strongly refer to their own keys, either directly or indirectly, since that will prevent the keys from being discarded. Note that a value object may refer indirectly to its key via the WeakHashMap itself; that is, a value object may strongly refer to some other key object whose associated value object, in turn, strongly refers to the key of the first value object. If the values in the map do not rely on the map holding strong references to them, one way to deal with this is to wrap values themselves within WeakReferences before inserting, as in: m.put(key, new WeakReference(value)), and then unwrapping upon each get.</p>\n</blockquote>\n<p>WeakHashMapvaluekeykey,value</p>\n<h2 id=\"7-java-8\"><a href=\"#7-java-8\" class=\"headerlink\" title=\"7. java 8\"></a>7. java 8</h2><p>list.replaceAll(String::toUpperCase) //method reference<br>can not change the elemeet type, for that you need an stream<br><a href=\"https://www.youtube.com/watch?v=q6zF3vf114M\">Collections Refuled by Stuart Marks</a></p>\n<h2 id=\"8-\"><a href=\"#8-\" class=\"headerlink\" title=\"8.\"></a>8.</h2><p>8.1 <a href=\"https://en.wikipedia.org/wiki/Doug_Lea\">Doug Lea</a> jdk<br>8.2 jdkListMapApachejdk<br>8.3 ArrayListHashMap<strong></strong><br>8.4 <a href=\"https://blogs.oracle.com/java/collections-refueled\">Stuart Mark</a>class<strong>@deprecated</strong><br>8.5 <a href=\"https://www.youtube.com/watch?v=V1vQf4qyMXg\">Joshua Bloch</a> By the way , he said Doug Lea is very smart .</p>\n<h3 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h3><ol>\n<li><a href=\"https://www.youtube.com/watch?v=q6zF3vf114M\">Collections Refuled by Stuart Marks</a></li>\n<li><a href=\"https://www.youtube.com/watch?v=FLcXf9pO27w\">From Java Code to Java Heap: Understanding the Memory Usage of Your Application</a></li>\n<li><a href=\"http://www.jianshu.com/p/2cd7be850540\">Java</a></li>\n<li><a href=\"http://www.programcreek.com/2014/01/java%E7%A8%8B%E5%BA%8F%E5%91%98%E5%B8%B8%E7%8A%AF%E7%9A%8410%E4%B8%AA%E9%94%99%E8%AF%AF/\">Arrays.asList()Listjva.util.ArrayList</a></li>\n<li><a href=\"http://blog.csdn.net/yangzl2008/article/details/6980709\">WeakHashMapHashMap</a></li>\n</ol>"},{"title":"VPSYoutube","date":"2017-05-07T08:48:01.000Z","_content":"\nvpsvpsWindows\n![](http://odzl05jxx.bkt.clouddn.com/4667305cbdace582c667f218e38fe70a.jpg?imageView2/2/w/600)\n\n<!--more-->\n\n### 1. youtubevps\nUbuntu 14.0.4 python2.7pip,pythonyoutube-dl,[](http://rg3.github.io/youtube-dl/download.html)\n```\nsudo curl -L https://yt-dl.org/downloads/latest/youtube-dl -o /usr/local/bin/youtube-dl\n\nsudo chmod a+rx /usr/local/bin/youtube-dl\n```\n\n/\n> mkdir youtube   \n\n\n[](https://www.youtube.com/watch?v=7PtDrv5AUmA) \n \n> youtube-dl https://www.youtube.com/watch?v=7PtDrv5AUmA\n\n\nvps20MB/mspscpvpsvpsip\n\n> -yj74P_BY1zI.mp4\n\n \n> mv -yj74P_BY1zI.mp4 porn.video\n> mv ./-yj74P_BY1zI.mp4 porn.video #. \n\n\n\n\n\n\nyoutube-dl\n> youtube-dl --all-formats https://www.youtube.com/watch?v=7PtDrv5AUmA\n\n\n\n> youtube-dl -f 13 https://www.youtube.com/watch?v=7PtDrv5AUmA \n\n\n### 2.vps\nVPSvps\ndropBoxbypyvpsshell\n\n\n### 3.\n[you-get](https://github.com/soimort/you-get)python3windows\nubuntu pip3 install you-get \n > you-get \"url\"\nyou-getwindows youtube\n> you-get -x 127.0.0.1:1080 -o \"D:\\Porn\" 'https://www.youtube.com/watch?v=jNQXAC9IVRw'\n\n\n\n[](https://doub.io/dbrj-1/)\n[](http://www.typemylife.com/use-vps-download-videos-from-youtube-upload-to-baidu-cloud/)\n[](https://www.v2ex.com/t/189034)\n","source":"_posts/2017-05-07-download-video-from-vps.md","raw":"---\ntitle: VPSYoutube\ndate: 2017-05-07 16:48:01\ncategories: blog\ntags: [linux,python]\n---\n\nvpsvpsWindows\n![](http://odzl05jxx.bkt.clouddn.com/4667305cbdace582c667f218e38fe70a.jpg?imageView2/2/w/600)\n\n<!--more-->\n\n### 1. youtubevps\nUbuntu 14.0.4 python2.7pip,pythonyoutube-dl,[](http://rg3.github.io/youtube-dl/download.html)\n```\nsudo curl -L https://yt-dl.org/downloads/latest/youtube-dl -o /usr/local/bin/youtube-dl\n\nsudo chmod a+rx /usr/local/bin/youtube-dl\n```\n\n/\n> mkdir youtube   \n\n\n[](https://www.youtube.com/watch?v=7PtDrv5AUmA) \n \n> youtube-dl https://www.youtube.com/watch?v=7PtDrv5AUmA\n\n\nvps20MB/mspscpvpsvpsip\n\n> -yj74P_BY1zI.mp4\n\n \n> mv -yj74P_BY1zI.mp4 porn.video\n> mv ./-yj74P_BY1zI.mp4 porn.video #. \n\n\n\n\n\n\nyoutube-dl\n> youtube-dl --all-formats https://www.youtube.com/watch?v=7PtDrv5AUmA\n\n\n\n> youtube-dl -f 13 https://www.youtube.com/watch?v=7PtDrv5AUmA \n\n\n### 2.vps\nVPSvps\ndropBoxbypyvpsshell\n\n\n### 3.\n[you-get](https://github.com/soimort/you-get)python3windows\nubuntu pip3 install you-get \n > you-get \"url\"\nyou-getwindows youtube\n> you-get -x 127.0.0.1:1080 -o \"D:\\Porn\" 'https://www.youtube.com/watch?v=jNQXAC9IVRw'\n\n\n\n[](https://doub.io/dbrj-1/)\n[](http://www.typemylife.com/use-vps-download-videos-from-youtube-upload-to-baidu-cloud/)\n[](https://www.v2ex.com/t/189034)\n","slug":"2017-05-07-download-video-from-vps","published":1,"updated":"2017-06-18T05:10:56.769Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj50afgxl001ui4vrvchfpjgn","content":"<p>vpsvpsWindows<br><img src=\"http://odzl05jxx.bkt.clouddn.com/4667305cbdace582c667f218e38fe70a.jpg?imageView2/2/w/600\" alt=\"\"></p>\n<a id=\"more\"></a>\n<h3 id=\"1-youtubevps\"><a href=\"#1-youtubevps\" class=\"headerlink\" title=\"1. youtubevps\"></a>1. youtubevps</h3><p>Ubuntu 14.0.4 python2.7pip,pythonyoutube-dl,<a href=\"http://rg3.github.io/youtube-dl/download.html\"></a><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo curl -L https://yt-dl.org/downloads/latest/youtube-dl -o /usr/local/bin/youtube-dl</div><div class=\"line\"></div><div class=\"line\">sudo chmod a+rx /usr/local/bin/youtube-dl</div></pre></td></tr></table></figure></p>\n<p>/</p>\n<blockquote>\n<p>mkdir youtube   </p>\n</blockquote>\n<p><a href=\"https://www.youtube.com/watch?v=7PtDrv5AUmA\"></a><br> </p>\n<blockquote>\n<p>youtube-dl <a href=\"https://www.youtube.com/watch?v=7PtDrv5AUmA\">https://www.youtube.com/watch?v=7PtDrv5AUmA</a></p>\n</blockquote>\n<p>vps20MB/mspscpvpsvpsip<br></p>\n<blockquote>\n<p>-yj74P_BY1zI.mp4</p>\n</blockquote>\n<p> </p>\n<blockquote>\n<p>mv -yj74P_BY1zI.mp4 porn.video<br>mv ./-yj74P_BY1zI.mp4 porn.video #. </p>\n</blockquote>\n<p></p>\n<p>youtube-dl</p>\n<blockquote>\n<p>youtube-dl all-formats <a href=\"https://www.youtube.com/watch?v=7PtDrv5AUmA\">https://www.youtube.com/watch?v=7PtDrv5AUmA</a></p>\n</blockquote>\n<p></p>\n<blockquote>\n<p>youtube-dl -f 13 <a href=\"https://www.youtube.com/watch?v=7PtDrv5AUmA\">https://www.youtube.com/watch?v=7PtDrv5AUmA</a> </p>\n</blockquote>\n<h3 id=\"2-vps\"><a href=\"#2-vps\" class=\"headerlink\" title=\"2.vps\"></a>2.vps</h3><p>VPSvps<br>dropBoxbypyvpsshell</p>\n<h3 id=\"3-\"><a href=\"#3-\" class=\"headerlink\" title=\"3.\"></a>3.</h3><p><a href=\"https://github.com/soimort/you-get\">you-get</a>python3windows<br>ubuntu pip3 install you-get <br> &gt; you-get url<br>you-getwindows youtube</p>\n<blockquote>\n<p>you-get -x 127.0.0.1:1080 -o D:\\Porn <a href=\"https://www.youtube.com/watch?v=jNQXAC9IVRw\">https://www.youtube.com/watch?v=jNQXAC9IVRw</a></p>\n</blockquote>\n<p><a href=\"https://doub.io/dbrj-1/\"></a><br><a href=\"http://www.typemylife.com/use-vps-download-videos-from-youtube-upload-to-baidu-cloud/\"></a><br><a href=\"https://www.v2ex.com/t/189034\"></a></p>\n","excerpt":"<p>vpsvpsWindows<br><img src=\"http://odzl05jxx.bkt.clouddn.com/4667305cbdace582c667f218e38fe70a.jpg?imageView2/2/w/600\" alt=\"\"></p>","more":"<h3 id=\"1-youtubevps\"><a href=\"#1-youtubevps\" class=\"headerlink\" title=\"1. youtubevps\"></a>1. youtubevps</h3><p>Ubuntu 14.0.4 python2.7pip,pythonyoutube-dl,<a href=\"http://rg3.github.io/youtube-dl/download.html\"></a><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo curl -L https://yt-dl.org/downloads/latest/youtube-dl -o /usr/local/bin/youtube-dl</div><div class=\"line\"></div><div class=\"line\">sudo chmod a+rx /usr/local/bin/youtube-dl</div></pre></td></tr></table></figure></p>\n<p>/</p>\n<blockquote>\n<p>mkdir youtube   </p>\n</blockquote>\n<p><a href=\"https://www.youtube.com/watch?v=7PtDrv5AUmA\"></a><br> </p>\n<blockquote>\n<p>youtube-dl <a href=\"https://www.youtube.com/watch?v=7PtDrv5AUmA\">https://www.youtube.com/watch?v=7PtDrv5AUmA</a></p>\n</blockquote>\n<p>vps20MB/mspscpvpsvpsip<br></p>\n<blockquote>\n<p>-yj74P_BY1zI.mp4</p>\n</blockquote>\n<p> </p>\n<blockquote>\n<p>mv -yj74P_BY1zI.mp4 porn.video<br>mv ./-yj74P_BY1zI.mp4 porn.video #. </p>\n</blockquote>\n<p></p>\n<p>youtube-dl</p>\n<blockquote>\n<p>youtube-dl all-formats <a href=\"https://www.youtube.com/watch?v=7PtDrv5AUmA\">https://www.youtube.com/watch?v=7PtDrv5AUmA</a></p>\n</blockquote>\n<p></p>\n<blockquote>\n<p>youtube-dl -f 13 <a href=\"https://www.youtube.com/watch?v=7PtDrv5AUmA\">https://www.youtube.com/watch?v=7PtDrv5AUmA</a> </p>\n</blockquote>\n<h3 id=\"2-vps\"><a href=\"#2-vps\" class=\"headerlink\" title=\"2.vps\"></a>2.vps</h3><p>VPSvps<br>dropBoxbypyvpsshell</p>\n<h3 id=\"3-\"><a href=\"#3-\" class=\"headerlink\" title=\"3.\"></a>3.</h3><p><a href=\"https://github.com/soimort/you-get\">you-get</a>python3windows<br>ubuntu pip3 install you-get <br> &gt; you-get url<br>you-getwindows youtube</p>\n<blockquote>\n<p>you-get -x 127.0.0.1:1080 -o D:\\Porn <a href=\"https://www.youtube.com/watch?v=jNQXAC9IVRw\">https://www.youtube.com/watch?v=jNQXAC9IVRw</a></p>\n</blockquote>\n<p><a href=\"https://doub.io/dbrj-1/\"></a><br><a href=\"http://www.typemylife.com/use-vps-download-videos-from-youtube-upload-to-baidu-cloud/\"></a><br><a href=\"https://www.v2ex.com/t/189034\"></a></p>"},{"title":"ubuntuflask web app","date":"2017-06-25T14:46:23.000Z","_content":"\n![](http://odzl05jxx.bkt.clouddn.com/ChMkJ1fAMmKIIFpWAA_5Us41gQkAAUv1QE2Pp8AD_lq599.jpg?imageView2/2/w/600)\n<!--more-->\n\n## 1. virtualenv install\n\n```bash\nsudo pip install virtualenv \nsudo virtualenv venv\nsource venv/bin/activate \nsudo pip install Flask \n\n\n# sudo python __init__.py\nsudo /var/www/FlaskApp/FlaskApp/venv/bin/python2 __init__.py\n\ndeactivate # exit\n\nWindowsvirtualenv\npycharmcmd\npip install virtualenv\nvirtualenv env #ENV\ncd env /Scripts\nactivate.bat # (env) >.\ndeactivate.bat\n\n```\n\n\n## 2. install apache2 , mysql-server... on ubuntu\n    apache2 service apache2 restart\n\n\n\n\n\n### Reference\n1. [how-to-deploy-a-flask-application-on-an-ubuntu-vps](https://www.digitalocean.com/community/tutorials/how-to-deploy-a-flask-application-on-an-ubuntu-vps)","source":"_posts/2017-06-25-deploying-flask-app-on-linux-server.md","raw":"---\ntitle: ubuntuflask web app\ndate: 2017-06-25 22:46:23\ncategories: blog\ntags: [python]\n---\n\n![](http://odzl05jxx.bkt.clouddn.com/ChMkJ1fAMmKIIFpWAA_5Us41gQkAAUv1QE2Pp8AD_lq599.jpg?imageView2/2/w/600)\n<!--more-->\n\n## 1. virtualenv install\n\n```bash\nsudo pip install virtualenv \nsudo virtualenv venv\nsource venv/bin/activate \nsudo pip install Flask \n\n\n# sudo python __init__.py\nsudo /var/www/FlaskApp/FlaskApp/venv/bin/python2 __init__.py\n\ndeactivate # exit\n\nWindowsvirtualenv\npycharmcmd\npip install virtualenv\nvirtualenv env #ENV\ncd env /Scripts\nactivate.bat # (env) >.\ndeactivate.bat\n\n```\n\n\n## 2. install apache2 , mysql-server... on ubuntu\n    apache2 service apache2 restart\n\n\n\n\n\n### Reference\n1. [how-to-deploy-a-flask-application-on-an-ubuntu-vps](https://www.digitalocean.com/community/tutorials/how-to-deploy-a-flask-application-on-an-ubuntu-vps)","slug":"2017-06-25-deploying-flask-app-on-linux-server","published":1,"updated":"2017-07-12T00:46:25.552Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj50afgxl001xi4vr9hbdqhkv","content":"<p><img src=\"http://odzl05jxx.bkt.clouddn.com/ChMkJ1fAMmKIIFpWAA_5Us41gQkAAUv1QE2Pp8AD_lq599.jpg?imageView2/2/w/600\" alt=\"\"><br><a id=\"more\"></a></p>\n<h2 id=\"1-virtualenv-install\"><a href=\"#1-virtualenv-install\" class=\"headerlink\" title=\"1. virtualenv install\"></a>1. virtualenv install</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo pip install virtualenv </div><div class=\"line\">sudo virtualenv venv</div><div class=\"line\"><span class=\"built_in\">source</span> venv/bin/activate </div><div class=\"line\">sudo pip install Flask </div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># sudo python __init__.py</span></div><div class=\"line\">sudo /var/www/FlaskApp/FlaskApp/venv/bin/python2 __init__.py</div><div class=\"line\"></div><div class=\"line\">deactivate <span class=\"comment\"># exit</span></div><div class=\"line\"></div><div class=\"line\">Windowsvirtualenv</div><div class=\"line\">pycharmcmd</div><div class=\"line\">pip install virtualenv</div><div class=\"line\">virtualenv env <span class=\"comment\">#ENV</span></div><div class=\"line\"><span class=\"built_in\">cd</span> env /Scripts</div><div class=\"line\">activate.bat <span class=\"comment\"># (env) &gt;.</span></div><div class=\"line\">deactivate.bat</div></pre></td></tr></table></figure>\n<h2 id=\"2-install-apache2-mysql-server-on-ubuntu\"><a href=\"#2-install-apache2-mysql-server-on-ubuntu\" class=\"headerlink\" title=\"2. install apache2 , mysql-server on ubuntu\"></a>2. install apache2 , mysql-server on ubuntu</h2><pre><code>apache2 service apache2 restart\n</code></pre><h3 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h3><ol>\n<li><a href=\"https://www.digitalocean.com/community/tutorials/how-to-deploy-a-flask-application-on-an-ubuntu-vps\">how-to-deploy-a-flask-application-on-an-ubuntu-vps</a></li>\n</ol>\n","excerpt":"<p><img src=\"http://odzl05jxx.bkt.clouddn.com/ChMkJ1fAMmKIIFpWAA_5Us41gQkAAUv1QE2Pp8AD_lq599.jpg?imageView2/2/w/600\" alt=\"\"><br>","more":"</p>\n<h2 id=\"1-virtualenv-install\"><a href=\"#1-virtualenv-install\" class=\"headerlink\" title=\"1. virtualenv install\"></a>1. virtualenv install</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo pip install virtualenv </div><div class=\"line\">sudo virtualenv venv</div><div class=\"line\"><span class=\"built_in\">source</span> venv/bin/activate </div><div class=\"line\">sudo pip install Flask </div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># sudo python __init__.py</span></div><div class=\"line\">sudo /var/www/FlaskApp/FlaskApp/venv/bin/python2 __init__.py</div><div class=\"line\"></div><div class=\"line\">deactivate <span class=\"comment\"># exit</span></div><div class=\"line\"></div><div class=\"line\">Windowsvirtualenv</div><div class=\"line\">pycharmcmd</div><div class=\"line\">pip install virtualenv</div><div class=\"line\">virtualenv env <span class=\"comment\">#ENV</span></div><div class=\"line\"><span class=\"built_in\">cd</span> env /Scripts</div><div class=\"line\">activate.bat <span class=\"comment\"># (env) &gt;.</span></div><div class=\"line\">deactivate.bat</div></pre></td></tr></table></figure>\n<h2 id=\"2-install-apache2-mysql-server-on-ubuntu\"><a href=\"#2-install-apache2-mysql-server-on-ubuntu\" class=\"headerlink\" title=\"2. install apache2 , mysql-server on ubuntu\"></a>2. install apache2 , mysql-server on ubuntu</h2><pre><code>apache2 service apache2 restart\n</code></pre><h3 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h3><ol>\n<li><a href=\"https://www.digitalocean.com/community/tutorials/how-to-deploy-a-flask-application-on-an-ubuntu-vps\">how-to-deploy-a-flask-application-on-an-ubuntu-vps</a></li>\n</ol>"},{"title":"Python","date":"2017-06-15T15:56:26.000Z","_content":"\n![Kitty](http://odzl05jxx.bkt.clouddn.com/c6dd030bf8cc75628fce3aec8216ba52.jpg?imageView2/2/w/600)\nPython<!--more-->\n\n### 1. The Flask Way\n\n#### 1.1 Basics\n> Flask is a very simple, but extremely flexible framework FlaskDecorator\n \n\n```Python\n#!/usr/bin/python3\n# -*- coding:utf8 -*-\n\nfrom flask import Flask\nfrom flask import request\nfrom flask import jsonify\nfrom flask import send_file\n\n# create the flask object\napp = Flask(__name__)\n\n# GET\n\n@app.route('/', methods=['GET'])\ndef handle_get():\n    return 'haha ,this is http status code 200'\n\n#POSTrequestresponse\n@app.route('/', methods=['POST'])\ndef handle_post():\n    uid = request.form['uid'] # requets.formlist\n    name = request.form['name']\n    print('uid is %s ,name is %s ' % (uid, name))\n    return '200 Ok, or whatever you like'  \n\nif __name__ == '__main__':\n    app.run(port=12345, debug=True) #Truereloadclient Debug \n\n# GETquery\nhttp://127.0.0.1:12345/_search_user?user=111&date=190\n\n@app.route('/_search_user', methods=['GET'])\ndef query_user_profile():\n    user = request.args.get('user')\n    date = request.args.get('date')\n    print(user)\n    print(date)\n    return 'every Thing Ok'\n\n \n 111\n 190   \n\n #jsonAPI\n@app.route('/_get_current_user', methods=['GET'])\ndef get_current_user():\n    return jsonify(\n        username='Admin',\n        email='Bob@gmail.com',\n        age=18\n    )    \n\n{\n    username: 'Admin';\n    email: 'Bob@gamil.com';\n    age: 18\n}\n\n#jsonjson \n@app.route('/_get_user_list', methods=['GET'])\ndef get_user_list():\n    user_list = create_user_list()\n    return Response(json.dumps(user_list), mimetype='application/json')\n\n\n#\ndef create_user_list():\n    alice = {'name': 'alice', 'age': 16, 'sex': 'female'}\n    tom = {'name': 'tom', 'age': 23, 'sex': 'male'}\n    josh = {'name': 'josh', 'age': 20, 'sex': 'male'}\n    bill = {'name': 'bill', 'age': 19, 'sex': 'male'}\n    li = [alice, tom, josh, bill]\n    return li\n\n\n# Postmanresult\n[\n    {\n        \"name\": \"alice\",\n        \"age\": 16,\n        \"sex\": \"female\"\n    },\n    {\n        \"name\": \"tom\",\n        \"age\": 23,\n        \"sex\": \"male\"\n    },\n    {\n        \"name\": \"josh\",\n        \"age\": 20,\n        \"sex\": \"male\"\n    },\n    {\n        \"name\": \"bill\",\n        \"age\": 19,\n        \"sex\": \"male\"\n    }\n]\n\n# hosting static fileimage,css,etc\n# \n\n@app.route('/_get_image', methods=['GET'])\ndef get_image():\n    filename = 'static/image/b1.jpg'\n    fullpath = os.path.join(os.path.curdir, filename)\n    print(filename, fullpath)\n    return send_file(fullpath, mimetype='image/jpeg')\n```\n\nFlaskDoc \n- [accessing-request-data](http://flask.pocoo.org/docs/0.12/quickstart/#accessing-request-data)\n- [cookies](http://flask.pocoo.org/docs/0.12/quickstart/#cookies)\n- [sessions](http://flask.pocoo.org/docs/0.12/quickstart/#sessions)\n- [static files](http://flask.pocoo.org/docs/0.12/quickstart/#static-files)\nstaticimagecss,404.html\nPostmanFiddler\nresponsemime-typecontent-type\ntext/htmltext/cssapplication/json[http-content-type](http://www.runoob.com/http/http-content-type.html)\ncontent-type,[](http://homeway.me/2015/07/19/understand-http-about-content-type/)\nHttp header[Http Header](http://zq210wl.github.io/2014/12/30/html-http-header-analysis/)\nHttpTCP ,ACK tcpcumpwireShark\n\n>Content-Type:\n1.text/html\n2.text/plain\n3.text/css\n4.text/javascript\n5.application/x-www-form-urlencoded\n6.multipart/form-data\n7.application/json\n8.application/xml\n\nhtmlcssjavascriptPOST\n\n#### 1.2 Flask BluePrints\n\n#### 1.3 Flask + gevent web \n[docs](http://flask.pocoo.org/docs/0.12/deploying/wsgi-standalone/)\n\n### 2. The Django Way \nDjango**web framework****WebServer**\n\n\n\n### 3. Using Tornado\n\n### 4. \n#### 4.1 Web\nNigixFlaskTornadoHttpDjango\n - [DjangoFlask\n](https://www.zhihu.com/question/41564604)\n\n\nUrlLibSocketPythonnetwork\n\n#### 4.2\n[](http://www.vimer.cn/archives/2926.html)\n>:\n\n    bottle > flask > tornado > django \n\n:\n\n    tornado \n    bottle\n    flask\n    django\n\n\n\n\n### Reference\n1. xxxx\n2. xxxx","source":"_posts/2017-06-15-python-networks.md","raw":"---\ntitle: Python\ndate: 2017-06-15 23:56:26\ncategories: blog\ntags: [python]\n---\n\n![Kitty](http://odzl05jxx.bkt.clouddn.com/c6dd030bf8cc75628fce3aec8216ba52.jpg?imageView2/2/w/600)\nPython<!--more-->\n\n### 1. The Flask Way\n\n#### 1.1 Basics\n> Flask is a very simple, but extremely flexible framework FlaskDecorator\n \n\n```Python\n#!/usr/bin/python3\n# -*- coding:utf8 -*-\n\nfrom flask import Flask\nfrom flask import request\nfrom flask import jsonify\nfrom flask import send_file\n\n# create the flask object\napp = Flask(__name__)\n\n# GET\n\n@app.route('/', methods=['GET'])\ndef handle_get():\n    return 'haha ,this is http status code 200'\n\n#POSTrequestresponse\n@app.route('/', methods=['POST'])\ndef handle_post():\n    uid = request.form['uid'] # requets.formlist\n    name = request.form['name']\n    print('uid is %s ,name is %s ' % (uid, name))\n    return '200 Ok, or whatever you like'  \n\nif __name__ == '__main__':\n    app.run(port=12345, debug=True) #Truereloadclient Debug \n\n# GETquery\nhttp://127.0.0.1:12345/_search_user?user=111&date=190\n\n@app.route('/_search_user', methods=['GET'])\ndef query_user_profile():\n    user = request.args.get('user')\n    date = request.args.get('date')\n    print(user)\n    print(date)\n    return 'every Thing Ok'\n\n \n 111\n 190   \n\n #jsonAPI\n@app.route('/_get_current_user', methods=['GET'])\ndef get_current_user():\n    return jsonify(\n        username='Admin',\n        email='Bob@gmail.com',\n        age=18\n    )    \n\n{\n    username: 'Admin';\n    email: 'Bob@gamil.com';\n    age: 18\n}\n\n#jsonjson \n@app.route('/_get_user_list', methods=['GET'])\ndef get_user_list():\n    user_list = create_user_list()\n    return Response(json.dumps(user_list), mimetype='application/json')\n\n\n#\ndef create_user_list():\n    alice = {'name': 'alice', 'age': 16, 'sex': 'female'}\n    tom = {'name': 'tom', 'age': 23, 'sex': 'male'}\n    josh = {'name': 'josh', 'age': 20, 'sex': 'male'}\n    bill = {'name': 'bill', 'age': 19, 'sex': 'male'}\n    li = [alice, tom, josh, bill]\n    return li\n\n\n# Postmanresult\n[\n    {\n        \"name\": \"alice\",\n        \"age\": 16,\n        \"sex\": \"female\"\n    },\n    {\n        \"name\": \"tom\",\n        \"age\": 23,\n        \"sex\": \"male\"\n    },\n    {\n        \"name\": \"josh\",\n        \"age\": 20,\n        \"sex\": \"male\"\n    },\n    {\n        \"name\": \"bill\",\n        \"age\": 19,\n        \"sex\": \"male\"\n    }\n]\n\n# hosting static fileimage,css,etc\n# \n\n@app.route('/_get_image', methods=['GET'])\ndef get_image():\n    filename = 'static/image/b1.jpg'\n    fullpath = os.path.join(os.path.curdir, filename)\n    print(filename, fullpath)\n    return send_file(fullpath, mimetype='image/jpeg')\n```\n\nFlaskDoc \n- [accessing-request-data](http://flask.pocoo.org/docs/0.12/quickstart/#accessing-request-data)\n- [cookies](http://flask.pocoo.org/docs/0.12/quickstart/#cookies)\n- [sessions](http://flask.pocoo.org/docs/0.12/quickstart/#sessions)\n- [static files](http://flask.pocoo.org/docs/0.12/quickstart/#static-files)\nstaticimagecss,404.html\nPostmanFiddler\nresponsemime-typecontent-type\ntext/htmltext/cssapplication/json[http-content-type](http://www.runoob.com/http/http-content-type.html)\ncontent-type,[](http://homeway.me/2015/07/19/understand-http-about-content-type/)\nHttp header[Http Header](http://zq210wl.github.io/2014/12/30/html-http-header-analysis/)\nHttpTCP ,ACK tcpcumpwireShark\n\n>Content-Type:\n1.text/html\n2.text/plain\n3.text/css\n4.text/javascript\n5.application/x-www-form-urlencoded\n6.multipart/form-data\n7.application/json\n8.application/xml\n\nhtmlcssjavascriptPOST\n\n#### 1.2 Flask BluePrints\n\n#### 1.3 Flask + gevent web \n[docs](http://flask.pocoo.org/docs/0.12/deploying/wsgi-standalone/)\n\n### 2. The Django Way \nDjango**web framework****WebServer**\n\n\n\n### 3. Using Tornado\n\n### 4. \n#### 4.1 Web\nNigixFlaskTornadoHttpDjango\n - [DjangoFlask\n](https://www.zhihu.com/question/41564604)\n\n\nUrlLibSocketPythonnetwork\n\n#### 4.2\n[](http://www.vimer.cn/archives/2926.html)\n>:\n\n    bottle > flask > tornado > django \n\n:\n\n    tornado \n    bottle\n    flask\n    django\n\n\n\n\n### Reference\n1. xxxx\n2. xxxx","slug":"2017-06-15-python-networks","published":1,"updated":"2017-06-25T14:43:05.939Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj50afgxl0021i4vr5k3l98yr","content":"<p><img src=\"http://odzl05jxx.bkt.clouddn.com/c6dd030bf8cc75628fce3aec8216ba52.jpg?imageView2/2/w/600\" alt=\"Kitty\"><br>Python<a id=\"more\"></a></p>\n<h3 id=\"1-The-Flask-Way\"><a href=\"#1-The-Flask-Way\" class=\"headerlink\" title=\"1. The Flask Way\"></a>1. The Flask Way</h3><h4 id=\"1-1-Basics\"><a href=\"#1-1-Basics\" class=\"headerlink\" title=\"1.1 Basics\"></a>1.1 Basics</h4><blockquote>\n<p>Flask is a very simple, but extremely flexible framework FlaskDecorator</p>\n</blockquote>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div><div class=\"line\">103</div><div class=\"line\">104</div><div class=\"line\">105</div><div class=\"line\">106</div><div class=\"line\">107</div><div class=\"line\">108</div></pre></td><td class=\"code\"><pre><div class=\"line\">#!/usr/bin/python3</div><div class=\"line\"># -*- coding:utf8 -*-</div><div class=\"line\"></div><div class=\"line\">from flask import Flask</div><div class=\"line\">from flask import request</div><div class=\"line\">from flask import jsonify</div><div class=\"line\">from flask import send_file</div><div class=\"line\"></div><div class=\"line\"># create the flask object</div><div class=\"line\">app = Flask(__name__)</div><div class=\"line\"></div><div class=\"line\"># GET</div><div class=\"line\"></div><div class=\"line\">@app.route('/', methods=['GET'])</div><div class=\"line\">def handle_get():</div><div class=\"line\">    return 'haha ,this is http status code 200'</div><div class=\"line\"></div><div class=\"line\">#POSTrequestresponse</div><div class=\"line\">@app.route('/', methods=['POST'])</div><div class=\"line\">def handle_post():</div><div class=\"line\">    uid = request.form['uid'] # requets.formlist</div><div class=\"line\">    name = request.form['name']</div><div class=\"line\">    print('uid is %s ,name is %s ' % (uid, name))</div><div class=\"line\">    return '200 Ok, or whatever you like'  </div><div class=\"line\"></div><div class=\"line\">if __name__ == '__main__':</div><div class=\"line\">    app.run(port=12345, debug=True) #Truereloadclient Debug </div><div class=\"line\"></div><div class=\"line\"># GETquery</div><div class=\"line\">http://127.0.0.1:12345/_search_user?user=111&amp;date=190</div><div class=\"line\"></div><div class=\"line\">@app.route('/_search_user', methods=['GET'])</div><div class=\"line\">def query_user_profile():</div><div class=\"line\">    user = request.args.get('user')</div><div class=\"line\">    date = request.args.get('date')</div><div class=\"line\">    print(user)</div><div class=\"line\">    print(date)</div><div class=\"line\">    return 'every Thing Ok'</div><div class=\"line\"></div><div class=\"line\"> </div><div class=\"line\"> 111</div><div class=\"line\"> 190   </div><div class=\"line\"></div><div class=\"line\"> #jsonAPI</div><div class=\"line\">@app.route('/_get_current_user', methods=['GET'])</div><div class=\"line\">def get_current_user():</div><div class=\"line\">    return jsonify(</div><div class=\"line\">        username='Admin',</div><div class=\"line\">        email='Bob@gmail.com',</div><div class=\"line\">        age=18</div><div class=\"line\">    )    </div><div class=\"line\"></div><div class=\"line\">&#123;</div><div class=\"line\">    username: 'Admin';</div><div class=\"line\">    email: 'Bob@gamil.com';</div><div class=\"line\">    age: 18</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">#jsonjson </div><div class=\"line\">@app.route('/_get_user_list', methods=['GET'])</div><div class=\"line\">def get_user_list():</div><div class=\"line\">    user_list = create_user_list()</div><div class=\"line\">    return Response(json.dumps(user_list), mimetype='application/json')</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">#</div><div class=\"line\">def create_user_list():</div><div class=\"line\">    alice = &#123;'name': 'alice', 'age': 16, 'sex': 'female'&#125;</div><div class=\"line\">    tom = &#123;'name': 'tom', 'age': 23, 'sex': 'male'&#125;</div><div class=\"line\">    josh = &#123;'name': 'josh', 'age': 20, 'sex': 'male'&#125;</div><div class=\"line\">    bill = &#123;'name': 'bill', 'age': 19, 'sex': 'male'&#125;</div><div class=\"line\">    li = [alice, tom, josh, bill]</div><div class=\"line\">    return li</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"># Postmanresult</div><div class=\"line\">[</div><div class=\"line\">    &#123;</div><div class=\"line\">        \"name\": \"alice\",</div><div class=\"line\">        \"age\": 16,</div><div class=\"line\">        \"sex\": \"female\"</div><div class=\"line\">    &#125;,</div><div class=\"line\">    &#123;</div><div class=\"line\">        \"name\": \"tom\",</div><div class=\"line\">        \"age\": 23,</div><div class=\"line\">        \"sex\": \"male\"</div><div class=\"line\">    &#125;,</div><div class=\"line\">    &#123;</div><div class=\"line\">        \"name\": \"josh\",</div><div class=\"line\">        \"age\": 20,</div><div class=\"line\">        \"sex\": \"male\"</div><div class=\"line\">    &#125;,</div><div class=\"line\">    &#123;</div><div class=\"line\">        \"name\": \"bill\",</div><div class=\"line\">        \"age\": 19,</div><div class=\"line\">        \"sex\": \"male\"</div><div class=\"line\">    &#125;</div><div class=\"line\">]</div><div class=\"line\"></div><div class=\"line\"># hosting static fileimage,css,etc</div><div class=\"line\"># </div><div class=\"line\"></div><div class=\"line\">@app.route('/_get_image', methods=['GET'])</div><div class=\"line\">def get_image():</div><div class=\"line\">    filename = 'static/image/b1.jpg'</div><div class=\"line\">    fullpath = os.path.join(os.path.curdir, filename)</div><div class=\"line\">    print(filename, fullpath)</div><div class=\"line\">    return send_file(fullpath, mimetype='image/jpeg')</div></pre></td></tr></table></figure>\n<p>FlaskDoc </p>\n<ul>\n<li><a href=\"http://flask.pocoo.org/docs/0.12/quickstart/#accessing-request-data\">accessing-request-data</a></li>\n<li><a href=\"http://flask.pocoo.org/docs/0.12/quickstart/#cookies\">cookies</a></li>\n<li><a href=\"http://flask.pocoo.org/docs/0.12/quickstart/#sessions\">sessions</a></li>\n<li><a href=\"http://flask.pocoo.org/docs/0.12/quickstart/#static-files\">static files</a><br>staticimagecss,404.html<br>PostmanFiddler<br>responsemime-typecontent-type<br>text/htmltext/cssapplication/json<a href=\"http://www.runoob.com/http/http-content-type.html\">http-content-type</a><br>content-type,<a href=\"http://homeway.me/2015/07/19/understand-http-about-content-type/\"></a><br>Http header<a href=\"http://zq210wl.github.io/2014/12/30/html-http-header-analysis/\">Http Header</a><br>HttpTCP ,ACK tcpcumpwireShark</li>\n</ul>\n<blockquote>\n<p>Content-Type:<br>1.text/html<br>2.text/plain<br>3.text/css<br>4.text/javascript<br>5.application/x-www-form-urlencoded<br>6.multipart/form-data<br>7.application/json<br>8.application/xml<br><br>htmlcssjavascriptPOST</p>\n</blockquote>\n<h4 id=\"1-2-Flask-BluePrints\"><a href=\"#1-2-Flask-BluePrints\" class=\"headerlink\" title=\"1.2 Flask BluePrints\"></a>1.2 Flask BluePrints</h4><h4 id=\"1-3-Flask-gevent-web-\"><a href=\"#1-3-Flask-gevent-web-\" class=\"headerlink\" title=\"1.3 Flask + gevent web \"></a>1.3 Flask + gevent web </h4><p><a href=\"http://flask.pocoo.org/docs/0.12/deploying/wsgi-standalone/\">docs</a></p>\n<h3 id=\"2-The-Django-Way\"><a href=\"#2-The-Django-Way\" class=\"headerlink\" title=\"2. The Django Way\"></a>2. The Django Way</h3><p>Django<strong>web framework</strong><strong>WebServer</strong></p>\n<h3 id=\"3-Using-Tornado\"><a href=\"#3-Using-Tornado\" class=\"headerlink\" title=\"3. Using Tornado\"></a>3. Using Tornado</h3><h3 id=\"4-\"><a href=\"#4-\" class=\"headerlink\" title=\"4. \"></a>4. </h3><h4 id=\"4-1-Web\"><a href=\"#4-1-Web\" class=\"headerlink\" title=\"4.1 Web\"></a>4.1 Web</h4><p>NigixFlaskTornadoHttpDjango</p>\n<ul>\n<li><a href=\"https://www.zhihu.com/question/41564604\">DjangoFlask\n</a></li>\n</ul>\n<p>UrlLibSocketPythonnetwork</p>\n<h4 id=\"4-2\"><a href=\"#4-2\" class=\"headerlink\" title=\"4.2\"></a>4.2</h4><p><a href=\"http://www.vimer.cn/archives/2926.html\"></a></p>\n<blockquote>\n<p>:</p>\n</blockquote>\n<pre><code>bottle &gt; flask &gt; tornado &gt; django \n</code></pre><p>:</p>\n<pre><code>tornado \nbottle\nflask\ndjango\n</code></pre><p></p>\n<h3 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h3><ol>\n<li>xxxx</li>\n<li>xxxx</li>\n</ol>\n","excerpt":"<p><img src=\"http://odzl05jxx.bkt.clouddn.com/c6dd030bf8cc75628fce3aec8216ba52.jpg?imageView2/2/w/600\" alt=\"Kitty\"><br>Python","more":"</p>\n<h3 id=\"1-The-Flask-Way\"><a href=\"#1-The-Flask-Way\" class=\"headerlink\" title=\"1. The Flask Way\"></a>1. The Flask Way</h3><h4 id=\"1-1-Basics\"><a href=\"#1-1-Basics\" class=\"headerlink\" title=\"1.1 Basics\"></a>1.1 Basics</h4><blockquote>\n<p>Flask is a very simple, but extremely flexible framework FlaskDecorator</p>\n</blockquote>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div><div class=\"line\">103</div><div class=\"line\">104</div><div class=\"line\">105</div><div class=\"line\">106</div><div class=\"line\">107</div><div class=\"line\">108</div></pre></td><td class=\"code\"><pre><div class=\"line\">#!/usr/bin/python3</div><div class=\"line\"># -*- coding:utf8 -*-</div><div class=\"line\"></div><div class=\"line\">from flask import Flask</div><div class=\"line\">from flask import request</div><div class=\"line\">from flask import jsonify</div><div class=\"line\">from flask import send_file</div><div class=\"line\"></div><div class=\"line\"># create the flask object</div><div class=\"line\">app = Flask(__name__)</div><div class=\"line\"></div><div class=\"line\"># GET</div><div class=\"line\"></div><div class=\"line\">@app.route('/', methods=['GET'])</div><div class=\"line\">def handle_get():</div><div class=\"line\">    return 'haha ,this is http status code 200'</div><div class=\"line\"></div><div class=\"line\">#POSTrequestresponse</div><div class=\"line\">@app.route('/', methods=['POST'])</div><div class=\"line\">def handle_post():</div><div class=\"line\">    uid = request.form['uid'] # requets.formlist</div><div class=\"line\">    name = request.form['name']</div><div class=\"line\">    print('uid is %s ,name is %s ' % (uid, name))</div><div class=\"line\">    return '200 Ok, or whatever you like'  </div><div class=\"line\"></div><div class=\"line\">if __name__ == '__main__':</div><div class=\"line\">    app.run(port=12345, debug=True) #Truereloadclient Debug </div><div class=\"line\"></div><div class=\"line\"># GETquery</div><div class=\"line\">http://127.0.0.1:12345/_search_user?user=111&amp;date=190</div><div class=\"line\"></div><div class=\"line\">@app.route('/_search_user', methods=['GET'])</div><div class=\"line\">def query_user_profile():</div><div class=\"line\">    user = request.args.get('user')</div><div class=\"line\">    date = request.args.get('date')</div><div class=\"line\">    print(user)</div><div class=\"line\">    print(date)</div><div class=\"line\">    return 'every Thing Ok'</div><div class=\"line\"></div><div class=\"line\"> </div><div class=\"line\"> 111</div><div class=\"line\"> 190   </div><div class=\"line\"></div><div class=\"line\"> #jsonAPI</div><div class=\"line\">@app.route('/_get_current_user', methods=['GET'])</div><div class=\"line\">def get_current_user():</div><div class=\"line\">    return jsonify(</div><div class=\"line\">        username='Admin',</div><div class=\"line\">        email='Bob@gmail.com',</div><div class=\"line\">        age=18</div><div class=\"line\">    )    </div><div class=\"line\"></div><div class=\"line\">&#123;</div><div class=\"line\">    username: 'Admin';</div><div class=\"line\">    email: 'Bob@gamil.com';</div><div class=\"line\">    age: 18</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">#jsonjson </div><div class=\"line\">@app.route('/_get_user_list', methods=['GET'])</div><div class=\"line\">def get_user_list():</div><div class=\"line\">    user_list = create_user_list()</div><div class=\"line\">    return Response(json.dumps(user_list), mimetype='application/json')</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">#</div><div class=\"line\">def create_user_list():</div><div class=\"line\">    alice = &#123;'name': 'alice', 'age': 16, 'sex': 'female'&#125;</div><div class=\"line\">    tom = &#123;'name': 'tom', 'age': 23, 'sex': 'male'&#125;</div><div class=\"line\">    josh = &#123;'name': 'josh', 'age': 20, 'sex': 'male'&#125;</div><div class=\"line\">    bill = &#123;'name': 'bill', 'age': 19, 'sex': 'male'&#125;</div><div class=\"line\">    li = [alice, tom, josh, bill]</div><div class=\"line\">    return li</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"># Postmanresult</div><div class=\"line\">[</div><div class=\"line\">    &#123;</div><div class=\"line\">        \"name\": \"alice\",</div><div class=\"line\">        \"age\": 16,</div><div class=\"line\">        \"sex\": \"female\"</div><div class=\"line\">    &#125;,</div><div class=\"line\">    &#123;</div><div class=\"line\">        \"name\": \"tom\",</div><div class=\"line\">        \"age\": 23,</div><div class=\"line\">        \"sex\": \"male\"</div><div class=\"line\">    &#125;,</div><div class=\"line\">    &#123;</div><div class=\"line\">        \"name\": \"josh\",</div><div class=\"line\">        \"age\": 20,</div><div class=\"line\">        \"sex\": \"male\"</div><div class=\"line\">    &#125;,</div><div class=\"line\">    &#123;</div><div class=\"line\">        \"name\": \"bill\",</div><div class=\"line\">        \"age\": 19,</div><div class=\"line\">        \"sex\": \"male\"</div><div class=\"line\">    &#125;</div><div class=\"line\">]</div><div class=\"line\"></div><div class=\"line\"># hosting static fileimage,css,etc</div><div class=\"line\"># </div><div class=\"line\"></div><div class=\"line\">@app.route('/_get_image', methods=['GET'])</div><div class=\"line\">def get_image():</div><div class=\"line\">    filename = 'static/image/b1.jpg'</div><div class=\"line\">    fullpath = os.path.join(os.path.curdir, filename)</div><div class=\"line\">    print(filename, fullpath)</div><div class=\"line\">    return send_file(fullpath, mimetype='image/jpeg')</div></pre></td></tr></table></figure>\n<p>FlaskDoc </p>\n<ul>\n<li><a href=\"http://flask.pocoo.org/docs/0.12/quickstart/#accessing-request-data\">accessing-request-data</a></li>\n<li><a href=\"http://flask.pocoo.org/docs/0.12/quickstart/#cookies\">cookies</a></li>\n<li><a href=\"http://flask.pocoo.org/docs/0.12/quickstart/#sessions\">sessions</a></li>\n<li><a href=\"http://flask.pocoo.org/docs/0.12/quickstart/#static-files\">static files</a><br>staticimagecss,404.html<br>PostmanFiddler<br>responsemime-typecontent-type<br>text/htmltext/cssapplication/json<a href=\"http://www.runoob.com/http/http-content-type.html\">http-content-type</a><br>content-type,<a href=\"http://homeway.me/2015/07/19/understand-http-about-content-type/\"></a><br>Http header<a href=\"http://zq210wl.github.io/2014/12/30/html-http-header-analysis/\">Http Header</a><br>HttpTCP ,ACK tcpcumpwireShark</li>\n</ul>\n<blockquote>\n<p>Content-Type:<br>1.text/html<br>2.text/plain<br>3.text/css<br>4.text/javascript<br>5.application/x-www-form-urlencoded<br>6.multipart/form-data<br>7.application/json<br>8.application/xml<br><br>htmlcssjavascriptPOST</p>\n</blockquote>\n<h4 id=\"1-2-Flask-BluePrints\"><a href=\"#1-2-Flask-BluePrints\" class=\"headerlink\" title=\"1.2 Flask BluePrints\"></a>1.2 Flask BluePrints</h4><h4 id=\"1-3-Flask-gevent-web-\"><a href=\"#1-3-Flask-gevent-web-\" class=\"headerlink\" title=\"1.3 Flask + gevent web \"></a>1.3 Flask + gevent web </h4><p><a href=\"http://flask.pocoo.org/docs/0.12/deploying/wsgi-standalone/\">docs</a></p>\n<h3 id=\"2-The-Django-Way\"><a href=\"#2-The-Django-Way\" class=\"headerlink\" title=\"2. The Django Way\"></a>2. The Django Way</h3><p>Django<strong>web framework</strong><strong>WebServer</strong></p>\n<h3 id=\"3-Using-Tornado\"><a href=\"#3-Using-Tornado\" class=\"headerlink\" title=\"3. Using Tornado\"></a>3. Using Tornado</h3><h3 id=\"4-\"><a href=\"#4-\" class=\"headerlink\" title=\"4. \"></a>4. </h3><h4 id=\"4-1-Web\"><a href=\"#4-1-Web\" class=\"headerlink\" title=\"4.1 Web\"></a>4.1 Web</h4><p>NigixFlaskTornadoHttpDjango</p>\n<ul>\n<li><a href=\"https://www.zhihu.com/question/41564604\">DjangoFlask\n</a></li>\n</ul>\n<p>UrlLibSocketPythonnetwork</p>\n<h4 id=\"4-2\"><a href=\"#4-2\" class=\"headerlink\" title=\"4.2\"></a>4.2</h4><p><a href=\"http://www.vimer.cn/archives/2926.html\"></a></p>\n<blockquote>\n<p>:</p>\n</blockquote>\n<pre><code>bottle &gt; flask &gt; tornado &gt; django \n</code></pre><p>:</p>\n<pre><code>tornado \nbottle\nflask\ndjango\n</code></pre><p></p>\n<h3 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h3><ol>\n<li>xxxx</li>\n<li>xxxx</li>\n</ol>"},{"title":"Android Cookbook","date":"2017-07-12T00:40:08.000Z","_content":"\nA Cookbook shall look like a collection of Recipes, or an index page from where dinner are made. And it keeps you sane.\n\n<!--more-->\n\n","source":"_posts/2017-07-12-android-cookbook.md","raw":"---\ntitle: Android Cookbook\ndate: 2017-07-12 08:40:08\ntags: [android]\n---\n\nA Cookbook shall look like a collection of Recipes, or an index page from where dinner are made. And it keeps you sane.\n\n<!--more-->\n\n","slug":"2017-07-12-android-cookbook","published":1,"updated":"2017-07-12T00:48:40.838Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj50afgy00024i4vrpf5hm87f","content":"<p>A Cookbook shall look like a collection of Recipes, or an index page from where dinner are made. And it keeps you sane.</p>\n<a id=\"more\"></a>\n","excerpt":"<p>A Cookbook shall look like a collection of Recipes, or an index page from where dinner are made. And it keeps you sane.</p>","more":""},{"title":"linux","date":"2017-06-18T08:51:49.000Z","_content":"> linuxlinuxserver ,bash\n>  \n\n![](http://odzl05jxx.bkt.clouddn.com/ChMkJ1gq00WIXw_GAA47r_8gjqgAAXxJAH8qOMADjvH566.jpg?imageView2/2/w/600)\n\n<!--more-->\n\n1. \n[utorrent](http://blog.topspeedsnail.com/archives/5752)\napache,mysql\n\n2. \nshellsudo XXX ,which XXX sudoPATHsudosudochmod+X sudo\n```\nPATH : echo $PATH\n/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games (sudo)\n\nwhich XXXk\nsudo  /usr/bin/sudo\n```\n\n> $PATH\n~./bashrc ~./profile\n/etc/apache/binPATH\nPATH=$PATH:/etc/apache/bin  #\n  PATH=$PATH:/etc/apache/bin #~./bashrc~./profile\n\n3. alias\nvi  /XXX \nvi ~/.bashrc \n alias yourcommand='ls -alr' \nsession\n\n4. \n\n\n","source":"_posts/2017-06-18-linux-commands-extended.md","raw":"---\ntitle: linux\ndate: 2017-06-18 16:51:49\ncategories: blog\ntags: \n  - linux\n---\n> linuxlinuxserver ,bash\n>  \n\n![](http://odzl05jxx.bkt.clouddn.com/ChMkJ1gq00WIXw_GAA47r_8gjqgAAXxJAH8qOMADjvH566.jpg?imageView2/2/w/600)\n\n<!--more-->\n\n1. \n[utorrent](http://blog.topspeedsnail.com/archives/5752)\napache,mysql\n\n2. \nshellsudo XXX ,which XXX sudoPATHsudosudochmod+X sudo\n```\nPATH : echo $PATH\n/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games (sudo)\n\nwhich XXXk\nsudo  /usr/bin/sudo\n```\n\n> $PATH\n~./bashrc ~./profile\n/etc/apache/binPATH\nPATH=$PATH:/etc/apache/bin  #\n  PATH=$PATH:/etc/apache/bin #~./bashrc~./profile\n\n3. alias\nvi  /XXX \nvi ~/.bashrc \n alias yourcommand='ls -alr' \nsession\n\n4. \n\n\n","slug":"2017-06-18-linux-commands-extended","published":1,"updated":"2017-07-08T15:01:38.640Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj50afgy00027i4vrh82ogy6f","content":"<blockquote>\n<p>linuxlinuxserver ,bash</p>\n</blockquote>\n<p><img src=\"http://odzl05jxx.bkt.clouddn.com/ChMkJ1gq00WIXw_GAA47r_8gjqgAAXxJAH8qOMADjvH566.jpg?imageView2/2/w/600\" alt=\"\"></p>\n<a id=\"more\"></a>\n<ol>\n<li><p><br><a href=\"http://blog.topspeedsnail.com/archives/5752\">utorrent</a><br>apache,mysql</p>\n</li>\n<li><p><br>shellsudo XXX ,which XXX sudoPATHsudosudochmod+X sudo</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">PATH : echo $PATH</div><div class=\"line\">/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games (sudo)</div><div class=\"line\"></div><div class=\"line\">which XXXk</div><div class=\"line\">sudo  /usr/bin/sudo</div></pre></td></tr></table></figure>\n</li>\n</ol>\n<blockquote>\n<p>$PATH<br>~./bashrc ~./profile<br>/etc/apache/binPATH<br>PATH=$PATH:/etc/apache/bin  #<br>  PATH=$PATH:/etc/apache/bin #~./bashrc~./profile</p>\n</blockquote>\n<ol>\n<li><p>alias<br>vi  /XXX <br>vi ~/.bashrc<br> alias yourcommand=ls -alr<br>session</p>\n</li>\n<li></li>\n</ol>\n","excerpt":"<blockquote>\n<p>linuxlinuxserver ,bash</p>\n</blockquote>\n<p><img src=\"http://odzl05jxx.bkt.clouddn.com/ChMkJ1gq00WIXw_GAA47r_8gjqgAAXxJAH8qOMADjvH566.jpg?imageView2/2/w/600\" alt=\"\"></p>","more":"<ol>\n<li><p><br><a href=\"http://blog.topspeedsnail.com/archives/5752\">utorrent</a><br>apache,mysql</p>\n</li>\n<li><p><br>shellsudo XXX ,which XXX sudoPATHsudosudochmod+X sudo</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">PATH : echo $PATH</div><div class=\"line\">/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games (sudo)</div><div class=\"line\"></div><div class=\"line\">which XXXk</div><div class=\"line\">sudo  /usr/bin/sudo</div></pre></td></tr></table></figure>\n</li>\n</ol>\n<blockquote>\n<p>$PATH<br>~./bashrc ~./profile<br>/etc/apache/binPATH<br>PATH=$PATH:/etc/apache/bin  #<br>  PATH=$PATH:/etc/apache/bin #~./bashrc~./profile</p>\n</blockquote>\n<ol>\n<li><p>alias<br>vi  /XXX <br>vi ~/.bashrc<br> alias yourcommand=ls -alr<br>session</p>\n</li>\n<li></li>\n</ol>"},{"title":"2017-07-12-fragment-decoded","date":"2017-07-12T00:37:23.000Z","_content":"\nWe been told Fragment itself should only trust official docs, the implementation detail are prone to any change any time. \n\n<!--more-->\n\nFragment\n\n","source":"_posts/2017-07-12-fragment-decoded.md","raw":"---\ntitle: 2017-07-12-fragment-decoded\ndate: 2017-07-12 08:37:23\ntags: [android]\n---\n\nWe been told Fragment itself should only trust official docs, the implementation detail are prone to any change any time. \n\n<!--more-->\n\nFragment\n\n","slug":"2017-07-12-fragment-decoded","published":1,"updated":"2017-07-12T00:48:47.963Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj50afgy0002bi4vrbzbz99tp","content":"<p>We been told Fragment itself should only trust official docs, the implementation detail are prone to any change any time. </p>\n<a id=\"more\"></a>\n<p>Fragment</p>\n","excerpt":"<p>We been told Fragment itself should only trust official docs, the implementation detail are prone to any change any time. </p>","more":"<p>Fragment</p>"},{"title":"2017-07-01-it-began-with-a-few-bits","date":"2017-07-01T15:03:00.000Z","_content":"\n### This is gonna be nasty...... TL;DR\n![](http://odzl05jxx.bkt.clouddn.com/d653491fb55bec754b8471aa6a3f6eed.jpg?imageView2/2/w/600)\n\n<!--more-->\n\n### 1. Retrofit\n\n#### 1.1 \nRetrofitAndriodjava\nRetrofit\n```java\n public interface GitHub {\n    @GET(\"/repos/{owner}/{repo}/contributors\")\n    Call<List<Contributor>> contributors(\n        @Path(\"owner\") String owner,\n        @Path(\"repo\") String repo);\n  }\n\nRetrofit retrofit = new Retrofit.Builder()\n        .baseUrl(API_URL)   // end_point\n        .addConverterFactory(GsonConverterFactory.create())\n        .build();\n\n    // Create an instance of our GitHub API interface.\n    GitHub github = retrofit.create(GitHub.class);\n\n    // Create a call instance for looking up Retrofit contributors.\n    Call<List<Contributor>> call = github.contributors(\"square\", \"retrofit\");\n\n    // Fetch and print a list of the contributors to the library.\n    List<Contributor> contributors = call.execute().body();\n    for (Contributor contributor : contributors) {\n      System.out.println(contributor.login + \" (\" + contributor.contributions + \")\");\n    }\n\n```\n retroft.create ,\n\n\n>ServiceMethod serviceMethod = loadServiceMethod(method);\nOkHttpCall okHttpCall = new OkHttpCall<>(serviceMethod, args);\nreturn serviceMethod.callAdapter.adapt(okHttpCall);\n\n### 1.2 ServiceMethod\nloadServiceMethod(Method)invokemethodCacheBuilderServiceMethodcahceBuilder BuilderServiceMethod\n\nresult = new ServiceMethod.Builder(this, method).build();\n```java\n public Builder(Retrofit retrofit, Method method) {\n      this.retrofit = retrofit; //clientretrofit\n      this.method = method; \n      this.methodAnnotations = method.getAnnotations();\n      this.parameterTypes = method.getGenericParameterTypes();\n      this.parameterAnnotationsArray = method.getParameterAnnotations();\n    }\n```\n\n```java\nServiceMethodhttpMethodGETPOST,\ncontentTypeMimeType\n public ServiceMethod build() {\n        // 1.callAdapter,retrofitcallAdapter,RxjavAdapter,retrofitadapterFactoriesIllegalArgumentException\n      callAdapter = createCallAdapter();\n       //callAdapter retrofit.CallCallTCall<List<Contributor>>List<Contributor> adaptokHttpCallokHttpCallrespose\n        //java.lang.reflect.Type classresponseclass\n      responseType = callAdapter.responseType();\n        //2.respnseRequestconverter\n      responseConverter = createResponseConverter();\n      for (Annotation annotation : methodAnnotations) {\n        parseMethodAnnotation(annotation); //@GET\"GET\"StringGET\n      }\n      int parameterCount = parameterAnnotationsArray.length;\n      //3.ParameterHandler\n      parameterHandlers = new ParameterHandler<?>[parameterCount];\n      for (int p = 0; p < parameterCount; p++) {\n        Type parameterType = parameterTypes[p];\n        Annotation[] parameterAnnotations = parameterAnnotationsArray[p];\n        if (parameterAnnotations == null) {\n          throw parameterError(p, \"No Retrofit annotation found.\");\n        }\n        parameterHandlers[p] = parseParameter(p, parameterType, parameterAnnotations);\n        //\n         private ParameterHandler<?> parseParameter(int p, Type parameterType, Annotation[] annotations)\n         index\n         Response\n         @\n          private ParameterHandler<?> parseParameterAnnotation(\n        int p, Type type, Annotation[] annotations, Annotation annotation)Http300Http\n      }\n      return new ServiceMethod<>(this);\n    }\n}\n```\n\n\nBuider\n```java\n1. createCallAdapter  --->  retrofit.callAdapter(returnType, annotations); adapterFactories()****DefaultCallAdapterFactoryExecutorCallAdapterFactoryRxjavaCallAdapterFactoryretrofitinstallcallAdapter\nCallAdaterRetrofitCall adptResponse class\n\n2. createResponseConverter --->  retrofit.responseBodyConverter(responseType, annotations); \nRetrofit2.Converter<F, T> (fromTo)\n\nConvert objects to and from their representation in HTTP. Instances are created by {@linkplain\n * Factory a factory} which is {@linkplain Retrofit.Builder#addConverterFactory(Factory) installed}\n * into the {@link Retrofit} instance.\n\nretrofitconverterFactoriesserverjsonprotocolBufferxmlresponsejake Wharton\n\n\n\n3. parameterHandlers\n\nprivate ParameterHandler<?> parseParameterAnnotation(\n        int p, Type type, Annotation[] annotations, Annotation annotation)\n\n        \n public interface GitHub {\n    @GET(\"/repos/{owner}/{repo}/contributors\")\n    Call<List<Contributor>> contributors(\n        @Path(\"owner\") String owner,\n        @Path(\"repo\") String repo);\n  }\n\nServiceMethodannotations @Path(\"owner\") String owner@PATHwrapperpath.value()\n\nelse if (annotation instanceof Path) {\n        Path path = (Path) annotation;\n        String name = path.value(); // String\n        validatePathName(p, name);\n        Converter<?, String> converter = retrofit.stringConverter(type, annotations);  \n        return new ParameterHandler.Path<>(name, converter, path.encoded());\n      }\nParameterHandler.Path<>ParameterHandler![](http://odzl05jxx.bkt.clouddn.com/ParameterHandlers.JPG)\nPathclassapply:\n @Override void apply(RequestBuilder builder, @Nullable T value) throws IOException {\n      builder.addPathParam(name, valueConverter.convert(value), encoded);\n    }\n\n\n    relativeUrl = relativeUrl.replace(\"{\" + name + \"}\", canonicalizeForPath(value, encoded));\napplyRequestRequestBildername\"owner\" ,valueStirng.replace()\nBuidler\n- callAdapter\n- createResponseConverter\n- parameterHandlers\nnewServiceMethod\n\nServiceMethod(Builder<T> builder) {\n    this.callFactory = builder.retrofit.callFactory();  // okhttp3.Call.Factory\n    this.callAdapter = builder.callAdapter; //\n    this.baseUrl = builder.retrofit.baseUrl(); //\n    this.responseConverter = builder.responseConverter; // GsonConverter\n    this.httpMethod = builder.httpMethod; //@GET \n    this.relativeUrl = builder.relativeUrl; //@Path\n    this.headers = builder.headers; //@Header\n    this.contentType = builder.contentType;  //application/json\n    this.hasBody = builder.hasBody; \n    this.isFormEncoded = builder.isFormEncoded;\n    this.isMultipart = builder.isMultipart;\n    this.parameterHandlers = builder.parameterHandlers;\n  }\n\n  \n```\n\n\n### 1.3 OkHttpCall\n:\n OkHttpCall<Object> okHttpCall = new OkHttpCall<>(serviceMethod, args);\n\nOkHttpCall\nokhttp3.Call rawCall //\nServiceMethod<T, ?> serviceMethod;  //serviceMethod\nexecute\n\n```java\n @Override public Response<T> execute() throws IOException {\n    okhttp3.Call call;\n    synchronized (this) {\n      if (executed) throw new IllegalStateException(\"Already executed.\");\n      executed = true;\n      call = rawCall;\n      if (call == null) {\n        try {\n          call = rawCall = createRawCall();\n        } catch (IOException | RuntimeException e) {\n        }\n      }\n    }\n    return parseResponse(call.execute()); //responseexecuteokHttp\n  }\n```\nDemo\nCall<List<Contributor>> call = github.contributors(\"square\", \"retrofit\");\nList<Contributor> contributors = call.execute().body();\nRetrofit2.Call.execute\n\ncreateRawCall\n```java\n okhttp3.Request request = serviceMethod.toRequest(args);\n okhttp3.Call call = serviceMethod.callFactory.newCall(request);\n    if (call == null) {\n      throw new NullPointerException(\"Call.Factory returned null.\");\n    }\n    return call;\n```\nparseRespnse\n```java\n  Response<T> parseResponse(okhttp3.Response rawResponse) throws IOException {\n    ResponseBody rawBody = rawResponse.body(); //\n    // Remove the body's source (the only stateful object) so we can pass the response along.\n    rawResponse = rawResponse.newBuilder()\n        .body(new NoContentResponseBody(rawBody.contentType(), rawBody.contentLength()))\n        .build(); //contentTypecontentLengthresponse200\n\n    int code = rawResponse.code();\n    if (code < 200 || code >= 300) {\n      try {\n        // Buffer the entire body to avoid future I/O.\n        ResponseBody bufferedBody = Utils.buffer(rawBody);\n        return Response.error(bufferedBody, rawResponse); //bodynullRetrofit2.Response\n      } finally {\n        rawBody.close();\n      }\n    }\n\n    if (code == 204 || code == 205) {\n      rawBody.close();\n      return Response.success(null, rawResponse);\n    }\n\n    ExceptionCatchingRequestBody catchingBody = new ExceptionCatchingRequestBody(rawBody);\n    try {\n      T body = serviceMethod.toResponse(catchingBody); //ServiceMethodresponseConverterresponseConverterbuilderRetrofitconverterFactories\n      return Response.success(body, rawResponse); //bodyRetrofit2.ResponseResponse.body()\n    } catch (RuntimeException e) {\n      // If the underlying source threw an exception, propagate that rather than indicating it was\n      // a runtime exception.\n      catchingBody.throwIfCaught();\n      throw e;\n    }\n  }\n```\nRetrofit1XX3XXerror\n\n\nexecuteenqueueOkHttp.Call.enqueue()RetrofitparseRespnseOkHttpRetrofitResponseAndroid \n\n### 1.4 AdapterFactory\nreturn serviceMethod.callAdapter.adapt(okHttpCall); //returnObject,\n\nserviceMethodcreateCallAdapterretrofitadapterFactories\n\n> CallAdapter<?, ?> adapter = adapterFactories.get(i).get(returnType, annotations, this)\n\nDefaultCallAdapterFactoryExecutorCallAdapterFactoryRxjavaCallAdapterFactory\n\n```java\nDefaultCallAdapterFactory\n\n return new CallAdapter<Call<?>>() {\n      @Override public Type responseType() {\n        return responseType;\n      }\n\n      @Override public <R> Call<R> adapt(Call<R> call) {\n        return call;\n      }\n    };\n\n\nExecutorCallAdapterFactory\n\n\n return new CallAdapter<Object, Call<?>>() {\n      @Override public Type responseType() {\n        return responseType;\n      }\n\n      @Override public Call<Object> adapt(Call<Object> call) {\n        return new ExecutorCallbackCall<>(callbackExecutor, call);\n      }\n    };\n```\n\n\ncallbackcallbackExecutorRetrofitresponse\n\n RxjavaCallAdapterFactory\n```java\n @Override\n  public CallAdapter<?> get(Type returnType, Annotation[] annotations, Retrofit retrofit) {\n    Class<?> rawType = getRawType(returnType);\n    String canonicalName = rawType.getCanonicalName();\n    boolean isSingle = \"rx.Single\".equals(canonicalName); //\n    boolean isCompletable = \"rx.Completable\".equals(canonicalName);\n    if (rawType != Observable.class && !isSingle && !isCompletable) {\n      return null;\n    }\n    if (!isCompletable && !(returnType instanceof ParameterizedType)) {\n      String name = isSingle ? \"Single\" : \"Observable\";\n      throw new IllegalStateException(name + \" return type must be parameterized\"\n          + \" as \" + name + \"<Foo> or \" + name + \"<? extends Foo>\");\n    }\n\n    if (isCompletable) {\n      // Add Completable-converter wrapper from a separate class. This defers classloading such that\n      // regular Observable operation can be leveraged without relying on this unstable RxJava API.\n      // Note that this has to be done separately since Completable doesn't have a parametrized\n      // type.\n      return CompletableHelper.createCallAdapter(scheduler);\n    }\n\n    CallAdapter<Observable<?>> callAdapter = getCallAdapter(returnType, scheduler);\n    if (isSingle) {\n      // Add Single-converter wrapper from a separate class. This defers classloading such that\n      // regular Observable operation can be leveraged without relying on this unstable RxJava API.\n      return SingleHelper.makeSingle(callAdapter);\n    }\n    return callAdapter;\n}\n```\n\n\n### 1.5 Retrofitbest practices\n\nretrofitjake whartontalk [making retrofit work for you](https://www.youtube.com/watch?v=t34AQlblSeE)best practice\n\n#### 1.5.1 end point \nclient,OkHttpClientdisk caching,connection pooling\n\n![endpoint](http://odzl05jxx.bkt.clouddn.com/different_end_point.JPG)    \n\nOkHttpClient,\n![](http://odzl05jxx.bkt.clouddn.com/different_end_point_teh_right_way.JPG)\n\n#### 1.5.2 HttpClient\n\nshallow copy\n```java\nOkHttpClient client = new OkHttpClient();\n\nOkHttpClient clientFoo = client.newBuilder().addInterceptor(new FooInterceptor()).build()\n\nOkHttpClient clientBar = client.newBuilder().readTimeOut(20,SECONDS)\n.writeTimeOut(20,SECONDS).build()\n```\n\n#### 1.5.3 Header\nOkHttpInterceptorurlheaderAPIHeaderApi,\n```java\n@POST(\"/login\")\n@Headers(\"No-Authentication: true\")\nCall<User> login(@Body LoginRequest request)\n```\n//headerserverInterceptor\nrequest.header(\"No-Authentication\")==null header\n\n\n#### 1.5.4 Convertersbytejava\n\naddConverterFactoryhttpclient\n![](http://odzl05jxx.bkt.clouddn.com/creating%20two%20convertors.JPG)\n\n\n#### 1.5.5 addConverterFactory\njsonprotoretrofit\n![](http://odzl05jxx.bkt.clouddn.com/different_response.JPG)\n\n\nUserProto,FriendJson ProtoextendsprotoType class instanceof protoserviceMethodgsongsonprotoConverter\n GsonConverterFactory, SimpleXmlConverterFactory converters , they say yes to everyThing. \n \n ```java\n @interface Xml {}\n @interface Json {}\n\n interface Service{\n    @GET(\"/User\") @Xml\n    Call<User> user(); // UserXML\n\n    @GET(\"/Friends\") @Json\n    Call<Friends> friends();  //FriendsJson \n }\n\nclass XmlOrJsonConverterFactroy extend Converter.Factory{\n    final Converter.Factory xml = ///;\n    final Converter.Factory json = //....;\n\n    @override\n    public Converter<ResponseBody,?> responseBodyConverter(Type type, Annotation[] annotations, Retrofit retrofit){\n        // annotations\n        for (Annotation annotation : annotations){\n            if(annotation.getClass == Xml.class){\n                return xml.reponseBodyConverter(type,annotations,retrofit);\n            }else if(annotation.getClass == Json.class){\n                // json \n            }\n            return null;  Converter..\n        }\n    }\n}\n[AnnotatedConverterFactory](https://github.com/square/retrofit/blob/master/samples/src/main/java/com/example/retrofit/AnnotatedConverters.java)\n```\n\n#### 1.5.6 metaData\ndelegatemetadataresponse\n![](http://odzl05jxx.bkt.clouddn.com/delegaet_converters.JPG)\nmetaData\nconvert\n\n#### 1.5.7 Rxjava\nCallAdapterFactoryConverterFactoryObservable\n\n![](http://odzl05jxx.bkt.clouddn.com/always_observe_on_mian_thread.JPG)\n\n\nRetrofitHttpClientConverterCallAdapter\n\n\n\n \n\n### 2. OkHttp\n\n\n### 3. A few 'ok' libraries\nwhy moshi ? why Retrofit call can be clone cheap\nwhy SinkedSource?\nwhy protolBuffer cost less ?\n\n\n\n### Ref\n1. [PaisyRetrofit](https://blog.piasy.com/2016/06/25/Understand-Retrofit/)\n2. [open-sourse-projetcRetrofit](https://github.com/android-cn/android-open-project-analysis/tree/master/tool-lib/network/retrofit)\n3. [Making Retrofit Work For You by Jake Wharton](https://www.youtube.com/watch?v=t34AQlblSeE)","source":"_posts/2017-07-01-it-began-with-a-few-bits.md","raw":"---\ntitle: 2017-07-01-it-began-with-a-few-bits\ndate: 2017-07-01 23:03:00\ntags:\n   - Retrofit\n   - OkHttp\n   - Okio\n---\n\n### This is gonna be nasty...... TL;DR\n![](http://odzl05jxx.bkt.clouddn.com/d653491fb55bec754b8471aa6a3f6eed.jpg?imageView2/2/w/600)\n\n<!--more-->\n\n### 1. Retrofit\n\n#### 1.1 \nRetrofitAndriodjava\nRetrofit\n```java\n public interface GitHub {\n    @GET(\"/repos/{owner}/{repo}/contributors\")\n    Call<List<Contributor>> contributors(\n        @Path(\"owner\") String owner,\n        @Path(\"repo\") String repo);\n  }\n\nRetrofit retrofit = new Retrofit.Builder()\n        .baseUrl(API_URL)   // end_point\n        .addConverterFactory(GsonConverterFactory.create())\n        .build();\n\n    // Create an instance of our GitHub API interface.\n    GitHub github = retrofit.create(GitHub.class);\n\n    // Create a call instance for looking up Retrofit contributors.\n    Call<List<Contributor>> call = github.contributors(\"square\", \"retrofit\");\n\n    // Fetch and print a list of the contributors to the library.\n    List<Contributor> contributors = call.execute().body();\n    for (Contributor contributor : contributors) {\n      System.out.println(contributor.login + \" (\" + contributor.contributions + \")\");\n    }\n\n```\n retroft.create ,\n\n\n>ServiceMethod serviceMethod = loadServiceMethod(method);\nOkHttpCall okHttpCall = new OkHttpCall<>(serviceMethod, args);\nreturn serviceMethod.callAdapter.adapt(okHttpCall);\n\n### 1.2 ServiceMethod\nloadServiceMethod(Method)invokemethodCacheBuilderServiceMethodcahceBuilder BuilderServiceMethod\n\nresult = new ServiceMethod.Builder(this, method).build();\n```java\n public Builder(Retrofit retrofit, Method method) {\n      this.retrofit = retrofit; //clientretrofit\n      this.method = method; \n      this.methodAnnotations = method.getAnnotations();\n      this.parameterTypes = method.getGenericParameterTypes();\n      this.parameterAnnotationsArray = method.getParameterAnnotations();\n    }\n```\n\n```java\nServiceMethodhttpMethodGETPOST,\ncontentTypeMimeType\n public ServiceMethod build() {\n        // 1.callAdapter,retrofitcallAdapter,RxjavAdapter,retrofitadapterFactoriesIllegalArgumentException\n      callAdapter = createCallAdapter();\n       //callAdapter retrofit.CallCallTCall<List<Contributor>>List<Contributor> adaptokHttpCallokHttpCallrespose\n        //java.lang.reflect.Type classresponseclass\n      responseType = callAdapter.responseType();\n        //2.respnseRequestconverter\n      responseConverter = createResponseConverter();\n      for (Annotation annotation : methodAnnotations) {\n        parseMethodAnnotation(annotation); //@GET\"GET\"StringGET\n      }\n      int parameterCount = parameterAnnotationsArray.length;\n      //3.ParameterHandler\n      parameterHandlers = new ParameterHandler<?>[parameterCount];\n      for (int p = 0; p < parameterCount; p++) {\n        Type parameterType = parameterTypes[p];\n        Annotation[] parameterAnnotations = parameterAnnotationsArray[p];\n        if (parameterAnnotations == null) {\n          throw parameterError(p, \"No Retrofit annotation found.\");\n        }\n        parameterHandlers[p] = parseParameter(p, parameterType, parameterAnnotations);\n        //\n         private ParameterHandler<?> parseParameter(int p, Type parameterType, Annotation[] annotations)\n         index\n         Response\n         @\n          private ParameterHandler<?> parseParameterAnnotation(\n        int p, Type type, Annotation[] annotations, Annotation annotation)Http300Http\n      }\n      return new ServiceMethod<>(this);\n    }\n}\n```\n\n\nBuider\n```java\n1. createCallAdapter  --->  retrofit.callAdapter(returnType, annotations); adapterFactories()****DefaultCallAdapterFactoryExecutorCallAdapterFactoryRxjavaCallAdapterFactoryretrofitinstallcallAdapter\nCallAdaterRetrofitCall adptResponse class\n\n2. createResponseConverter --->  retrofit.responseBodyConverter(responseType, annotations); \nRetrofit2.Converter<F, T> (fromTo)\n\nConvert objects to and from their representation in HTTP. Instances are created by {@linkplain\n * Factory a factory} which is {@linkplain Retrofit.Builder#addConverterFactory(Factory) installed}\n * into the {@link Retrofit} instance.\n\nretrofitconverterFactoriesserverjsonprotocolBufferxmlresponsejake Wharton\n\n\n\n3. parameterHandlers\n\nprivate ParameterHandler<?> parseParameterAnnotation(\n        int p, Type type, Annotation[] annotations, Annotation annotation)\n\n        \n public interface GitHub {\n    @GET(\"/repos/{owner}/{repo}/contributors\")\n    Call<List<Contributor>> contributors(\n        @Path(\"owner\") String owner,\n        @Path(\"repo\") String repo);\n  }\n\nServiceMethodannotations @Path(\"owner\") String owner@PATHwrapperpath.value()\n\nelse if (annotation instanceof Path) {\n        Path path = (Path) annotation;\n        String name = path.value(); // String\n        validatePathName(p, name);\n        Converter<?, String> converter = retrofit.stringConverter(type, annotations);  \n        return new ParameterHandler.Path<>(name, converter, path.encoded());\n      }\nParameterHandler.Path<>ParameterHandler![](http://odzl05jxx.bkt.clouddn.com/ParameterHandlers.JPG)\nPathclassapply:\n @Override void apply(RequestBuilder builder, @Nullable T value) throws IOException {\n      builder.addPathParam(name, valueConverter.convert(value), encoded);\n    }\n\n\n    relativeUrl = relativeUrl.replace(\"{\" + name + \"}\", canonicalizeForPath(value, encoded));\napplyRequestRequestBildername\"owner\" ,valueStirng.replace()\nBuidler\n- callAdapter\n- createResponseConverter\n- parameterHandlers\nnewServiceMethod\n\nServiceMethod(Builder<T> builder) {\n    this.callFactory = builder.retrofit.callFactory();  // okhttp3.Call.Factory\n    this.callAdapter = builder.callAdapter; //\n    this.baseUrl = builder.retrofit.baseUrl(); //\n    this.responseConverter = builder.responseConverter; // GsonConverter\n    this.httpMethod = builder.httpMethod; //@GET \n    this.relativeUrl = builder.relativeUrl; //@Path\n    this.headers = builder.headers; //@Header\n    this.contentType = builder.contentType;  //application/json\n    this.hasBody = builder.hasBody; \n    this.isFormEncoded = builder.isFormEncoded;\n    this.isMultipart = builder.isMultipart;\n    this.parameterHandlers = builder.parameterHandlers;\n  }\n\n  \n```\n\n\n### 1.3 OkHttpCall\n:\n OkHttpCall<Object> okHttpCall = new OkHttpCall<>(serviceMethod, args);\n\nOkHttpCall\nokhttp3.Call rawCall //\nServiceMethod<T, ?> serviceMethod;  //serviceMethod\nexecute\n\n```java\n @Override public Response<T> execute() throws IOException {\n    okhttp3.Call call;\n    synchronized (this) {\n      if (executed) throw new IllegalStateException(\"Already executed.\");\n      executed = true;\n      call = rawCall;\n      if (call == null) {\n        try {\n          call = rawCall = createRawCall();\n        } catch (IOException | RuntimeException e) {\n        }\n      }\n    }\n    return parseResponse(call.execute()); //responseexecuteokHttp\n  }\n```\nDemo\nCall<List<Contributor>> call = github.contributors(\"square\", \"retrofit\");\nList<Contributor> contributors = call.execute().body();\nRetrofit2.Call.execute\n\ncreateRawCall\n```java\n okhttp3.Request request = serviceMethod.toRequest(args);\n okhttp3.Call call = serviceMethod.callFactory.newCall(request);\n    if (call == null) {\n      throw new NullPointerException(\"Call.Factory returned null.\");\n    }\n    return call;\n```\nparseRespnse\n```java\n  Response<T> parseResponse(okhttp3.Response rawResponse) throws IOException {\n    ResponseBody rawBody = rawResponse.body(); //\n    // Remove the body's source (the only stateful object) so we can pass the response along.\n    rawResponse = rawResponse.newBuilder()\n        .body(new NoContentResponseBody(rawBody.contentType(), rawBody.contentLength()))\n        .build(); //contentTypecontentLengthresponse200\n\n    int code = rawResponse.code();\n    if (code < 200 || code >= 300) {\n      try {\n        // Buffer the entire body to avoid future I/O.\n        ResponseBody bufferedBody = Utils.buffer(rawBody);\n        return Response.error(bufferedBody, rawResponse); //bodynullRetrofit2.Response\n      } finally {\n        rawBody.close();\n      }\n    }\n\n    if (code == 204 || code == 205) {\n      rawBody.close();\n      return Response.success(null, rawResponse);\n    }\n\n    ExceptionCatchingRequestBody catchingBody = new ExceptionCatchingRequestBody(rawBody);\n    try {\n      T body = serviceMethod.toResponse(catchingBody); //ServiceMethodresponseConverterresponseConverterbuilderRetrofitconverterFactories\n      return Response.success(body, rawResponse); //bodyRetrofit2.ResponseResponse.body()\n    } catch (RuntimeException e) {\n      // If the underlying source threw an exception, propagate that rather than indicating it was\n      // a runtime exception.\n      catchingBody.throwIfCaught();\n      throw e;\n    }\n  }\n```\nRetrofit1XX3XXerror\n\n\nexecuteenqueueOkHttp.Call.enqueue()RetrofitparseRespnseOkHttpRetrofitResponseAndroid \n\n### 1.4 AdapterFactory\nreturn serviceMethod.callAdapter.adapt(okHttpCall); //returnObject,\n\nserviceMethodcreateCallAdapterretrofitadapterFactories\n\n> CallAdapter<?, ?> adapter = adapterFactories.get(i).get(returnType, annotations, this)\n\nDefaultCallAdapterFactoryExecutorCallAdapterFactoryRxjavaCallAdapterFactory\n\n```java\nDefaultCallAdapterFactory\n\n return new CallAdapter<Call<?>>() {\n      @Override public Type responseType() {\n        return responseType;\n      }\n\n      @Override public <R> Call<R> adapt(Call<R> call) {\n        return call;\n      }\n    };\n\n\nExecutorCallAdapterFactory\n\n\n return new CallAdapter<Object, Call<?>>() {\n      @Override public Type responseType() {\n        return responseType;\n      }\n\n      @Override public Call<Object> adapt(Call<Object> call) {\n        return new ExecutorCallbackCall<>(callbackExecutor, call);\n      }\n    };\n```\n\n\ncallbackcallbackExecutorRetrofitresponse\n\n RxjavaCallAdapterFactory\n```java\n @Override\n  public CallAdapter<?> get(Type returnType, Annotation[] annotations, Retrofit retrofit) {\n    Class<?> rawType = getRawType(returnType);\n    String canonicalName = rawType.getCanonicalName();\n    boolean isSingle = \"rx.Single\".equals(canonicalName); //\n    boolean isCompletable = \"rx.Completable\".equals(canonicalName);\n    if (rawType != Observable.class && !isSingle && !isCompletable) {\n      return null;\n    }\n    if (!isCompletable && !(returnType instanceof ParameterizedType)) {\n      String name = isSingle ? \"Single\" : \"Observable\";\n      throw new IllegalStateException(name + \" return type must be parameterized\"\n          + \" as \" + name + \"<Foo> or \" + name + \"<? extends Foo>\");\n    }\n\n    if (isCompletable) {\n      // Add Completable-converter wrapper from a separate class. This defers classloading such that\n      // regular Observable operation can be leveraged without relying on this unstable RxJava API.\n      // Note that this has to be done separately since Completable doesn't have a parametrized\n      // type.\n      return CompletableHelper.createCallAdapter(scheduler);\n    }\n\n    CallAdapter<Observable<?>> callAdapter = getCallAdapter(returnType, scheduler);\n    if (isSingle) {\n      // Add Single-converter wrapper from a separate class. This defers classloading such that\n      // regular Observable operation can be leveraged without relying on this unstable RxJava API.\n      return SingleHelper.makeSingle(callAdapter);\n    }\n    return callAdapter;\n}\n```\n\n\n### 1.5 Retrofitbest practices\n\nretrofitjake whartontalk [making retrofit work for you](https://www.youtube.com/watch?v=t34AQlblSeE)best practice\n\n#### 1.5.1 end point \nclient,OkHttpClientdisk caching,connection pooling\n\n![endpoint](http://odzl05jxx.bkt.clouddn.com/different_end_point.JPG)    \n\nOkHttpClient,\n![](http://odzl05jxx.bkt.clouddn.com/different_end_point_teh_right_way.JPG)\n\n#### 1.5.2 HttpClient\n\nshallow copy\n```java\nOkHttpClient client = new OkHttpClient();\n\nOkHttpClient clientFoo = client.newBuilder().addInterceptor(new FooInterceptor()).build()\n\nOkHttpClient clientBar = client.newBuilder().readTimeOut(20,SECONDS)\n.writeTimeOut(20,SECONDS).build()\n```\n\n#### 1.5.3 Header\nOkHttpInterceptorurlheaderAPIHeaderApi,\n```java\n@POST(\"/login\")\n@Headers(\"No-Authentication: true\")\nCall<User> login(@Body LoginRequest request)\n```\n//headerserverInterceptor\nrequest.header(\"No-Authentication\")==null header\n\n\n#### 1.5.4 Convertersbytejava\n\naddConverterFactoryhttpclient\n![](http://odzl05jxx.bkt.clouddn.com/creating%20two%20convertors.JPG)\n\n\n#### 1.5.5 addConverterFactory\njsonprotoretrofit\n![](http://odzl05jxx.bkt.clouddn.com/different_response.JPG)\n\n\nUserProto,FriendJson ProtoextendsprotoType class instanceof protoserviceMethodgsongsonprotoConverter\n GsonConverterFactory, SimpleXmlConverterFactory converters , they say yes to everyThing. \n \n ```java\n @interface Xml {}\n @interface Json {}\n\n interface Service{\n    @GET(\"/User\") @Xml\n    Call<User> user(); // UserXML\n\n    @GET(\"/Friends\") @Json\n    Call<Friends> friends();  //FriendsJson \n }\n\nclass XmlOrJsonConverterFactroy extend Converter.Factory{\n    final Converter.Factory xml = ///;\n    final Converter.Factory json = //....;\n\n    @override\n    public Converter<ResponseBody,?> responseBodyConverter(Type type, Annotation[] annotations, Retrofit retrofit){\n        // annotations\n        for (Annotation annotation : annotations){\n            if(annotation.getClass == Xml.class){\n                return xml.reponseBodyConverter(type,annotations,retrofit);\n            }else if(annotation.getClass == Json.class){\n                // json \n            }\n            return null;  Converter..\n        }\n    }\n}\n[AnnotatedConverterFactory](https://github.com/square/retrofit/blob/master/samples/src/main/java/com/example/retrofit/AnnotatedConverters.java)\n```\n\n#### 1.5.6 metaData\ndelegatemetadataresponse\n![](http://odzl05jxx.bkt.clouddn.com/delegaet_converters.JPG)\nmetaData\nconvert\n\n#### 1.5.7 Rxjava\nCallAdapterFactoryConverterFactoryObservable\n\n![](http://odzl05jxx.bkt.clouddn.com/always_observe_on_mian_thread.JPG)\n\n\nRetrofitHttpClientConverterCallAdapter\n\n\n\n \n\n### 2. OkHttp\n\n\n### 3. A few 'ok' libraries\nwhy moshi ? why Retrofit call can be clone cheap\nwhy SinkedSource?\nwhy protolBuffer cost less ?\n\n\n\n### Ref\n1. [PaisyRetrofit](https://blog.piasy.com/2016/06/25/Understand-Retrofit/)\n2. [open-sourse-projetcRetrofit](https://github.com/android-cn/android-open-project-analysis/tree/master/tool-lib/network/retrofit)\n3. [Making Retrofit Work For You by Jake Wharton](https://www.youtube.com/watch?v=t34AQlblSeE)","slug":"2017-07-01-it-began-with-a-few-bits","published":1,"updated":"2017-07-06T13:17:45.479Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj50afgy0002ei4vraietus0u","content":"<h3 id=\"This-is-gonna-be-nasty-TL-DR\"><a href=\"#This-is-gonna-be-nasty-TL-DR\" class=\"headerlink\" title=\"This is gonna be nasty TL;DR\"></a>This is gonna be nasty TL;DR</h3><p><img src=\"http://odzl05jxx.bkt.clouddn.com/d653491fb55bec754b8471aa6a3f6eed.jpg?imageView2/2/w/600\" alt=\"\"></p>\n<a id=\"more\"></a>\n<h3 id=\"1-Retrofit\"><a href=\"#1-Retrofit\" class=\"headerlink\" title=\"1. Retrofit\"></a>1. Retrofit</h3><h4 id=\"1-1-\"><a href=\"#1-1-\" class=\"headerlink\" title=\"1.1 \"></a>1.1 </h4><p>RetrofitAndriodjava<br>Retrofit<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div></pre></td><td class=\"code\"><pre><div class=\"line\"> <span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">GitHub</span> </span>&#123;</div><div class=\"line\">    <span class=\"meta\">@GET</span>(<span class=\"string\">\"/repos/&#123;owner&#125;/&#123;repo&#125;/contributors\"</span>)</div><div class=\"line\">    Call&lt;List&lt;Contributor&gt;&gt; contributors(</div><div class=\"line\">        <span class=\"meta\">@Path</span>(<span class=\"string\">\"owner\"</span>) String owner,</div><div class=\"line\">        <span class=\"meta\">@Path</span>(<span class=\"string\">\"repo\"</span>) String repo);</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">Retrofit retrofit = <span class=\"keyword\">new</span> Retrofit.Builder()</div><div class=\"line\">        .baseUrl(API_URL)   <span class=\"comment\">// end_point</span></div><div class=\"line\">        .addConverterFactory(GsonConverterFactory.create())</div><div class=\"line\">        .build();</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// Create an instance of our GitHub API interface.</span></div><div class=\"line\">    GitHub github = retrofit.create(GitHub.class);</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// Create a call instance for looking up Retrofit contributors.</span></div><div class=\"line\">    Call&lt;List&lt;Contributor&gt;&gt; call = github.contributors(<span class=\"string\">\"square\"</span>, <span class=\"string\">\"retrofit\"</span>);</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// Fetch and print a list of the contributors to the library.</span></div><div class=\"line\">    List&lt;Contributor&gt; contributors = call.execute().body();</div><div class=\"line\">    <span class=\"keyword\">for</span> (Contributor contributor : contributors) &#123;</div><div class=\"line\">      System.out.println(contributor.login + <span class=\"string\">\" (\"</span> + contributor.contributions + <span class=\"string\">\")\"</span>);</div><div class=\"line\">    &#125;</div></pre></td></tr></table></figure></p>\n<p> retroft.create ,</p>\n<blockquote>\n<p>ServiceMethod serviceMethod = loadServiceMethod(method);<br>OkHttpCall okHttpCall = new OkHttpCall&lt;&gt;(serviceMethod, args);<br>return serviceMethod.callAdapter.adapt(okHttpCall);</p>\n</blockquote>\n<h3 id=\"1-2-ServiceMethod\"><a href=\"#1-2-ServiceMethod\" class=\"headerlink\" title=\"1.2 ServiceMethod\"></a>1.2 ServiceMethod</h3><p>loadServiceMethod(Method)invokemethodCacheBuilderServiceMethodcahceBuilder BuilderServiceMethod</p>\n<p>result = new ServiceMethod.Builder(this, method).build();<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Builder</span><span class=\"params\">(Retrofit retrofit, Method method)</span> </span>&#123;</div><div class=\"line\">     <span class=\"keyword\">this</span>.retrofit = retrofit; <span class=\"comment\">//clientretrofit</span></div><div class=\"line\">     <span class=\"keyword\">this</span>.method = method; </div><div class=\"line\">     <span class=\"keyword\">this</span>.methodAnnotations = method.getAnnotations();</div><div class=\"line\">     <span class=\"keyword\">this</span>.parameterTypes = method.getGenericParameterTypes();</div><div class=\"line\">     <span class=\"keyword\">this</span>.parameterAnnotationsArray = method.getParameterAnnotations();</div><div class=\"line\">   &#125;</div></pre></td></tr></table></figure></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div></pre></td><td class=\"code\"><pre><div class=\"line\">ServiceMethodhttpMethodGETPOST,</div><div class=\"line\">contentTypeMimeType</div><div class=\"line\"> <span class=\"function\"><span class=\"keyword\">public</span> ServiceMethod <span class=\"title\">build</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"comment\">// 1.callAdapter,retrofitcallAdapter,RxjavAdapter,retrofitadapterFactoriesIllegalArgumentException</span></div><div class=\"line\">      callAdapter = createCallAdapter();</div><div class=\"line\">       <span class=\"comment\">//callAdapter retrofit.CallCallTCall&lt;List&lt;Contributor&gt;&gt;List&lt;Contributor&gt; adaptokHttpCallokHttpCallrespose</span></div><div class=\"line\">        <span class=\"comment\">//java.lang.reflect.Type classresponseclass</span></div><div class=\"line\">      responseType = callAdapter.responseType();</div><div class=\"line\">        <span class=\"comment\">//2.respnseRequestconverter</span></div><div class=\"line\">      responseConverter = createResponseConverter();</div><div class=\"line\">      <span class=\"keyword\">for</span> (Annotation annotation : methodAnnotations) &#123;</div><div class=\"line\">        parseMethodAnnotation(annotation); <span class=\"comment\">//@GET\"GET\"StringGET</span></div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">int</span> parameterCount = parameterAnnotationsArray.length;</div><div class=\"line\">      <span class=\"comment\">//3.ParameterHandler</span></div><div class=\"line\">      parameterHandlers = <span class=\"keyword\">new</span> ParameterHandler&lt;?&gt;[parameterCount];</div><div class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> p = <span class=\"number\">0</span>; p &lt; parameterCount; p++) &#123;</div><div class=\"line\">        Type parameterType = parameterTypes[p];</div><div class=\"line\">        Annotation[] parameterAnnotations = parameterAnnotationsArray[p];</div><div class=\"line\">        <span class=\"keyword\">if</span> (parameterAnnotations == <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">          <span class=\"keyword\">throw</span> parameterError(p, <span class=\"string\">\"No Retrofit annotation found.\"</span>);</div><div class=\"line\">        &#125;</div><div class=\"line\">        parameterHandlers[p] = parseParameter(p, parameterType, parameterAnnotations);</div><div class=\"line\">        <span class=\"comment\">//</span></div><div class=\"line\">         <span class=\"keyword\">private</span> ParameterHandler&lt;?&gt; parseParameter(<span class=\"keyword\">int</span> p, Type parameterType, Annotation[] annotations)</div><div class=\"line\">         index</div><div class=\"line\">         Response</div><div class=\"line\">         @</div><div class=\"line\">          <span class=\"keyword\">private</span> ParameterHandler&lt;?&gt; parseParameterAnnotation(</div><div class=\"line\">        <span class=\"keyword\">int</span> p, Type type, Annotation[] annotations, Annotation annotation)Http<span class=\"number\">300</span>Http</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> ServiceMethod&lt;&gt;(<span class=\"keyword\">this</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>Buider<br><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div></pre></td><td class=\"code\"><pre><div class=\"line\">1. createCallAdapter  ---&gt;  retrofit.callAdapter(returnType, annotations); adapterFactories()****DefaultCallAdapterFactoryExecutorCallAdapterFactoryRxjavaCallAdapterFactoryretrofitinstallcallAdapter</div><div class=\"line\">CallAdaterRetrofitCall adptResponse class</div><div class=\"line\"></div><div class=\"line\">2. createResponseConverter ---&gt;  retrofit.responseBodyConverter(responseType, annotations); </div><div class=\"line\">Retrofit2.Converter&lt;F, T&gt; (fromTo)</div><div class=\"line\"></div><div class=\"line\">Convert objects to and from their representation in HTTP. Instances are created by &#123;@linkplain</div><div class=\"line\"> * Factory a factory&#125; which is &#123;@linkplain Retrofit.Builder#addConverterFactory(Factory) installed&#125;</div><div class=\"line\"> * into the &#123;@link Retrofit&#125; instance.</div><div class=\"line\"></div><div class=\"line\">retrofitconverterFactoriesserverjsonprotocolBufferxmlresponsejake Wharton</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">3. parameterHandlers</div><div class=\"line\"></div><div class=\"line\">private ParameterHandler&lt;?&gt; parseParameterAnnotation(</div><div class=\"line\">        int p, Type type, Annotation[] annotations, Annotation annotation)</div><div class=\"line\"></div><div class=\"line\">        </div><div class=\"line\"> public interface GitHub &#123;</div><div class=\"line\">    @GET(\"/repos/&#123;owner&#125;/&#123;repo&#125;/contributors\")</div><div class=\"line\">    Call&lt;List&lt;Contributor&gt;&gt; contributors(</div><div class=\"line\">        @Path(\"owner\") String owner,</div><div class=\"line\">        @Path(\"repo\") String repo);</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">ServiceMethodannotations @Path(\"owner\") String owner@PATHwrapperpath.value()</div><div class=\"line\"></div><div class=\"line\">else if (annotation instanceof Path) &#123;</div><div class=\"line\">        Path path = (Path) annotation;</div><div class=\"line\">        String name = path.value(); // String</div><div class=\"line\">        validatePathName(p, name);</div><div class=\"line\">        Converter&lt;?, String&gt; converter = retrofit.stringConverter(type, annotations);  </div><div class=\"line\">        return new ParameterHandler.Path&lt;&gt;(name, converter, path.encoded());</div><div class=\"line\">      &#125;</div><div class=\"line\">ParameterHandler.Path&lt;&gt;ParameterHandler![](http://odzl05jxx.bkt.clouddn.com/ParameterHandlers.JPG)</div><div class=\"line\">Pathclassapply:</div><div class=\"line\"> @Override void apply(RequestBuilder builder, @Nullable T value) throws IOException &#123;</div><div class=\"line\">      builder.addPathParam(name, valueConverter.convert(value), encoded);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">    relativeUrl = relativeUrl.replace(\"&#123;\" + name + \"&#125;\", canonicalizeForPath(value, encoded));</div><div class=\"line\">applyRequestRequestBildername\"owner\" ,valueStirng.replace()</div><div class=\"line\">Buidler</div><div class=\"line\">- callAdapter</div><div class=\"line\">- createResponseConverter</div><div class=\"line\">- parameterHandlers</div><div class=\"line\">newServiceMethod</div><div class=\"line\"></div><div class=\"line\">ServiceMethod(Builder&lt;T&gt; builder) &#123;</div><div class=\"line\">    this.callFactory = builder.retrofit.callFactory();  // okhttp3.Call.Factory</div><div class=\"line\">    this.callAdapter = builder.callAdapter; //</div><div class=\"line\">    this.baseUrl = builder.retrofit.baseUrl(); //</div><div class=\"line\">    this.responseConverter = builder.responseConverter; // GsonConverter</div><div class=\"line\">    this.httpMethod = builder.httpMethod; //@GET </div><div class=\"line\">    this.relativeUrl = builder.relativeUrl; //@Path</div><div class=\"line\">    this.headers = builder.headers; //@Header</div><div class=\"line\">    this.contentType = builder.contentType;  //application/json</div><div class=\"line\">    this.hasBody = builder.hasBody; </div><div class=\"line\">    this.isFormEncoded = builder.isFormEncoded;</div><div class=\"line\">    this.isMultipart = builder.isMultipart;</div><div class=\"line\">    this.parameterHandlers = builder.parameterHandlers;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\"></div></pre></td></tr></table></figure></p>\n<h3 id=\"1-3-OkHttpCall\"><a href=\"#1-3-OkHttpCall\" class=\"headerlink\" title=\"1.3 OkHttpCall\"></a>1.3 OkHttpCall</h3><p>:<br> OkHttpCall<Object> okHttpCall = new OkHttpCall&lt;&gt;(serviceMethod, args);</p>\n<p>OkHttpCall<br>okhttp3.Call rawCall //<br>ServiceMethod<T, ?> serviceMethod;  //serviceMethod<br>execute</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">@Override</span> <span class=\"function\"><span class=\"keyword\">public</span> Response&lt;T&gt; <span class=\"title\">execute</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</div><div class=\"line\">   okhttp3.Call call;</div><div class=\"line\">   <span class=\"keyword\">synchronized</span> (<span class=\"keyword\">this</span>) &#123;</div><div class=\"line\">     <span class=\"keyword\">if</span> (executed) <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> IllegalStateException(<span class=\"string\">\"Already executed.\"</span>);</div><div class=\"line\">     executed = <span class=\"keyword\">true</span>;</div><div class=\"line\">     call = rawCall;</div><div class=\"line\">     <span class=\"keyword\">if</span> (call == <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">       <span class=\"keyword\">try</span> &#123;</div><div class=\"line\">         call = rawCall = createRawCall();</div><div class=\"line\">       &#125; <span class=\"keyword\">catch</span> (IOException | RuntimeException e) &#123;</div><div class=\"line\">       &#125;</div><div class=\"line\">     &#125;</div><div class=\"line\">   &#125;</div><div class=\"line\">   <span class=\"keyword\">return</span> parseResponse(call.execute()); <span class=\"comment\">//responseexecuteokHttp</span></div><div class=\"line\"> &#125;</div></pre></td></tr></table></figure>\n<p>Demo<br>Call<List<Contributor>&gt; call = github.contributors(square, retrofit);<br>List<Contributor> contributors = call.execute().body();<br>Retrofit2.Call.execute</p>\n<p>createRawCall<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">okhttp3.Request request = serviceMethod.toRequest(args);</div><div class=\"line\">okhttp3.Call call = serviceMethod.callFactory.newCall(request);</div><div class=\"line\">   <span class=\"keyword\">if</span> (call == <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">     <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> NullPointerException(<span class=\"string\">\"Call.Factory returned null.\"</span>);</div><div class=\"line\">   &#125;</div><div class=\"line\">   <span class=\"keyword\">return</span> call;</div></pre></td></tr></table></figure></p>\n<p>parseRespnse<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\">Response&lt;T&gt; <span class=\"title\">parseResponse</span><span class=\"params\">(okhttp3.Response rawResponse)</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</div><div class=\"line\">  ResponseBody rawBody = rawResponse.body(); <span class=\"comment\">//</span></div><div class=\"line\">  <span class=\"comment\">// Remove the body's source (the only stateful object) so we can pass the response along.</span></div><div class=\"line\">  rawResponse = rawResponse.newBuilder()</div><div class=\"line\">      .body(<span class=\"keyword\">new</span> NoContentResponseBody(rawBody.contentType(), rawBody.contentLength()))</div><div class=\"line\">      .build(); <span class=\"comment\">//contentTypecontentLengthresponse200</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">int</span> code = rawResponse.code();</div><div class=\"line\">  <span class=\"keyword\">if</span> (code &lt; <span class=\"number\">200</span> || code &gt;= <span class=\"number\">300</span>) &#123;</div><div class=\"line\">    <span class=\"keyword\">try</span> &#123;</div><div class=\"line\">      <span class=\"comment\">// Buffer the entire body to avoid future I/O.</span></div><div class=\"line\">      ResponseBody bufferedBody = Utils.buffer(rawBody);</div><div class=\"line\">      <span class=\"keyword\">return</span> Response.error(bufferedBody, rawResponse); <span class=\"comment\">//bodynullRetrofit2.Response</span></div><div class=\"line\">    &#125; <span class=\"keyword\">finally</span> &#123;</div><div class=\"line\">      rawBody.close();</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">if</span> (code == <span class=\"number\">204</span> || code == <span class=\"number\">205</span>) &#123;</div><div class=\"line\">    rawBody.close();</div><div class=\"line\">    <span class=\"keyword\">return</span> Response.success(<span class=\"keyword\">null</span>, rawResponse);</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  ExceptionCatchingRequestBody catchingBody = <span class=\"keyword\">new</span> ExceptionCatchingRequestBody(rawBody);</div><div class=\"line\">  <span class=\"keyword\">try</span> &#123;</div><div class=\"line\">    T body = serviceMethod.toResponse(catchingBody); <span class=\"comment\">//ServiceMethodresponseConverterresponseConverterbuilderRetrofitconverterFactories</span></div><div class=\"line\">    <span class=\"keyword\">return</span> Response.success(body, rawResponse); <span class=\"comment\">//bodyRetrofit2.ResponseResponse.body()</span></div><div class=\"line\">  &#125; <span class=\"keyword\">catch</span> (RuntimeException e) &#123;</div><div class=\"line\">    <span class=\"comment\">// If the underlying source threw an exception, propagate that rather than indicating it was</span></div><div class=\"line\">    <span class=\"comment\">// a runtime exception.</span></div><div class=\"line\">    catchingBody.throwIfCaught();</div><div class=\"line\">    <span class=\"keyword\">throw</span> e;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>Retrofit1XX3XXerror</p>\n<p>executeenqueueOkHttp.Call.enqueue()RetrofitparseRespnseOkHttpRetrofitResponseAndroid </p>\n<h3 id=\"1-4-AdapterFactory\"><a href=\"#1-4-AdapterFactory\" class=\"headerlink\" title=\"1.4 AdapterFactory\"></a>1.4 AdapterFactory</h3><p>return serviceMethod.callAdapter.adapt(okHttpCall); //returnObject,</p>\n<p>serviceMethodcreateCallAdapterretrofitadapterFactories</p>\n<blockquote>\n<p>CallAdapter&lt;?, ?&gt; adapter = adapterFactories.get(i).get(returnType, annotations, this)</p>\n</blockquote>\n<p>DefaultCallAdapterFactoryExecutorCallAdapterFactoryRxjavaCallAdapterFactory</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div></pre></td><td class=\"code\"><pre><div class=\"line\">DefaultCallAdapterFactory</div><div class=\"line\"></div><div class=\"line\"> <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> CallAdapter&lt;Call&lt;?&gt;&gt;() &#123;</div><div class=\"line\">      <span class=\"meta\">@Override</span> <span class=\"function\"><span class=\"keyword\">public</span> Type <span class=\"title\">responseType</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> responseType;</div><div class=\"line\">      &#125;</div><div class=\"line\"></div><div class=\"line\">      <span class=\"meta\">@Override</span> <span class=\"keyword\">public</span> &lt;R&gt; <span class=\"function\">Call&lt;R&gt; <span class=\"title\">adapt</span><span class=\"params\">(Call&lt;R&gt; call)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> call;</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">ExecutorCallAdapterFactory</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"> <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> CallAdapter&lt;Object, Call&lt;?&gt;&gt;() &#123;</div><div class=\"line\">      <span class=\"meta\">@Override</span> <span class=\"function\"><span class=\"keyword\">public</span> Type <span class=\"title\">responseType</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> responseType;</div><div class=\"line\">      &#125;</div><div class=\"line\"></div><div class=\"line\">      <span class=\"meta\">@Override</span> <span class=\"function\"><span class=\"keyword\">public</span> Call&lt;Object&gt; <span class=\"title\">adapt</span><span class=\"params\">(Call&lt;Object&gt; call)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> ExecutorCallbackCall&lt;&gt;(callbackExecutor, call);</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;;</div></pre></td></tr></table></figure>\n<p>callbackcallbackExecutorRetrofitresponse</p>\n<p> RxjavaCallAdapterFactory<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div></pre></td><td class=\"code\"><pre><div class=\"line\"> <span class=\"meta\">@Override</span></div><div class=\"line\">  <span class=\"keyword\">public</span> CallAdapter&lt;?&gt; get(Type returnType, Annotation[] annotations, Retrofit retrofit) &#123;</div><div class=\"line\">    Class&lt;?&gt; rawType = getRawType(returnType);</div><div class=\"line\">    String canonicalName = rawType.getCanonicalName();</div><div class=\"line\">    <span class=\"keyword\">boolean</span> isSingle = <span class=\"string\">\"rx.Single\"</span>.equals(canonicalName); <span class=\"comment\">//</span></div><div class=\"line\">    <span class=\"keyword\">boolean</span> isCompletable = <span class=\"string\">\"rx.Completable\"</span>.equals(canonicalName);</div><div class=\"line\">    <span class=\"keyword\">if</span> (rawType != Observable.class &amp;&amp; !isSingle &amp;&amp; !isCompletable) &#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">if</span> (!isCompletable &amp;&amp; !(returnType <span class=\"keyword\">instanceof</span> ParameterizedType)) &#123;</div><div class=\"line\">      String name = isSingle ? <span class=\"string\">\"Single\"</span> : <span class=\"string\">\"Observable\"</span>;</div><div class=\"line\">      <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> IllegalStateException(name + <span class=\"string\">\" return type must be parameterized\"</span></div><div class=\"line\">          + <span class=\"string\">\" as \"</span> + name + <span class=\"string\">\"&lt;Foo&gt; or \"</span> + name + <span class=\"string\">\"&lt;? extends Foo&gt;\"</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">if</span> (isCompletable) &#123;</div><div class=\"line\">      <span class=\"comment\">// Add Completable-converter wrapper from a separate class. This defers classloading such that</span></div><div class=\"line\">      <span class=\"comment\">// regular Observable operation can be leveraged without relying on this unstable RxJava API.</span></div><div class=\"line\">      <span class=\"comment\">// Note that this has to be done separately since Completable doesn't have a parametrized</span></div><div class=\"line\">      <span class=\"comment\">// type.</span></div><div class=\"line\">      <span class=\"keyword\">return</span> CompletableHelper.createCallAdapter(scheduler);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    CallAdapter&lt;Observable&lt;?&gt;&gt; callAdapter = getCallAdapter(returnType, scheduler);</div><div class=\"line\">    <span class=\"keyword\">if</span> (isSingle) &#123;</div><div class=\"line\">      <span class=\"comment\">// Add Single-converter wrapper from a separate class. This defers classloading such that</span></div><div class=\"line\">      <span class=\"comment\">// regular Observable operation can be leveraged without relying on this unstable RxJava API.</span></div><div class=\"line\">      <span class=\"keyword\">return</span> SingleHelper.makeSingle(callAdapter);</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> callAdapter;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<h3 id=\"1-5-Retrofitbest-practices\"><a href=\"#1-5-Retrofitbest-practices\" class=\"headerlink\" title=\"1.5 Retrofitbest practices\"></a>1.5 Retrofitbest practices</h3><p>retrofitjake whartontalk <a href=\"https://www.youtube.com/watch?v=t34AQlblSeE\">making retrofit work for you</a>best practice</p>\n<h4 id=\"1-5-1-end-point-\"><a href=\"#1-5-1-end-point-\" class=\"headerlink\" title=\"1.5.1 end point \"></a>1.5.1 end point </h4><p>client,OkHttpClientdisk caching,connection pooling</p>\n<p><img src=\"http://odzl05jxx.bkt.clouddn.com/different_end_point.JPG\" alt=\"endpoint\">    </p>\n<p>OkHttpClient,<br><img src=\"http://odzl05jxx.bkt.clouddn.com/different_end_point_teh_right_way.JPG\" alt=\"\"></p>\n<h4 id=\"1-5-2-HttpClient\"><a href=\"#1-5-2-HttpClient\" class=\"headerlink\" title=\"1.5.2 HttpClient\"></a>1.5.2 HttpClient</h4><p>shallow copy<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">OkHttpClient client = <span class=\"keyword\">new</span> OkHttpClient();</div><div class=\"line\"></div><div class=\"line\">OkHttpClient clientFoo = client.newBuilder().addInterceptor(<span class=\"keyword\">new</span> FooInterceptor()).build()</div><div class=\"line\"></div><div class=\"line\">OkHttpClient clientBar = client.newBuilder().readTimeOut(<span class=\"number\">20</span>,SECONDS)</div><div class=\"line\">.writeTimeOut(<span class=\"number\">20</span>,SECONDS).build()</div></pre></td></tr></table></figure></p>\n<h4 id=\"1-5-3-Header\"><a href=\"#1-5-3-Header\" class=\"headerlink\" title=\"1.5.3 Header\"></a>1.5.3 Header</h4><p>OkHttpInterceptorurlheaderAPIHeaderApi,<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">@POST</span>(<span class=\"string\">\"/login\"</span>)</div><div class=\"line\"><span class=\"meta\">@Headers</span>(<span class=\"string\">\"No-Authentication: true\"</span>)</div><div class=\"line\"><span class=\"function\">Call&lt;User&gt; <span class=\"title\">login</span><span class=\"params\">(@Body LoginRequest request)</span></span></div></pre></td></tr></table></figure></p>\n<p>//headerserverInterceptor<br>request.header(No-Authentication)==null header<br></p>\n<h4 id=\"1-5-4-Convertersbytejava\"><a href=\"#1-5-4-Convertersbytejava\" class=\"headerlink\" title=\"1.5.4 Convertersbytejava\"></a>1.5.4 Convertersbytejava</h4><p>addConverterFactoryhttpclient<br><img src=\"http://odzl05jxx.bkt.clouddn.com/creating%20two%20convertors.JPG\" alt=\"\"></p>\n<h4 id=\"1-5-5-addConverterFactory\"><a href=\"#1-5-5-addConverterFactory\" class=\"headerlink\" title=\"1.5.5 addConverterFactory\"></a>1.5.5 addConverterFactory</h4><p>jsonprotoretrofit<br><img src=\"http://odzl05jxx.bkt.clouddn.com/different_response.JPG\" alt=\"\"></p>\n<p><br>UserProto,FriendJson ProtoextendsprotoType class instanceof protoserviceMethodgsongsonprotoConverter<br> GsonConverterFactory, SimpleXmlConverterFactory converters , they say yes to everyThing. <br> <br> <figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div></pre></td><td class=\"code\"><pre><div class=\"line\"> <span class=\"meta\">@interface</span> Xml &#123;&#125;</div><div class=\"line\"> <span class=\"meta\">@interface</span> Json &#123;&#125;</div><div class=\"line\"></div><div class=\"line\"> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Service</span></span>&#123;</div><div class=\"line\">    <span class=\"meta\">@GET</span>(<span class=\"string\">\"/User\"</span>) <span class=\"meta\">@Xml</span></div><div class=\"line\">    <span class=\"function\">Call&lt;User&gt; <span class=\"title\">user</span><span class=\"params\">()</span></span>; <span class=\"comment\">// UserXML</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@GET</span>(<span class=\"string\">\"/Friends\"</span>) <span class=\"meta\">@Json</span></div><div class=\"line\">    <span class=\"function\">Call&lt;Friends&gt; <span class=\"title\">friends</span><span class=\"params\">()</span></span>;  <span class=\"comment\">//FriendsJson </span></div><div class=\"line\"> &#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">XmlOrJsonConverterFactroy</span> <span class=\"title\">extend</span> <span class=\"title\">Converter</span>.<span class=\"title\">Factory</span></span>&#123;</div><div class=\"line\">    <span class=\"keyword\">final</span> Converter.Factory xml = <span class=\"comment\">///;</span></div><div class=\"line\">    <span class=\"keyword\">final</span> Converter.Factory json = <span class=\"comment\">//....;</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@override</span></div><div class=\"line\">    <span class=\"keyword\">public</span> Converter&lt;ResponseBody,?&gt; responseBodyConverter(Type type, Annotation[] annotations, Retrofit retrofit)&#123;</div><div class=\"line\">        <span class=\"comment\">// annotations</span></div><div class=\"line\">        <span class=\"keyword\">for</span> (Annotation annotation : annotations)&#123;</div><div class=\"line\">            <span class=\"keyword\">if</span>(annotation.getClass == Xml.class)&#123;</div><div class=\"line\">                <span class=\"keyword\">return</span> xml.reponseBodyConverter(type,annotations,retrofit);</div><div class=\"line\">            &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(annotation.getClass == Json.class)&#123;</div><div class=\"line\">                <span class=\"comment\">// json </span></div><div class=\"line\">            &#125;</div><div class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;  Converter..</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div><div class=\"line\">[AnnotatedConverterFactory](https:<span class=\"comment\">//github.com/square/retrofit/blob/master/samples/src/main/java/com/example/retrofit/AnnotatedConverters.java)</span></div></pre></td></tr></table></figure></p>\n<h4 id=\"1-5-6-metaData\"><a href=\"#1-5-6-metaData\" class=\"headerlink\" title=\"1.5.6 metaData\"></a>1.5.6 metaData</h4><p>delegatemetadataresponse<br><img src=\"http://odzl05jxx.bkt.clouddn.com/delegaet_converters.JPG\" alt=\"\"><br>metaData<br>convert</p>\n<h4 id=\"1-5-7-Rxjava\"><a href=\"#1-5-7-Rxjava\" class=\"headerlink\" title=\"1.5.7 Rxjava\"></a>1.5.7 Rxjava</h4><p>CallAdapterFactoryConverterFactoryObservable</p>\n<p><img src=\"http://odzl05jxx.bkt.clouddn.com/always_observe_on_mian_thread.JPG\" alt=\"\"></p>\n<p>RetrofitHttpClientConverterCallAdapter</p>\n<h3 id=\"2-OkHttp\"><a href=\"#2-OkHttp\" class=\"headerlink\" title=\"2. OkHttp\"></a>2. OkHttp</h3><h3 id=\"3-A-few-ok-libraries\"><a href=\"#3-A-few-ok-libraries\" class=\"headerlink\" title=\"3. A few ok libraries\"></a>3. A few ok libraries</h3><p>why moshi ? why Retrofit call can be clone cheap<br>why SinkedSource?<br>why protolBuffer cost less ?</p>\n<h3 id=\"Ref\"><a href=\"#Ref\" class=\"headerlink\" title=\"Ref\"></a>Ref</h3><ol>\n<li><a href=\"https://blog.piasy.com/2016/06/25/Understand-Retrofit/\">PaisyRetrofit</a></li>\n<li><a href=\"https://github.com/android-cn/android-open-project-analysis/tree/master/tool-lib/network/retrofit\">open-sourse-projetcRetrofit</a></li>\n<li><a href=\"https://www.youtube.com/watch?v=t34AQlblSeE\">Making Retrofit Work For You by Jake Wharton</a></li>\n</ol>\n","excerpt":"<h3 id=\"This-is-gonna-be-nasty-TL-DR\"><a href=\"#This-is-gonna-be-nasty-TL-DR\" class=\"headerlink\" title=\"This is gonna be nasty TL;DR\"></a>This is gonna be nasty TL;DR</h3><p><img src=\"http://odzl05jxx.bkt.clouddn.com/d653491fb55bec754b8471aa6a3f6eed.jpg?imageView2/2/w/600\" alt=\"\"></p>","more":"<h3 id=\"1-Retrofit\"><a href=\"#1-Retrofit\" class=\"headerlink\" title=\"1. Retrofit\"></a>1. Retrofit</h3><h4 id=\"1-1-\"><a href=\"#1-1-\" class=\"headerlink\" title=\"1.1 \"></a>1.1 </h4><p>RetrofitAndriodjava<br>Retrofit<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div></pre></td><td class=\"code\"><pre><div class=\"line\"> <span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">GitHub</span> </span>&#123;</div><div class=\"line\">    <span class=\"meta\">@GET</span>(<span class=\"string\">\"/repos/&#123;owner&#125;/&#123;repo&#125;/contributors\"</span>)</div><div class=\"line\">    Call&lt;List&lt;Contributor&gt;&gt; contributors(</div><div class=\"line\">        <span class=\"meta\">@Path</span>(<span class=\"string\">\"owner\"</span>) String owner,</div><div class=\"line\">        <span class=\"meta\">@Path</span>(<span class=\"string\">\"repo\"</span>) String repo);</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">Retrofit retrofit = <span class=\"keyword\">new</span> Retrofit.Builder()</div><div class=\"line\">        .baseUrl(API_URL)   <span class=\"comment\">// end_point</span></div><div class=\"line\">        .addConverterFactory(GsonConverterFactory.create())</div><div class=\"line\">        .build();</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// Create an instance of our GitHub API interface.</span></div><div class=\"line\">    GitHub github = retrofit.create(GitHub.class);</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// Create a call instance for looking up Retrofit contributors.</span></div><div class=\"line\">    Call&lt;List&lt;Contributor&gt;&gt; call = github.contributors(<span class=\"string\">\"square\"</span>, <span class=\"string\">\"retrofit\"</span>);</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// Fetch and print a list of the contributors to the library.</span></div><div class=\"line\">    List&lt;Contributor&gt; contributors = call.execute().body();</div><div class=\"line\">    <span class=\"keyword\">for</span> (Contributor contributor : contributors) &#123;</div><div class=\"line\">      System.out.println(contributor.login + <span class=\"string\">\" (\"</span> + contributor.contributions + <span class=\"string\">\")\"</span>);</div><div class=\"line\">    &#125;</div></pre></td></tr></table></figure></p>\n<p> retroft.create ,</p>\n<blockquote>\n<p>ServiceMethod serviceMethod = loadServiceMethod(method);<br>OkHttpCall okHttpCall = new OkHttpCall&lt;&gt;(serviceMethod, args);<br>return serviceMethod.callAdapter.adapt(okHttpCall);</p>\n</blockquote>\n<h3 id=\"1-2-ServiceMethod\"><a href=\"#1-2-ServiceMethod\" class=\"headerlink\" title=\"1.2 ServiceMethod\"></a>1.2 ServiceMethod</h3><p>loadServiceMethod(Method)invokemethodCacheBuilderServiceMethodcahceBuilder BuilderServiceMethod</p>\n<p>result = new ServiceMethod.Builder(this, method).build();<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Builder</span><span class=\"params\">(Retrofit retrofit, Method method)</span> </span>&#123;</div><div class=\"line\">     <span class=\"keyword\">this</span>.retrofit = retrofit; <span class=\"comment\">//clientretrofit</span></div><div class=\"line\">     <span class=\"keyword\">this</span>.method = method; </div><div class=\"line\">     <span class=\"keyword\">this</span>.methodAnnotations = method.getAnnotations();</div><div class=\"line\">     <span class=\"keyword\">this</span>.parameterTypes = method.getGenericParameterTypes();</div><div class=\"line\">     <span class=\"keyword\">this</span>.parameterAnnotationsArray = method.getParameterAnnotations();</div><div class=\"line\">   &#125;</div></pre></td></tr></table></figure></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div></pre></td><td class=\"code\"><pre><div class=\"line\">ServiceMethodhttpMethodGETPOST,</div><div class=\"line\">contentTypeMimeType</div><div class=\"line\"> <span class=\"function\"><span class=\"keyword\">public</span> ServiceMethod <span class=\"title\">build</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"comment\">// 1.callAdapter,retrofitcallAdapter,RxjavAdapter,retrofitadapterFactoriesIllegalArgumentException</span></div><div class=\"line\">      callAdapter = createCallAdapter();</div><div class=\"line\">       <span class=\"comment\">//callAdapter retrofit.CallCallTCall&lt;List&lt;Contributor&gt;&gt;List&lt;Contributor&gt; adaptokHttpCallokHttpCallrespose</span></div><div class=\"line\">        <span class=\"comment\">//java.lang.reflect.Type classresponseclass</span></div><div class=\"line\">      responseType = callAdapter.responseType();</div><div class=\"line\">        <span class=\"comment\">//2.respnseRequestconverter</span></div><div class=\"line\">      responseConverter = createResponseConverter();</div><div class=\"line\">      <span class=\"keyword\">for</span> (Annotation annotation : methodAnnotations) &#123;</div><div class=\"line\">        parseMethodAnnotation(annotation); <span class=\"comment\">//@GET\"GET\"StringGET</span></div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">int</span> parameterCount = parameterAnnotationsArray.length;</div><div class=\"line\">      <span class=\"comment\">//3.ParameterHandler</span></div><div class=\"line\">      parameterHandlers = <span class=\"keyword\">new</span> ParameterHandler&lt;?&gt;[parameterCount];</div><div class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> p = <span class=\"number\">0</span>; p &lt; parameterCount; p++) &#123;</div><div class=\"line\">        Type parameterType = parameterTypes[p];</div><div class=\"line\">        Annotation[] parameterAnnotations = parameterAnnotationsArray[p];</div><div class=\"line\">        <span class=\"keyword\">if</span> (parameterAnnotations == <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">          <span class=\"keyword\">throw</span> parameterError(p, <span class=\"string\">\"No Retrofit annotation found.\"</span>);</div><div class=\"line\">        &#125;</div><div class=\"line\">        parameterHandlers[p] = parseParameter(p, parameterType, parameterAnnotations);</div><div class=\"line\">        <span class=\"comment\">//</span></div><div class=\"line\">         <span class=\"keyword\">private</span> ParameterHandler&lt;?&gt; parseParameter(<span class=\"keyword\">int</span> p, Type parameterType, Annotation[] annotations)</div><div class=\"line\">         index</div><div class=\"line\">         Response</div><div class=\"line\">         @</div><div class=\"line\">          <span class=\"keyword\">private</span> ParameterHandler&lt;?&gt; parseParameterAnnotation(</div><div class=\"line\">        <span class=\"keyword\">int</span> p, Type type, Annotation[] annotations, Annotation annotation)Http<span class=\"number\">300</span>Http</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> ServiceMethod&lt;&gt;(<span class=\"keyword\">this</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>Buider<br><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div></pre></td><td class=\"code\"><pre><div class=\"line\">1. createCallAdapter  ---&gt;  retrofit.callAdapter(returnType, annotations); adapterFactories()****DefaultCallAdapterFactoryExecutorCallAdapterFactoryRxjavaCallAdapterFactoryretrofitinstallcallAdapter</div><div class=\"line\">CallAdaterRetrofitCall adptResponse class</div><div class=\"line\"></div><div class=\"line\">2. createResponseConverter ---&gt;  retrofit.responseBodyConverter(responseType, annotations); </div><div class=\"line\">Retrofit2.Converter&lt;F, T&gt; (fromTo)</div><div class=\"line\"></div><div class=\"line\">Convert objects to and from their representation in HTTP. Instances are created by &#123;@linkplain</div><div class=\"line\"> * Factory a factory&#125; which is &#123;@linkplain Retrofit.Builder#addConverterFactory(Factory) installed&#125;</div><div class=\"line\"> * into the &#123;@link Retrofit&#125; instance.</div><div class=\"line\"></div><div class=\"line\">retrofitconverterFactoriesserverjsonprotocolBufferxmlresponsejake Wharton</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">3. parameterHandlers</div><div class=\"line\"></div><div class=\"line\">private ParameterHandler&lt;?&gt; parseParameterAnnotation(</div><div class=\"line\">        int p, Type type, Annotation[] annotations, Annotation annotation)</div><div class=\"line\"></div><div class=\"line\">        </div><div class=\"line\"> public interface GitHub &#123;</div><div class=\"line\">    @GET(\"/repos/&#123;owner&#125;/&#123;repo&#125;/contributors\")</div><div class=\"line\">    Call&lt;List&lt;Contributor&gt;&gt; contributors(</div><div class=\"line\">        @Path(\"owner\") String owner,</div><div class=\"line\">        @Path(\"repo\") String repo);</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">ServiceMethodannotations @Path(\"owner\") String owner@PATHwrapperpath.value()</div><div class=\"line\"></div><div class=\"line\">else if (annotation instanceof Path) &#123;</div><div class=\"line\">        Path path = (Path) annotation;</div><div class=\"line\">        String name = path.value(); // String</div><div class=\"line\">        validatePathName(p, name);</div><div class=\"line\">        Converter&lt;?, String&gt; converter = retrofit.stringConverter(type, annotations);  </div><div class=\"line\">        return new ParameterHandler.Path&lt;&gt;(name, converter, path.encoded());</div><div class=\"line\">      &#125;</div><div class=\"line\">ParameterHandler.Path&lt;&gt;ParameterHandler![](http://odzl05jxx.bkt.clouddn.com/ParameterHandlers.JPG)</div><div class=\"line\">Pathclassapply:</div><div class=\"line\"> @Override void apply(RequestBuilder builder, @Nullable T value) throws IOException &#123;</div><div class=\"line\">      builder.addPathParam(name, valueConverter.convert(value), encoded);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">    relativeUrl = relativeUrl.replace(\"&#123;\" + name + \"&#125;\", canonicalizeForPath(value, encoded));</div><div class=\"line\">applyRequestRequestBildername\"owner\" ,valueStirng.replace()</div><div class=\"line\">Buidler</div><div class=\"line\">- callAdapter</div><div class=\"line\">- createResponseConverter</div><div class=\"line\">- parameterHandlers</div><div class=\"line\">newServiceMethod</div><div class=\"line\"></div><div class=\"line\">ServiceMethod(Builder&lt;T&gt; builder) &#123;</div><div class=\"line\">    this.callFactory = builder.retrofit.callFactory();  // okhttp3.Call.Factory</div><div class=\"line\">    this.callAdapter = builder.callAdapter; //</div><div class=\"line\">    this.baseUrl = builder.retrofit.baseUrl(); //</div><div class=\"line\">    this.responseConverter = builder.responseConverter; // GsonConverter</div><div class=\"line\">    this.httpMethod = builder.httpMethod; //@GET </div><div class=\"line\">    this.relativeUrl = builder.relativeUrl; //@Path</div><div class=\"line\">    this.headers = builder.headers; //@Header</div><div class=\"line\">    this.contentType = builder.contentType;  //application/json</div><div class=\"line\">    this.hasBody = builder.hasBody; </div><div class=\"line\">    this.isFormEncoded = builder.isFormEncoded;</div><div class=\"line\">    this.isMultipart = builder.isMultipart;</div><div class=\"line\">    this.parameterHandlers = builder.parameterHandlers;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\"></div></pre></td></tr></table></figure></p>\n<h3 id=\"1-3-OkHttpCall\"><a href=\"#1-3-OkHttpCall\" class=\"headerlink\" title=\"1.3 OkHttpCall\"></a>1.3 OkHttpCall</h3><p>:<br> OkHttpCall<Object> okHttpCall = new OkHttpCall&lt;&gt;(serviceMethod, args);</p>\n<p>OkHttpCall<br>okhttp3.Call rawCall //<br>ServiceMethod<T, ?> serviceMethod;  //serviceMethod<br>execute</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">@Override</span> <span class=\"function\"><span class=\"keyword\">public</span> Response&lt;T&gt; <span class=\"title\">execute</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</div><div class=\"line\">   okhttp3.Call call;</div><div class=\"line\">   <span class=\"keyword\">synchronized</span> (<span class=\"keyword\">this</span>) &#123;</div><div class=\"line\">     <span class=\"keyword\">if</span> (executed) <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> IllegalStateException(<span class=\"string\">\"Already executed.\"</span>);</div><div class=\"line\">     executed = <span class=\"keyword\">true</span>;</div><div class=\"line\">     call = rawCall;</div><div class=\"line\">     <span class=\"keyword\">if</span> (call == <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">       <span class=\"keyword\">try</span> &#123;</div><div class=\"line\">         call = rawCall = createRawCall();</div><div class=\"line\">       &#125; <span class=\"keyword\">catch</span> (IOException | RuntimeException e) &#123;</div><div class=\"line\">       &#125;</div><div class=\"line\">     &#125;</div><div class=\"line\">   &#125;</div><div class=\"line\">   <span class=\"keyword\">return</span> parseResponse(call.execute()); <span class=\"comment\">//responseexecuteokHttp</span></div><div class=\"line\"> &#125;</div></pre></td></tr></table></figure>\n<p>Demo<br>Call<List<Contributor>&gt; call = github.contributors(square, retrofit);<br>List<Contributor> contributors = call.execute().body();<br>Retrofit2.Call.execute</p>\n<p>createRawCall<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">okhttp3.Request request = serviceMethod.toRequest(args);</div><div class=\"line\">okhttp3.Call call = serviceMethod.callFactory.newCall(request);</div><div class=\"line\">   <span class=\"keyword\">if</span> (call == <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">     <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> NullPointerException(<span class=\"string\">\"Call.Factory returned null.\"</span>);</div><div class=\"line\">   &#125;</div><div class=\"line\">   <span class=\"keyword\">return</span> call;</div></pre></td></tr></table></figure></p>\n<p>parseRespnse<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\">Response&lt;T&gt; <span class=\"title\">parseResponse</span><span class=\"params\">(okhttp3.Response rawResponse)</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</div><div class=\"line\">  ResponseBody rawBody = rawResponse.body(); <span class=\"comment\">//</span></div><div class=\"line\">  <span class=\"comment\">// Remove the body's source (the only stateful object) so we can pass the response along.</span></div><div class=\"line\">  rawResponse = rawResponse.newBuilder()</div><div class=\"line\">      .body(<span class=\"keyword\">new</span> NoContentResponseBody(rawBody.contentType(), rawBody.contentLength()))</div><div class=\"line\">      .build(); <span class=\"comment\">//contentTypecontentLengthresponse200</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">int</span> code = rawResponse.code();</div><div class=\"line\">  <span class=\"keyword\">if</span> (code &lt; <span class=\"number\">200</span> || code &gt;= <span class=\"number\">300</span>) &#123;</div><div class=\"line\">    <span class=\"keyword\">try</span> &#123;</div><div class=\"line\">      <span class=\"comment\">// Buffer the entire body to avoid future I/O.</span></div><div class=\"line\">      ResponseBody bufferedBody = Utils.buffer(rawBody);</div><div class=\"line\">      <span class=\"keyword\">return</span> Response.error(bufferedBody, rawResponse); <span class=\"comment\">//bodynullRetrofit2.Response</span></div><div class=\"line\">    &#125; <span class=\"keyword\">finally</span> &#123;</div><div class=\"line\">      rawBody.close();</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">if</span> (code == <span class=\"number\">204</span> || code == <span class=\"number\">205</span>) &#123;</div><div class=\"line\">    rawBody.close();</div><div class=\"line\">    <span class=\"keyword\">return</span> Response.success(<span class=\"keyword\">null</span>, rawResponse);</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  ExceptionCatchingRequestBody catchingBody = <span class=\"keyword\">new</span> ExceptionCatchingRequestBody(rawBody);</div><div class=\"line\">  <span class=\"keyword\">try</span> &#123;</div><div class=\"line\">    T body = serviceMethod.toResponse(catchingBody); <span class=\"comment\">//ServiceMethodresponseConverterresponseConverterbuilderRetrofitconverterFactories</span></div><div class=\"line\">    <span class=\"keyword\">return</span> Response.success(body, rawResponse); <span class=\"comment\">//bodyRetrofit2.ResponseResponse.body()</span></div><div class=\"line\">  &#125; <span class=\"keyword\">catch</span> (RuntimeException e) &#123;</div><div class=\"line\">    <span class=\"comment\">// If the underlying source threw an exception, propagate that rather than indicating it was</span></div><div class=\"line\">    <span class=\"comment\">// a runtime exception.</span></div><div class=\"line\">    catchingBody.throwIfCaught();</div><div class=\"line\">    <span class=\"keyword\">throw</span> e;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>Retrofit1XX3XXerror</p>\n<p>executeenqueueOkHttp.Call.enqueue()RetrofitparseRespnseOkHttpRetrofitResponseAndroid </p>\n<h3 id=\"1-4-AdapterFactory\"><a href=\"#1-4-AdapterFactory\" class=\"headerlink\" title=\"1.4 AdapterFactory\"></a>1.4 AdapterFactory</h3><p>return serviceMethod.callAdapter.adapt(okHttpCall); //returnObject,</p>\n<p>serviceMethodcreateCallAdapterretrofitadapterFactories</p>\n<blockquote>\n<p>CallAdapter&lt;?, ?&gt; adapter = adapterFactories.get(i).get(returnType, annotations, this)</p>\n</blockquote>\n<p>DefaultCallAdapterFactoryExecutorCallAdapterFactoryRxjavaCallAdapterFactory</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div></pre></td><td class=\"code\"><pre><div class=\"line\">DefaultCallAdapterFactory</div><div class=\"line\"></div><div class=\"line\"> <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> CallAdapter&lt;Call&lt;?&gt;&gt;() &#123;</div><div class=\"line\">      <span class=\"meta\">@Override</span> <span class=\"function\"><span class=\"keyword\">public</span> Type <span class=\"title\">responseType</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> responseType;</div><div class=\"line\">      &#125;</div><div class=\"line\"></div><div class=\"line\">      <span class=\"meta\">@Override</span> <span class=\"keyword\">public</span> &lt;R&gt; <span class=\"function\">Call&lt;R&gt; <span class=\"title\">adapt</span><span class=\"params\">(Call&lt;R&gt; call)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> call;</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">ExecutorCallAdapterFactory</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"> <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> CallAdapter&lt;Object, Call&lt;?&gt;&gt;() &#123;</div><div class=\"line\">      <span class=\"meta\">@Override</span> <span class=\"function\"><span class=\"keyword\">public</span> Type <span class=\"title\">responseType</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> responseType;</div><div class=\"line\">      &#125;</div><div class=\"line\"></div><div class=\"line\">      <span class=\"meta\">@Override</span> <span class=\"function\"><span class=\"keyword\">public</span> Call&lt;Object&gt; <span class=\"title\">adapt</span><span class=\"params\">(Call&lt;Object&gt; call)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> ExecutorCallbackCall&lt;&gt;(callbackExecutor, call);</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;;</div></pre></td></tr></table></figure>\n<p>callbackcallbackExecutorRetrofitresponse</p>\n<p> RxjavaCallAdapterFactory<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div></pre></td><td class=\"code\"><pre><div class=\"line\"> <span class=\"meta\">@Override</span></div><div class=\"line\">  <span class=\"keyword\">public</span> CallAdapter&lt;?&gt; get(Type returnType, Annotation[] annotations, Retrofit retrofit) &#123;</div><div class=\"line\">    Class&lt;?&gt; rawType = getRawType(returnType);</div><div class=\"line\">    String canonicalName = rawType.getCanonicalName();</div><div class=\"line\">    <span class=\"keyword\">boolean</span> isSingle = <span class=\"string\">\"rx.Single\"</span>.equals(canonicalName); <span class=\"comment\">//</span></div><div class=\"line\">    <span class=\"keyword\">boolean</span> isCompletable = <span class=\"string\">\"rx.Completable\"</span>.equals(canonicalName);</div><div class=\"line\">    <span class=\"keyword\">if</span> (rawType != Observable.class &amp;&amp; !isSingle &amp;&amp; !isCompletable) &#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">if</span> (!isCompletable &amp;&amp; !(returnType <span class=\"keyword\">instanceof</span> ParameterizedType)) &#123;</div><div class=\"line\">      String name = isSingle ? <span class=\"string\">\"Single\"</span> : <span class=\"string\">\"Observable\"</span>;</div><div class=\"line\">      <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> IllegalStateException(name + <span class=\"string\">\" return type must be parameterized\"</span></div><div class=\"line\">          + <span class=\"string\">\" as \"</span> + name + <span class=\"string\">\"&lt;Foo&gt; or \"</span> + name + <span class=\"string\">\"&lt;? extends Foo&gt;\"</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">if</span> (isCompletable) &#123;</div><div class=\"line\">      <span class=\"comment\">// Add Completable-converter wrapper from a separate class. This defers classloading such that</span></div><div class=\"line\">      <span class=\"comment\">// regular Observable operation can be leveraged without relying on this unstable RxJava API.</span></div><div class=\"line\">      <span class=\"comment\">// Note that this has to be done separately since Completable doesn't have a parametrized</span></div><div class=\"line\">      <span class=\"comment\">// type.</span></div><div class=\"line\">      <span class=\"keyword\">return</span> CompletableHelper.createCallAdapter(scheduler);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    CallAdapter&lt;Observable&lt;?&gt;&gt; callAdapter = getCallAdapter(returnType, scheduler);</div><div class=\"line\">    <span class=\"keyword\">if</span> (isSingle) &#123;</div><div class=\"line\">      <span class=\"comment\">// Add Single-converter wrapper from a separate class. This defers classloading such that</span></div><div class=\"line\">      <span class=\"comment\">// regular Observable operation can be leveraged without relying on this unstable RxJava API.</span></div><div class=\"line\">      <span class=\"keyword\">return</span> SingleHelper.makeSingle(callAdapter);</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> callAdapter;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<h3 id=\"1-5-Retrofitbest-practices\"><a href=\"#1-5-Retrofitbest-practices\" class=\"headerlink\" title=\"1.5 Retrofitbest practices\"></a>1.5 Retrofitbest practices</h3><p>retrofitjake whartontalk <a href=\"https://www.youtube.com/watch?v=t34AQlblSeE\">making retrofit work for you</a>best practice</p>\n<h4 id=\"1-5-1-end-point-\"><a href=\"#1-5-1-end-point-\" class=\"headerlink\" title=\"1.5.1 end point \"></a>1.5.1 end point </h4><p>client,OkHttpClientdisk caching,connection pooling</p>\n<p><img src=\"http://odzl05jxx.bkt.clouddn.com/different_end_point.JPG\" alt=\"endpoint\">    </p>\n<p>OkHttpClient,<br><img src=\"http://odzl05jxx.bkt.clouddn.com/different_end_point_teh_right_way.JPG\" alt=\"\"></p>\n<h4 id=\"1-5-2-HttpClient\"><a href=\"#1-5-2-HttpClient\" class=\"headerlink\" title=\"1.5.2 HttpClient\"></a>1.5.2 HttpClient</h4><p>shallow copy<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">OkHttpClient client = <span class=\"keyword\">new</span> OkHttpClient();</div><div class=\"line\"></div><div class=\"line\">OkHttpClient clientFoo = client.newBuilder().addInterceptor(<span class=\"keyword\">new</span> FooInterceptor()).build()</div><div class=\"line\"></div><div class=\"line\">OkHttpClient clientBar = client.newBuilder().readTimeOut(<span class=\"number\">20</span>,SECONDS)</div><div class=\"line\">.writeTimeOut(<span class=\"number\">20</span>,SECONDS).build()</div></pre></td></tr></table></figure></p>\n<h4 id=\"1-5-3-Header\"><a href=\"#1-5-3-Header\" class=\"headerlink\" title=\"1.5.3 Header\"></a>1.5.3 Header</h4><p>OkHttpInterceptorurlheaderAPIHeaderApi,<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">@POST</span>(<span class=\"string\">\"/login\"</span>)</div><div class=\"line\"><span class=\"meta\">@Headers</span>(<span class=\"string\">\"No-Authentication: true\"</span>)</div><div class=\"line\"><span class=\"function\">Call&lt;User&gt; <span class=\"title\">login</span><span class=\"params\">(@Body LoginRequest request)</span></span></div></pre></td></tr></table></figure></p>\n<p>//headerserverInterceptor<br>request.header(No-Authentication)==null header<br></p>\n<h4 id=\"1-5-4-Convertersbytejava\"><a href=\"#1-5-4-Convertersbytejava\" class=\"headerlink\" title=\"1.5.4 Convertersbytejava\"></a>1.5.4 Convertersbytejava</h4><p>addConverterFactoryhttpclient<br><img src=\"http://odzl05jxx.bkt.clouddn.com/creating%20two%20convertors.JPG\" alt=\"\"></p>\n<h4 id=\"1-5-5-addConverterFactory\"><a href=\"#1-5-5-addConverterFactory\" class=\"headerlink\" title=\"1.5.5 addConverterFactory\"></a>1.5.5 addConverterFactory</h4><p>jsonprotoretrofit<br><img src=\"http://odzl05jxx.bkt.clouddn.com/different_response.JPG\" alt=\"\"></p>\n<p><br>UserProto,FriendJson ProtoextendsprotoType class instanceof protoserviceMethodgsongsonprotoConverter<br> GsonConverterFactory, SimpleXmlConverterFactory converters , they say yes to everyThing. <br> <br> <figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div></pre></td><td class=\"code\"><pre><div class=\"line\"> <span class=\"meta\">@interface</span> Xml &#123;&#125;</div><div class=\"line\"> <span class=\"meta\">@interface</span> Json &#123;&#125;</div><div class=\"line\"></div><div class=\"line\"> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Service</span></span>&#123;</div><div class=\"line\">    <span class=\"meta\">@GET</span>(<span class=\"string\">\"/User\"</span>) <span class=\"meta\">@Xml</span></div><div class=\"line\">    <span class=\"function\">Call&lt;User&gt; <span class=\"title\">user</span><span class=\"params\">()</span></span>; <span class=\"comment\">// UserXML</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@GET</span>(<span class=\"string\">\"/Friends\"</span>) <span class=\"meta\">@Json</span></div><div class=\"line\">    <span class=\"function\">Call&lt;Friends&gt; <span class=\"title\">friends</span><span class=\"params\">()</span></span>;  <span class=\"comment\">//FriendsJson </span></div><div class=\"line\"> &#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">XmlOrJsonConverterFactroy</span> <span class=\"title\">extend</span> <span class=\"title\">Converter</span>.<span class=\"title\">Factory</span></span>&#123;</div><div class=\"line\">    <span class=\"keyword\">final</span> Converter.Factory xml = <span class=\"comment\">///;</span></div><div class=\"line\">    <span class=\"keyword\">final</span> Converter.Factory json = <span class=\"comment\">//....;</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@override</span></div><div class=\"line\">    <span class=\"keyword\">public</span> Converter&lt;ResponseBody,?&gt; responseBodyConverter(Type type, Annotation[] annotations, Retrofit retrofit)&#123;</div><div class=\"line\">        <span class=\"comment\">// annotations</span></div><div class=\"line\">        <span class=\"keyword\">for</span> (Annotation annotation : annotations)&#123;</div><div class=\"line\">            <span class=\"keyword\">if</span>(annotation.getClass == Xml.class)&#123;</div><div class=\"line\">                <span class=\"keyword\">return</span> xml.reponseBodyConverter(type,annotations,retrofit);</div><div class=\"line\">            &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(annotation.getClass == Json.class)&#123;</div><div class=\"line\">                <span class=\"comment\">// json </span></div><div class=\"line\">            &#125;</div><div class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;  Converter..</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div><div class=\"line\">[AnnotatedConverterFactory](https:<span class=\"comment\">//github.com/square/retrofit/blob/master/samples/src/main/java/com/example/retrofit/AnnotatedConverters.java)</span></div></pre></td></tr></table></figure></p>\n<h4 id=\"1-5-6-metaData\"><a href=\"#1-5-6-metaData\" class=\"headerlink\" title=\"1.5.6 metaData\"></a>1.5.6 metaData</h4><p>delegatemetadataresponse<br><img src=\"http://odzl05jxx.bkt.clouddn.com/delegaet_converters.JPG\" alt=\"\"><br>metaData<br>convert</p>\n<h4 id=\"1-5-7-Rxjava\"><a href=\"#1-5-7-Rxjava\" class=\"headerlink\" title=\"1.5.7 Rxjava\"></a>1.5.7 Rxjava</h4><p>CallAdapterFactoryConverterFactoryObservable</p>\n<p><img src=\"http://odzl05jxx.bkt.clouddn.com/always_observe_on_mian_thread.JPG\" alt=\"\"></p>\n<p>RetrofitHttpClientConverterCallAdapter</p>\n<h3 id=\"2-OkHttp\"><a href=\"#2-OkHttp\" class=\"headerlink\" title=\"2. OkHttp\"></a>2. OkHttp</h3><h3 id=\"3-A-few-ok-libraries\"><a href=\"#3-A-few-ok-libraries\" class=\"headerlink\" title=\"3. A few ok libraries\"></a>3. A few ok libraries</h3><p>why moshi ? why Retrofit call can be clone cheap<br>why SinkedSource?<br>why protolBuffer cost less ?</p>\n<h3 id=\"Ref\"><a href=\"#Ref\" class=\"headerlink\" title=\"Ref\"></a>Ref</h3><ol>\n<li><a href=\"https://blog.piasy.com/2016/06/25/Understand-Retrofit/\">PaisyRetrofit</a></li>\n<li><a href=\"https://github.com/android-cn/android-open-project-analysis/tree/master/tool-lib/network/retrofit\">open-sourse-projetcRetrofit</a></li>\n<li><a href=\"https://www.youtube.com/watch?v=t34AQlblSeE\">Making Retrofit Work For You by Jake Wharton</a></li>\n</ol>"},{"title":"jvm","date":"2017-05-24T14:48:58.000Z","_content":"\njvm\n![](http://odzl05jxx.bkt.clouddn.com/high_way_scene.jpg?imageView2/2/w/600)\n<!--more-->\n\n### 1.MyApp.java\nJavajavac MyApp.javaclass\n:\n```java\njavac MyApp.java\njava MyApp\n```\n#### jvm instance.\n\n### 2. class loaderExecution Engine Host Operating System\njava MyAppclass loaderMyApp.classjava APIclassString,Object,Collection....classbyte codeExecution Engine,byte code\n\n### 3. where did class loader load class into ?\nclassloaderclass Runtime data areasjvm architectureclass loader subsystem,Runtime data areas execution Enigne\nclass loader subsystem -> Runtime data areas -> Execution Engine\n\n\n### 4.classloaderclass loading subsystem\n\t- load byte code .java.jarnetwork Socketclass loaderimplementationloadclass loader\n\n\t> 1. Bootstrap class loader (jrert.jarjavainternal class) // \n\n\t> 2. extension class loader (jre/lib/ext) //class\n\n\t> 3. Application class loader (CLASSPATH, -cp)//CLASSPATH\n\n\t- loadlink\n\tverify(jvmbyte code) -> prepare(classstatic variablevariable) -> Resolve(when all the symbolic reference inside currentclass are resolvedclassclassDefNotFoundException)\n\n\tjava specificationjvm\n\nclass loading subsysteminitialize \nclass vars to initiazed Value in code()\n\n### 5. Runtime data area\nRuntime data area java virtural machine\n\t//per jvm ,shared by all threads\n\t- Method Area\n\t- Heap\n\n\t// per thread \n\t- java stack \n\t- pc Registers\n\t- Native method stacks\n\n#### 1. Method Area(classstatic variable,byte code,class level constant pool)\tMethod AreaPerm gen space()64MB -XX:MaxPermSize  out of memory error\n\n### java8method Area metaspace (method areaNative Memory)\n\n#### 2. Heap\nnew\n\n-Xms , minimun size\n-Xmx , maximum size\n\n#### 3. Java Stack\njava stacks contains stack frames of the current execution per thread. \neg : method a ->  method b -> method c\npushstack frame(Frame)\nstack Frameetc\nstackoverFlowError\n\n\n\n#### 4. pc Registers\n\n\n#### 5. Native method stacks\nNative method stacks java stacknativewindowsdll\n\n\n\n\n\n\n\n\n### 6. Execution Engine\n![](http://odzl05jxx.bkt.clouddn.com/starry_sky.jpg?imageView2/2/w/500)\n\t- Interpreter byte code (Nativewindowsjre/bin/dllwindowsNativelinux.so)\n\n\t- JIT Compiler  just in time compilerbyte code instructionbyte codeintepreteJIT will hold on to that system level target machine code for future usage,which is fast\n\t- Hotspot profiler(it helps the JIT Compiler analysise the frequently used byte codess)\n\t- GC (a lengthy talk)\n\nNative Method Interface(JNI) -> Native method libraries.dll,.so etc\n\n\n\n\n\n\n\n\n### \n[JVM ( java virtual machine) architecture - tutorial](https://www.youtube.com/watch?v=ZBJ0u9MaKtM)","source":"_posts/2017-05-24-jvm-architecture.md","raw":"---\ntitle: jvm\ndate: 2017-05-24 22:48:58\ncategories: blog\ntags: [jvm]\n---\n\njvm\n![](http://odzl05jxx.bkt.clouddn.com/high_way_scene.jpg?imageView2/2/w/600)\n<!--more-->\n\n### 1.MyApp.java\nJavajavac MyApp.javaclass\n:\n```java\njavac MyApp.java\njava MyApp\n```\n#### jvm instance.\n\n### 2. class loaderExecution Engine Host Operating System\njava MyAppclass loaderMyApp.classjava APIclassString,Object,Collection....classbyte codeExecution Engine,byte code\n\n### 3. where did class loader load class into ?\nclassloaderclass Runtime data areasjvm architectureclass loader subsystem,Runtime data areas execution Enigne\nclass loader subsystem -> Runtime data areas -> Execution Engine\n\n\n### 4.classloaderclass loading subsystem\n\t- load byte code .java.jarnetwork Socketclass loaderimplementationloadclass loader\n\n\t> 1. Bootstrap class loader (jrert.jarjavainternal class) // \n\n\t> 2. extension class loader (jre/lib/ext) //class\n\n\t> 3. Application class loader (CLASSPATH, -cp)//CLASSPATH\n\n\t- loadlink\n\tverify(jvmbyte code) -> prepare(classstatic variablevariable) -> Resolve(when all the symbolic reference inside currentclass are resolvedclassclassDefNotFoundException)\n\n\tjava specificationjvm\n\nclass loading subsysteminitialize \nclass vars to initiazed Value in code()\n\n### 5. Runtime data area\nRuntime data area java virtural machine\n\t//per jvm ,shared by all threads\n\t- Method Area\n\t- Heap\n\n\t// per thread \n\t- java stack \n\t- pc Registers\n\t- Native method stacks\n\n#### 1. Method Area(classstatic variable,byte code,class level constant pool)\tMethod AreaPerm gen space()64MB -XX:MaxPermSize  out of memory error\n\n### java8method Area metaspace (method areaNative Memory)\n\n#### 2. Heap\nnew\n\n-Xms , minimun size\n-Xmx , maximum size\n\n#### 3. Java Stack\njava stacks contains stack frames of the current execution per thread. \neg : method a ->  method b -> method c\npushstack frame(Frame)\nstack Frameetc\nstackoverFlowError\n\n\n\n#### 4. pc Registers\n\n\n#### 5. Native method stacks\nNative method stacks java stacknativewindowsdll\n\n\n\n\n\n\n\n\n### 6. Execution Engine\n![](http://odzl05jxx.bkt.clouddn.com/starry_sky.jpg?imageView2/2/w/500)\n\t- Interpreter byte code (Nativewindowsjre/bin/dllwindowsNativelinux.so)\n\n\t- JIT Compiler  just in time compilerbyte code instructionbyte codeintepreteJIT will hold on to that system level target machine code for future usage,which is fast\n\t- Hotspot profiler(it helps the JIT Compiler analysise the frequently used byte codess)\n\t- GC (a lengthy talk)\n\nNative Method Interface(JNI) -> Native method libraries.dll,.so etc\n\n\n\n\n\n\n\n\n### \n[JVM ( java virtual machine) architecture - tutorial](https://www.youtube.com/watch?v=ZBJ0u9MaKtM)","slug":"2017-05-24-jvm-architecture","published":1,"updated":"2017-06-18T05:10:51.560Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj50afgy0002ii4vrnc3spcpn","content":"<p>jvm<br><img src=\"http://odzl05jxx.bkt.clouddn.com/high_way_scene.jpg?imageView2/2/w/600\" alt=\"\"><br><a id=\"more\"></a></p>\n<h3 id=\"1-MyApp-java\"><a href=\"#1-MyApp-java\" class=\"headerlink\" title=\"1.MyApp.java\"></a>1.MyApp.java</h3><p>Javajavac MyApp.javaclass<br>:<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">javac MyApp.java</div><div class=\"line\">java MyApp</div></pre></td></tr></table></figure></p>\n<h4 id=\"jvm-instance\"><a href=\"#jvm-instance\" class=\"headerlink\" title=\"jvm instance.\"></a>jvm instance.</h4><h3 id=\"2-class-loaderExecution-Engine-Host-Operating-System\"><a href=\"#2-class-loaderExecution-Engine-Host-Operating-System\" class=\"headerlink\" title=\"2. class loaderExecution Engine Host Operating System\"></a>2. class loaderExecution Engine Host Operating System</h3><p>java MyAppclass loaderMyApp.classjava APIclassString,Object,Collection.classbyte codeExecution Engine,byte code</p>\n<h3 id=\"3-where-did-class-loader-load-class-into\"><a href=\"#3-where-did-class-loader-load-class-into\" class=\"headerlink\" title=\"3. where did class loader load class into ?\"></a>3. where did class loader load class into ?</h3><p>classloaderclass Runtime data areasjvm architectureclass loader subsystem,Runtime data areas execution Enigne<br>class loader subsystem -&gt; Runtime data areas -&gt; Execution Engine</p>\n<h3 id=\"4-classloaderclass-loading-subsystem\"><a href=\"#4-classloaderclass-loading-subsystem\" class=\"headerlink\" title=\"4.classloaderclass loading subsystem\"></a>4.classloaderclass loading subsystem</h3><pre><code>- load byte code .java.jarnetwork Socketclass loaderimplementationloadclass loader\n\n&gt; 1. Bootstrap class loader (jrert.jarjavainternal class) // \n\n&gt; 2. extension class loader (jre/lib/ext) //class\n\n&gt; 3. Application class loader (CLASSPATH, -cp)//CLASSPATH\n\n- loadlink\nverify(jvmbyte code) -&gt; prepare(classstatic variablevariable) -&gt; Resolve(when all the symbolic reference inside currentclass are resolvedclassclassDefNotFoundException)\n\njava specificationjvm\n</code></pre><p>class loading subsysteminitialize<br>class vars to initiazed Value in code()</p>\n<h3 id=\"5-Runtime-data-area\"><a href=\"#5-Runtime-data-area\" class=\"headerlink\" title=\"5. Runtime data area\"></a>5. Runtime data area</h3><p>Runtime data area java virtural machine<br>    //per jvm ,shared by all threads</p>\n<pre><code>- Method Area\n- Heap\n\n// per thread \n- java stack \n- pc Registers\n- Native method stacks\n</code></pre><h4 id=\"1-Method-Area-classstatic-variable-byte-code-class-level-constant-pool-Method-AreaPerm-gen-space--64MB--XX-MaxPermSize--out-of-memory-error\"><a href=\"#1-Method-Area-classstatic-variable-byte-code-class-level-constant-pool-Method-AreaPerm-gen-space--64MB--XX-MaxPermSize--out-of-memory-error\" class=\"headerlink\" title=\"1. Method Area(classstatic variable,byte code,class level constant pool)    Method AreaPerm gen space()64MB -XX:MaxPermSize  out of memory error\"></a>1. Method Area(classstatic variable,byte code,class level constant pool)    Method AreaPerm gen space()64MB -XX:MaxPermSize  out of memory error</h4><h3 id=\"java8method-Area-metaspace-method-areaNative-Memory\"><a href=\"#java8method-Area-metaspace-method-areaNative-Memory\" class=\"headerlink\" title=\"java8method Area metaspace (method areaNative Memory)\"></a>java8method Area metaspace (method areaNative Memory)</h3><h4 id=\"2-Heap\"><a href=\"#2-Heap\" class=\"headerlink\" title=\"2. Heap\"></a>2. Heap</h4><p>new</p>\n<p>-Xms , minimun size<br>-Xmx , maximum size</p>\n<h4 id=\"3-Java-Stack\"><a href=\"#3-Java-Stack\" class=\"headerlink\" title=\"3. Java Stack\"></a>3. Java Stack</h4><p>java stacks contains stack frames of the current execution per thread.<br>eg : method a -&gt;  method b -&gt; method c<br>pushstack frame(Frame)<br>stack Frameetc<br>stackoverFlowError</p>\n<h4 id=\"4-pc-Registers\"><a href=\"#4-pc-Registers\" class=\"headerlink\" title=\"4. pc Registers\"></a>4. pc Registers</h4><p></p>\n<h4 id=\"5-Native-method-stacks\"><a href=\"#5-Native-method-stacks\" class=\"headerlink\" title=\"5. Native method stacks\"></a>5. Native method stacks</h4><p>Native method stacks java stacknativewindowsdll</p>\n<h3 id=\"6-Execution-Engine\"><a href=\"#6-Execution-Engine\" class=\"headerlink\" title=\"6. Execution Engine\"></a>6. Execution Engine</h3><p><img src=\"http://odzl05jxx.bkt.clouddn.com/starry_sky.jpg?imageView2/2/w/500\" alt=\"\"></p>\n<pre><code>- Interpreter byte code (Nativewindowsjre/bin/dllwindowsNativelinux.so)\n\n- JIT Compiler  just in time compilerbyte code instructionbyte codeintepreteJIT will hold on to that system level target machine code for future usage,which is fast\n- Hotspot profiler(it helps the JIT Compiler analysise the frequently used byte codess)\n- GC (a lengthy talk)\n</code></pre><p>Native Method Interface(JNI) -&gt; Native method libraries.dll,.so etc</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><a href=\"https://www.youtube.com/watch?v=ZBJ0u9MaKtM\">JVM ( java virtual machine) architecture - tutorial</a></p>\n","excerpt":"<p>jvm<br><img src=\"http://odzl05jxx.bkt.clouddn.com/high_way_scene.jpg?imageView2/2/w/600\" alt=\"\"><br>","more":"</p>\n<h3 id=\"1-MyApp-java\"><a href=\"#1-MyApp-java\" class=\"headerlink\" title=\"1.MyApp.java\"></a>1.MyApp.java</h3><p>Javajavac MyApp.javaclass<br>:<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">javac MyApp.java</div><div class=\"line\">java MyApp</div></pre></td></tr></table></figure></p>\n<h4 id=\"jvm-instance\"><a href=\"#jvm-instance\" class=\"headerlink\" title=\"jvm instance.\"></a>jvm instance.</h4><h3 id=\"2-class-loaderExecution-Engine-Host-Operating-System\"><a href=\"#2-class-loaderExecution-Engine-Host-Operating-System\" class=\"headerlink\" title=\"2. class loaderExecution Engine Host Operating System\"></a>2. class loaderExecution Engine Host Operating System</h3><p>java MyAppclass loaderMyApp.classjava APIclassString,Object,Collection.classbyte codeExecution Engine,byte code</p>\n<h3 id=\"3-where-did-class-loader-load-class-into\"><a href=\"#3-where-did-class-loader-load-class-into\" class=\"headerlink\" title=\"3. where did class loader load class into ?\"></a>3. where did class loader load class into ?</h3><p>classloaderclass Runtime data areasjvm architectureclass loader subsystem,Runtime data areas execution Enigne<br>class loader subsystem -&gt; Runtime data areas -&gt; Execution Engine</p>\n<h3 id=\"4-classloaderclass-loading-subsystem\"><a href=\"#4-classloaderclass-loading-subsystem\" class=\"headerlink\" title=\"4.classloaderclass loading subsystem\"></a>4.classloaderclass loading subsystem</h3><pre><code>- load byte code .java.jarnetwork Socketclass loaderimplementationloadclass loader\n\n&gt; 1. Bootstrap class loader (jrert.jarjavainternal class) // \n\n&gt; 2. extension class loader (jre/lib/ext) //class\n\n&gt; 3. Application class loader (CLASSPATH, -cp)//CLASSPATH\n\n- loadlink\nverify(jvmbyte code) -&gt; prepare(classstatic variablevariable) -&gt; Resolve(when all the symbolic reference inside currentclass are resolvedclassclassDefNotFoundException)\n\njava specificationjvm\n</code></pre><p>class loading subsysteminitialize<br>class vars to initiazed Value in code()</p>\n<h3 id=\"5-Runtime-data-area\"><a href=\"#5-Runtime-data-area\" class=\"headerlink\" title=\"5. Runtime data area\"></a>5. Runtime data area</h3><p>Runtime data area java virtural machine<br>    //per jvm ,shared by all threads</p>\n<pre><code>- Method Area\n- Heap\n\n// per thread \n- java stack \n- pc Registers\n- Native method stacks\n</code></pre><h4 id=\"1-Method-Area-classstatic-variable-byte-code-class-level-constant-pool-Method-AreaPerm-gen-space--64MB--XX-MaxPermSize--out-of-memory-error\"><a href=\"#1-Method-Area-classstatic-variable-byte-code-class-level-constant-pool-Method-AreaPerm-gen-space--64MB--XX-MaxPermSize--out-of-memory-error\" class=\"headerlink\" title=\"1. Method Area(classstatic variable,byte code,class level constant pool)    Method AreaPerm gen space()64MB -XX:MaxPermSize  out of memory error\"></a>1. Method Area(classstatic variable,byte code,class level constant pool)    Method AreaPerm gen space()64MB -XX:MaxPermSize  out of memory error</h4><h3 id=\"java8method-Area-metaspace-method-areaNative-Memory\"><a href=\"#java8method-Area-metaspace-method-areaNative-Memory\" class=\"headerlink\" title=\"java8method Area metaspace (method areaNative Memory)\"></a>java8method Area metaspace (method areaNative Memory)</h3><h4 id=\"2-Heap\"><a href=\"#2-Heap\" class=\"headerlink\" title=\"2. Heap\"></a>2. Heap</h4><p>new</p>\n<p>-Xms , minimun size<br>-Xmx , maximum size</p>\n<h4 id=\"3-Java-Stack\"><a href=\"#3-Java-Stack\" class=\"headerlink\" title=\"3. Java Stack\"></a>3. Java Stack</h4><p>java stacks contains stack frames of the current execution per thread.<br>eg : method a -&gt;  method b -&gt; method c<br>pushstack frame(Frame)<br>stack Frameetc<br>stackoverFlowError</p>\n<h4 id=\"4-pc-Registers\"><a href=\"#4-pc-Registers\" class=\"headerlink\" title=\"4. pc Registers\"></a>4. pc Registers</h4><p></p>\n<h4 id=\"5-Native-method-stacks\"><a href=\"#5-Native-method-stacks\" class=\"headerlink\" title=\"5. Native method stacks\"></a>5. Native method stacks</h4><p>Native method stacks java stacknativewindowsdll</p>\n<h3 id=\"6-Execution-Engine\"><a href=\"#6-Execution-Engine\" class=\"headerlink\" title=\"6. Execution Engine\"></a>6. Execution Engine</h3><p><img src=\"http://odzl05jxx.bkt.clouddn.com/starry_sky.jpg?imageView2/2/w/500\" alt=\"\"></p>\n<pre><code>- Interpreter byte code (Nativewindowsjre/bin/dllwindowsNativelinux.so)\n\n- JIT Compiler  just in time compilerbyte code instructionbyte codeintepreteJIT will hold on to that system level target machine code for future usage,which is fast\n- Hotspot profiler(it helps the JIT Compiler analysise the frequently used byte codess)\n- GC (a lengthy talk)\n</code></pre><p>Native Method Interface(JNI) -&gt; Native method libraries.dll,.so etc</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><a href=\"https://www.youtube.com/watch?v=ZBJ0u9MaKtM\">JVM ( java virtual machine) architecture - tutorial</a></p>"},{"title":"For those tiny details in Java","date":"2017-06-17T13:24:48.000Z","_content":"> interesting stuff in java that don't seem to get enough pubilicity\n> \n>\n\n![landscape](http://odzl05jxx.bkt.clouddn.com/34a7d57ccabb18c69d085247cf009b22.jpg?imageView2/2/w/600)\n\n<!--more-->\n\n1. getting the concreate class from generic types\n    ```java\n        /**\n     * Make a GET request and return a parsed object from JSON.\n     *\n     * @param url     URL of the request to make\n     * @param clazz   Relevant class object, for Gson's reflection\n     * @param headers Map of request headers\n     */\n    public GenericMoshiRequest(String url, @Nullable Class<T> clazz, Map<String, String> headers,\n                               Response.Listener<T> listener, Response.ErrorListener errorListener) {\n        super(Method.GET, url, errorListener);\n//        this.clazz = clazz;\n        Class<T> entityClass = (Class<T>) ((ParameterizedType) getClass().getGenericSuperclass()).getActualTypeArguments()[0];//class\n        this.clazz = entityClass;\n        this.headers = headers;\n        this.listener = listener;\n    }\n    ```\n\n2. OkHttp \n[okhttp-is-quietly-retrying-requests-is-your-api-ready](https://medium.com/inloop/okhttp-is-quietly-retrying-requests-is-your-api-ready-19489ef35ace)\nOkHttpRetryAndFollowUpInterceptor\n    ```java\n   RetryAndFollowUpInterceptor.java\n\n  @Override public Response intercept(Chain chain) throws IOException {\n    Request request = chain.request();\n\n    streamAllocation = new StreamAllocation(\n        client.connectionPool(), createAddress(request.url()), callStackTrace);\n\n    int followUpCount = 0;\n    Response priorResponse = null;\n    while (true) { # \n      if (canceled) {\n        streamAllocation.release();\n        throw new IOException(\"Canceled\");\n      }\n\n      Response response = null;\n      boolean releaseConnection = true;\n      try {\n        response = ((RealInterceptorChain) chain).proceed(request, streamAllocation, null, null);\n        releaseConnection = false; //response\n      } catch (RouteException e) {\n        // The attempt to connect via a route failed. The request will not have been sent.\n        if (!recover(e.getLastConnectException(), false, request)) {\n          throw e.getLastConnectException();\n        }\n        releaseConnection = false;\n        continue;  //\n      } catch (IOException e) {\n        // An attempt to communicate with a server failed. The request may have been sent.\n        boolean requestSendStarted = !(e instanceof ConnectionShutdownException);\n        if (!recover(e, requestSendStarted, request)) throw e;\n        releaseConnection = false;\n        continue; //\n      } finally {\n        // We're throwing an unchecked exception. Release any resources.\n        if (releaseConnection) { //\n          streamAllocation.streamFailed(null);\n          streamAllocation.release();\n        }\n      }\n    }\n  }\n    ```\nretryOnConnectionFailure\nOkHttp 3.3.0 [issue](https://github.com/square/okhttp/issues/2394)\n\n> Dont recover if we encounter a read timeout after sending the request, but do recover if we encounter a timeout building a connection\n()()\n\nGETRetryPOSTGUIDuniqueserverclientprotocol\n\n3. From Java Code To Java Heap \n   A talk from IBM Engineer, talking about optimizing the memery usage for your java application.[youtube](https://www.youtube.com/watch?v=FLcXf9pO27w)\n   [ibm](https://www.ibm.com/developerworks/java/library/j-codetoheap/index.html)\n\n4. String\n  String\n  ```java\n  String a = \"hello\"\n  String b = \"hello\"\n  String c = new String(\"Hello\")\n  \n  abc\n  a==b!=c  \n\n  //String\n  Field a_ = String.class.getDeclaredField(\"value\");\n        a_.setAccessible(true);\n        char[] value=(char[])a_.get(a);\n        value[3]='_';   //a\n\n  a,b,c       \n\n  ```\n\n5. \n```java\n Builder(Retrofit retrofit, Method method) {\n      this.retrofit = retrofit;\n      this.method = method;\n      this.methodAnnotations = method.getAnnotations();\n      this.parameterTypes = method.getGenericParameterTypes();\n      this.parameterAnnotationsArray = method.getParameterAnnotations();\n    }\n```\n\nRetrofit\n","source":"_posts/2017-06-17-tiny-details-in-java.md","raw":"---\ntitle: For those tiny details in Java \ndate: 2017-06-17 21:24:48\ntags: [java]\n---\n> interesting stuff in java that don't seem to get enough pubilicity\n> \n>\n\n![landscape](http://odzl05jxx.bkt.clouddn.com/34a7d57ccabb18c69d085247cf009b22.jpg?imageView2/2/w/600)\n\n<!--more-->\n\n1. getting the concreate class from generic types\n    ```java\n        /**\n     * Make a GET request and return a parsed object from JSON.\n     *\n     * @param url     URL of the request to make\n     * @param clazz   Relevant class object, for Gson's reflection\n     * @param headers Map of request headers\n     */\n    public GenericMoshiRequest(String url, @Nullable Class<T> clazz, Map<String, String> headers,\n                               Response.Listener<T> listener, Response.ErrorListener errorListener) {\n        super(Method.GET, url, errorListener);\n//        this.clazz = clazz;\n        Class<T> entityClass = (Class<T>) ((ParameterizedType) getClass().getGenericSuperclass()).getActualTypeArguments()[0];//class\n        this.clazz = entityClass;\n        this.headers = headers;\n        this.listener = listener;\n    }\n    ```\n\n2. OkHttp \n[okhttp-is-quietly-retrying-requests-is-your-api-ready](https://medium.com/inloop/okhttp-is-quietly-retrying-requests-is-your-api-ready-19489ef35ace)\nOkHttpRetryAndFollowUpInterceptor\n    ```java\n   RetryAndFollowUpInterceptor.java\n\n  @Override public Response intercept(Chain chain) throws IOException {\n    Request request = chain.request();\n\n    streamAllocation = new StreamAllocation(\n        client.connectionPool(), createAddress(request.url()), callStackTrace);\n\n    int followUpCount = 0;\n    Response priorResponse = null;\n    while (true) { # \n      if (canceled) {\n        streamAllocation.release();\n        throw new IOException(\"Canceled\");\n      }\n\n      Response response = null;\n      boolean releaseConnection = true;\n      try {\n        response = ((RealInterceptorChain) chain).proceed(request, streamAllocation, null, null);\n        releaseConnection = false; //response\n      } catch (RouteException e) {\n        // The attempt to connect via a route failed. The request will not have been sent.\n        if (!recover(e.getLastConnectException(), false, request)) {\n          throw e.getLastConnectException();\n        }\n        releaseConnection = false;\n        continue;  //\n      } catch (IOException e) {\n        // An attempt to communicate with a server failed. The request may have been sent.\n        boolean requestSendStarted = !(e instanceof ConnectionShutdownException);\n        if (!recover(e, requestSendStarted, request)) throw e;\n        releaseConnection = false;\n        continue; //\n      } finally {\n        // We're throwing an unchecked exception. Release any resources.\n        if (releaseConnection) { //\n          streamAllocation.streamFailed(null);\n          streamAllocation.release();\n        }\n      }\n    }\n  }\n    ```\nretryOnConnectionFailure\nOkHttp 3.3.0 [issue](https://github.com/square/okhttp/issues/2394)\n\n> Dont recover if we encounter a read timeout after sending the request, but do recover if we encounter a timeout building a connection\n()()\n\nGETRetryPOSTGUIDuniqueserverclientprotocol\n\n3. From Java Code To Java Heap \n   A talk from IBM Engineer, talking about optimizing the memery usage for your java application.[youtube](https://www.youtube.com/watch?v=FLcXf9pO27w)\n   [ibm](https://www.ibm.com/developerworks/java/library/j-codetoheap/index.html)\n\n4. String\n  String\n  ```java\n  String a = \"hello\"\n  String b = \"hello\"\n  String c = new String(\"Hello\")\n  \n  abc\n  a==b!=c  \n\n  //String\n  Field a_ = String.class.getDeclaredField(\"value\");\n        a_.setAccessible(true);\n        char[] value=(char[])a_.get(a);\n        value[3]='_';   //a\n\n  a,b,c       \n\n  ```\n\n5. \n```java\n Builder(Retrofit retrofit, Method method) {\n      this.retrofit = retrofit;\n      this.method = method;\n      this.methodAnnotations = method.getAnnotations();\n      this.parameterTypes = method.getGenericParameterTypes();\n      this.parameterAnnotationsArray = method.getParameterAnnotations();\n    }\n```\n\nRetrofit\n","slug":"2017-06-17-tiny-details-in-java","published":1,"updated":"2017-07-03T00:07:42.213Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj50afgyg002ki4vrx7mchh7s","content":"<blockquote>\n<p>interesting stuff in java that dont seem to get enough pubilicity</p>\n</blockquote>\n<p><img src=\"http://odzl05jxx.bkt.clouddn.com/34a7d57ccabb18c69d085247cf009b22.jpg?imageView2/2/w/600\" alt=\"landscape\"></p>\n<a id=\"more\"></a>\n<ol>\n<li><p>getting the concreate class from generic types</p>\n <figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\">        <span class=\"comment\">/**</div><div class=\"line\">     * Make a GET request and return a parsed object from JSON.</div><div class=\"line\">     *</div><div class=\"line\">     * <span class=\"doctag\">@param</span> url     URL of the request to make</div><div class=\"line\">     * <span class=\"doctag\">@param</span> clazz   Relevant class object, for Gson's reflection</div><div class=\"line\">     * <span class=\"doctag\">@param</span> headers Map of request headers</div><div class=\"line\">     */</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">GenericMoshiRequest</span><span class=\"params\">(String url, @Nullable Class&lt;T&gt; clazz, Map&lt;String, String&gt; headers,</div><div class=\"line\">                               Response.Listener&lt;T&gt; listener, Response.ErrorListener errorListener)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>(Method.GET, url, errorListener);</div><div class=\"line\"><span class=\"comment\">//        this.clazz = clazz;</span></div><div class=\"line\">        Class&lt;T&gt; entityClass = (Class&lt;T&gt;) ((ParameterizedType) getClass().getGenericSuperclass()).getActualTypeArguments()[<span class=\"number\">0</span>];<span class=\"comment\">//class</span></div><div class=\"line\">        <span class=\"keyword\">this</span>.clazz = entityClass;</div><div class=\"line\">        <span class=\"keyword\">this</span>.headers = headers;</div><div class=\"line\">        <span class=\"keyword\">this</span>.listener = listener;</div><div class=\"line\">    &#125;</div></pre></td></tr></table></figure>\n</li>\n<li><p>OkHttp <br><a href=\"https://medium.com/inloop/okhttp-is-quietly-retrying-requests-is-your-api-ready-19489ef35ace\">okhttp-is-quietly-retrying-requests-is-your-api-ready</a><br>OkHttpRetryAndFollowUpInterceptor</p>\n <figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div></pre></td><td class=\"code\"><pre><div class=\"line\"> RetryAndFollowUpInterceptor.java</div><div class=\"line\"></div><div class=\"line\">@Override public Response intercept(Chain chain) throws IOException &#123;</div><div class=\"line\">  Request request = chain.request();</div><div class=\"line\"></div><div class=\"line\">  streamAllocation = new StreamAllocation(</div><div class=\"line\">      client.connectionPool(), createAddress(request.url()), callStackTrace);</div><div class=\"line\"></div><div class=\"line\">  int followUpCount = 0;</div><div class=\"line\">  Response priorResponse = null;</div><div class=\"line\">  while (true) &#123; # </div><div class=\"line\">    if (canceled) &#123;</div><div class=\"line\">      streamAllocation.release();</div><div class=\"line\">      throw new IOException(\"Canceled\");</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    Response response = null;</div><div class=\"line\">    boolean releaseConnection = true;</div><div class=\"line\">    try &#123;</div><div class=\"line\">      response = ((RealInterceptorChain) chain).proceed(request, streamAllocation, null, null);</div><div class=\"line\">      releaseConnection = false; //response</div><div class=\"line\">    &#125; catch (RouteException e) &#123;</div><div class=\"line\">      // The attempt to connect via a route failed. The request will not have been sent.</div><div class=\"line\">      if (!recover(e.getLastConnectException(), false, request)) &#123;</div><div class=\"line\">        throw e.getLastConnectException();</div><div class=\"line\">      &#125;</div><div class=\"line\">      releaseConnection = false;</div><div class=\"line\">      continue;  //</div><div class=\"line\">    &#125; catch (IOException e) &#123;</div><div class=\"line\">      // An attempt to communicate with a server failed. The request may have been sent.</div><div class=\"line\">      boolean requestSendStarted = !(e instanceof ConnectionShutdownException);</div><div class=\"line\">      if (!recover(e, requestSendStarted, request)) throw e;</div><div class=\"line\">      releaseConnection = false;</div><div class=\"line\">      continue; //</div><div class=\"line\">    &#125; finally &#123;</div><div class=\"line\">      // We're throwing an unchecked exception. Release any resources.</div><div class=\"line\">      if (releaseConnection) &#123; //</div><div class=\"line\">        streamAllocation.streamFailed(null);</div><div class=\"line\">        streamAllocation.release();</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n</li>\n</ol>\n<p>retryOnConnectionFailure<br>OkHttp 3.3.0 <a href=\"https://github.com/square/okhttp/issues/2394\">issue</a></p>\n<blockquote>\n<p>Dont recover if we encounter a read timeout after sending the request, but do recover if we encounter a timeout building a connection<br>()()</p>\n</blockquote>\n<p>GETRetryPOSTGUIDuniqueserverclientprotocol</p>\n<ol>\n<li><p>From Java Code To Java Heap<br>A talk from IBM Engineer, talking about optimizing the memery usage for your java application.<a href=\"https://www.youtube.com/watch?v=FLcXf9pO27w\">youtube</a><br><a href=\"https://www.ibm.com/developerworks/java/library/j-codetoheap/index.html\">ibm</a></p>\n</li>\n<li><p>String<br>String</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">String a = <span class=\"string\">\"hello\"</span></div><div class=\"line\">String b = <span class=\"string\">\"hello\"</span></div><div class=\"line\">String c = <span class=\"keyword\">new</span> String(<span class=\"string\">\"Hello\"</span>)</div><div class=\"line\"></div><div class=\"line\">abc</div><div class=\"line\">a==b!=c  </div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//String</span></div><div class=\"line\">Field a_ = String.class.getDeclaredField(<span class=\"string\">\"value\"</span>);</div><div class=\"line\">      a_.setAccessible(<span class=\"keyword\">true</span>);</div><div class=\"line\">      <span class=\"keyword\">char</span>[] value=(<span class=\"keyword\">char</span>[])a_.get(a);</div><div class=\"line\">      value[<span class=\"number\">3</span>]=<span class=\"string\">'_'</span>;   <span class=\"comment\">//a</span></div><div class=\"line\"></div><div class=\"line\">a,b,c </div></pre></td></tr></table></figure>\n</li>\n<li><p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">Builder(Retrofit retrofit, Method method) &#123;</div><div class=\"line\">     <span class=\"keyword\">this</span>.retrofit = retrofit;</div><div class=\"line\">     <span class=\"keyword\">this</span>.method = method;</div><div class=\"line\">     <span class=\"keyword\">this</span>.methodAnnotations = method.getAnnotations();</div><div class=\"line\">     <span class=\"keyword\">this</span>.parameterTypes = method.getGenericParameterTypes();</div><div class=\"line\">     <span class=\"keyword\">this</span>.parameterAnnotationsArray = method.getParameterAnnotations();</div><div class=\"line\">   &#125;</div></pre></td></tr></table></figure>\n</li>\n</ol>\n<p>Retrofit</p>\n","excerpt":"<blockquote>\n<p>interesting stuff in java that dont seem to get enough pubilicity</p>\n</blockquote>\n<p><img src=\"http://odzl05jxx.bkt.clouddn.com/34a7d57ccabb18c69d085247cf009b22.jpg?imageView2/2/w/600\" alt=\"landscape\"></p>","more":"<ol>\n<li><p>getting the concreate class from generic types</p>\n <figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\">        <span class=\"comment\">/**</div><div class=\"line\">     * Make a GET request and return a parsed object from JSON.</div><div class=\"line\">     *</div><div class=\"line\">     * <span class=\"doctag\">@param</span> url     URL of the request to make</div><div class=\"line\">     * <span class=\"doctag\">@param</span> clazz   Relevant class object, for Gson's reflection</div><div class=\"line\">     * <span class=\"doctag\">@param</span> headers Map of request headers</div><div class=\"line\">     */</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">GenericMoshiRequest</span><span class=\"params\">(String url, @Nullable Class&lt;T&gt; clazz, Map&lt;String, String&gt; headers,</div><div class=\"line\">                               Response.Listener&lt;T&gt; listener, Response.ErrorListener errorListener)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>(Method.GET, url, errorListener);</div><div class=\"line\"><span class=\"comment\">//        this.clazz = clazz;</span></div><div class=\"line\">        Class&lt;T&gt; entityClass = (Class&lt;T&gt;) ((ParameterizedType) getClass().getGenericSuperclass()).getActualTypeArguments()[<span class=\"number\">0</span>];<span class=\"comment\">//class</span></div><div class=\"line\">        <span class=\"keyword\">this</span>.clazz = entityClass;</div><div class=\"line\">        <span class=\"keyword\">this</span>.headers = headers;</div><div class=\"line\">        <span class=\"keyword\">this</span>.listener = listener;</div><div class=\"line\">    &#125;</div></pre></td></tr></table></figure>\n</li>\n<li><p>OkHttp <br><a href=\"https://medium.com/inloop/okhttp-is-quietly-retrying-requests-is-your-api-ready-19489ef35ace\">okhttp-is-quietly-retrying-requests-is-your-api-ready</a><br>OkHttpRetryAndFollowUpInterceptor</p>\n <figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div></pre></td><td class=\"code\"><pre><div class=\"line\"> RetryAndFollowUpInterceptor.java</div><div class=\"line\"></div><div class=\"line\">@Override public Response intercept(Chain chain) throws IOException &#123;</div><div class=\"line\">  Request request = chain.request();</div><div class=\"line\"></div><div class=\"line\">  streamAllocation = new StreamAllocation(</div><div class=\"line\">      client.connectionPool(), createAddress(request.url()), callStackTrace);</div><div class=\"line\"></div><div class=\"line\">  int followUpCount = 0;</div><div class=\"line\">  Response priorResponse = null;</div><div class=\"line\">  while (true) &#123; # </div><div class=\"line\">    if (canceled) &#123;</div><div class=\"line\">      streamAllocation.release();</div><div class=\"line\">      throw new IOException(\"Canceled\");</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    Response response = null;</div><div class=\"line\">    boolean releaseConnection = true;</div><div class=\"line\">    try &#123;</div><div class=\"line\">      response = ((RealInterceptorChain) chain).proceed(request, streamAllocation, null, null);</div><div class=\"line\">      releaseConnection = false; //response</div><div class=\"line\">    &#125; catch (RouteException e) &#123;</div><div class=\"line\">      // The attempt to connect via a route failed. The request will not have been sent.</div><div class=\"line\">      if (!recover(e.getLastConnectException(), false, request)) &#123;</div><div class=\"line\">        throw e.getLastConnectException();</div><div class=\"line\">      &#125;</div><div class=\"line\">      releaseConnection = false;</div><div class=\"line\">      continue;  //</div><div class=\"line\">    &#125; catch (IOException e) &#123;</div><div class=\"line\">      // An attempt to communicate with a server failed. The request may have been sent.</div><div class=\"line\">      boolean requestSendStarted = !(e instanceof ConnectionShutdownException);</div><div class=\"line\">      if (!recover(e, requestSendStarted, request)) throw e;</div><div class=\"line\">      releaseConnection = false;</div><div class=\"line\">      continue; //</div><div class=\"line\">    &#125; finally &#123;</div><div class=\"line\">      // We're throwing an unchecked exception. Release any resources.</div><div class=\"line\">      if (releaseConnection) &#123; //</div><div class=\"line\">        streamAllocation.streamFailed(null);</div><div class=\"line\">        streamAllocation.release();</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n</li>\n</ol>\n<p>retryOnConnectionFailure<br>OkHttp 3.3.0 <a href=\"https://github.com/square/okhttp/issues/2394\">issue</a></p>\n<blockquote>\n<p>Dont recover if we encounter a read timeout after sending the request, but do recover if we encounter a timeout building a connection<br>()()</p>\n</blockquote>\n<p>GETRetryPOSTGUIDuniqueserverclientprotocol</p>\n<ol>\n<li><p>From Java Code To Java Heap<br>A talk from IBM Engineer, talking about optimizing the memery usage for your java application.<a href=\"https://www.youtube.com/watch?v=FLcXf9pO27w\">youtube</a><br><a href=\"https://www.ibm.com/developerworks/java/library/j-codetoheap/index.html\">ibm</a></p>\n</li>\n<li><p>String<br>String</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">String a = <span class=\"string\">\"hello\"</span></div><div class=\"line\">String b = <span class=\"string\">\"hello\"</span></div><div class=\"line\">String c = <span class=\"keyword\">new</span> String(<span class=\"string\">\"Hello\"</span>)</div><div class=\"line\"></div><div class=\"line\">abc</div><div class=\"line\">a==b!=c  </div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//String</span></div><div class=\"line\">Field a_ = String.class.getDeclaredField(<span class=\"string\">\"value\"</span>);</div><div class=\"line\">      a_.setAccessible(<span class=\"keyword\">true</span>);</div><div class=\"line\">      <span class=\"keyword\">char</span>[] value=(<span class=\"keyword\">char</span>[])a_.get(a);</div><div class=\"line\">      value[<span class=\"number\">3</span>]=<span class=\"string\">'_'</span>;   <span class=\"comment\">//a</span></div><div class=\"line\"></div><div class=\"line\">a,b,c </div></pre></td></tr></table></figure>\n</li>\n<li><p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">Builder(Retrofit retrofit, Method method) &#123;</div><div class=\"line\">     <span class=\"keyword\">this</span>.retrofit = retrofit;</div><div class=\"line\">     <span class=\"keyword\">this</span>.method = method;</div><div class=\"line\">     <span class=\"keyword\">this</span>.methodAnnotations = method.getAnnotations();</div><div class=\"line\">     <span class=\"keyword\">this</span>.parameterTypes = method.getGenericParameterTypes();</div><div class=\"line\">     <span class=\"keyword\">this</span>.parameterAnnotationsArray = method.getParameterAnnotations();</div><div class=\"line\">   &#125;</div></pre></td></tr></table></figure>\n</li>\n</ol>\n<p>Retrofit</p>"},{"title":"2017-07-12-scrapy-notes","date":"2017-07-12T00:37:55.000Z","_content":"\n## Scrappy\nvirtualenvenv\n\n\n\n<!--more-->\npip install Scrappy \n# error: Microsoft Visual C++ 14.0 is required. Get it with \"Microsoft Visual C++ Build Tools\": http://landinghub.visualstudio.com/visual-cpp-build-tools\nvs,4GB\n\n\n\n\nscrapy \n>scrapy startproject tutorial #projecttutorialtutorial/spidersquotes_spider.py\n\n[Scrapy](http://cuiqingcai.com/3952.html/2)\n```python\nimport scrapy\nclass QuotesSpider(scrapy.Spider):\n    name = \"quotes\"\n\n    def start_requests(self):\n        urls = [\n            'http://quotes.toscrape.com/page/1/',\n            'http://quotes.toscrape.com/page/2/',\n        ]\n        for url in urls:\n            yield scrapy.Request(url=url, callback=self.parse) \n     #callbackresponse \n     #responsecssxpath\n\n    def parse(self, response):\n        page = response.url.split(\"/\")[-2]\n        filename = 'quotes-%s.html' % page\n        with open(filename, 'wb') as f:\n            f.write(response.body)\n        self.log('Saved file %s' % filename)\n```\n\n> scrapy crawl quotes #quotes.toscrape.com,tutorial\n\n>scrapy shell 'http://quotes.toscrape.com/page/1/' #Response  \n\n\n```\n>>> response.css('title::text').extract()\n['Quotes to Scrape']\n```\nvc2014virtualenv,pycharmscrapy\n```python\n>>> response.css('title::text').extract_first()\n'Quotes to Scrape'\n\n>>> response.css('title::text').re(r'Quotes.*') #\n['Quotes to Scrape']\n\n#xpath\n>>> response.xpath('//title/text()').extract_first()\n'Quotes to Scrape'\n```\n\nafterLogin\nDict\n> formadata = {'userName':  'Bob','pwd'123456}\n(MiddleWare)\nCookieUserAgent setting.pyCookie\nPipeLineCookie,Ajaxrulesurl\n\n\n\n## 2. MongoDB","source":"_posts/2017-07-12-scrapy-notes.md","raw":"---\ntitle: 2017-07-12-scrapy-notes\ndate: 2017-07-12 08:37:55\ntags: [python]\n---\n\n## Scrappy\nvirtualenvenv\n\n\n\n<!--more-->\npip install Scrappy \n# error: Microsoft Visual C++ 14.0 is required. Get it with \"Microsoft Visual C++ Build Tools\": http://landinghub.visualstudio.com/visual-cpp-build-tools\nvs,4GB\n\n\n\n\nscrapy \n>scrapy startproject tutorial #projecttutorialtutorial/spidersquotes_spider.py\n\n[Scrapy](http://cuiqingcai.com/3952.html/2)\n```python\nimport scrapy\nclass QuotesSpider(scrapy.Spider):\n    name = \"quotes\"\n\n    def start_requests(self):\n        urls = [\n            'http://quotes.toscrape.com/page/1/',\n            'http://quotes.toscrape.com/page/2/',\n        ]\n        for url in urls:\n            yield scrapy.Request(url=url, callback=self.parse) \n     #callbackresponse \n     #responsecssxpath\n\n    def parse(self, response):\n        page = response.url.split(\"/\")[-2]\n        filename = 'quotes-%s.html' % page\n        with open(filename, 'wb') as f:\n            f.write(response.body)\n        self.log('Saved file %s' % filename)\n```\n\n> scrapy crawl quotes #quotes.toscrape.com,tutorial\n\n>scrapy shell 'http://quotes.toscrape.com/page/1/' #Response  \n\n\n```\n>>> response.css('title::text').extract()\n['Quotes to Scrape']\n```\nvc2014virtualenv,pycharmscrapy\n```python\n>>> response.css('title::text').extract_first()\n'Quotes to Scrape'\n\n>>> response.css('title::text').re(r'Quotes.*') #\n['Quotes to Scrape']\n\n#xpath\n>>> response.xpath('//title/text()').extract_first()\n'Quotes to Scrape'\n```\n\nafterLogin\nDict\n> formadata = {'userName':  'Bob','pwd'123456}\n(MiddleWare)\nCookieUserAgent setting.pyCookie\nPipeLineCookie,Ajaxrulesurl\n\n\n\n## 2. MongoDB","slug":"2017-07-12-scrapy-notes","published":1,"updated":"2017-07-12T00:50:21.363Z","_id":"cj50afgyg002ni4vrkymkbfv7","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"Scrappy\"><a href=\"#Scrappy\" class=\"headerlink\" title=\"Scrappy\"></a>Scrappy</h2><p>virtualenvenv</p>\n<a id=\"more\"></a>\n<p>pip install Scrappy </p>\n<h1 id=\"error-Microsoft-Visual-C-14-0-is-required-Get-it-with-Microsoft-Visual-C-Build-Tools-http-landinghub-visualstudio-com-visual-cpp-build-tools\"><a href=\"#error-Microsoft-Visual-C-14-0-is-required-Get-it-with-Microsoft-Visual-C-Build-Tools-http-landinghub-visualstudio-com-visual-cpp-build-tools\" class=\"headerlink\" title=\"error: Microsoft Visual C++ 14.0 is required. Get it with Microsoft Visual C++ Build Tools: http://landinghub.visualstudio.com/visual-cpp-build-tools\"></a>error: Microsoft Visual C++ 14.0 is required. Get it with Microsoft Visual C++ Build Tools: <a href=\"http://landinghub.visualstudio.com/visual-cpp-build-tools\">http://landinghub.visualstudio.com/visual-cpp-build-tools</a></h1><p>vs,4GB</p>\n<p><br>scrapy </p>\n<blockquote>\n<p>scrapy startproject tutorial #projecttutorialtutorial/spidersquotes_spider.py</p>\n</blockquote>\n<p><a href=\"http://cuiqingcai.com/3952.html/2\">Scrapy</a><br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> scrapy</div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">QuotesSpider</span><span class=\"params\">(scrapy.Spider)</span>:</span></div><div class=\"line\">    name = <span class=\"string\">\"quotes\"</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">start_requests</span><span class=\"params\">(self)</span>:</span></div><div class=\"line\">        urls = [</div><div class=\"line\">            <span class=\"string\">'http://quotes.toscrape.com/page/1/'</span>,</div><div class=\"line\">            <span class=\"string\">'http://quotes.toscrape.com/page/2/'</span>,</div><div class=\"line\">        ]</div><div class=\"line\">        <span class=\"keyword\">for</span> url <span class=\"keyword\">in</span> urls:</div><div class=\"line\">            <span class=\"keyword\">yield</span> scrapy.Request(url=url, callback=self.parse) </div><div class=\"line\">     <span class=\"comment\">#callbackresponse </span></div><div class=\"line\">     <span class=\"comment\">#responsecssxpath</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">parse</span><span class=\"params\">(self, response)</span>:</span></div><div class=\"line\">        page = response.url.split(<span class=\"string\">\"/\"</span>)[<span class=\"number\">-2</span>]</div><div class=\"line\">        filename = <span class=\"string\">'quotes-%s.html'</span> % page</div><div class=\"line\">        <span class=\"keyword\">with</span> open(filename, <span class=\"string\">'wb'</span>) <span class=\"keyword\">as</span> f:</div><div class=\"line\">            f.write(response.body)</div><div class=\"line\">        self.log(<span class=\"string\">'Saved file %s'</span> % filename)</div></pre></td></tr></table></figure></p>\n<blockquote>\n<p>scrapy crawl quotes #quotes.toscrape.com,tutorial</p>\n<p>scrapy shell <a href=\"http://quotes.toscrape.com/page/1/\">http://quotes.toscrape.com/page/1/</a> #Response  </p>\n</blockquote>\n<p><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">&gt;&gt;&gt; response.css(&apos;title::text&apos;).extract()</div><div class=\"line\">[&apos;Quotes to Scrape&apos;]</div></pre></td></tr></table></figure></p>\n<p>vc2014virtualenv,pycharmscrapy<br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>response.css(<span class=\"string\">'title::text'</span>).extract_first()</div><div class=\"line\"><span class=\"string\">'Quotes to Scrape'</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>response.css(<span class=\"string\">'title::text'</span>).re(<span class=\"string\">r'Quotes.*'</span>) <span class=\"comment\">#</span></div><div class=\"line\">[<span class=\"string\">'Quotes to Scrape'</span>]</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#xpath</span></div><div class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>response.xpath(<span class=\"string\">'//title/text()'</span>).extract_first()</div><div class=\"line\"><span class=\"string\">'Quotes to Scrape'</span></div></pre></td></tr></table></figure></p>\n<p>afterLogin<br>Dict</p>\n<blockquote>\n<p>formadata = {userName:  Bob,pwd123456}<br>(MiddleWare)<br>CookieUserAgent setting.pyCookie<br>PipeLineCookie,Ajaxrulesurl</p>\n</blockquote>\n<h2 id=\"2-MongoDB\"><a href=\"#2-MongoDB\" class=\"headerlink\" title=\"2. MongoDB\"></a>2. MongoDB</h2>","excerpt":"<h2 id=\"Scrappy\"><a href=\"#Scrappy\" class=\"headerlink\" title=\"Scrappy\"></a>Scrappy</h2><p>virtualenvenv</p>","more":"<p>pip install Scrappy </p>\n<h1 id=\"error-Microsoft-Visual-C-14-0-is-required-Get-it-with-Microsoft-Visual-C-Build-Tools-http-landinghub-visualstudio-com-visual-cpp-build-tools\"><a href=\"#error-Microsoft-Visual-C-14-0-is-required-Get-it-with-Microsoft-Visual-C-Build-Tools-http-landinghub-visualstudio-com-visual-cpp-build-tools\" class=\"headerlink\" title=\"error: Microsoft Visual C++ 14.0 is required. Get it with Microsoft Visual C++ Build Tools: http://landinghub.visualstudio.com/visual-cpp-build-tools\"></a>error: Microsoft Visual C++ 14.0 is required. Get it with Microsoft Visual C++ Build Tools: <a href=\"http://landinghub.visualstudio.com/visual-cpp-build-tools\">http://landinghub.visualstudio.com/visual-cpp-build-tools</a></h1><p>vs,4GB</p>\n<p><br>scrapy </p>\n<blockquote>\n<p>scrapy startproject tutorial #projecttutorialtutorial/spidersquotes_spider.py</p>\n</blockquote>\n<p><a href=\"http://cuiqingcai.com/3952.html/2\">Scrapy</a><br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> scrapy</div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">QuotesSpider</span><span class=\"params\">(scrapy.Spider)</span>:</span></div><div class=\"line\">    name = <span class=\"string\">\"quotes\"</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">start_requests</span><span class=\"params\">(self)</span>:</span></div><div class=\"line\">        urls = [</div><div class=\"line\">            <span class=\"string\">'http://quotes.toscrape.com/page/1/'</span>,</div><div class=\"line\">            <span class=\"string\">'http://quotes.toscrape.com/page/2/'</span>,</div><div class=\"line\">        ]</div><div class=\"line\">        <span class=\"keyword\">for</span> url <span class=\"keyword\">in</span> urls:</div><div class=\"line\">            <span class=\"keyword\">yield</span> scrapy.Request(url=url, callback=self.parse) </div><div class=\"line\">     <span class=\"comment\">#callbackresponse </span></div><div class=\"line\">     <span class=\"comment\">#responsecssxpath</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">parse</span><span class=\"params\">(self, response)</span>:</span></div><div class=\"line\">        page = response.url.split(<span class=\"string\">\"/\"</span>)[<span class=\"number\">-2</span>]</div><div class=\"line\">        filename = <span class=\"string\">'quotes-%s.html'</span> % page</div><div class=\"line\">        <span class=\"keyword\">with</span> open(filename, <span class=\"string\">'wb'</span>) <span class=\"keyword\">as</span> f:</div><div class=\"line\">            f.write(response.body)</div><div class=\"line\">        self.log(<span class=\"string\">'Saved file %s'</span> % filename)</div></pre></td></tr></table></figure></p>\n<blockquote>\n<p>scrapy crawl quotes #quotes.toscrape.com,tutorial</p>\n<p>scrapy shell <a href=\"http://quotes.toscrape.com/page/1/\">http://quotes.toscrape.com/page/1/</a> #Response  </p>\n</blockquote>\n<p><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">&gt;&gt;&gt; response.css(&apos;title::text&apos;).extract()</div><div class=\"line\">[&apos;Quotes to Scrape&apos;]</div></pre></td></tr></table></figure></p>\n<p>vc2014virtualenv,pycharmscrapy<br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>response.css(<span class=\"string\">'title::text'</span>).extract_first()</div><div class=\"line\"><span class=\"string\">'Quotes to Scrape'</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>response.css(<span class=\"string\">'title::text'</span>).re(<span class=\"string\">r'Quotes.*'</span>) <span class=\"comment\">#</span></div><div class=\"line\">[<span class=\"string\">'Quotes to Scrape'</span>]</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#xpath</span></div><div class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>response.xpath(<span class=\"string\">'//title/text()'</span>).extract_first()</div><div class=\"line\"><span class=\"string\">'Quotes to Scrape'</span></div></pre></td></tr></table></figure></p>\n<p>afterLogin<br>Dict</p>\n<blockquote>\n<p>formadata = {userName:  Bob,pwd123456}<br>(MiddleWare)<br>CookieUserAgent setting.pyCookie<br>PipeLineCookie,Ajaxrulesurl</p>\n</blockquote>\n<h2 id=\"2-MongoDB\"><a href=\"#2-MongoDB\" class=\"headerlink\" title=\"2. MongoDB\"></a>2. MongoDB</h2>"},{"title":"activity transition pre and post lollipop","date":"2016-09-27T06:53:25.000Z","_content":"\nLollipopActivity TransitionoverridePendingTransaction() \n\n\nsupportLibVersion = \"24.2.1\"\ngradle plugin version : \"classpath 'com.android.tools.build:gradle:2.2.0'\"\ngradle version : 3.1\ncompileSdkVersion 24\nbuildToolsVersion \"24.0.2\"\n\n<!--more-->\n\n- :\n\nA activity >>>> B activity\n\nA activity:\n\n```java\n intent = new Intent(getActivity(), PictureDetailSubActivity2.class);\n                intent.putExtra(EXTRA_IMAGE_URL, R.drawable.b2);\n                intent.putExtra(EXTRA_IMAGE_TITLE, \"ActivityCompat\");\n                ActivityOptionsCompat optionsCompat = ActivityOptionsCompat.\n                        makeSceneTransitionAnimation(getActivity(), view, TRANSIT_PIC);\n                try {\n                    ActivityCompat.startActivity(getActivity(), intent, optionsCompat.toBundle()); //\n                } catch (Exception e) {\n                    e.printStackTrace();\n                    ToastUtils.showTextShort(getActivity(), \"ActivityCompat\");\n                    startActivity(intent);\n                }\n```\n\nPairclassv4Util(pair)v4APIAPI 16startActivitytry catch\n\nB activityonCreate\n\n```java\n ViewCompat.setTransitionName(binding.imageDetail, TRANSIT_PIC);\n```\n\n\n\n- (TransitionAPI16)\n\n  : A activityB activityViewB activityonPredrawListener(measurelayoutDraw)SharedViewanimateB Activty\n\n  :\n\n   [Dev Bytes Activity Animations Youtube](https://www.youtube.com/watch?v=CPxkoe2MraA) Activity Transition[gitHub](https://github.com/Haldir65/CustomActivityTransition) API 16\n\n- \n\n```java\n@Override\npublic void onCreate(Bundle savedInstanceState, PersistableBundle persistentState) {\n    super.onCreate(savedInstanceState, persistentState);\n}\n```\n\nActivityClassNotFoundException , logcat\n\n- overridePendingTransactionstartActivityfinish\n\n\n\ngitHub[](https://github.com/takahirom/PreLollipopTransition)onPreDrawListener\n\n\n\n","source":"_posts/activity-transition-pre-and-post-lollipop.md","raw":"---\ntitle: activity transition pre and post lollipop\ndate: 2016-09-27 14:53:25\ncategories: blog\ntags: [transition,android]\n---\n\nLollipopActivity TransitionoverridePendingTransaction() \n\n\nsupportLibVersion = \"24.2.1\"\ngradle plugin version : \"classpath 'com.android.tools.build:gradle:2.2.0'\"\ngradle version : 3.1\ncompileSdkVersion 24\nbuildToolsVersion \"24.0.2\"\n\n<!--more-->\n\n- :\n\nA activity >>>> B activity\n\nA activity:\n\n```java\n intent = new Intent(getActivity(), PictureDetailSubActivity2.class);\n                intent.putExtra(EXTRA_IMAGE_URL, R.drawable.b2);\n                intent.putExtra(EXTRA_IMAGE_TITLE, \"ActivityCompat\");\n                ActivityOptionsCompat optionsCompat = ActivityOptionsCompat.\n                        makeSceneTransitionAnimation(getActivity(), view, TRANSIT_PIC);\n                try {\n                    ActivityCompat.startActivity(getActivity(), intent, optionsCompat.toBundle()); //\n                } catch (Exception e) {\n                    e.printStackTrace();\n                    ToastUtils.showTextShort(getActivity(), \"ActivityCompat\");\n                    startActivity(intent);\n                }\n```\n\nPairclassv4Util(pair)v4APIAPI 16startActivitytry catch\n\nB activityonCreate\n\n```java\n ViewCompat.setTransitionName(binding.imageDetail, TRANSIT_PIC);\n```\n\n\n\n- (TransitionAPI16)\n\n  : A activityB activityViewB activityonPredrawListener(measurelayoutDraw)SharedViewanimateB Activty\n\n  :\n\n   [Dev Bytes Activity Animations Youtube](https://www.youtube.com/watch?v=CPxkoe2MraA) Activity Transition[gitHub](https://github.com/Haldir65/CustomActivityTransition) API 16\n\n- \n\n```java\n@Override\npublic void onCreate(Bundle savedInstanceState, PersistableBundle persistentState) {\n    super.onCreate(savedInstanceState, persistentState);\n}\n```\n\nActivityClassNotFoundException , logcat\n\n- overridePendingTransactionstartActivityfinish\n\n\n\ngitHub[](https://github.com/takahirom/PreLollipopTransition)onPreDrawListener\n\n\n\n","slug":"activity-transition-pre-and-post-lollipop","published":1,"updated":"2017-04-23T10:52:01.011Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj50afgyg002qi4vrzjit0av5","content":"<p>LollipopActivity TransitionoverridePendingTransaction() </p>\n<p><br>supportLibVersion = 24.2.1<br>gradle plugin version : classpath com.android.tools.build:gradle:2.2.0<br>gradle version : 3.1<br>compileSdkVersion 24<br>buildToolsVersion 24.0.2</p>\n<a id=\"more\"></a>\n<ul>\n<li>:</li>\n</ul>\n<p>A activity &gt;&gt;&gt;&gt; B activity</p>\n<p>A activity:</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">intent = <span class=\"keyword\">new</span> Intent(getActivity(), PictureDetailSubActivity2.class);</div><div class=\"line\">               intent.putExtra(EXTRA_IMAGE_URL, R.drawable.b2);</div><div class=\"line\">               intent.putExtra(EXTRA_IMAGE_TITLE, <span class=\"string\">\"ActivityCompat\"</span>);</div><div class=\"line\">               ActivityOptionsCompat optionsCompat = ActivityOptionsCompat.</div><div class=\"line\">                       makeSceneTransitionAnimation(getActivity(), view, TRANSIT_PIC);</div><div class=\"line\">               <span class=\"keyword\">try</span> &#123;</div><div class=\"line\">                   ActivityCompat.startActivity(getActivity(), intent, optionsCompat.toBundle()); <span class=\"comment\">//</span></div><div class=\"line\">               &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</div><div class=\"line\">                   e.printStackTrace();</div><div class=\"line\">                   ToastUtils.showTextShort(getActivity(), <span class=\"string\">\"ActivityCompat\"</span>);</div><div class=\"line\">                   startActivity(intent);</div><div class=\"line\">               &#125;</div></pre></td></tr></table></figure>\n<p>Pairclassv4Util(pair)v4APIAPI 16startActivitytry catch</p>\n<p>B activityonCreate</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">ViewCompat.setTransitionName(binding.imageDetail, TRANSIT_PIC);</div></pre></td></tr></table></figure>\n<p></p>\n<ul>\n<li><p>(TransitionAPI16)</p>\n<p>: A activityB activityViewB activityonPredrawListener(measurelayoutDraw)SharedViewanimateB Activty</p>\n<p>:</p>\n<p> <a href=\"https://www.youtube.com/watch?v=CPxkoe2MraA\">Dev Bytes Activity Animations Youtube</a> Activity Transition<a href=\"https://github.com/Haldir65/CustomActivityTransition\">gitHub</a> API 16</p>\n</li>\n<li><p></p>\n</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">@Override</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onCreate</span><span class=\"params\">(Bundle savedInstanceState, PersistableBundle persistentState)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">super</span>.onCreate(savedInstanceState, persistentState);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>ActivityClassNotFoundException , logcat</p>\n<ul>\n<li>overridePendingTransactionstartActivityfinish</li>\n</ul>\n<p>gitHub<a href=\"https://github.com/takahirom/PreLollipopTransition\"></a>onPreDrawListener</p>\n","excerpt":"<p>LollipopActivity TransitionoverridePendingTransaction() </p>\n<p><br>supportLibVersion = 24.2.1<br>gradle plugin version : classpath com.android.tools.build:gradle:2.2.0<br>gradle version : 3.1<br>compileSdkVersion 24<br>buildToolsVersion 24.0.2</p>","more":"<ul>\n<li>:</li>\n</ul>\n<p>A activity &gt;&gt;&gt;&gt; B activity</p>\n<p>A activity:</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">intent = <span class=\"keyword\">new</span> Intent(getActivity(), PictureDetailSubActivity2.class);</div><div class=\"line\">               intent.putExtra(EXTRA_IMAGE_URL, R.drawable.b2);</div><div class=\"line\">               intent.putExtra(EXTRA_IMAGE_TITLE, <span class=\"string\">\"ActivityCompat\"</span>);</div><div class=\"line\">               ActivityOptionsCompat optionsCompat = ActivityOptionsCompat.</div><div class=\"line\">                       makeSceneTransitionAnimation(getActivity(), view, TRANSIT_PIC);</div><div class=\"line\">               <span class=\"keyword\">try</span> &#123;</div><div class=\"line\">                   ActivityCompat.startActivity(getActivity(), intent, optionsCompat.toBundle()); <span class=\"comment\">//</span></div><div class=\"line\">               &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</div><div class=\"line\">                   e.printStackTrace();</div><div class=\"line\">                   ToastUtils.showTextShort(getActivity(), <span class=\"string\">\"ActivityCompat\"</span>);</div><div class=\"line\">                   startActivity(intent);</div><div class=\"line\">               &#125;</div></pre></td></tr></table></figure>\n<p>Pairclassv4Util(pair)v4APIAPI 16startActivitytry catch</p>\n<p>B activityonCreate</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">ViewCompat.setTransitionName(binding.imageDetail, TRANSIT_PIC);</div></pre></td></tr></table></figure>\n<p></p>\n<ul>\n<li><p>(TransitionAPI16)</p>\n<p>: A activityB activityViewB activityonPredrawListener(measurelayoutDraw)SharedViewanimateB Activty</p>\n<p>:</p>\n<p> <a href=\"https://www.youtube.com/watch?v=CPxkoe2MraA\">Dev Bytes Activity Animations Youtube</a> Activity Transition<a href=\"https://github.com/Haldir65/CustomActivityTransition\">gitHub</a> API 16</p>\n</li>\n<li><p></p>\n</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">@Override</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onCreate</span><span class=\"params\">(Bundle savedInstanceState, PersistableBundle persistentState)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">super</span>.onCreate(savedInstanceState, persistentState);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>ActivityClassNotFoundException , logcat</p>\n<ul>\n<li>overridePendingTransactionstartActivityfinish</li>\n</ul>\n<p>gitHub<a href=\"https://github.com/takahirom/PreLollipopTransition\"></a>onPreDrawListener</p>"},{"title":"git","date":"2016-09-27T09:24:51.000Z","_content":"\ngit\n\n[](http://odzl05jxx.bkt.clouddn.com/f787b2e8d757dc83b782bcd6d4c9f523.jpg?imageView2/2/w/600)\n\n<!--more-->\n\n### 1. github\n\n```java\n$ mkdir ~/hello-world    //hello-world\n$ cd ~/hello-world       //\n$ git init             // \n$ touch README   \t\t//\n$ git add README        //README\n$ git commit -m 'first commit'     //first commit\n$ git remote add origin git@github.test/hellotest.git     //github  \n$ git push -u origin master     //github\n```\n\n### 2.  git branchgithub repository\n\n\n```python\ngit branch --set-upstream local_branch origin/remote_branch\n```\n\n\n```\n$ git branch --set-upstream master origin/master\nThe --set-upstream flag is deprecated and will be removed. Consider using --track or --set-upstream-to\nBranch master set up to track remote branch master from origin.\n```\n\n<!--more-->\n\n### 3. git\n\n> gitadapter.javagithubAdapter.javawindowspushgitbash\n\n```java\ngit config core.ignorecase false \n```\n\n### 4. git\n\n```java\n$ git config --global user.name \"name\"\n$ git config --global user.email xxx@163.com\n```\ngitemail:\n\n```java\n$ git config user.name \"name\"\n$ git config user.email \"myEmail.awesome.com\"\n```\nemail\n```\n$ git config user.name \n$ git config user.email \n```\n\n### 5. \n\n\n```java\ngit config --global http.proxy socks5://127.0.0.1:1080\n```\n\nurl\n```java\ngit config --global http.<URL>.proxy socks5://127.0.0.1:1080\n \ngit config --global http.https://github.com.proxy socks5://127.0.0.1:1080\n```\n\n### 6. commit(commit)\n```java\ngit commit --amend\n```\n\n### 7. git revertreset\n> reset commit,commit, HEAD , revert commitcommit,, HEAD . resetcommitcommitresetcommitpushresetcommitpushpushrevert\n\n\n\n#### reset\n```java\ngit reset --hard HEAD //\ngit reset --soft HEAD //git add \ngit reset --hard HEAD~3 //\n```\n\n#### revert\n```java\ngit revert c011eb3c20ba6fb38cc94fe //commitpush\n```\n\n### 8. , \n\n```java\ngit checkout -b <branchName>\n```\n\n```java\ngit branch --set-upstream <laocalBranchName> origin/<RemoteBranchName>\n// \ngit branch -u origin/dev\n```\n\n```java\ngit checkout -b <branchName> origin/<branchName>\n\ngit checkout --track origin/dev\n```\n\n\n:\n```java\ngit push origin --delete <branchName>\n```\ntag\n```java\ngit push origin --delete tag <tagName>\n```\n\n\n### 9. pullrebase\npull = fetch +merge \n\n> Mergerebase\n\n### 10. rebasecherry-pick \nrebase[](https://github.com/geeeeeeeeek/git-recipes/wiki/5.1-%E4%BB%A3%E7%A0%81%E5%90%88%E5%B9%B6%EF%BC%9AMerge%E3%80%81Rebase%E7%9A%84%E9%80%89%E6%8B%A9)\n\n\n\n### 11. gitignore\n[repo](https://github.com/suzeyu1992/repo/tree/master/project/git)\n```java\n#  .c\n*.c\n\n#  stream.c git\n!stream.c\n\n# TODO, TODO: subdir/TODO\n/TODO\n\n# build\nbuild/\n\n#  doc/notes.txt, .txt: doc/server/arch.txt\ndoc/*.txt\n\n# doc.pdf\ndoc/**/*.pdf\n```\n\n### 12. git stash \n\n```java\ngit stash  //\ngit stash pop //\n\ngit stash save -a \"message to add\" // stash\n\ngit stash list  //stashidbranch\ngit stash drop stah@{id} // stashListstash\ngit stash apply <stash@{id}> //stash\n\ngit stash clear// stash Listitem\n\n```\n\n### 13. \n\n```java\n# Be very careful with this command!\ngit push --force\n```\n\n## Reference\n-[git resetrevert](http://yijiebuyi.com/blog/8f985d539566d0bf3b804df6be4e0c90.html) \n-[git recipes](https://github.com/geeeeeeeeek/git-recipes)","source":"_posts/git-manual.md","raw":"---\ntitle: git\ndate: 2016-09-27 17:24:51\ncategories: blog\ntags: [git,notes]\n---\n\ngit\n\n[](http://odzl05jxx.bkt.clouddn.com/f787b2e8d757dc83b782bcd6d4c9f523.jpg?imageView2/2/w/600)\n\n<!--more-->\n\n### 1. github\n\n```java\n$ mkdir ~/hello-world    //hello-world\n$ cd ~/hello-world       //\n$ git init             // \n$ touch README   \t\t//\n$ git add README        //README\n$ git commit -m 'first commit'     //first commit\n$ git remote add origin git@github.test/hellotest.git     //github  \n$ git push -u origin master     //github\n```\n\n### 2.  git branchgithub repository\n\n\n```python\ngit branch --set-upstream local_branch origin/remote_branch\n```\n\n\n```\n$ git branch --set-upstream master origin/master\nThe --set-upstream flag is deprecated and will be removed. Consider using --track or --set-upstream-to\nBranch master set up to track remote branch master from origin.\n```\n\n<!--more-->\n\n### 3. git\n\n> gitadapter.javagithubAdapter.javawindowspushgitbash\n\n```java\ngit config core.ignorecase false \n```\n\n### 4. git\n\n```java\n$ git config --global user.name \"name\"\n$ git config --global user.email xxx@163.com\n```\ngitemail:\n\n```java\n$ git config user.name \"name\"\n$ git config user.email \"myEmail.awesome.com\"\n```\nemail\n```\n$ git config user.name \n$ git config user.email \n```\n\n### 5. \n\n\n```java\ngit config --global http.proxy socks5://127.0.0.1:1080\n```\n\nurl\n```java\ngit config --global http.<URL>.proxy socks5://127.0.0.1:1080\n \ngit config --global http.https://github.com.proxy socks5://127.0.0.1:1080\n```\n\n### 6. commit(commit)\n```java\ngit commit --amend\n```\n\n### 7. git revertreset\n> reset commit,commit, HEAD , revert commitcommit,, HEAD . resetcommitcommitresetcommitpushresetcommitpushpushrevert\n\n\n\n#### reset\n```java\ngit reset --hard HEAD //\ngit reset --soft HEAD //git add \ngit reset --hard HEAD~3 //\n```\n\n#### revert\n```java\ngit revert c011eb3c20ba6fb38cc94fe //commitpush\n```\n\n### 8. , \n\n```java\ngit checkout -b <branchName>\n```\n\n```java\ngit branch --set-upstream <laocalBranchName> origin/<RemoteBranchName>\n// \ngit branch -u origin/dev\n```\n\n```java\ngit checkout -b <branchName> origin/<branchName>\n\ngit checkout --track origin/dev\n```\n\n\n:\n```java\ngit push origin --delete <branchName>\n```\ntag\n```java\ngit push origin --delete tag <tagName>\n```\n\n\n### 9. pullrebase\npull = fetch +merge \n\n> Mergerebase\n\n### 10. rebasecherry-pick \nrebase[](https://github.com/geeeeeeeeek/git-recipes/wiki/5.1-%E4%BB%A3%E7%A0%81%E5%90%88%E5%B9%B6%EF%BC%9AMerge%E3%80%81Rebase%E7%9A%84%E9%80%89%E6%8B%A9)\n\n\n\n### 11. gitignore\n[repo](https://github.com/suzeyu1992/repo/tree/master/project/git)\n```java\n#  .c\n*.c\n\n#  stream.c git\n!stream.c\n\n# TODO, TODO: subdir/TODO\n/TODO\n\n# build\nbuild/\n\n#  doc/notes.txt, .txt: doc/server/arch.txt\ndoc/*.txt\n\n# doc.pdf\ndoc/**/*.pdf\n```\n\n### 12. git stash \n\n```java\ngit stash  //\ngit stash pop //\n\ngit stash save -a \"message to add\" // stash\n\ngit stash list  //stashidbranch\ngit stash drop stah@{id} // stashListstash\ngit stash apply <stash@{id}> //stash\n\ngit stash clear// stash Listitem\n\n```\n\n### 13. \n\n```java\n# Be very careful with this command!\ngit push --force\n```\n\n## Reference\n-[git resetrevert](http://yijiebuyi.com/blog/8f985d539566d0bf3b804df6be4e0c90.html) \n-[git recipes](https://github.com/geeeeeeeeek/git-recipes)","slug":"git-manual","published":1,"updated":"2017-06-18T09:13:43.447Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj50afgyw002ti4vr68309x4t","content":"<p>git</p>\n<p><a href=\"http://odzl05jxx.bkt.clouddn.com/f787b2e8d757dc83b782bcd6d4c9f523.jpg?imageView2/2/w/600\"></a></p>\n<a id=\"more\"></a>\n<h3 id=\"1-github\"><a href=\"#1-github\" class=\"headerlink\" title=\"1. github\"></a>1. github</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">$ mkdir ~/hello-world    <span class=\"comment\">//hello-world</span></div><div class=\"line\">$ cd ~/hello-world       <span class=\"comment\">//</span></div><div class=\"line\">$ git init             <span class=\"comment\">// </span></div><div class=\"line\">$ touch README   \t\t<span class=\"comment\">//</span></div><div class=\"line\">$ git add README        <span class=\"comment\">//README</span></div><div class=\"line\">$ git commit -m <span class=\"string\">'first commit'</span>     <span class=\"comment\">//first commit</span></div><div class=\"line\">$ git remote add origin git<span class=\"meta\">@github</span>.test/hellotest.git     <span class=\"comment\">//github  </span></div><div class=\"line\">$ git push -u origin master     <span class=\"comment\">//github</span></div></pre></td></tr></table></figure>\n<h3 id=\"2-git-branchgithub-repository\"><a href=\"#2-git-branchgithub-repository\" class=\"headerlink\" title=\"2.  git branchgithub repository\"></a>2.  git branchgithub repository</h3><p><br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git branch --set-upstream local_branch origin/remote_branch</div></pre></td></tr></table></figure></p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">$ git branch --set-upstream master origin/master</div><div class=\"line\">The --set-upstream flag is deprecated and will be removed. Consider using --track or --set-upstream-to</div><div class=\"line\">Branch master set up to track remote branch master from origin.</div></pre></td></tr></table></figure>\n<!--more-->\n<h3 id=\"3-git\"><a href=\"#3-git\" class=\"headerlink\" title=\"3. git\"></a>3. git</h3><blockquote>\n<p>gitadapter.javagithubAdapter.javawindowspushgitbash</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git config core.ignorecase <span class=\"keyword\">false</span></div></pre></td></tr></table></figure>\n<h3 id=\"4-git\"><a href=\"#4-git\" class=\"headerlink\" title=\"4. git\"></a>4. git</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">$ git config --global user.name <span class=\"string\">\"name\"</span></div><div class=\"line\">$ git config --global user.email xxx@<span class=\"number\">163</span>.com</div></pre></td></tr></table></figure>\n<p>gitemail:</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">$ git config user.name <span class=\"string\">\"name\"</span></div><div class=\"line\">$ git config user.email <span class=\"string\">\"myEmail.awesome.com\"</span></div></pre></td></tr></table></figure>\n<p>email<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">$ git config user.name </div><div class=\"line\">$ git config user.email</div></pre></td></tr></table></figure></p>\n<h3 id=\"5-\"><a href=\"#5-\" class=\"headerlink\" title=\"5. \"></a>5. </h3><p><br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git config --global http.proxy socks5:<span class=\"comment\">//127.0.0.1:1080</span></div></pre></td></tr></table></figure></p>\n<p>url<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">git config --global http.&lt;URL&gt;.proxy socks5:<span class=\"comment\">//127.0.0.1:1080</span></div><div class=\"line\"> </div><div class=\"line\">git config --global http.https:<span class=\"comment\">//github.com.proxy socks5://127.0.0.1:1080</span></div></pre></td></tr></table></figure></p>\n<h3 id=\"6-commit-commit\"><a href=\"#6-commit-commit\" class=\"headerlink\" title=\"6. commit(commit)\"></a>6. commit(commit)</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git commit --amend</div></pre></td></tr></table></figure>\n<h3 id=\"7-git-revertreset\"><a href=\"#7-git-revertreset\" class=\"headerlink\" title=\"7. git revertreset\"></a>7. git revertreset</h3><blockquote>\n<p>reset commit,commit, HEAD , revert commitcommit,, HEAD . resetcommitcommitresetcommitpushresetcommitpushpushrevert</p>\n</blockquote>\n<p></p>\n<h4 id=\"reset\"><a href=\"#reset\" class=\"headerlink\" title=\"reset\"></a>reset</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">git reset --hard HEAD <span class=\"comment\">//</span></div><div class=\"line\">git reset --soft HEAD <span class=\"comment\">//git add </span></div><div class=\"line\">git reset --hard HEAD~<span class=\"number\">3</span> <span class=\"comment\">//</span></div></pre></td></tr></table></figure>\n<h4 id=\"revert\"><a href=\"#revert\" class=\"headerlink\" title=\"revert\"></a>revert</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git revert c011eb3c20ba6fb38cc94fe <span class=\"comment\">//commitpush</span></div></pre></td></tr></table></figure>\n<h3 id=\"8--\"><a href=\"#8--\" class=\"headerlink\" title=\"8. , \"></a>8. , </h3><p><br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git checkout -b &lt;branchName&gt;</div></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">git branch --set-upstream &lt;laocalBranchName&gt; origin/&lt;RemoteBranchName&gt;</div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">git branch -u origin/dev</div></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">git checkout -b &lt;branchName&gt; origin/&lt;branchName&gt;</div><div class=\"line\"></div><div class=\"line\">git checkout --track origin/dev</div></pre></td></tr></table></figure></p>\n<p>:<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git push origin --delete &lt;branchName&gt;</div></pre></td></tr></table></figure></p>\n<p>tag<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git push origin --delete tag &lt;tagName&gt;</div></pre></td></tr></table></figure></p>\n<h3 id=\"9-pullrebase\"><a href=\"#9-pullrebase\" class=\"headerlink\" title=\"9. pullrebase\"></a>9. pullrebase</h3><p>pull = fetch +merge </p>\n<blockquote>\n<p>Mergerebase</p>\n</blockquote>\n<h3 id=\"10-rebasecherry-pick\"><a href=\"#10-rebasecherry-pick\" class=\"headerlink\" title=\"10. rebasecherry-pick\"></a>10. rebasecherry-pick</h3><p>rebase<a href=\"https://github.com/geeeeeeeeek/git-recipes/wiki/5.1-%E4%BB%A3%E7%A0%81%E5%90%88%E5%B9%B6%EF%BC%9AMerge%E3%80%81Rebase%E7%9A%84%E9%80%89%E6%8B%A9\"></a></p>\n<h3 id=\"11-gitignore\"><a href=\"#11-gitignore\" class=\"headerlink\" title=\"11. gitignore\"></a>11. gitignore</h3><p><a href=\"https://github.com/suzeyu1992/repo/tree/master/project/git\">repo</a><br><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\">#  .c</div><div class=\"line\">*.c</div><div class=\"line\"></div><div class=\"line\">#  stream.c git</div><div class=\"line\">!stream.c</div><div class=\"line\"></div><div class=\"line\"># TODO, TODO: subdir/TODO</div><div class=\"line\">/TODO</div><div class=\"line\"></div><div class=\"line\"># build</div><div class=\"line\">build/</div><div class=\"line\"></div><div class=\"line\">#  doc/notes.txt, .txt: doc/server/arch.txt</div><div class=\"line\">doc/*.txt</div><div class=\"line\"></div><div class=\"line\"># doc.pdf</div><div class=\"line\">doc/**/*.pdf</div></pre></td></tr></table></figure></p>\n<h3 id=\"12-git-stash\"><a href=\"#12-git-stash\" class=\"headerlink\" title=\"12. git stash\"></a>12. git stash</h3><p><br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">git stash  <span class=\"comment\">//</span></div><div class=\"line\">git stash pop <span class=\"comment\">//</span></div><div class=\"line\"></div><div class=\"line\">git stash save -a <span class=\"string\">\"message to add\"</span> <span class=\"comment\">// stash</span></div><div class=\"line\"></div><div class=\"line\">git stash list  <span class=\"comment\">//stashidbranch</span></div><div class=\"line\">git stash drop stah@&#123;id&#125; <span class=\"comment\">// stashListstash</span></div><div class=\"line\">git stash apply &lt;stash@&#123;id&#125;&gt; <span class=\"comment\">//stash</span></div><div class=\"line\"></div><div class=\"line\">git stash clear<span class=\"comment\">// stash Listitem</span></div></pre></td></tr></table></figure></p>\n<h3 id=\"13-\"><a href=\"#13-\" class=\"headerlink\" title=\"13. \"></a>13. </h3><p><br><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"># Be very careful with this command!</div><div class=\"line\">git push --force</div></pre></td></tr></table></figure></p>\n<h2 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h2><p>-<a href=\"http://yijiebuyi.com/blog/8f985d539566d0bf3b804df6be4e0c90.html\">git resetrevert</a><br>-<a href=\"https://github.com/geeeeeeeeek/git-recipes\">git recipes</a></p>\n","excerpt":"<p>git</p>\n<p><a href=\"http://odzl05jxx.bkt.clouddn.com/f787b2e8d757dc83b782bcd6d4c9f523.jpg?imageView2/2/w/600\"></a></p>","more":"<h3 id=\"1-github\"><a href=\"#1-github\" class=\"headerlink\" title=\"1. github\"></a>1. github</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">$ mkdir ~/hello-world    <span class=\"comment\">//hello-world</span></div><div class=\"line\">$ cd ~/hello-world       <span class=\"comment\">//</span></div><div class=\"line\">$ git init             <span class=\"comment\">// </span></div><div class=\"line\">$ touch README   \t\t<span class=\"comment\">//</span></div><div class=\"line\">$ git add README        <span class=\"comment\">//README</span></div><div class=\"line\">$ git commit -m <span class=\"string\">'first commit'</span>     <span class=\"comment\">//first commit</span></div><div class=\"line\">$ git remote add origin git<span class=\"meta\">@github</span>.test/hellotest.git     <span class=\"comment\">//github  </span></div><div class=\"line\">$ git push -u origin master     <span class=\"comment\">//github</span></div></pre></td></tr></table></figure>\n<h3 id=\"2-git-branchgithub-repository\"><a href=\"#2-git-branchgithub-repository\" class=\"headerlink\" title=\"2.  git branchgithub repository\"></a>2.  git branchgithub repository</h3><p><br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git branch --set-upstream local_branch origin/remote_branch</div></pre></td></tr></table></figure></p>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">$ git branch --set-upstream master origin/master</div><div class=\"line\">The --set-upstream flag is deprecated and will be removed. Consider using --track or --set-upstream-to</div><div class=\"line\">Branch master set up to track remote branch master from origin.</div></pre></td></tr></table></figure>\n<!--more-->\n<h3 id=\"3-git\"><a href=\"#3-git\" class=\"headerlink\" title=\"3. git\"></a>3. git</h3><blockquote>\n<p>gitadapter.javagithubAdapter.javawindowspushgitbash</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git config core.ignorecase <span class=\"keyword\">false</span></div></pre></td></tr></table></figure>\n<h3 id=\"4-git\"><a href=\"#4-git\" class=\"headerlink\" title=\"4. git\"></a>4. git</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">$ git config --global user.name <span class=\"string\">\"name\"</span></div><div class=\"line\">$ git config --global user.email xxx@<span class=\"number\">163</span>.com</div></pre></td></tr></table></figure>\n<p>gitemail:</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">$ git config user.name <span class=\"string\">\"name\"</span></div><div class=\"line\">$ git config user.email <span class=\"string\">\"myEmail.awesome.com\"</span></div></pre></td></tr></table></figure>\n<p>email<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">$ git config user.name </div><div class=\"line\">$ git config user.email</div></pre></td></tr></table></figure></p>\n<h3 id=\"5-\"><a href=\"#5-\" class=\"headerlink\" title=\"5. \"></a>5. </h3><p><br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git config --global http.proxy socks5:<span class=\"comment\">//127.0.0.1:1080</span></div></pre></td></tr></table></figure></p>\n<p>url<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">git config --global http.&lt;URL&gt;.proxy socks5:<span class=\"comment\">//127.0.0.1:1080</span></div><div class=\"line\"> </div><div class=\"line\">git config --global http.https:<span class=\"comment\">//github.com.proxy socks5://127.0.0.1:1080</span></div></pre></td></tr></table></figure></p>\n<h3 id=\"6-commit-commit\"><a href=\"#6-commit-commit\" class=\"headerlink\" title=\"6. commit(commit)\"></a>6. commit(commit)</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git commit --amend</div></pre></td></tr></table></figure>\n<h3 id=\"7-git-revertreset\"><a href=\"#7-git-revertreset\" class=\"headerlink\" title=\"7. git revertreset\"></a>7. git revertreset</h3><blockquote>\n<p>reset commit,commit, HEAD , revert commitcommit,, HEAD . resetcommitcommitresetcommitpushresetcommitpushpushrevert</p>\n</blockquote>\n<p></p>\n<h4 id=\"reset\"><a href=\"#reset\" class=\"headerlink\" title=\"reset\"></a>reset</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">git reset --hard HEAD <span class=\"comment\">//</span></div><div class=\"line\">git reset --soft HEAD <span class=\"comment\">//git add </span></div><div class=\"line\">git reset --hard HEAD~<span class=\"number\">3</span> <span class=\"comment\">//</span></div></pre></td></tr></table></figure>\n<h4 id=\"revert\"><a href=\"#revert\" class=\"headerlink\" title=\"revert\"></a>revert</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git revert c011eb3c20ba6fb38cc94fe <span class=\"comment\">//commitpush</span></div></pre></td></tr></table></figure>\n<h3 id=\"8--\"><a href=\"#8--\" class=\"headerlink\" title=\"8. , \"></a>8. , </h3><p><br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git checkout -b &lt;branchName&gt;</div></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">git branch --set-upstream &lt;laocalBranchName&gt; origin/&lt;RemoteBranchName&gt;</div><div class=\"line\"><span class=\"comment\">// </span></div><div class=\"line\">git branch -u origin/dev</div></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">git checkout -b &lt;branchName&gt; origin/&lt;branchName&gt;</div><div class=\"line\"></div><div class=\"line\">git checkout --track origin/dev</div></pre></td></tr></table></figure></p>\n<p>:<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git push origin --delete &lt;branchName&gt;</div></pre></td></tr></table></figure></p>\n<p>tag<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git push origin --delete tag &lt;tagName&gt;</div></pre></td></tr></table></figure></p>\n<h3 id=\"9-pullrebase\"><a href=\"#9-pullrebase\" class=\"headerlink\" title=\"9. pullrebase\"></a>9. pullrebase</h3><p>pull = fetch +merge </p>\n<blockquote>\n<p>Mergerebase</p>\n</blockquote>\n<h3 id=\"10-rebasecherry-pick\"><a href=\"#10-rebasecherry-pick\" class=\"headerlink\" title=\"10. rebasecherry-pick\"></a>10. rebasecherry-pick</h3><p>rebase<a href=\"https://github.com/geeeeeeeeek/git-recipes/wiki/5.1-%E4%BB%A3%E7%A0%81%E5%90%88%E5%B9%B6%EF%BC%9AMerge%E3%80%81Rebase%E7%9A%84%E9%80%89%E6%8B%A9\"></a></p>\n<h3 id=\"11-gitignore\"><a href=\"#11-gitignore\" class=\"headerlink\" title=\"11. gitignore\"></a>11. gitignore</h3><p><a href=\"https://github.com/suzeyu1992/repo/tree/master/project/git\">repo</a><br><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\">#  .c</div><div class=\"line\">*.c</div><div class=\"line\"></div><div class=\"line\">#  stream.c git</div><div class=\"line\">!stream.c</div><div class=\"line\"></div><div class=\"line\"># TODO, TODO: subdir/TODO</div><div class=\"line\">/TODO</div><div class=\"line\"></div><div class=\"line\"># build</div><div class=\"line\">build/</div><div class=\"line\"></div><div class=\"line\">#  doc/notes.txt, .txt: doc/server/arch.txt</div><div class=\"line\">doc/*.txt</div><div class=\"line\"></div><div class=\"line\"># doc.pdf</div><div class=\"line\">doc/**/*.pdf</div></pre></td></tr></table></figure></p>\n<h3 id=\"12-git-stash\"><a href=\"#12-git-stash\" class=\"headerlink\" title=\"12. git stash\"></a>12. git stash</h3><p><br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">git stash  <span class=\"comment\">//</span></div><div class=\"line\">git stash pop <span class=\"comment\">//</span></div><div class=\"line\"></div><div class=\"line\">git stash save -a <span class=\"string\">\"message to add\"</span> <span class=\"comment\">// stash</span></div><div class=\"line\"></div><div class=\"line\">git stash list  <span class=\"comment\">//stashidbranch</span></div><div class=\"line\">git stash drop stah@&#123;id&#125; <span class=\"comment\">// stashListstash</span></div><div class=\"line\">git stash apply &lt;stash@&#123;id&#125;&gt; <span class=\"comment\">//stash</span></div><div class=\"line\"></div><div class=\"line\">git stash clear<span class=\"comment\">// stash Listitem</span></div></pre></td></tr></table></figure></p>\n<h3 id=\"13-\"><a href=\"#13-\" class=\"headerlink\" title=\"13. \"></a>13. </h3><p><br><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"># Be very careful with this command!</div><div class=\"line\">git push --force</div></pre></td></tr></table></figure></p>\n<h2 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h2><p>-<a href=\"http://yijiebuyi.com/blog/8f985d539566d0bf3b804df6be4e0c90.html\">git resetrevert</a><br>-<a href=\"https://github.com/geeeeeeeeek/git-recipes\">git recipes</a></p>"},{"title":"androidleak","date":"2016-09-18T02:23:42.000Z","_content":"\n\n----------\n\nclassstatic\n\n<!--more-->\n```java\npublic class MainActivity extends Activity {\n\n\tpublic class MyHandler extends Handler{\n\t@Override\n\tpublic void handleMessage(Message msg) {\n\t\tif(msg.what==1){\n\t\t\tnew Thread(){\n\t\t\t\t@Override\n\t\t\t\tpublic void run() {\n\t\t\t\t\twhile(true){\n\t\t\t\t\t\t//do something\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}.start();\n\t\t}\n\t}\n\t}\n\tpublic MyHandler handler;\n\t@Override\n\tprotected void onCreate(Bundle savedInstanceState) {\n\t\tsuper.onCreate(savedInstanceState);\n\t\tsetContentView(R.layout.activity_main);\n\t\t\n\t\t//...\n\t\thandler.sendEmptyMessage(1);\n\t\tfinish();\n\t    }\n}\n```\n\n\nonCreatehandlerfinishactivityhandler****\nThreadhandlerhandleractivityhandleractivty\n\nActivityAsyncTaskleak\n [stackoverFlow](http://stackoverflow.com/questions/24679383/memory-leak-using-asynctask-as-a-inner-class)\n\n:\nWeakReference\n,\n    \n```java\nprivate static class IncomingHandler extends Handler {\n    private final WeakReference<MessagingService> mReference;\n\n    IncomingHandler(MessagingService service) {\n        mReference = new WeakReference<>(service);\n    }\n\n    @Override\n    public void handleMessage(Message msg) {\n        MessagingService service = mReference.get();\n        switch (msg.what) {\n            case MSG_SEND_NOTIFICATION:\n                int howManyConversations = msg.arg1 <= 0 ? 1 : msg.arg1;\n                int messagesPerConversation = msg.arg2 <= 0 ? 1 : msg.arg2;\n                if (service != null) {\n                    service.sendNotification(howManyConversations,\n                    messagesPerConversation);\n                }\n                break;\n            default:\n                super.handleMessage(msg);\n        }\n    }\n}\n```    \n//handlerservicestaticleak\n\n\n\n\n\n\n","source":"_posts/android-inner-class-leak.md","raw":"---\ntitle: \"androidleak\"\ndate: 2016-09-18 10:23:42\ncategories: blog\ntags: [android]\n---\n\n\n----------\n\nclassstatic\n\n<!--more-->\n```java\npublic class MainActivity extends Activity {\n\n\tpublic class MyHandler extends Handler{\n\t@Override\n\tpublic void handleMessage(Message msg) {\n\t\tif(msg.what==1){\n\t\t\tnew Thread(){\n\t\t\t\t@Override\n\t\t\t\tpublic void run() {\n\t\t\t\t\twhile(true){\n\t\t\t\t\t\t//do something\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}.start();\n\t\t}\n\t}\n\t}\n\tpublic MyHandler handler;\n\t@Override\n\tprotected void onCreate(Bundle savedInstanceState) {\n\t\tsuper.onCreate(savedInstanceState);\n\t\tsetContentView(R.layout.activity_main);\n\t\t\n\t\t//...\n\t\thandler.sendEmptyMessage(1);\n\t\tfinish();\n\t    }\n}\n```\n\n\nonCreatehandlerfinishactivityhandler****\nThreadhandlerhandleractivityhandleractivty\n\nActivityAsyncTaskleak\n [stackoverFlow](http://stackoverflow.com/questions/24679383/memory-leak-using-asynctask-as-a-inner-class)\n\n:\nWeakReference\n,\n    \n```java\nprivate static class IncomingHandler extends Handler {\n    private final WeakReference<MessagingService> mReference;\n\n    IncomingHandler(MessagingService service) {\n        mReference = new WeakReference<>(service);\n    }\n\n    @Override\n    public void handleMessage(Message msg) {\n        MessagingService service = mReference.get();\n        switch (msg.what) {\n            case MSG_SEND_NOTIFICATION:\n                int howManyConversations = msg.arg1 <= 0 ? 1 : msg.arg1;\n                int messagesPerConversation = msg.arg2 <= 0 ? 1 : msg.arg2;\n                if (service != null) {\n                    service.sendNotification(howManyConversations,\n                    messagesPerConversation);\n                }\n                break;\n            default:\n                super.handleMessage(msg);\n        }\n    }\n}\n```    \n//handlerservicestaticleak\n\n\n\n\n\n\n","slug":"android-inner-class-leak","published":1,"updated":"2017-06-15T15:21:46.986Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj50afgyw002vi4vr58m6m9p5","content":"<hr>\n<p>classstatic<br><br><a id=\"more\"></a><br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MainActivity</span> <span class=\"keyword\">extends</span> <span class=\"title\">Activity</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">true<span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyHandler</span> <span class=\"keyword\">extends</span> <span class=\"title\">Handler</span></span>&#123;</div><div class=\"line\">true<span class=\"meta\">@Override</span></div><div class=\"line\">true<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">handleMessage</span><span class=\"params\">(Message msg)</span> </span>&#123;</div><div class=\"line\">truetrue<span class=\"keyword\">if</span>(msg.what==<span class=\"number\">1</span>)&#123;</div><div class=\"line\">truetruetrue<span class=\"keyword\">new</span> Thread()&#123;</div><div class=\"line\">truetruetruetrue<span class=\"meta\">@Override</span></div><div class=\"line\">truetruetruetrue<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">truetruetruetruetrue<span class=\"keyword\">while</span>(<span class=\"keyword\">true</span>)&#123;</div><div class=\"line\">truetruetruetruetruetrue<span class=\"comment\">//do something</span></div><div class=\"line\">truetruetruetruetrue&#125;</div><div class=\"line\">truetruetruetrue&#125;</div><div class=\"line\">truetruetrue&#125;.start();</div><div class=\"line\">truetrue&#125;</div><div class=\"line\">true&#125;</div><div class=\"line\">true&#125;</div><div class=\"line\">true<span class=\"keyword\">public</span> MyHandler handler;</div><div class=\"line\">true<span class=\"meta\">@Override</span></div><div class=\"line\">true<span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onCreate</span><span class=\"params\">(Bundle savedInstanceState)</span> </span>&#123;</div><div class=\"line\">truetrue<span class=\"keyword\">super</span>.onCreate(savedInstanceState);</div><div class=\"line\">truetruesetContentView(R.layout.activity_main);</div><div class=\"line\">truetrue</div><div class=\"line\">truetrue<span class=\"comment\">//...</span></div><div class=\"line\">truetruehandler.sendEmptyMessage(<span class=\"number\">1</span>);</div><div class=\"line\">truetruefinish();</div><div class=\"line\">true    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>onCreatehandlerfinishactivityhandler<strong></strong><br>Threadhandlerhandleractivityhandleractivty</p>\n<p>ActivityAsyncTaskleak<br> <a href=\"http://stackoverflow.com/questions/24679383/memory-leak-using-asynctask-as-a-inner-class\">stackoverFlow</a></p>\n<p>:<br>WeakReference<br>,</p>\n<pre><code class=\"java\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">IncomingHandler</span> <span class=\"keyword\">extends</span> <span class=\"title\">Handler</span> </span>{\n    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> WeakReference&lt;MessagingService&gt; mReference;\n\n    IncomingHandler(MessagingService service) {\n        mReference = <span class=\"keyword\">new</span> WeakReference&lt;&gt;(service);\n    }\n\n    <span class=\"meta\">@Override</span>\n    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">handleMessage</span><span class=\"params\">(Message msg)</span> </span>{\n        MessagingService service = mReference.get();\n        <span class=\"keyword\">switch</span> (msg.what) {\n            <span class=\"keyword\">case</span> MSG_SEND_NOTIFICATION:\n                <span class=\"keyword\">int</span> howManyConversations = msg.arg1 &lt;= <span class=\"number\">0</span> ? <span class=\"number\">1</span> : msg.arg1;\n                <span class=\"keyword\">int</span> messagesPerConversation = msg.arg2 &lt;= <span class=\"number\">0</span> ? <span class=\"number\">1</span> : msg.arg2;\n                <span class=\"keyword\">if</span> (service != <span class=\"keyword\">null</span>) {\n                    service.sendNotification(howManyConversations,\n                    messagesPerConversation);\n                }\n                <span class=\"keyword\">break</span>;\n            <span class=\"keyword\">default</span>:\n                <span class=\"keyword\">super</span>.handleMessage(msg);\n        }\n    }\n}\n</code></pre>\n<p>//handlerservicestaticleak</p>\n","excerpt":"<hr>\n<p>classstatic<br><br>","more":"<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MainActivity</span> <span class=\"keyword\">extends</span> <span class=\"title\">Activity</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">true<span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyHandler</span> <span class=\"keyword\">extends</span> <span class=\"title\">Handler</span></span>&#123;</div><div class=\"line\">true<span class=\"meta\">@Override</span></div><div class=\"line\">true<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">handleMessage</span><span class=\"params\">(Message msg)</span> </span>&#123;</div><div class=\"line\">truetrue<span class=\"keyword\">if</span>(msg.what==<span class=\"number\">1</span>)&#123;</div><div class=\"line\">truetruetrue<span class=\"keyword\">new</span> Thread()&#123;</div><div class=\"line\">truetruetruetrue<span class=\"meta\">@Override</span></div><div class=\"line\">truetruetruetrue<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">truetruetruetruetrue<span class=\"keyword\">while</span>(<span class=\"keyword\">true</span>)&#123;</div><div class=\"line\">truetruetruetruetruetrue<span class=\"comment\">//do something</span></div><div class=\"line\">truetruetruetruetrue&#125;</div><div class=\"line\">truetruetruetrue&#125;</div><div class=\"line\">truetruetrue&#125;.start();</div><div class=\"line\">truetrue&#125;</div><div class=\"line\">true&#125;</div><div class=\"line\">true&#125;</div><div class=\"line\">true<span class=\"keyword\">public</span> MyHandler handler;</div><div class=\"line\">true<span class=\"meta\">@Override</span></div><div class=\"line\">true<span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onCreate</span><span class=\"params\">(Bundle savedInstanceState)</span> </span>&#123;</div><div class=\"line\">truetrue<span class=\"keyword\">super</span>.onCreate(savedInstanceState);</div><div class=\"line\">truetruesetContentView(R.layout.activity_main);</div><div class=\"line\">truetrue</div><div class=\"line\">truetrue<span class=\"comment\">//...</span></div><div class=\"line\">truetruehandler.sendEmptyMessage(<span class=\"number\">1</span>);</div><div class=\"line\">truetruefinish();</div><div class=\"line\">true    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>onCreatehandlerfinishactivityhandler<strong></strong><br>Threadhandlerhandleractivityhandleractivty</p>\n<p>ActivityAsyncTaskleak<br> <a href=\"http://stackoverflow.com/questions/24679383/memory-leak-using-asynctask-as-a-inner-class\">stackoverFlow</a></p>\n<p>:<br>WeakReference<br>,</p>\n<pre><code class=\"java\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">IncomingHandler</span> <span class=\"keyword\">extends</span> <span class=\"title\">Handler</span> </span>{\n    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> WeakReference&lt;MessagingService&gt; mReference;\n\n    IncomingHandler(MessagingService service) {\n        mReference = <span class=\"keyword\">new</span> WeakReference&lt;&gt;(service);\n    }\n\n    <span class=\"meta\">@Override</span>\n    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">handleMessage</span><span class=\"params\">(Message msg)</span> </span>{\n        MessagingService service = mReference.get();\n        <span class=\"keyword\">switch</span> (msg.what) {\n            <span class=\"keyword\">case</span> MSG_SEND_NOTIFICATION:\n                <span class=\"keyword\">int</span> howManyConversations = msg.arg1 &lt;= <span class=\"number\">0</span> ? <span class=\"number\">1</span> : msg.arg1;\n                <span class=\"keyword\">int</span> messagesPerConversation = msg.arg2 &lt;= <span class=\"number\">0</span> ? <span class=\"number\">1</span> : msg.arg2;\n                <span class=\"keyword\">if</span> (service != <span class=\"keyword\">null</span>) {\n                    service.sendNotification(howManyConversations,\n                    messagesPerConversation);\n                }\n                <span class=\"keyword\">break</span>;\n            <span class=\"keyword\">default</span>:\n                <span class=\"keyword\">super</span>.handleMessage(msg);\n        }\n    }\n}\n</code></pre>\n<p>//handlerservicestaticleak</p>"},{"title":"android 7.0","date":"2016-10-07T19:02:26.000Z","_content":"\nGoogle I/O 2016[What's new in Android](https://www.youtube.com/watch?v=B08iLAtS3AQ)MultiWindowNotificationConstraintLayout\n<!--more-->\n\n### 1. BackGround Optimization\n\n~~CONNECTIVITY_CHANGE~~(ManifestBroadcastReceiverramprocesskill old processmemory thrashing)\n\n~~NEW_PICTURE~~,~~NEW_VIDEO~~.\n\n: **targeting N**manifest static broadcastReceiver~~CONNECTIVITY_CHANGE~~context.registerReceiverbroadcast\n\n: JobSchedulerfirebase jobDispatcher\n:\n```java\n  public static final int MY_BACKGROUND_JOB = 0;\n    public static void scheduleJob(Context context){\n        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) {\n            JobScheduler js =\n                    (JobScheduler) context.getSystemService(Context.JOB_SCHEDULER_SERVICE);\n            JobInfo job = new JobInfo.Builder(\n                    MY_BACKGROUND_JOB,\n                    new ComponentName(context,MyJobService.class)).\n                    setRequiredNetworkType(JobInfo.NETWORK_TYPE_UNMETERED).\n                    setRequiresCharging(true).\n                    build();\n            js.schedule(job);\n        }\n      \n    }\n```\n\n\n~~NEW_PICTURE~~,~~NEW_VIDEO~~.\n\n7.0 Nuget( target N) broadcastfully deprecated  !!!\n\nJobScheduler(contentProvider change)\n~~NEW_PICTURE~~(API24)\n```java\n    public static void scheduleJob(Context context){\n        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.N) {\n            JobScheduler js =\n                    context.getSystemService(JobScheduler.class);\n            JobInfo.Builder builder = new JobInfo.Builder(\n                    R.id.schedule_photo_jobs,\n                    new ComponentName(context,PhotoContentJob.class));\n\n            builder.addTriggerContentUri(\n                    new JobInfo.TriggerContentUri(MediaStore.Images.Media.EXTERNAL_CONTENT_URI,\n                            JobInfo.TriggerContentUri.FLAG_NOTIFY_FOR_DESCENDANTS)\n            );\n            js.schedule(builder.build());\n        }\n    }\n```\n[youtube](https://www.youtube.com/watch?v=3ZX0CfVfVP8)\n\n### 2. (FileProvider)\n\n File storage permission change \n Uri.fromFile(file://URI)FileProvider6.0permission model storage permissionWRITE_EXTERNAL_STORAGEDangerous permission\n Intenturi7.0Uri.FromFile\n FileProviderUri,[Demo](https://github.com/Haldir65/FileProviderDmo)FileProviderApp\n DownloadManagerCOLUMN_LOCAL_FILENAME\n\n\n\n\n\n## Reference\n\n1. [Docs](https://developer.android.com/topic/performance/background-optimization.html?utm_campaign=adp_series__100616&utm_source=anddev&utm_medium=yt-desc)\n2. [youtube](https://www.youtube.com/watch?v=vBjTXKpaFj8)\n3. [Andrioid 7.0](http://gold.xitu.io/entry/57ff7e14a0bb9f005860c805)\n4. [Android 7.0 Behavior Changes](https://developer.android.com/about/versions/nougat/android-7.0-changes.html)","source":"_posts/android-7-0-new-features.md","raw":"---\ntitle: android 7.0\ndate: 2016-10-08 03:02:26\ncategories: blog  \ntags: [android]\n---\n\nGoogle I/O 2016[What's new in Android](https://www.youtube.com/watch?v=B08iLAtS3AQ)MultiWindowNotificationConstraintLayout\n<!--more-->\n\n### 1. BackGround Optimization\n\n~~CONNECTIVITY_CHANGE~~(ManifestBroadcastReceiverramprocesskill old processmemory thrashing)\n\n~~NEW_PICTURE~~,~~NEW_VIDEO~~.\n\n: **targeting N**manifest static broadcastReceiver~~CONNECTIVITY_CHANGE~~context.registerReceiverbroadcast\n\n: JobSchedulerfirebase jobDispatcher\n:\n```java\n  public static final int MY_BACKGROUND_JOB = 0;\n    public static void scheduleJob(Context context){\n        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) {\n            JobScheduler js =\n                    (JobScheduler) context.getSystemService(Context.JOB_SCHEDULER_SERVICE);\n            JobInfo job = new JobInfo.Builder(\n                    MY_BACKGROUND_JOB,\n                    new ComponentName(context,MyJobService.class)).\n                    setRequiredNetworkType(JobInfo.NETWORK_TYPE_UNMETERED).\n                    setRequiresCharging(true).\n                    build();\n            js.schedule(job);\n        }\n      \n    }\n```\n\n\n~~NEW_PICTURE~~,~~NEW_VIDEO~~.\n\n7.0 Nuget( target N) broadcastfully deprecated  !!!\n\nJobScheduler(contentProvider change)\n~~NEW_PICTURE~~(API24)\n```java\n    public static void scheduleJob(Context context){\n        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.N) {\n            JobScheduler js =\n                    context.getSystemService(JobScheduler.class);\n            JobInfo.Builder builder = new JobInfo.Builder(\n                    R.id.schedule_photo_jobs,\n                    new ComponentName(context,PhotoContentJob.class));\n\n            builder.addTriggerContentUri(\n                    new JobInfo.TriggerContentUri(MediaStore.Images.Media.EXTERNAL_CONTENT_URI,\n                            JobInfo.TriggerContentUri.FLAG_NOTIFY_FOR_DESCENDANTS)\n            );\n            js.schedule(builder.build());\n        }\n    }\n```\n[youtube](https://www.youtube.com/watch?v=3ZX0CfVfVP8)\n\n### 2. (FileProvider)\n\n File storage permission change \n Uri.fromFile(file://URI)FileProvider6.0permission model storage permissionWRITE_EXTERNAL_STORAGEDangerous permission\n Intenturi7.0Uri.FromFile\n FileProviderUri,[Demo](https://github.com/Haldir65/FileProviderDmo)FileProviderApp\n DownloadManagerCOLUMN_LOCAL_FILENAME\n\n\n\n\n\n## Reference\n\n1. [Docs](https://developer.android.com/topic/performance/background-optimization.html?utm_campaign=adp_series__100616&utm_source=anddev&utm_medium=yt-desc)\n2. [youtube](https://www.youtube.com/watch?v=vBjTXKpaFj8)\n3. [Andrioid 7.0](http://gold.xitu.io/entry/57ff7e14a0bb9f005860c805)\n4. [Android 7.0 Behavior Changes](https://developer.android.com/about/versions/nougat/android-7.0-changes.html)","slug":"android-7-0-new-features","published":1,"updated":"2017-04-23T10:52:07.720Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj50afgyw002zi4vrg6n9idxb","content":"<p>Google I/O 2016<a href=\"https://www.youtube.com/watch?v=B08iLAtS3AQ\">Whats new in Android</a>MultiWindowNotificationConstraintLayout<br><a id=\"more\"></a></p>\n<h3 id=\"1-BackGround-Optimization\"><a href=\"#1-BackGround-Optimization\" class=\"headerlink\" title=\"1. BackGround Optimization\"></a>1. BackGround Optimization</h3><p><del>CONNECTIVITY_CHANGE</del>(ManifestBroadcastReceiverramprocesskill old processmemory thrashing)</p>\n<p><del>NEW_PICTURE</del>,<del>NEW_VIDEO</del>.</p>\n<p>: <strong>targeting N</strong>manifest static broadcastReceiver<del>CONNECTIVITY_CHANGE</del>context.registerReceiverbroadcast</p>\n<p>: JobSchedulerfirebase jobDispatcher<br>:<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> MY_BACKGROUND_JOB = <span class=\"number\">0</span>;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">scheduleJob</span><span class=\"params\">(Context context)</span></span>&#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) &#123;</div><div class=\"line\">          JobScheduler js =</div><div class=\"line\">                  (JobScheduler) context.getSystemService(Context.JOB_SCHEDULER_SERVICE);</div><div class=\"line\">          JobInfo job = <span class=\"keyword\">new</span> JobInfo.Builder(</div><div class=\"line\">                  MY_BACKGROUND_JOB,</div><div class=\"line\">                  <span class=\"keyword\">new</span> ComponentName(context,MyJobService.class)).</div><div class=\"line\">                  setRequiredNetworkType(JobInfo.NETWORK_TYPE_UNMETERED).</div><div class=\"line\">                  setRequiresCharging(<span class=\"keyword\">true</span>).</div><div class=\"line\">                  build();</div><div class=\"line\">          js.schedule(job);</div><div class=\"line\">      &#125;</div><div class=\"line\">    </div><div class=\"line\">  &#125;</div></pre></td></tr></table></figure></p>\n<p><del>NEW_PICTURE</del>,<del>NEW_VIDEO</del>.</p>\n<p>7.0 Nuget( target N) broadcastfully deprecated  !!!</p>\n<p>JobScheduler(contentProvider change)<br><del>NEW_PICTURE</del>(API24)<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">scheduleJob</span><span class=\"params\">(Context context)</span></span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.N) &#123;</div><div class=\"line\">        JobScheduler js =</div><div class=\"line\">                context.getSystemService(JobScheduler.class);</div><div class=\"line\">        JobInfo.Builder builder = <span class=\"keyword\">new</span> JobInfo.Builder(</div><div class=\"line\">                R.id.schedule_photo_jobs,</div><div class=\"line\">                <span class=\"keyword\">new</span> ComponentName(context,PhotoContentJob.class));</div><div class=\"line\"></div><div class=\"line\">        builder.addTriggerContentUri(</div><div class=\"line\">                <span class=\"keyword\">new</span> JobInfo.TriggerContentUri(MediaStore.Images.Media.EXTERNAL_CONTENT_URI,</div><div class=\"line\">                        JobInfo.TriggerContentUri.FLAG_NOTIFY_FOR_DESCENDANTS)</div><div class=\"line\">        );</div><div class=\"line\">        js.schedule(builder.build());</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p><a href=\"https://www.youtube.com/watch?v=3ZX0CfVfVP8\">youtube</a></p>\n<h3 id=\"2--FileProvider\"><a href=\"#2--FileProvider\" class=\"headerlink\" title=\"2. (FileProvider)\"></a>2. (FileProvider)</h3><p> File storage permission change<br> Uri.fromFile(file://URI)FileProvider6.0permission model storage permissionWRITE_EXTERNAL_STORAGEDangerous permission<br> Intenturi7.0Uri.FromFile<br> FileProviderUri,<a href=\"https://github.com/Haldir65/FileProviderDmo\">Demo</a>FileProviderApp<br> DownloadManagerCOLUMN_LOCAL_FILENAME</p>\n<h2 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h2><ol>\n<li><a href=\"https://developer.android.com/topic/performance/background-optimization.html?utm_campaign=adp_series__100616&amp;utm_source=anddev&amp;utm_medium=yt-desc\">Docs</a></li>\n<li><a href=\"https://www.youtube.com/watch?v=vBjTXKpaFj8\">youtube</a></li>\n<li><a href=\"http://gold.xitu.io/entry/57ff7e14a0bb9f005860c805\">Andrioid 7.0</a></li>\n<li><a href=\"https://developer.android.com/about/versions/nougat/android-7.0-changes.html\">Android 7.0 Behavior Changes</a></li>\n</ol>\n","excerpt":"<p>Google I/O 2016<a href=\"https://www.youtube.com/watch?v=B08iLAtS3AQ\">Whats new in Android</a>MultiWindowNotificationConstraintLayout<br>","more":"</p>\n<h3 id=\"1-BackGround-Optimization\"><a href=\"#1-BackGround-Optimization\" class=\"headerlink\" title=\"1. BackGround Optimization\"></a>1. BackGround Optimization</h3><p><del>CONNECTIVITY_CHANGE</del>(ManifestBroadcastReceiverramprocesskill old processmemory thrashing)</p>\n<p><del>NEW_PICTURE</del>,<del>NEW_VIDEO</del>.</p>\n<p>: <strong>targeting N</strong>manifest static broadcastReceiver<del>CONNECTIVITY_CHANGE</del>context.registerReceiverbroadcast</p>\n<p>: JobSchedulerfirebase jobDispatcher<br>:<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> MY_BACKGROUND_JOB = <span class=\"number\">0</span>;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">scheduleJob</span><span class=\"params\">(Context context)</span></span>&#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) &#123;</div><div class=\"line\">          JobScheduler js =</div><div class=\"line\">                  (JobScheduler) context.getSystemService(Context.JOB_SCHEDULER_SERVICE);</div><div class=\"line\">          JobInfo job = <span class=\"keyword\">new</span> JobInfo.Builder(</div><div class=\"line\">                  MY_BACKGROUND_JOB,</div><div class=\"line\">                  <span class=\"keyword\">new</span> ComponentName(context,MyJobService.class)).</div><div class=\"line\">                  setRequiredNetworkType(JobInfo.NETWORK_TYPE_UNMETERED).</div><div class=\"line\">                  setRequiresCharging(<span class=\"keyword\">true</span>).</div><div class=\"line\">                  build();</div><div class=\"line\">          js.schedule(job);</div><div class=\"line\">      &#125;</div><div class=\"line\">    </div><div class=\"line\">  &#125;</div></pre></td></tr></table></figure></p>\n<p><del>NEW_PICTURE</del>,<del>NEW_VIDEO</del>.</p>\n<p>7.0 Nuget( target N) broadcastfully deprecated  !!!</p>\n<p>JobScheduler(contentProvider change)<br><del>NEW_PICTURE</del>(API24)<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">scheduleJob</span><span class=\"params\">(Context context)</span></span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.N) &#123;</div><div class=\"line\">        JobScheduler js =</div><div class=\"line\">                context.getSystemService(JobScheduler.class);</div><div class=\"line\">        JobInfo.Builder builder = <span class=\"keyword\">new</span> JobInfo.Builder(</div><div class=\"line\">                R.id.schedule_photo_jobs,</div><div class=\"line\">                <span class=\"keyword\">new</span> ComponentName(context,PhotoContentJob.class));</div><div class=\"line\"></div><div class=\"line\">        builder.addTriggerContentUri(</div><div class=\"line\">                <span class=\"keyword\">new</span> JobInfo.TriggerContentUri(MediaStore.Images.Media.EXTERNAL_CONTENT_URI,</div><div class=\"line\">                        JobInfo.TriggerContentUri.FLAG_NOTIFY_FOR_DESCENDANTS)</div><div class=\"line\">        );</div><div class=\"line\">        js.schedule(builder.build());</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p><a href=\"https://www.youtube.com/watch?v=3ZX0CfVfVP8\">youtube</a></p>\n<h3 id=\"2--FileProvider\"><a href=\"#2--FileProvider\" class=\"headerlink\" title=\"2. (FileProvider)\"></a>2. (FileProvider)</h3><p> File storage permission change<br> Uri.fromFile(file://URI)FileProvider6.0permission model storage permissionWRITE_EXTERNAL_STORAGEDangerous permission<br> Intenturi7.0Uri.FromFile<br> FileProviderUri,<a href=\"https://github.com/Haldir65/FileProviderDmo\">Demo</a>FileProviderApp<br> DownloadManagerCOLUMN_LOCAL_FILENAME</p>\n<h2 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h2><ol>\n<li><a href=\"https://developer.android.com/topic/performance/background-optimization.html?utm_campaign=adp_series__100616&amp;utm_source=anddev&amp;utm_medium=yt-desc\">Docs</a></li>\n<li><a href=\"https://www.youtube.com/watch?v=vBjTXKpaFj8\">youtube</a></li>\n<li><a href=\"http://gold.xitu.io/entry/57ff7e14a0bb9f005860c805\">Andrioid 7.0</a></li>\n<li><a href=\"https://developer.android.com/about/versions/nougat/android-7.0-changes.html\">Android 7.0 Behavior Changes</a></li>\n</ol>"},{"title":"androidselectableItemBackground","date":"2016-09-23T11:56:39.000Z","_content":"\n> android:foreground=\"?android:attr/selectableItemBackground\"\n\n\n> android:background=\"?android:attr/selectableItemBackground\"\n\nxmlrecyclerVeiwitem xmlAPI 21itemViewRipple\nAPI 21MonoChrome![](https://cloud.githubusercontent.com/assets/12274855/18787855/2a6d93f2-81d7-11e6-8026-58cdbd8583d4.JPG) </br> \nCustomize\n```\n<item name=\"android:colorControlHighlight\">@color/my_ripple_color</item>\n```\n//ActivityTheme(style-v21)ActivityThemeAppcompat!!\nxml\n```xml\n<LinearLayout\n        android:id=\"@+id/item_root\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"?android:attr/listPreferredItemHeight\"\n        android:orientation=\"vertical\"\n        android:gravity=\"center\"\n        android:onClick=\"@{(view) -> callback.onClick(view,data)}\"\n        android:elevation=\"2dp\"\n        android:background=\"@color/md_amber_200\"\n        android:foreground=\"?android:attr/selectableItemBackground\"\n        />\n```\n( API 21)CardViewforegroundbackground:\nandroid:foregroundAPI 23FrameLayout(CardViewFrameLayout)\n<!--more-->\n\n##\n\n> android:foreground=\"?android:attr/selectableItemBackground\"\n\n\n> android:background=\"?android:attr/selectableItemBackground\"\n\nFrameLayout\n\n- foreground \n google io2016[Chris Banes](https://github.com/chrisbanes)\n ![](https://cloud.githubusercontent.com/assets/12274855/18787841/1d0b2d82-81d7-11e6-916e-b4113772c3a2.JPG),\nandroid:foregroundAPI 1 FrameLayoutAPI 23View\nAPI 23foregroundRipple,23foreground\n\n- [Forefround drawable selector](http://effmx.com/articles/ru-he-chuang-jian-jian-rong-de-foreground-drawable-selectorshi-xian-layoutdian-ji-xiao-guo/) :\n    > Foreground  Drawable Foreground  drawablecolor  Froeground  drawable selector  sdk 23 foregrond  Framelayout  compileSdkVersion 23\n    21slelector Drawable\n\n- API23View,ViewGroupforeground?\n[](https://dzone.com/articles/adding-foreground-selector)\nDrawablesetDrawableDrawablecallback\n> Drawable->View->Context //leak!\n//DrawableActivity leak\n\n- \n[Chris Banes](https://github.com/chrisbanes)G+Post : [Foreground Doge](https://plus.google.com/+ChrisBanes/posts/DRerZ8wEFuF)\n,ChrisGoogle\n1. FrameLayoutforegroundxmlFrameLayout\n2. foregroundViewgroup , [](https://gist.github.com/chrisbanes/9091754)\n- attrs:\n```<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<resources>\n    <declare-styleable name=\"ForegroundLinearLayout\">\n        <attr name=\"android:foreground\" />\n        <attr name=\"android:foregroundInsidePadding\" />\n        <attr name=\"android:foregroundGravity\" />\n    </declare-styleable>\n</resources>```\n\n```java\n/* \n * Copyright (C) 2006 The Android Open Source Project \n * \n * Licensed under the Apache License, Version 2.0 (the \"License\"); \n * you may not use this file except in compliance with the License. \n * You may obtain a copy of the License at \n * \n *      http://www.apache.org/licenses/LICENSE-2.0 \n * \n * Unless required by applicable law or agreed to in writing, software \n * distributed under the License is distributed on an \"AS IS\" BASIS, \n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. \n * See the License for the specific language governing permissions and \n * limitations under the License. \n */ \n \npackage your.package; \n \nimport android.content.Context;\nimport android.content.res.TypedArray;\nimport android.graphics.Canvas;\nimport android.graphics.Rect;\nimport android.graphics.drawable.Drawable;\nimport android.util.AttributeSet;\nimport android.view.Gravity;\nimport android.widget.LinearLayout;\n \nimport your.package.R; \n \npublic class ForegroundLinearLayout extends LinearLayout {\n \n    private Drawable mForeground;\n \n    private final Rect mSelfBounds = new Rect();\n    private final Rect mOverlayBounds = new Rect();\n \n    private int mForegroundGravity = Gravity.FILL;\n \n    protected boolean mForegroundInPadding = true;\n \n    boolean mForegroundBoundsChanged = false;\n \n    public ForegroundLinearLayout(Context context) {\n        super(context);\n    } \n \n    public ForegroundLinearLayout(Context context, AttributeSet attrs) {\n        this(context, attrs, 0);\n    } \n \n    public ForegroundLinearLayout(Context context, AttributeSet attrs, int defStyle) {\n        super(context, attrs, defStyle);\n \n        TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.ForegroundLinearLayout,\n                defStyle, 0);\n \n        mForegroundGravity = a.getInt(\n                R.styleable.ForegroundLinearLayout_android_foregroundGravity, mForegroundGravity);\n \n        final Drawable d = a.getDrawable(R.styleable.ForegroundLinearLayout_android_foreground);\n        if (d != null) {\n            setForeground(d);\n        } \n \n        mForegroundInPadding = a.getBoolean(\n                R.styleable.ForegroundLinearLayout_android_foregroundInsidePadding, true);\n \n        a.recycle();\n    } \n \n    /** \n     * Describes how the foreground is positioned. \n     * \n     * @return foreground gravity. \n     * \n     * @see #setForegroundGravity(int) \n     */ \n    public int getForegroundGravity() { \n        return mForegroundGravity;\n    } \n \n    /** \n     * Describes how the foreground is positioned. Defaults to START and TOP. \n     * \n     * @param foregroundGravity See {@link android.view.Gravity} \n     * \n     * @see #getForegroundGravity() \n     */ \n    public void setForegroundGravity(int foregroundGravity) {\n        if (mForegroundGravity != foregroundGravity) {\n            if ((foregroundGravity & Gravity.RELATIVE_HORIZONTAL_GRAVITY_MASK) == 0) {\n                foregroundGravity |= Gravity.START;\n            } \n \n            if ((foregroundGravity & Gravity.VERTICAL_GRAVITY_MASK) == 0) {\n                foregroundGravity |= Gravity.TOP;\n            } \n \n            mForegroundGravity = foregroundGravity;\n \n \n            if (mForegroundGravity == Gravity.FILL && mForeground != null) {\n                Rect padding = new Rect();\n                mForeground.getPadding(padding);\n            } \n \n            requestLayout();\n        } \n    } \n \n    @Override \n    protected boolean verifyDrawable(Drawable who) {\n        return super.verifyDrawable(who) || (who == mForeground);\n    } \n \n    @Override \n    public void jumpDrawablesToCurrentState() { \n        super.jumpDrawablesToCurrentState(); \n        if (mForeground != null) mForeground.jumpToCurrentState();\n    } \n \n    @Override \n    protected void drawableStateChanged() { \n        super.drawableStateChanged(); \n        if (mForeground != null && mForeground.isStateful()) {\n            mForeground.setState(getDrawableState());\n        } \n    } \n \n    /** \n     * Supply a Drawable that is to be rendered on top of all of the child \n     * views in the frame layout.  Any padding in the Drawable will be taken \n     * into account by ensuring that the children are inset to be placed \n     * inside of the padding area. \n     * \n     * @param drawable The Drawable to be drawn on top of the children. \n     */ \n    public void setForeground(Drawable drawable) {\n        if (mForeground != drawable) {\n            if (mForeground != null) {\n                mForeground.setCallback(null);\n                unscheduleDrawable(mForeground);\n            } \n \n            mForeground = drawable;\n \n            if (drawable != null) {\n                setWillNotDraw(false);\n                drawable.setCallback(this);\n                if (drawable.isStateful()) {\n                    drawable.setState(getDrawableState());\n                } \n                if (mForegroundGravity == Gravity.FILL) {\n                    Rect padding = new Rect();\n                    drawable.getPadding(padding);\n                } \n            }  else { \n                setWillNotDraw(true);\n            } \n            requestLayout();\n            invalidate();\n        } \n    } \n \n    /** \n     * Returns the drawable used as the foreground of this FrameLayout. The \n     * foreground drawable, if non-null, is always drawn on top of the children. \n     * \n     * @return A Drawable or null if no foreground was set. \n     */ \n    public Drawable getForeground() {\n        return mForeground;\n    } \n \n    @Override \n    protected void onLayout(boolean changed, int left, int top, int right, int bottom) {\n        super.onLayout(changed, left, top, right, bottom);\n        mForegroundBoundsChanged = changed;\n    } \n \n    @Override \n    protected void onSizeChanged(int w, int h, int oldw, int oldh) {\n        super.onSizeChanged(w, h, oldw, oldh);\n        mForegroundBoundsChanged = true;\n    } \n \n    @Override \n    public void draw(Canvas canvas) {\n        super.draw(canvas);\n \n        if (mForeground != null) {\n            final Drawable foreground = mForeground;\n \n            if (mForegroundBoundsChanged) {\n                mForegroundBoundsChanged = false;\n                final Rect selfBounds = mSelfBounds;\n                final Rect overlayBounds = mOverlayBounds;\n \n                final int w = getRight() - getLeft();\n                final int h = getBottom() - getTop();\n \n                if (mForegroundInPadding) {\n                    selfBounds.set(0, 0, w, h);\n                } else { \n                    selfBounds.set(getPaddingLeft(), getPaddingTop(),\n                            w - getPaddingRight(), h - getPaddingBottom());\n                } \n \n                Gravity.apply(mForegroundGravity, foreground.getIntrinsicWidth(),\n                        foreground.getIntrinsicHeight(), selfBounds, overlayBounds);\n                foreground.setBounds(overlayBounds);\n            } \n \n            foreground.draw(canvas);\n        } \n    } \n} \n```\n- \n``` xml \n<your.package.ForegroundLinearLayout\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:foreground=\"?android:selectableItemBackground\">\n\n    <ImageView\n        android:id=@+id/imageview_opaque\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\" />\n\n    ... other views ...\n/>\n```\n\n- [Jack Wharton](https://github.com/JakeWharton)[ForegroundImageView](https://gist.github.com/JakeWharton/0a251d67649305d84e8a)</br>\n\n- attrs\n```xml\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<resources>\n  <declare-styleable name=\"ForegroundImageView\">\n    <attr name=\"android:foreground\"/>\n  </declare-styleable>\n</resources>\n```\n\n```java\n    import android.content.Context;\n    import android.content.res.TypedArray;\n    import android.graphics.Canvas;\n    import android.graphics.drawable.Drawable;\n    import android.util.AttributeSet;\n    import android.widget.ImageView;\n     \n    public class ForegroundImageView extends ImageView {\n      private Drawable foreground;\n     \n      public ForegroundImageView(Context context) {\n        this(context, null);\n      } \n     \n      public ForegroundImageView(Context context, AttributeSet attrs) {\n        super(context, attrs);\n     \n        TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.ForegroundImageView);\n        Drawable foreground = a.getDrawable(R.styleable.ForegroundImageView_android_foreground);\n        if (foreground != null) {\n          setForeground(foreground);\n        } \n        a.recycle();\n      } \n     \n      /** \n       * Supply a drawable resource that is to be rendered on top of all of the child \n       * views in the frame layout. \n       * \n       * @param drawableResId The drawable resource to be drawn on top of the children. \n       */ \n      public void setForegroundResource(int drawableResId) {\n        setForeground(getContext().getResources().getDrawable(drawableResId));\n      } \n     \n      /** \n       * Supply a Drawable that is to be rendered on top of all of the child \n       * views in the frame layout. \n       * \n       * @param drawable The Drawable to be drawn on top of the children. \n       */ \n      public void setForeground(Drawable drawable) {\n        if (foreground == drawable) {\n          return; \n        } \n        if (foreground != null) {\n          foreground.setCallback(null);\n          unscheduleDrawable(foreground);\n        } \n     \n        foreground = drawable;\n     \n        if (drawable != null) {\n          drawable.setCallback(this);\n          if (drawable.isStateful()) {\n            drawable.setState(getDrawableState());\n          } \n        } \n        requestLayout();\n        invalidate();\n      } \n     \n      @Override protected boolean verifyDrawable(Drawable who) {\n        return super.verifyDrawable(who) || who == foreground;\n      } \n     \n      @Override public void jumpDrawablesToCurrentState() { \n        super.jumpDrawablesToCurrentState(); \n        if (foreground != null) foreground.jumpToCurrentState();\n      } \n     \n      @Override protected void drawableStateChanged() { \n        super.drawableStateChanged(); \n        if (foreground != null && foreground.isStateful()) {\n          foreground.setState(getDrawableState());\n        } \n      } \n     \n      @Override protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {\n        super.onMeasure(widthMeasureSpec, heightMeasureSpec);\n        if (foreground != null) {\n          foreground.setBounds(0, 0, getMeasuredWidth(), getMeasuredHeight());\n          invalidate();\n        } \n      } \n     \n      @Override protected void onSizeChanged(int w, int h, int oldw, int oldh) {\n        super.onSizeChanged(w, h, oldw, oldh);\n        if (foreground != null) {\n          foreground.setBounds(0, 0, w, h);\n          invalidate();\n        } \n      } \n     \n      @Override public void draw(Canvas canvas) {\n        super.draw(canvas);\n     \n        if (foreground != null) {\n          foreground.draw(canvas);\n        } \n      } \n    } \n```\n\n\n----------\n\n[](https://github.com/cesards/ForegroundViews)\n\n\n##reference\n - [Android themes and styles demisfied](https://www.youtube.com/watch?v=TIHXGwRTMWI) ThemeStyle\n - [Chris Banes G+ post](https://plus.google.com/108967384991768947849/posts/aHPVDtr6mcp) \n - [RelativeLayout with foreGround](https://gist.github.com/shakalaca/6199283) \n - [Ripple Effect](https://github.com/traex/RippleEffect) RippleAPI 9+ RelativeLayoutViewGroup\n\n \n","source":"_posts/selectableItemBackground-foreground.md","raw":"---\ntitle: androidselectableItemBackground\ndate: 2016-09-23 19:56:39\ncategories: blog\ntags: [foreground,android]\n---\n\n> android:foreground=\"?android:attr/selectableItemBackground\"\n\n\n> android:background=\"?android:attr/selectableItemBackground\"\n\nxmlrecyclerVeiwitem xmlAPI 21itemViewRipple\nAPI 21MonoChrome![](https://cloud.githubusercontent.com/assets/12274855/18787855/2a6d93f2-81d7-11e6-8026-58cdbd8583d4.JPG) </br> \nCustomize\n```\n<item name=\"android:colorControlHighlight\">@color/my_ripple_color</item>\n```\n//ActivityTheme(style-v21)ActivityThemeAppcompat!!\nxml\n```xml\n<LinearLayout\n        android:id=\"@+id/item_root\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"?android:attr/listPreferredItemHeight\"\n        android:orientation=\"vertical\"\n        android:gravity=\"center\"\n        android:onClick=\"@{(view) -> callback.onClick(view,data)}\"\n        android:elevation=\"2dp\"\n        android:background=\"@color/md_amber_200\"\n        android:foreground=\"?android:attr/selectableItemBackground\"\n        />\n```\n( API 21)CardViewforegroundbackground:\nandroid:foregroundAPI 23FrameLayout(CardViewFrameLayout)\n<!--more-->\n\n##\n\n> android:foreground=\"?android:attr/selectableItemBackground\"\n\n\n> android:background=\"?android:attr/selectableItemBackground\"\n\nFrameLayout\n\n- foreground \n google io2016[Chris Banes](https://github.com/chrisbanes)\n ![](https://cloud.githubusercontent.com/assets/12274855/18787841/1d0b2d82-81d7-11e6-916e-b4113772c3a2.JPG),\nandroid:foregroundAPI 1 FrameLayoutAPI 23View\nAPI 23foregroundRipple,23foreground\n\n- [Forefround drawable selector](http://effmx.com/articles/ru-he-chuang-jian-jian-rong-de-foreground-drawable-selectorshi-xian-layoutdian-ji-xiao-guo/) :\n    > Foreground  Drawable Foreground  drawablecolor  Froeground  drawable selector  sdk 23 foregrond  Framelayout  compileSdkVersion 23\n    21slelector Drawable\n\n- API23View,ViewGroupforeground?\n[](https://dzone.com/articles/adding-foreground-selector)\nDrawablesetDrawableDrawablecallback\n> Drawable->View->Context //leak!\n//DrawableActivity leak\n\n- \n[Chris Banes](https://github.com/chrisbanes)G+Post : [Foreground Doge](https://plus.google.com/+ChrisBanes/posts/DRerZ8wEFuF)\n,ChrisGoogle\n1. FrameLayoutforegroundxmlFrameLayout\n2. foregroundViewgroup , [](https://gist.github.com/chrisbanes/9091754)\n- attrs:\n```<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<resources>\n    <declare-styleable name=\"ForegroundLinearLayout\">\n        <attr name=\"android:foreground\" />\n        <attr name=\"android:foregroundInsidePadding\" />\n        <attr name=\"android:foregroundGravity\" />\n    </declare-styleable>\n</resources>```\n\n```java\n/* \n * Copyright (C) 2006 The Android Open Source Project \n * \n * Licensed under the Apache License, Version 2.0 (the \"License\"); \n * you may not use this file except in compliance with the License. \n * You may obtain a copy of the License at \n * \n *      http://www.apache.org/licenses/LICENSE-2.0 \n * \n * Unless required by applicable law or agreed to in writing, software \n * distributed under the License is distributed on an \"AS IS\" BASIS, \n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. \n * See the License for the specific language governing permissions and \n * limitations under the License. \n */ \n \npackage your.package; \n \nimport android.content.Context;\nimport android.content.res.TypedArray;\nimport android.graphics.Canvas;\nimport android.graphics.Rect;\nimport android.graphics.drawable.Drawable;\nimport android.util.AttributeSet;\nimport android.view.Gravity;\nimport android.widget.LinearLayout;\n \nimport your.package.R; \n \npublic class ForegroundLinearLayout extends LinearLayout {\n \n    private Drawable mForeground;\n \n    private final Rect mSelfBounds = new Rect();\n    private final Rect mOverlayBounds = new Rect();\n \n    private int mForegroundGravity = Gravity.FILL;\n \n    protected boolean mForegroundInPadding = true;\n \n    boolean mForegroundBoundsChanged = false;\n \n    public ForegroundLinearLayout(Context context) {\n        super(context);\n    } \n \n    public ForegroundLinearLayout(Context context, AttributeSet attrs) {\n        this(context, attrs, 0);\n    } \n \n    public ForegroundLinearLayout(Context context, AttributeSet attrs, int defStyle) {\n        super(context, attrs, defStyle);\n \n        TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.ForegroundLinearLayout,\n                defStyle, 0);\n \n        mForegroundGravity = a.getInt(\n                R.styleable.ForegroundLinearLayout_android_foregroundGravity, mForegroundGravity);\n \n        final Drawable d = a.getDrawable(R.styleable.ForegroundLinearLayout_android_foreground);\n        if (d != null) {\n            setForeground(d);\n        } \n \n        mForegroundInPadding = a.getBoolean(\n                R.styleable.ForegroundLinearLayout_android_foregroundInsidePadding, true);\n \n        a.recycle();\n    } \n \n    /** \n     * Describes how the foreground is positioned. \n     * \n     * @return foreground gravity. \n     * \n     * @see #setForegroundGravity(int) \n     */ \n    public int getForegroundGravity() { \n        return mForegroundGravity;\n    } \n \n    /** \n     * Describes how the foreground is positioned. Defaults to START and TOP. \n     * \n     * @param foregroundGravity See {@link android.view.Gravity} \n     * \n     * @see #getForegroundGravity() \n     */ \n    public void setForegroundGravity(int foregroundGravity) {\n        if (mForegroundGravity != foregroundGravity) {\n            if ((foregroundGravity & Gravity.RELATIVE_HORIZONTAL_GRAVITY_MASK) == 0) {\n                foregroundGravity |= Gravity.START;\n            } \n \n            if ((foregroundGravity & Gravity.VERTICAL_GRAVITY_MASK) == 0) {\n                foregroundGravity |= Gravity.TOP;\n            } \n \n            mForegroundGravity = foregroundGravity;\n \n \n            if (mForegroundGravity == Gravity.FILL && mForeground != null) {\n                Rect padding = new Rect();\n                mForeground.getPadding(padding);\n            } \n \n            requestLayout();\n        } \n    } \n \n    @Override \n    protected boolean verifyDrawable(Drawable who) {\n        return super.verifyDrawable(who) || (who == mForeground);\n    } \n \n    @Override \n    public void jumpDrawablesToCurrentState() { \n        super.jumpDrawablesToCurrentState(); \n        if (mForeground != null) mForeground.jumpToCurrentState();\n    } \n \n    @Override \n    protected void drawableStateChanged() { \n        super.drawableStateChanged(); \n        if (mForeground != null && mForeground.isStateful()) {\n            mForeground.setState(getDrawableState());\n        } \n    } \n \n    /** \n     * Supply a Drawable that is to be rendered on top of all of the child \n     * views in the frame layout.  Any padding in the Drawable will be taken \n     * into account by ensuring that the children are inset to be placed \n     * inside of the padding area. \n     * \n     * @param drawable The Drawable to be drawn on top of the children. \n     */ \n    public void setForeground(Drawable drawable) {\n        if (mForeground != drawable) {\n            if (mForeground != null) {\n                mForeground.setCallback(null);\n                unscheduleDrawable(mForeground);\n            } \n \n            mForeground = drawable;\n \n            if (drawable != null) {\n                setWillNotDraw(false);\n                drawable.setCallback(this);\n                if (drawable.isStateful()) {\n                    drawable.setState(getDrawableState());\n                } \n                if (mForegroundGravity == Gravity.FILL) {\n                    Rect padding = new Rect();\n                    drawable.getPadding(padding);\n                } \n            }  else { \n                setWillNotDraw(true);\n            } \n            requestLayout();\n            invalidate();\n        } \n    } \n \n    /** \n     * Returns the drawable used as the foreground of this FrameLayout. The \n     * foreground drawable, if non-null, is always drawn on top of the children. \n     * \n     * @return A Drawable or null if no foreground was set. \n     */ \n    public Drawable getForeground() {\n        return mForeground;\n    } \n \n    @Override \n    protected void onLayout(boolean changed, int left, int top, int right, int bottom) {\n        super.onLayout(changed, left, top, right, bottom);\n        mForegroundBoundsChanged = changed;\n    } \n \n    @Override \n    protected void onSizeChanged(int w, int h, int oldw, int oldh) {\n        super.onSizeChanged(w, h, oldw, oldh);\n        mForegroundBoundsChanged = true;\n    } \n \n    @Override \n    public void draw(Canvas canvas) {\n        super.draw(canvas);\n \n        if (mForeground != null) {\n            final Drawable foreground = mForeground;\n \n            if (mForegroundBoundsChanged) {\n                mForegroundBoundsChanged = false;\n                final Rect selfBounds = mSelfBounds;\n                final Rect overlayBounds = mOverlayBounds;\n \n                final int w = getRight() - getLeft();\n                final int h = getBottom() - getTop();\n \n                if (mForegroundInPadding) {\n                    selfBounds.set(0, 0, w, h);\n                } else { \n                    selfBounds.set(getPaddingLeft(), getPaddingTop(),\n                            w - getPaddingRight(), h - getPaddingBottom());\n                } \n \n                Gravity.apply(mForegroundGravity, foreground.getIntrinsicWidth(),\n                        foreground.getIntrinsicHeight(), selfBounds, overlayBounds);\n                foreground.setBounds(overlayBounds);\n            } \n \n            foreground.draw(canvas);\n        } \n    } \n} \n```\n- \n``` xml \n<your.package.ForegroundLinearLayout\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:foreground=\"?android:selectableItemBackground\">\n\n    <ImageView\n        android:id=@+id/imageview_opaque\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\" />\n\n    ... other views ...\n/>\n```\n\n- [Jack Wharton](https://github.com/JakeWharton)[ForegroundImageView](https://gist.github.com/JakeWharton/0a251d67649305d84e8a)</br>\n\n- attrs\n```xml\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<resources>\n  <declare-styleable name=\"ForegroundImageView\">\n    <attr name=\"android:foreground\"/>\n  </declare-styleable>\n</resources>\n```\n\n```java\n    import android.content.Context;\n    import android.content.res.TypedArray;\n    import android.graphics.Canvas;\n    import android.graphics.drawable.Drawable;\n    import android.util.AttributeSet;\n    import android.widget.ImageView;\n     \n    public class ForegroundImageView extends ImageView {\n      private Drawable foreground;\n     \n      public ForegroundImageView(Context context) {\n        this(context, null);\n      } \n     \n      public ForegroundImageView(Context context, AttributeSet attrs) {\n        super(context, attrs);\n     \n        TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.ForegroundImageView);\n        Drawable foreground = a.getDrawable(R.styleable.ForegroundImageView_android_foreground);\n        if (foreground != null) {\n          setForeground(foreground);\n        } \n        a.recycle();\n      } \n     \n      /** \n       * Supply a drawable resource that is to be rendered on top of all of the child \n       * views in the frame layout. \n       * \n       * @param drawableResId The drawable resource to be drawn on top of the children. \n       */ \n      public void setForegroundResource(int drawableResId) {\n        setForeground(getContext().getResources().getDrawable(drawableResId));\n      } \n     \n      /** \n       * Supply a Drawable that is to be rendered on top of all of the child \n       * views in the frame layout. \n       * \n       * @param drawable The Drawable to be drawn on top of the children. \n       */ \n      public void setForeground(Drawable drawable) {\n        if (foreground == drawable) {\n          return; \n        } \n        if (foreground != null) {\n          foreground.setCallback(null);\n          unscheduleDrawable(foreground);\n        } \n     \n        foreground = drawable;\n     \n        if (drawable != null) {\n          drawable.setCallback(this);\n          if (drawable.isStateful()) {\n            drawable.setState(getDrawableState());\n          } \n        } \n        requestLayout();\n        invalidate();\n      } \n     \n      @Override protected boolean verifyDrawable(Drawable who) {\n        return super.verifyDrawable(who) || who == foreground;\n      } \n     \n      @Override public void jumpDrawablesToCurrentState() { \n        super.jumpDrawablesToCurrentState(); \n        if (foreground != null) foreground.jumpToCurrentState();\n      } \n     \n      @Override protected void drawableStateChanged() { \n        super.drawableStateChanged(); \n        if (foreground != null && foreground.isStateful()) {\n          foreground.setState(getDrawableState());\n        } \n      } \n     \n      @Override protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {\n        super.onMeasure(widthMeasureSpec, heightMeasureSpec);\n        if (foreground != null) {\n          foreground.setBounds(0, 0, getMeasuredWidth(), getMeasuredHeight());\n          invalidate();\n        } \n      } \n     \n      @Override protected void onSizeChanged(int w, int h, int oldw, int oldh) {\n        super.onSizeChanged(w, h, oldw, oldh);\n        if (foreground != null) {\n          foreground.setBounds(0, 0, w, h);\n          invalidate();\n        } \n      } \n     \n      @Override public void draw(Canvas canvas) {\n        super.draw(canvas);\n     \n        if (foreground != null) {\n          foreground.draw(canvas);\n        } \n      } \n    } \n```\n\n\n----------\n\n[](https://github.com/cesards/ForegroundViews)\n\n\n##reference\n - [Android themes and styles demisfied](https://www.youtube.com/watch?v=TIHXGwRTMWI) ThemeStyle\n - [Chris Banes G+ post](https://plus.google.com/108967384991768947849/posts/aHPVDtr6mcp) \n - [RelativeLayout with foreGround](https://gist.github.com/shakalaca/6199283) \n - [Ripple Effect](https://github.com/traex/RippleEffect) RippleAPI 9+ RelativeLayoutViewGroup\n\n \n","slug":"selectableItemBackground-foreground","published":1,"updated":"2017-04-23T10:52:27.056Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj50afgyw0032i4vr6n368dfk","content":"<blockquote>\n<p>android:foreground=?android:attr/selectableItemBackground</p>\n</blockquote>\n<p></p>\n<blockquote>\n<p>android:background=?android:attr/selectableItemBackground</p>\n</blockquote>\n<p>xmlrecyclerVeiwitem xmlAPI 21itemViewRipple<br>API 21MonoChrome<img src=\"https://cloud.githubusercontent.com/assets/12274855/18787855/2a6d93f2-81d7-11e6-8026-58cdbd8583d4.JPG\" alt=\"\"> </br><br>Customize<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;item name=&quot;android:colorControlHighlight&quot;&gt;@color/my_ripple_color&lt;/item&gt;</div></pre></td></tr></table></figure></p>\n<p>//ActivityTheme(style-v21)ActivityThemeAppcompat!!<br>xml<br><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">LinearLayout</span></div><div class=\"line\">        <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/item_root\"</span></div><div class=\"line\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"?android:attr/listPreferredItemHeight\"</span></div><div class=\"line\">        <span class=\"attr\">android:orientation</span>=<span class=\"string\">\"vertical\"</span></div><div class=\"line\">        <span class=\"attr\">android:gravity</span>=<span class=\"string\">\"center\"</span></div><div class=\"line\">        <span class=\"attr\">android:onClick</span>=<span class=\"string\">\"@&#123;(view) -&gt; callback.onClick(view,data)&#125;\"</span></div><div class=\"line\">        <span class=\"attr\">android:elevation</span>=<span class=\"string\">\"2dp\"</span></div><div class=\"line\">        <span class=\"attr\">android:background</span>=<span class=\"string\">\"@color/md_amber_200\"</span></div><div class=\"line\">        <span class=\"attr\">android:foreground</span>=<span class=\"string\">\"?android:attr/selectableItemBackground\"</span></div><div class=\"line\">        /&gt;</span></div></pre></td></tr></table></figure></p>\n<p>( API 21)CardViewforegroundbackground:<br>android:foregroundAPI 23FrameLayout(CardViewFrameLayout)<br><a id=\"more\"></a></p>\n<p>##</p>\n<blockquote>\n<p>android:foreground=?android:attr/selectableItemBackground</p>\n</blockquote>\n<p></p>\n<blockquote>\n<p>android:background=?android:attr/selectableItemBackground</p>\n</blockquote>\n<p>FrameLayout</p>\n<ul>\n<li><p>foreground<br>google io2016<a href=\"https://github.com/chrisbanes\">Chris Banes</a><br><img src=\"https://cloud.githubusercontent.com/assets/12274855/18787841/1d0b2d82-81d7-11e6-916e-b4113772c3a2.JPG\" alt=\"\">,<br>android:foregroundAPI 1 FrameLayoutAPI 23View<br>API 23foregroundRipple,23foreground</p>\n</li>\n<li><p><a href=\"http://effmx.com/articles/ru-he-chuang-jian-jian-rong-de-foreground-drawable-selectorshi-xian-layoutdian-ji-xiao-guo/\">Forefround drawable selector</a> :</p>\n<blockquote>\n<p>Foreground  Drawable Foreground  drawablecolor  Froeground  drawable selector  sdk 23 foregrond  Framelayout  compileSdkVersion 23<br>  21slelector Drawable</p>\n</blockquote>\n</li>\n<li><p>API23View,ViewGroupforeground?<br><a href=\"https://dzone.com/articles/adding-foreground-selector\"></a><br>DrawablesetDrawableDrawablecallback</p>\n<blockquote>\n<p>Drawable-&gt;View-&gt;Context //leak!<br>//DrawableActivity leak</p>\n</blockquote>\n</li>\n<li><p><br><a href=\"https://github.com/chrisbanes\">Chris Banes</a>G+Post : <a href=\"https://plus.google.com/+ChrisBanes/posts/DRerZ8wEFuF\">Foreground Doge</a><br>,ChrisGoogle</p>\n</li>\n</ul>\n<ol>\n<li>FrameLayoutforegroundxmlFrameLayout</li>\n<li>foregroundViewgroup , <a href=\"https://gist.github.com/chrisbanes/9091754\"></a></li>\n</ol>\n<ul>\n<li>attrs:<figure class=\"highlight plain\"><figcaption><span>version=\"1.0\" encoding=\"utf-8\"?></span></figcaption><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;resources&gt;</div><div class=\"line\">    &lt;declare-styleable name=&quot;ForegroundLinearLayout&quot;&gt;</div><div class=\"line\">        &lt;attr name=&quot;android:foreground&quot; /&gt;</div><div class=\"line\">        &lt;attr name=&quot;android:foregroundInsidePadding&quot; /&gt;</div><div class=\"line\">        &lt;attr name=&quot;android:foregroundGravity&quot; /&gt;</div><div class=\"line\">    &lt;/declare-styleable&gt;</div><div class=\"line\">&lt;/resources&gt;</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div><div class=\"line\">103</div><div class=\"line\">104</div><div class=\"line\">105</div><div class=\"line\">106</div><div class=\"line\">107</div><div class=\"line\">108</div><div class=\"line\">109</div><div class=\"line\">110</div><div class=\"line\">111</div><div class=\"line\">112</div><div class=\"line\">113</div><div class=\"line\">114</div><div class=\"line\">115</div><div class=\"line\">116</div><div class=\"line\">117</div><div class=\"line\">118</div><div class=\"line\">119</div><div class=\"line\">120</div><div class=\"line\">121</div><div class=\"line\">122</div><div class=\"line\">123</div><div class=\"line\">124</div><div class=\"line\">125</div><div class=\"line\">126</div><div class=\"line\">127</div><div class=\"line\">128</div><div class=\"line\">129</div><div class=\"line\">130</div><div class=\"line\">131</div><div class=\"line\">132</div><div class=\"line\">133</div><div class=\"line\">134</div><div class=\"line\">135</div><div class=\"line\">136</div><div class=\"line\">137</div><div class=\"line\">138</div><div class=\"line\">139</div><div class=\"line\">140</div><div class=\"line\">141</div><div class=\"line\">142</div><div class=\"line\">143</div><div class=\"line\">144</div><div class=\"line\">145</div><div class=\"line\">146</div><div class=\"line\">147</div><div class=\"line\">148</div><div class=\"line\">149</div><div class=\"line\">150</div><div class=\"line\">151</div><div class=\"line\">152</div><div class=\"line\">153</div><div class=\"line\">154</div><div class=\"line\">155</div><div class=\"line\">156</div><div class=\"line\">157</div><div class=\"line\">158</div><div class=\"line\">159</div><div class=\"line\">160</div><div class=\"line\">161</div><div class=\"line\">162</div><div class=\"line\">163</div><div class=\"line\">164</div><div class=\"line\">165</div><div class=\"line\">166</div><div class=\"line\">167</div><div class=\"line\">168</div><div class=\"line\">169</div><div class=\"line\">170</div><div class=\"line\">171</div><div class=\"line\">172</div><div class=\"line\">173</div><div class=\"line\">174</div><div class=\"line\">175</div><div class=\"line\">176</div><div class=\"line\">177</div><div class=\"line\">178</div><div class=\"line\">179</div><div class=\"line\">180</div><div class=\"line\">181</div><div class=\"line\">182</div><div class=\"line\">183</div><div class=\"line\">184</div><div class=\"line\">185</div><div class=\"line\">186</div><div class=\"line\">187</div><div class=\"line\">188</div><div class=\"line\">189</div><div class=\"line\">190</div><div class=\"line\">191</div><div class=\"line\">192</div><div class=\"line\">193</div><div class=\"line\">194</div><div class=\"line\">195</div><div class=\"line\">196</div><div class=\"line\">197</div><div class=\"line\">198</div><div class=\"line\">199</div><div class=\"line\">200</div><div class=\"line\">201</div><div class=\"line\">202</div><div class=\"line\">203</div><div class=\"line\">204</div><div class=\"line\">205</div><div class=\"line\">206</div><div class=\"line\">207</div><div class=\"line\">208</div><div class=\"line\">209</div><div class=\"line\">210</div><div class=\"line\">211</div><div class=\"line\">212</div><div class=\"line\">213</div><div class=\"line\">214</div><div class=\"line\">215</div><div class=\"line\">216</div><div class=\"line\">217</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/* </div><div class=\"line\"> * Copyright (C) 2006 The Android Open Source Project </div><div class=\"line\"> * </div><div class=\"line\"> * Licensed under the Apache License, Version 2.0 (the \"License\"); </div><div class=\"line\"> * you may not use this file except in compliance with the License. </div><div class=\"line\"> * You may obtain a copy of the License at </div><div class=\"line\"> * </div><div class=\"line\"> *      http://www.apache.org/licenses/LICENSE-2.0 </div><div class=\"line\"> * </div><div class=\"line\"> * Unless required by applicable law or agreed to in writing, software </div><div class=\"line\"> * distributed under the License is distributed on an \"AS IS\" BASIS, </div><div class=\"line\"> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. </div><div class=\"line\"> * See the License for the specific language governing permissions and </div><div class=\"line\"> * limitations under the License. </div><div class=\"line\"> */</span> </div><div class=\"line\"> </div><div class=\"line\"><span class=\"keyword\">package</span> your.<span class=\"keyword\">package</span>; </div><div class=\"line\"> </div><div class=\"line\"><span class=\"keyword\">import</span> android.content.Context;</div><div class=\"line\"><span class=\"keyword\">import</span> android.content.res.TypedArray;</div><div class=\"line\"><span class=\"keyword\">import</span> android.graphics.Canvas;</div><div class=\"line\"><span class=\"keyword\">import</span> android.graphics.Rect;</div><div class=\"line\"><span class=\"keyword\">import</span> android.graphics.drawable.Drawable;</div><div class=\"line\"><span class=\"keyword\">import</span> android.util.AttributeSet;</div><div class=\"line\"><span class=\"keyword\">import</span> android.view.Gravity;</div><div class=\"line\"><span class=\"keyword\">import</span> android.widget.LinearLayout;</div><div class=\"line\"> </div><div class=\"line\"><span class=\"keyword\">import</span> your.<span class=\"keyword\">package</span>.R; </div><div class=\"line\"> </div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ForegroundLinearLayout</span> <span class=\"keyword\">extends</span> <span class=\"title\">LinearLayout</span> </span>&#123;</div><div class=\"line\"> </div><div class=\"line\">    <span class=\"keyword\">private</span> Drawable mForeground;</div><div class=\"line\"> </div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Rect mSelfBounds = <span class=\"keyword\">new</span> Rect();</div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Rect mOverlayBounds = <span class=\"keyword\">new</span> Rect();</div><div class=\"line\"> </div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> mForegroundGravity = Gravity.FILL;</div><div class=\"line\"> </div><div class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"keyword\">boolean</span> mForegroundInPadding = <span class=\"keyword\">true</span>;</div><div class=\"line\"> </div><div class=\"line\">    <span class=\"keyword\">boolean</span> mForegroundBoundsChanged = <span class=\"keyword\">false</span>;</div><div class=\"line\"> </div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">ForegroundLinearLayout</span><span class=\"params\">(Context context)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>(context);</div><div class=\"line\">    &#125; </div><div class=\"line\"> </div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">ForegroundLinearLayout</span><span class=\"params\">(Context context, AttributeSet attrs)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">this</span>(context, attrs, <span class=\"number\">0</span>);</div><div class=\"line\">    &#125; </div><div class=\"line\"> </div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">ForegroundLinearLayout</span><span class=\"params\">(Context context, AttributeSet attrs, <span class=\"keyword\">int</span> defStyle)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>(context, attrs, defStyle);</div><div class=\"line\"> </div><div class=\"line\">        TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.ForegroundLinearLayout,</div><div class=\"line\">                defStyle, <span class=\"number\">0</span>);</div><div class=\"line\"> </div><div class=\"line\">        mForegroundGravity = a.getInt(</div><div class=\"line\">                R.styleable.ForegroundLinearLayout_android_foregroundGravity, mForegroundGravity);</div><div class=\"line\"> </div><div class=\"line\">        <span class=\"keyword\">final</span> Drawable d = a.getDrawable(R.styleable.ForegroundLinearLayout_android_foreground);</div><div class=\"line\">        <span class=\"keyword\">if</span> (d != <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">            setForeground(d);</div><div class=\"line\">        &#125; </div><div class=\"line\"> </div><div class=\"line\">        mForegroundInPadding = a.getBoolean(</div><div class=\"line\">                R.styleable.ForegroundLinearLayout_android_foregroundInsidePadding, <span class=\"keyword\">true</span>);</div><div class=\"line\"> </div><div class=\"line\">        a.recycle();</div><div class=\"line\">    &#125; </div><div class=\"line\"> </div><div class=\"line\">    <span class=\"comment\">/** </div><div class=\"line\">     * Describes how the foreground is positioned. </div><div class=\"line\">     * </div><div class=\"line\">     * <span class=\"doctag\">@return</span> foreground gravity. </div><div class=\"line\">     * </div><div class=\"line\">     * <span class=\"doctag\">@see</span> #setForegroundGravity(int) </div><div class=\"line\">     */</span> </div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">getForegroundGravity</span><span class=\"params\">()</span> </span>&#123; </div><div class=\"line\">        <span class=\"keyword\">return</span> mForegroundGravity;</div><div class=\"line\">    &#125; </div><div class=\"line\"> </div><div class=\"line\">    <span class=\"comment\">/** </div><div class=\"line\">     * Describes how the foreground is positioned. Defaults to START and TOP. </div><div class=\"line\">     * </div><div class=\"line\">     * <span class=\"doctag\">@param</span> foregroundGravity See &#123;<span class=\"doctag\">@link</span> android.view.Gravity&#125; </div><div class=\"line\">     * </div><div class=\"line\">     * <span class=\"doctag\">@see</span> #getForegroundGravity() </div><div class=\"line\">     */</span> </div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setForegroundGravity</span><span class=\"params\">(<span class=\"keyword\">int</span> foregroundGravity)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (mForegroundGravity != foregroundGravity) &#123;</div><div class=\"line\">            <span class=\"keyword\">if</span> ((foregroundGravity &amp; Gravity.RELATIVE_HORIZONTAL_GRAVITY_MASK) == <span class=\"number\">0</span>) &#123;</div><div class=\"line\">                foregroundGravity |= Gravity.START;</div><div class=\"line\">            &#125; </div><div class=\"line\"> </div><div class=\"line\">            <span class=\"keyword\">if</span> ((foregroundGravity &amp; Gravity.VERTICAL_GRAVITY_MASK) == <span class=\"number\">0</span>) &#123;</div><div class=\"line\">                foregroundGravity |= Gravity.TOP;</div><div class=\"line\">            &#125; </div><div class=\"line\"> </div><div class=\"line\">            mForegroundGravity = foregroundGravity;</div><div class=\"line\"> </div><div class=\"line\"> </div><div class=\"line\">            <span class=\"keyword\">if</span> (mForegroundGravity == Gravity.FILL &amp;&amp; mForeground != <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">                Rect padding = <span class=\"keyword\">new</span> Rect();</div><div class=\"line\">                mForeground.getPadding(padding);</div><div class=\"line\">            &#125; </div><div class=\"line\"> </div><div class=\"line\">            requestLayout();</div><div class=\"line\">        &#125; </div><div class=\"line\">    &#125; </div><div class=\"line\"> </div><div class=\"line\">    <span class=\"meta\">@Override</span> </div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">boolean</span> <span class=\"title\">verifyDrawable</span><span class=\"params\">(Drawable who)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">super</span>.verifyDrawable(who) || (who == mForeground);</div><div class=\"line\">    &#125; </div><div class=\"line\"> </div><div class=\"line\">    <span class=\"meta\">@Override</span> </div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">jumpDrawablesToCurrentState</span><span class=\"params\">()</span> </span>&#123; </div><div class=\"line\">        <span class=\"keyword\">super</span>.jumpDrawablesToCurrentState(); </div><div class=\"line\">        <span class=\"keyword\">if</span> (mForeground != <span class=\"keyword\">null</span>) mForeground.jumpToCurrentState();</div><div class=\"line\">    &#125; </div><div class=\"line\"> </div><div class=\"line\">    <span class=\"meta\">@Override</span> </div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">drawableStateChanged</span><span class=\"params\">()</span> </span>&#123; </div><div class=\"line\">        <span class=\"keyword\">super</span>.drawableStateChanged(); </div><div class=\"line\">        <span class=\"keyword\">if</span> (mForeground != <span class=\"keyword\">null</span> &amp;&amp; mForeground.isStateful()) &#123;</div><div class=\"line\">            mForeground.setState(getDrawableState());</div><div class=\"line\">        &#125; </div><div class=\"line\">    &#125; </div><div class=\"line\"> </div><div class=\"line\">    <span class=\"comment\">/** </div><div class=\"line\">     * Supply a Drawable that is to be rendered on top of all of the child </div><div class=\"line\">     * views in the frame layout.  Any padding in the Drawable will be taken </div><div class=\"line\">     * into account by ensuring that the children are inset to be placed </div><div class=\"line\">     * inside of the padding area. </div><div class=\"line\">     * </div><div class=\"line\">     * <span class=\"doctag\">@param</span> drawable The Drawable to be drawn on top of the children. </div><div class=\"line\">     */</span> </div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setForeground</span><span class=\"params\">(Drawable drawable)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (mForeground != drawable) &#123;</div><div class=\"line\">            <span class=\"keyword\">if</span> (mForeground != <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">                mForeground.setCallback(<span class=\"keyword\">null</span>);</div><div class=\"line\">                unscheduleDrawable(mForeground);</div><div class=\"line\">            &#125; </div><div class=\"line\"> </div><div class=\"line\">            mForeground = drawable;</div><div class=\"line\"> </div><div class=\"line\">            <span class=\"keyword\">if</span> (drawable != <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">                setWillNotDraw(<span class=\"keyword\">false</span>);</div><div class=\"line\">                drawable.setCallback(<span class=\"keyword\">this</span>);</div><div class=\"line\">                <span class=\"keyword\">if</span> (drawable.isStateful()) &#123;</div><div class=\"line\">                    drawable.setState(getDrawableState());</div><div class=\"line\">                &#125; </div><div class=\"line\">                <span class=\"keyword\">if</span> (mForegroundGravity == Gravity.FILL) &#123;</div><div class=\"line\">                    Rect padding = <span class=\"keyword\">new</span> Rect();</div><div class=\"line\">                    drawable.getPadding(padding);</div><div class=\"line\">                &#125; </div><div class=\"line\">            &#125;  <span class=\"keyword\">else</span> &#123; </div><div class=\"line\">                setWillNotDraw(<span class=\"keyword\">true</span>);</div><div class=\"line\">            &#125; </div><div class=\"line\">            requestLayout();</div><div class=\"line\">            invalidate();</div><div class=\"line\">        &#125; </div><div class=\"line\">    &#125; </div><div class=\"line\"> </div><div class=\"line\">    <span class=\"comment\">/** </div><div class=\"line\">     * Returns the drawable used as the foreground of this FrameLayout. The </div><div class=\"line\">     * foreground drawable, if non-null, is always drawn on top of the children. </div><div class=\"line\">     * </div><div class=\"line\">     * <span class=\"doctag\">@return</span> A Drawable or null if no foreground was set. </div><div class=\"line\">     */</span> </div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Drawable <span class=\"title\">getForeground</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> mForeground;</div><div class=\"line\">    &#125; </div><div class=\"line\"> </div><div class=\"line\">    <span class=\"meta\">@Override</span> </div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onLayout</span><span class=\"params\">(<span class=\"keyword\">boolean</span> changed, <span class=\"keyword\">int</span> left, <span class=\"keyword\">int</span> top, <span class=\"keyword\">int</span> right, <span class=\"keyword\">int</span> bottom)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>.onLayout(changed, left, top, right, bottom);</div><div class=\"line\">        mForegroundBoundsChanged = changed;</div><div class=\"line\">    &#125; </div><div class=\"line\"> </div><div class=\"line\">    <span class=\"meta\">@Override</span> </div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onSizeChanged</span><span class=\"params\">(<span class=\"keyword\">int</span> w, <span class=\"keyword\">int</span> h, <span class=\"keyword\">int</span> oldw, <span class=\"keyword\">int</span> oldh)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>.onSizeChanged(w, h, oldw, oldh);</div><div class=\"line\">        mForegroundBoundsChanged = <span class=\"keyword\">true</span>;</div><div class=\"line\">    &#125; </div><div class=\"line\"> </div><div class=\"line\">    <span class=\"meta\">@Override</span> </div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">draw</span><span class=\"params\">(Canvas canvas)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>.draw(canvas);</div><div class=\"line\"> </div><div class=\"line\">        <span class=\"keyword\">if</span> (mForeground != <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">            <span class=\"keyword\">final</span> Drawable foreground = mForeground;</div><div class=\"line\"> </div><div class=\"line\">            <span class=\"keyword\">if</span> (mForegroundBoundsChanged) &#123;</div><div class=\"line\">                mForegroundBoundsChanged = <span class=\"keyword\">false</span>;</div><div class=\"line\">                <span class=\"keyword\">final</span> Rect selfBounds = mSelfBounds;</div><div class=\"line\">                <span class=\"keyword\">final</span> Rect overlayBounds = mOverlayBounds;</div><div class=\"line\"> </div><div class=\"line\">                <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> w = getRight() - getLeft();</div><div class=\"line\">                <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> h = getBottom() - getTop();</div><div class=\"line\"> </div><div class=\"line\">                <span class=\"keyword\">if</span> (mForegroundInPadding) &#123;</div><div class=\"line\">                    selfBounds.set(<span class=\"number\">0</span>, <span class=\"number\">0</span>, w, h);</div><div class=\"line\">                &#125; <span class=\"keyword\">else</span> &#123; </div><div class=\"line\">                    selfBounds.set(getPaddingLeft(), getPaddingTop(),</div><div class=\"line\">                            w - getPaddingRight(), h - getPaddingBottom());</div><div class=\"line\">                &#125; </div><div class=\"line\"> </div><div class=\"line\">                Gravity.apply(mForegroundGravity, foreground.getIntrinsicWidth(),</div><div class=\"line\">                        foreground.getIntrinsicHeight(), selfBounds, overlayBounds);</div><div class=\"line\">                foreground.setBounds(overlayBounds);</div><div class=\"line\">            &#125; </div><div class=\"line\"> </div><div class=\"line\">            foreground.draw(canvas);</div><div class=\"line\">        &#125; </div><div class=\"line\">    &#125; </div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<ul>\n<li><p></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">your.package.ForegroundLinearLayout</span></div><div class=\"line\">    <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">    <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"wrap_content\"</span></div><div class=\"line\">    <span class=\"attr\">android:foreground</span>=<span class=\"string\">\"?android:selectableItemBackground\"</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">ImageView</span></div><div class=\"line\">        <span class=\"attr\">android:id</span>=<span class=\"string\">@+id/imageview_opaque</span></div><div class=\"line\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"wrap_content\"</span> /&gt;</span></div><div class=\"line\"></div><div class=\"line\">    ... other views ...</div><div class=\"line\">/&gt;</div></pre></td></tr></table></figure>\n</li>\n<li><p><a href=\"https://github.com/JakeWharton\">Jack Wharton</a><a href=\"https://gist.github.com/JakeWharton/0a251d67649305d84e8a\">ForegroundImageView</a></br></p>\n</li>\n<li><p>attrs</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;</div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">resources</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">declare-styleable</span> <span class=\"attr\">name</span>=<span class=\"string\">\"ForegroundImageView\"</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">attr</span> <span class=\"attr\">name</span>=<span class=\"string\">\"android:foreground\"</span>/&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">declare-styleable</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">resources</span>&gt;</span></div></pre></td></tr></table></figure>\n</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> android.content.Context;</div><div class=\"line\"><span class=\"keyword\">import</span> android.content.res.TypedArray;</div><div class=\"line\"><span class=\"keyword\">import</span> android.graphics.Canvas;</div><div class=\"line\"><span class=\"keyword\">import</span> android.graphics.drawable.Drawable;</div><div class=\"line\"><span class=\"keyword\">import</span> android.util.AttributeSet;</div><div class=\"line\"><span class=\"keyword\">import</span> android.widget.ImageView;</div><div class=\"line\"> </div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ForegroundImageView</span> <span class=\"keyword\">extends</span> <span class=\"title\">ImageView</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">private</span> Drawable foreground;</div><div class=\"line\"> </div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">ForegroundImageView</span><span class=\"params\">(Context context)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>(context, <span class=\"keyword\">null</span>);</div><div class=\"line\">  &#125; </div><div class=\"line\"> </div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">ForegroundImageView</span><span class=\"params\">(Context context, AttributeSet attrs)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">super</span>(context, attrs);</div><div class=\"line\"> </div><div class=\"line\">    TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.ForegroundImageView);</div><div class=\"line\">    Drawable foreground = a.getDrawable(R.styleable.ForegroundImageView_android_foreground);</div><div class=\"line\">    <span class=\"keyword\">if</span> (foreground != <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">      setForeground(foreground);</div><div class=\"line\">    &#125; </div><div class=\"line\">    a.recycle();</div><div class=\"line\">  &#125; </div><div class=\"line\"> </div><div class=\"line\">  <span class=\"comment\">/** </div><div class=\"line\">   * Supply a drawable resource that is to be rendered on top of all of the child </div><div class=\"line\">   * views in the frame layout. </div><div class=\"line\">   * </div><div class=\"line\">   * <span class=\"doctag\">@param</span> drawableResId The drawable resource to be drawn on top of the children. </div><div class=\"line\">   */</span> </div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setForegroundResource</span><span class=\"params\">(<span class=\"keyword\">int</span> drawableResId)</span> </span>&#123;</div><div class=\"line\">    setForeground(getContext().getResources().getDrawable(drawableResId));</div><div class=\"line\">  &#125; </div><div class=\"line\"> </div><div class=\"line\">  <span class=\"comment\">/** </div><div class=\"line\">   * Supply a Drawable that is to be rendered on top of all of the child </div><div class=\"line\">   * views in the frame layout. </div><div class=\"line\">   * </div><div class=\"line\">   * <span class=\"doctag\">@param</span> drawable The Drawable to be drawn on top of the children. </div><div class=\"line\">   */</span> </div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setForeground</span><span class=\"params\">(Drawable drawable)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (foreground == drawable) &#123;</div><div class=\"line\">      <span class=\"keyword\">return</span>; </div><div class=\"line\">    &#125; </div><div class=\"line\">    <span class=\"keyword\">if</span> (foreground != <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">      foreground.setCallback(<span class=\"keyword\">null</span>);</div><div class=\"line\">      unscheduleDrawable(foreground);</div><div class=\"line\">    &#125; </div><div class=\"line\"> </div><div class=\"line\">    foreground = drawable;</div><div class=\"line\"> </div><div class=\"line\">    <span class=\"keyword\">if</span> (drawable != <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">      drawable.setCallback(<span class=\"keyword\">this</span>);</div><div class=\"line\">      <span class=\"keyword\">if</span> (drawable.isStateful()) &#123;</div><div class=\"line\">        drawable.setState(getDrawableState());</div><div class=\"line\">      &#125; </div><div class=\"line\">    &#125; </div><div class=\"line\">    requestLayout();</div><div class=\"line\">    invalidate();</div><div class=\"line\">  &#125; </div><div class=\"line\"> </div><div class=\"line\">  <span class=\"meta\">@Override</span> <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">boolean</span> <span class=\"title\">verifyDrawable</span><span class=\"params\">(Drawable who)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">super</span>.verifyDrawable(who) || who == foreground;</div><div class=\"line\">  &#125; </div><div class=\"line\"> </div><div class=\"line\">  <span class=\"meta\">@Override</span> <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">jumpDrawablesToCurrentState</span><span class=\"params\">()</span> </span>&#123; </div><div class=\"line\">    <span class=\"keyword\">super</span>.jumpDrawablesToCurrentState(); </div><div class=\"line\">    <span class=\"keyword\">if</span> (foreground != <span class=\"keyword\">null</span>) foreground.jumpToCurrentState();</div><div class=\"line\">  &#125; </div><div class=\"line\"> </div><div class=\"line\">  <span class=\"meta\">@Override</span> <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">drawableStateChanged</span><span class=\"params\">()</span> </span>&#123; </div><div class=\"line\">    <span class=\"keyword\">super</span>.drawableStateChanged(); </div><div class=\"line\">    <span class=\"keyword\">if</span> (foreground != <span class=\"keyword\">null</span> &amp;&amp; foreground.isStateful()) &#123;</div><div class=\"line\">      foreground.setState(getDrawableState());</div><div class=\"line\">    &#125; </div><div class=\"line\">  &#125; </div><div class=\"line\"> </div><div class=\"line\">  <span class=\"meta\">@Override</span> <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onMeasure</span><span class=\"params\">(<span class=\"keyword\">int</span> widthMeasureSpec, <span class=\"keyword\">int</span> heightMeasureSpec)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">super</span>.onMeasure(widthMeasureSpec, heightMeasureSpec);</div><div class=\"line\">    <span class=\"keyword\">if</span> (foreground != <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">      foreground.setBounds(<span class=\"number\">0</span>, <span class=\"number\">0</span>, getMeasuredWidth(), getMeasuredHeight());</div><div class=\"line\">      invalidate();</div><div class=\"line\">    &#125; </div><div class=\"line\">  &#125; </div><div class=\"line\"> </div><div class=\"line\">  <span class=\"meta\">@Override</span> <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onSizeChanged</span><span class=\"params\">(<span class=\"keyword\">int</span> w, <span class=\"keyword\">int</span> h, <span class=\"keyword\">int</span> oldw, <span class=\"keyword\">int</span> oldh)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">super</span>.onSizeChanged(w, h, oldw, oldh);</div><div class=\"line\">    <span class=\"keyword\">if</span> (foreground != <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">      foreground.setBounds(<span class=\"number\">0</span>, <span class=\"number\">0</span>, w, h);</div><div class=\"line\">      invalidate();</div><div class=\"line\">    &#125; </div><div class=\"line\">  &#125; </div><div class=\"line\"> </div><div class=\"line\">  <span class=\"meta\">@Override</span> <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">draw</span><span class=\"params\">(Canvas canvas)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">super</span>.draw(canvas);</div><div class=\"line\"> </div><div class=\"line\">    <span class=\"keyword\">if</span> (foreground != <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">      foreground.draw(canvas);</div><div class=\"line\">    &#125; </div><div class=\"line\">  &#125; </div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<hr>\n<p><a href=\"https://github.com/cesards/ForegroundViews\"></a><br></p>\n<p>##reference</p>\n<ul>\n<li><a href=\"https://www.youtube.com/watch?v=TIHXGwRTMWI\">Android themes and styles demisfied</a> ThemeStyle</li>\n<li><a href=\"https://plus.google.com/108967384991768947849/posts/aHPVDtr6mcp\">Chris Banes G+ post</a> </li>\n<li><a href=\"https://gist.github.com/shakalaca/6199283\">RelativeLayout with foreGround</a> </li>\n<li><a href=\"https://github.com/traex/RippleEffect\">Ripple Effect</a> RippleAPI 9+ RelativeLayoutViewGroup</li>\n</ul>\n","excerpt":"<blockquote>\n<p>android:foreground=?android:attr/selectableItemBackground</p>\n</blockquote>\n<p></p>\n<blockquote>\n<p>android:background=?android:attr/selectableItemBackground</p>\n</blockquote>\n<p>xmlrecyclerVeiwitem xmlAPI 21itemViewRipple<br>API 21MonoChrome<img src=\"https://cloud.githubusercontent.com/assets/12274855/18787855/2a6d93f2-81d7-11e6-8026-58cdbd8583d4.JPG\" alt=\"\"> </br><br>Customize<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;item name=&quot;android:colorControlHighlight&quot;&gt;@color/my_ripple_color&lt;/item&gt;</div></pre></td></tr></table></figure></p>\n<p>//ActivityTheme(style-v21)ActivityThemeAppcompat!!<br>xml<br><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">LinearLayout</span></div><div class=\"line\">        <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/item_root\"</span></div><div class=\"line\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"?android:attr/listPreferredItemHeight\"</span></div><div class=\"line\">        <span class=\"attr\">android:orientation</span>=<span class=\"string\">\"vertical\"</span></div><div class=\"line\">        <span class=\"attr\">android:gravity</span>=<span class=\"string\">\"center\"</span></div><div class=\"line\">        <span class=\"attr\">android:onClick</span>=<span class=\"string\">\"@&#123;(view) -&gt; callback.onClick(view,data)&#125;\"</span></div><div class=\"line\">        <span class=\"attr\">android:elevation</span>=<span class=\"string\">\"2dp\"</span></div><div class=\"line\">        <span class=\"attr\">android:background</span>=<span class=\"string\">\"@color/md_amber_200\"</span></div><div class=\"line\">        <span class=\"attr\">android:foreground</span>=<span class=\"string\">\"?android:attr/selectableItemBackground\"</span></div><div class=\"line\">        /&gt;</span></div></pre></td></tr></table></figure></p>\n<p>( API 21)CardViewforegroundbackground:<br>android:foregroundAPI 23FrameLayout(CardViewFrameLayout)<br>","more":"</p>\n<p>##</p>\n<blockquote>\n<p>android:foreground=?android:attr/selectableItemBackground</p>\n</blockquote>\n<p></p>\n<blockquote>\n<p>android:background=?android:attr/selectableItemBackground</p>\n</blockquote>\n<p>FrameLayout</p>\n<ul>\n<li><p>foreground<br>google io2016<a href=\"https://github.com/chrisbanes\">Chris Banes</a><br><img src=\"https://cloud.githubusercontent.com/assets/12274855/18787841/1d0b2d82-81d7-11e6-916e-b4113772c3a2.JPG\" alt=\"\">,<br>android:foregroundAPI 1 FrameLayoutAPI 23View<br>API 23foregroundRipple,23foreground</p>\n</li>\n<li><p><a href=\"http://effmx.com/articles/ru-he-chuang-jian-jian-rong-de-foreground-drawable-selectorshi-xian-layoutdian-ji-xiao-guo/\">Forefround drawable selector</a> :</p>\n<blockquote>\n<p>Foreground  Drawable Foreground  drawablecolor  Froeground  drawable selector  sdk 23 foregrond  Framelayout  compileSdkVersion 23<br>  21slelector Drawable</p>\n</blockquote>\n</li>\n<li><p>API23View,ViewGroupforeground?<br><a href=\"https://dzone.com/articles/adding-foreground-selector\"></a><br>DrawablesetDrawableDrawablecallback</p>\n<blockquote>\n<p>Drawable-&gt;View-&gt;Context //leak!<br>//DrawableActivity leak</p>\n</blockquote>\n</li>\n<li><p><br><a href=\"https://github.com/chrisbanes\">Chris Banes</a>G+Post : <a href=\"https://plus.google.com/+ChrisBanes/posts/DRerZ8wEFuF\">Foreground Doge</a><br>,ChrisGoogle</p>\n</li>\n</ul>\n<ol>\n<li>FrameLayoutforegroundxmlFrameLayout</li>\n<li>foregroundViewgroup , <a href=\"https://gist.github.com/chrisbanes/9091754\"></a></li>\n</ol>\n<ul>\n<li>attrs:<figure class=\"highlight plain\"><figcaption><span>version=\"1.0\" encoding=\"utf-8\"?></span></figcaption><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;resources&gt;</div><div class=\"line\">    &lt;declare-styleable name=&quot;ForegroundLinearLayout&quot;&gt;</div><div class=\"line\">        &lt;attr name=&quot;android:foreground&quot; /&gt;</div><div class=\"line\">        &lt;attr name=&quot;android:foregroundInsidePadding&quot; /&gt;</div><div class=\"line\">        &lt;attr name=&quot;android:foregroundGravity&quot; /&gt;</div><div class=\"line\">    &lt;/declare-styleable&gt;</div><div class=\"line\">&lt;/resources&gt;</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div><div class=\"line\">103</div><div class=\"line\">104</div><div class=\"line\">105</div><div class=\"line\">106</div><div class=\"line\">107</div><div class=\"line\">108</div><div class=\"line\">109</div><div class=\"line\">110</div><div class=\"line\">111</div><div class=\"line\">112</div><div class=\"line\">113</div><div class=\"line\">114</div><div class=\"line\">115</div><div class=\"line\">116</div><div class=\"line\">117</div><div class=\"line\">118</div><div class=\"line\">119</div><div class=\"line\">120</div><div class=\"line\">121</div><div class=\"line\">122</div><div class=\"line\">123</div><div class=\"line\">124</div><div class=\"line\">125</div><div class=\"line\">126</div><div class=\"line\">127</div><div class=\"line\">128</div><div class=\"line\">129</div><div class=\"line\">130</div><div class=\"line\">131</div><div class=\"line\">132</div><div class=\"line\">133</div><div class=\"line\">134</div><div class=\"line\">135</div><div class=\"line\">136</div><div class=\"line\">137</div><div class=\"line\">138</div><div class=\"line\">139</div><div class=\"line\">140</div><div class=\"line\">141</div><div class=\"line\">142</div><div class=\"line\">143</div><div class=\"line\">144</div><div class=\"line\">145</div><div class=\"line\">146</div><div class=\"line\">147</div><div class=\"line\">148</div><div class=\"line\">149</div><div class=\"line\">150</div><div class=\"line\">151</div><div class=\"line\">152</div><div class=\"line\">153</div><div class=\"line\">154</div><div class=\"line\">155</div><div class=\"line\">156</div><div class=\"line\">157</div><div class=\"line\">158</div><div class=\"line\">159</div><div class=\"line\">160</div><div class=\"line\">161</div><div class=\"line\">162</div><div class=\"line\">163</div><div class=\"line\">164</div><div class=\"line\">165</div><div class=\"line\">166</div><div class=\"line\">167</div><div class=\"line\">168</div><div class=\"line\">169</div><div class=\"line\">170</div><div class=\"line\">171</div><div class=\"line\">172</div><div class=\"line\">173</div><div class=\"line\">174</div><div class=\"line\">175</div><div class=\"line\">176</div><div class=\"line\">177</div><div class=\"line\">178</div><div class=\"line\">179</div><div class=\"line\">180</div><div class=\"line\">181</div><div class=\"line\">182</div><div class=\"line\">183</div><div class=\"line\">184</div><div class=\"line\">185</div><div class=\"line\">186</div><div class=\"line\">187</div><div class=\"line\">188</div><div class=\"line\">189</div><div class=\"line\">190</div><div class=\"line\">191</div><div class=\"line\">192</div><div class=\"line\">193</div><div class=\"line\">194</div><div class=\"line\">195</div><div class=\"line\">196</div><div class=\"line\">197</div><div class=\"line\">198</div><div class=\"line\">199</div><div class=\"line\">200</div><div class=\"line\">201</div><div class=\"line\">202</div><div class=\"line\">203</div><div class=\"line\">204</div><div class=\"line\">205</div><div class=\"line\">206</div><div class=\"line\">207</div><div class=\"line\">208</div><div class=\"line\">209</div><div class=\"line\">210</div><div class=\"line\">211</div><div class=\"line\">212</div><div class=\"line\">213</div><div class=\"line\">214</div><div class=\"line\">215</div><div class=\"line\">216</div><div class=\"line\">217</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/* </div><div class=\"line\"> * Copyright (C) 2006 The Android Open Source Project </div><div class=\"line\"> * </div><div class=\"line\"> * Licensed under the Apache License, Version 2.0 (the \"License\"); </div><div class=\"line\"> * you may not use this file except in compliance with the License. </div><div class=\"line\"> * You may obtain a copy of the License at </div><div class=\"line\"> * </div><div class=\"line\"> *      http://www.apache.org/licenses/LICENSE-2.0 </div><div class=\"line\"> * </div><div class=\"line\"> * Unless required by applicable law or agreed to in writing, software </div><div class=\"line\"> * distributed under the License is distributed on an \"AS IS\" BASIS, </div><div class=\"line\"> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. </div><div class=\"line\"> * See the License for the specific language governing permissions and </div><div class=\"line\"> * limitations under the License. </div><div class=\"line\"> */</span> </div><div class=\"line\"> </div><div class=\"line\"><span class=\"keyword\">package</span> your.<span class=\"keyword\">package</span>; </div><div class=\"line\"> </div><div class=\"line\"><span class=\"keyword\">import</span> android.content.Context;</div><div class=\"line\"><span class=\"keyword\">import</span> android.content.res.TypedArray;</div><div class=\"line\"><span class=\"keyword\">import</span> android.graphics.Canvas;</div><div class=\"line\"><span class=\"keyword\">import</span> android.graphics.Rect;</div><div class=\"line\"><span class=\"keyword\">import</span> android.graphics.drawable.Drawable;</div><div class=\"line\"><span class=\"keyword\">import</span> android.util.AttributeSet;</div><div class=\"line\"><span class=\"keyword\">import</span> android.view.Gravity;</div><div class=\"line\"><span class=\"keyword\">import</span> android.widget.LinearLayout;</div><div class=\"line\"> </div><div class=\"line\"><span class=\"keyword\">import</span> your.<span class=\"keyword\">package</span>.R; </div><div class=\"line\"> </div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ForegroundLinearLayout</span> <span class=\"keyword\">extends</span> <span class=\"title\">LinearLayout</span> </span>&#123;</div><div class=\"line\"> </div><div class=\"line\">    <span class=\"keyword\">private</span> Drawable mForeground;</div><div class=\"line\"> </div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Rect mSelfBounds = <span class=\"keyword\">new</span> Rect();</div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Rect mOverlayBounds = <span class=\"keyword\">new</span> Rect();</div><div class=\"line\"> </div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> mForegroundGravity = Gravity.FILL;</div><div class=\"line\"> </div><div class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"keyword\">boolean</span> mForegroundInPadding = <span class=\"keyword\">true</span>;</div><div class=\"line\"> </div><div class=\"line\">    <span class=\"keyword\">boolean</span> mForegroundBoundsChanged = <span class=\"keyword\">false</span>;</div><div class=\"line\"> </div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">ForegroundLinearLayout</span><span class=\"params\">(Context context)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>(context);</div><div class=\"line\">    &#125; </div><div class=\"line\"> </div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">ForegroundLinearLayout</span><span class=\"params\">(Context context, AttributeSet attrs)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">this</span>(context, attrs, <span class=\"number\">0</span>);</div><div class=\"line\">    &#125; </div><div class=\"line\"> </div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">ForegroundLinearLayout</span><span class=\"params\">(Context context, AttributeSet attrs, <span class=\"keyword\">int</span> defStyle)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>(context, attrs, defStyle);</div><div class=\"line\"> </div><div class=\"line\">        TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.ForegroundLinearLayout,</div><div class=\"line\">                defStyle, <span class=\"number\">0</span>);</div><div class=\"line\"> </div><div class=\"line\">        mForegroundGravity = a.getInt(</div><div class=\"line\">                R.styleable.ForegroundLinearLayout_android_foregroundGravity, mForegroundGravity);</div><div class=\"line\"> </div><div class=\"line\">        <span class=\"keyword\">final</span> Drawable d = a.getDrawable(R.styleable.ForegroundLinearLayout_android_foreground);</div><div class=\"line\">        <span class=\"keyword\">if</span> (d != <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">            setForeground(d);</div><div class=\"line\">        &#125; </div><div class=\"line\"> </div><div class=\"line\">        mForegroundInPadding = a.getBoolean(</div><div class=\"line\">                R.styleable.ForegroundLinearLayout_android_foregroundInsidePadding, <span class=\"keyword\">true</span>);</div><div class=\"line\"> </div><div class=\"line\">        a.recycle();</div><div class=\"line\">    &#125; </div><div class=\"line\"> </div><div class=\"line\">    <span class=\"comment\">/** </div><div class=\"line\">     * Describes how the foreground is positioned. </div><div class=\"line\">     * </div><div class=\"line\">     * <span class=\"doctag\">@return</span> foreground gravity. </div><div class=\"line\">     * </div><div class=\"line\">     * <span class=\"doctag\">@see</span> #setForegroundGravity(int) </div><div class=\"line\">     */</span> </div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">getForegroundGravity</span><span class=\"params\">()</span> </span>&#123; </div><div class=\"line\">        <span class=\"keyword\">return</span> mForegroundGravity;</div><div class=\"line\">    &#125; </div><div class=\"line\"> </div><div class=\"line\">    <span class=\"comment\">/** </div><div class=\"line\">     * Describes how the foreground is positioned. Defaults to START and TOP. </div><div class=\"line\">     * </div><div class=\"line\">     * <span class=\"doctag\">@param</span> foregroundGravity See &#123;<span class=\"doctag\">@link</span> android.view.Gravity&#125; </div><div class=\"line\">     * </div><div class=\"line\">     * <span class=\"doctag\">@see</span> #getForegroundGravity() </div><div class=\"line\">     */</span> </div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setForegroundGravity</span><span class=\"params\">(<span class=\"keyword\">int</span> foregroundGravity)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (mForegroundGravity != foregroundGravity) &#123;</div><div class=\"line\">            <span class=\"keyword\">if</span> ((foregroundGravity &amp; Gravity.RELATIVE_HORIZONTAL_GRAVITY_MASK) == <span class=\"number\">0</span>) &#123;</div><div class=\"line\">                foregroundGravity |= Gravity.START;</div><div class=\"line\">            &#125; </div><div class=\"line\"> </div><div class=\"line\">            <span class=\"keyword\">if</span> ((foregroundGravity &amp; Gravity.VERTICAL_GRAVITY_MASK) == <span class=\"number\">0</span>) &#123;</div><div class=\"line\">                foregroundGravity |= Gravity.TOP;</div><div class=\"line\">            &#125; </div><div class=\"line\"> </div><div class=\"line\">            mForegroundGravity = foregroundGravity;</div><div class=\"line\"> </div><div class=\"line\"> </div><div class=\"line\">            <span class=\"keyword\">if</span> (mForegroundGravity == Gravity.FILL &amp;&amp; mForeground != <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">                Rect padding = <span class=\"keyword\">new</span> Rect();</div><div class=\"line\">                mForeground.getPadding(padding);</div><div class=\"line\">            &#125; </div><div class=\"line\"> </div><div class=\"line\">            requestLayout();</div><div class=\"line\">        &#125; </div><div class=\"line\">    &#125; </div><div class=\"line\"> </div><div class=\"line\">    <span class=\"meta\">@Override</span> </div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">boolean</span> <span class=\"title\">verifyDrawable</span><span class=\"params\">(Drawable who)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">super</span>.verifyDrawable(who) || (who == mForeground);</div><div class=\"line\">    &#125; </div><div class=\"line\"> </div><div class=\"line\">    <span class=\"meta\">@Override</span> </div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">jumpDrawablesToCurrentState</span><span class=\"params\">()</span> </span>&#123; </div><div class=\"line\">        <span class=\"keyword\">super</span>.jumpDrawablesToCurrentState(); </div><div class=\"line\">        <span class=\"keyword\">if</span> (mForeground != <span class=\"keyword\">null</span>) mForeground.jumpToCurrentState();</div><div class=\"line\">    &#125; </div><div class=\"line\"> </div><div class=\"line\">    <span class=\"meta\">@Override</span> </div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">drawableStateChanged</span><span class=\"params\">()</span> </span>&#123; </div><div class=\"line\">        <span class=\"keyword\">super</span>.drawableStateChanged(); </div><div class=\"line\">        <span class=\"keyword\">if</span> (mForeground != <span class=\"keyword\">null</span> &amp;&amp; mForeground.isStateful()) &#123;</div><div class=\"line\">            mForeground.setState(getDrawableState());</div><div class=\"line\">        &#125; </div><div class=\"line\">    &#125; </div><div class=\"line\"> </div><div class=\"line\">    <span class=\"comment\">/** </div><div class=\"line\">     * Supply a Drawable that is to be rendered on top of all of the child </div><div class=\"line\">     * views in the frame layout.  Any padding in the Drawable will be taken </div><div class=\"line\">     * into account by ensuring that the children are inset to be placed </div><div class=\"line\">     * inside of the padding area. </div><div class=\"line\">     * </div><div class=\"line\">     * <span class=\"doctag\">@param</span> drawable The Drawable to be drawn on top of the children. </div><div class=\"line\">     */</span> </div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setForeground</span><span class=\"params\">(Drawable drawable)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (mForeground != drawable) &#123;</div><div class=\"line\">            <span class=\"keyword\">if</span> (mForeground != <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">                mForeground.setCallback(<span class=\"keyword\">null</span>);</div><div class=\"line\">                unscheduleDrawable(mForeground);</div><div class=\"line\">            &#125; </div><div class=\"line\"> </div><div class=\"line\">            mForeground = drawable;</div><div class=\"line\"> </div><div class=\"line\">            <span class=\"keyword\">if</span> (drawable != <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">                setWillNotDraw(<span class=\"keyword\">false</span>);</div><div class=\"line\">                drawable.setCallback(<span class=\"keyword\">this</span>);</div><div class=\"line\">                <span class=\"keyword\">if</span> (drawable.isStateful()) &#123;</div><div class=\"line\">                    drawable.setState(getDrawableState());</div><div class=\"line\">                &#125; </div><div class=\"line\">                <span class=\"keyword\">if</span> (mForegroundGravity == Gravity.FILL) &#123;</div><div class=\"line\">                    Rect padding = <span class=\"keyword\">new</span> Rect();</div><div class=\"line\">                    drawable.getPadding(padding);</div><div class=\"line\">                &#125; </div><div class=\"line\">            &#125;  <span class=\"keyword\">else</span> &#123; </div><div class=\"line\">                setWillNotDraw(<span class=\"keyword\">true</span>);</div><div class=\"line\">            &#125; </div><div class=\"line\">            requestLayout();</div><div class=\"line\">            invalidate();</div><div class=\"line\">        &#125; </div><div class=\"line\">    &#125; </div><div class=\"line\"> </div><div class=\"line\">    <span class=\"comment\">/** </div><div class=\"line\">     * Returns the drawable used as the foreground of this FrameLayout. The </div><div class=\"line\">     * foreground drawable, if non-null, is always drawn on top of the children. </div><div class=\"line\">     * </div><div class=\"line\">     * <span class=\"doctag\">@return</span> A Drawable or null if no foreground was set. </div><div class=\"line\">     */</span> </div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Drawable <span class=\"title\">getForeground</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> mForeground;</div><div class=\"line\">    &#125; </div><div class=\"line\"> </div><div class=\"line\">    <span class=\"meta\">@Override</span> </div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onLayout</span><span class=\"params\">(<span class=\"keyword\">boolean</span> changed, <span class=\"keyword\">int</span> left, <span class=\"keyword\">int</span> top, <span class=\"keyword\">int</span> right, <span class=\"keyword\">int</span> bottom)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>.onLayout(changed, left, top, right, bottom);</div><div class=\"line\">        mForegroundBoundsChanged = changed;</div><div class=\"line\">    &#125; </div><div class=\"line\"> </div><div class=\"line\">    <span class=\"meta\">@Override</span> </div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onSizeChanged</span><span class=\"params\">(<span class=\"keyword\">int</span> w, <span class=\"keyword\">int</span> h, <span class=\"keyword\">int</span> oldw, <span class=\"keyword\">int</span> oldh)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>.onSizeChanged(w, h, oldw, oldh);</div><div class=\"line\">        mForegroundBoundsChanged = <span class=\"keyword\">true</span>;</div><div class=\"line\">    &#125; </div><div class=\"line\"> </div><div class=\"line\">    <span class=\"meta\">@Override</span> </div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">draw</span><span class=\"params\">(Canvas canvas)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>.draw(canvas);</div><div class=\"line\"> </div><div class=\"line\">        <span class=\"keyword\">if</span> (mForeground != <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">            <span class=\"keyword\">final</span> Drawable foreground = mForeground;</div><div class=\"line\"> </div><div class=\"line\">            <span class=\"keyword\">if</span> (mForegroundBoundsChanged) &#123;</div><div class=\"line\">                mForegroundBoundsChanged = <span class=\"keyword\">false</span>;</div><div class=\"line\">                <span class=\"keyword\">final</span> Rect selfBounds = mSelfBounds;</div><div class=\"line\">                <span class=\"keyword\">final</span> Rect overlayBounds = mOverlayBounds;</div><div class=\"line\"> </div><div class=\"line\">                <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> w = getRight() - getLeft();</div><div class=\"line\">                <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> h = getBottom() - getTop();</div><div class=\"line\"> </div><div class=\"line\">                <span class=\"keyword\">if</span> (mForegroundInPadding) &#123;</div><div class=\"line\">                    selfBounds.set(<span class=\"number\">0</span>, <span class=\"number\">0</span>, w, h);</div><div class=\"line\">                &#125; <span class=\"keyword\">else</span> &#123; </div><div class=\"line\">                    selfBounds.set(getPaddingLeft(), getPaddingTop(),</div><div class=\"line\">                            w - getPaddingRight(), h - getPaddingBottom());</div><div class=\"line\">                &#125; </div><div class=\"line\"> </div><div class=\"line\">                Gravity.apply(mForegroundGravity, foreground.getIntrinsicWidth(),</div><div class=\"line\">                        foreground.getIntrinsicHeight(), selfBounds, overlayBounds);</div><div class=\"line\">                foreground.setBounds(overlayBounds);</div><div class=\"line\">            &#125; </div><div class=\"line\"> </div><div class=\"line\">            foreground.draw(canvas);</div><div class=\"line\">        &#125; </div><div class=\"line\">    &#125; </div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<ul>\n<li><p></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">your.package.ForegroundLinearLayout</span></div><div class=\"line\">    <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">    <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"wrap_content\"</span></div><div class=\"line\">    <span class=\"attr\">android:foreground</span>=<span class=\"string\">\"?android:selectableItemBackground\"</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">ImageView</span></div><div class=\"line\">        <span class=\"attr\">android:id</span>=<span class=\"string\">@+id/imageview_opaque</span></div><div class=\"line\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"wrap_content\"</span> /&gt;</span></div><div class=\"line\"></div><div class=\"line\">    ... other views ...</div><div class=\"line\">/&gt;</div></pre></td></tr></table></figure>\n</li>\n<li><p><a href=\"https://github.com/JakeWharton\">Jack Wharton</a><a href=\"https://gist.github.com/JakeWharton/0a251d67649305d84e8a\">ForegroundImageView</a></br></p>\n</li>\n<li><p>attrs</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;</div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">resources</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">declare-styleable</span> <span class=\"attr\">name</span>=<span class=\"string\">\"ForegroundImageView\"</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">attr</span> <span class=\"attr\">name</span>=<span class=\"string\">\"android:foreground\"</span>/&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">declare-styleable</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">resources</span>&gt;</span></div></pre></td></tr></table></figure>\n</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> android.content.Context;</div><div class=\"line\"><span class=\"keyword\">import</span> android.content.res.TypedArray;</div><div class=\"line\"><span class=\"keyword\">import</span> android.graphics.Canvas;</div><div class=\"line\"><span class=\"keyword\">import</span> android.graphics.drawable.Drawable;</div><div class=\"line\"><span class=\"keyword\">import</span> android.util.AttributeSet;</div><div class=\"line\"><span class=\"keyword\">import</span> android.widget.ImageView;</div><div class=\"line\"> </div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ForegroundImageView</span> <span class=\"keyword\">extends</span> <span class=\"title\">ImageView</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">private</span> Drawable foreground;</div><div class=\"line\"> </div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">ForegroundImageView</span><span class=\"params\">(Context context)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>(context, <span class=\"keyword\">null</span>);</div><div class=\"line\">  &#125; </div><div class=\"line\"> </div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">ForegroundImageView</span><span class=\"params\">(Context context, AttributeSet attrs)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">super</span>(context, attrs);</div><div class=\"line\"> </div><div class=\"line\">    TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.ForegroundImageView);</div><div class=\"line\">    Drawable foreground = a.getDrawable(R.styleable.ForegroundImageView_android_foreground);</div><div class=\"line\">    <span class=\"keyword\">if</span> (foreground != <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">      setForeground(foreground);</div><div class=\"line\">    &#125; </div><div class=\"line\">    a.recycle();</div><div class=\"line\">  &#125; </div><div class=\"line\"> </div><div class=\"line\">  <span class=\"comment\">/** </div><div class=\"line\">   * Supply a drawable resource that is to be rendered on top of all of the child </div><div class=\"line\">   * views in the frame layout. </div><div class=\"line\">   * </div><div class=\"line\">   * <span class=\"doctag\">@param</span> drawableResId The drawable resource to be drawn on top of the children. </div><div class=\"line\">   */</span> </div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setForegroundResource</span><span class=\"params\">(<span class=\"keyword\">int</span> drawableResId)</span> </span>&#123;</div><div class=\"line\">    setForeground(getContext().getResources().getDrawable(drawableResId));</div><div class=\"line\">  &#125; </div><div class=\"line\"> </div><div class=\"line\">  <span class=\"comment\">/** </div><div class=\"line\">   * Supply a Drawable that is to be rendered on top of all of the child </div><div class=\"line\">   * views in the frame layout. </div><div class=\"line\">   * </div><div class=\"line\">   * <span class=\"doctag\">@param</span> drawable The Drawable to be drawn on top of the children. </div><div class=\"line\">   */</span> </div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setForeground</span><span class=\"params\">(Drawable drawable)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (foreground == drawable) &#123;</div><div class=\"line\">      <span class=\"keyword\">return</span>; </div><div class=\"line\">    &#125; </div><div class=\"line\">    <span class=\"keyword\">if</span> (foreground != <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">      foreground.setCallback(<span class=\"keyword\">null</span>);</div><div class=\"line\">      unscheduleDrawable(foreground);</div><div class=\"line\">    &#125; </div><div class=\"line\"> </div><div class=\"line\">    foreground = drawable;</div><div class=\"line\"> </div><div class=\"line\">    <span class=\"keyword\">if</span> (drawable != <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">      drawable.setCallback(<span class=\"keyword\">this</span>);</div><div class=\"line\">      <span class=\"keyword\">if</span> (drawable.isStateful()) &#123;</div><div class=\"line\">        drawable.setState(getDrawableState());</div><div class=\"line\">      &#125; </div><div class=\"line\">    &#125; </div><div class=\"line\">    requestLayout();</div><div class=\"line\">    invalidate();</div><div class=\"line\">  &#125; </div><div class=\"line\"> </div><div class=\"line\">  <span class=\"meta\">@Override</span> <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">boolean</span> <span class=\"title\">verifyDrawable</span><span class=\"params\">(Drawable who)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">super</span>.verifyDrawable(who) || who == foreground;</div><div class=\"line\">  &#125; </div><div class=\"line\"> </div><div class=\"line\">  <span class=\"meta\">@Override</span> <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">jumpDrawablesToCurrentState</span><span class=\"params\">()</span> </span>&#123; </div><div class=\"line\">    <span class=\"keyword\">super</span>.jumpDrawablesToCurrentState(); </div><div class=\"line\">    <span class=\"keyword\">if</span> (foreground != <span class=\"keyword\">null</span>) foreground.jumpToCurrentState();</div><div class=\"line\">  &#125; </div><div class=\"line\"> </div><div class=\"line\">  <span class=\"meta\">@Override</span> <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">drawableStateChanged</span><span class=\"params\">()</span> </span>&#123; </div><div class=\"line\">    <span class=\"keyword\">super</span>.drawableStateChanged(); </div><div class=\"line\">    <span class=\"keyword\">if</span> (foreground != <span class=\"keyword\">null</span> &amp;&amp; foreground.isStateful()) &#123;</div><div class=\"line\">      foreground.setState(getDrawableState());</div><div class=\"line\">    &#125; </div><div class=\"line\">  &#125; </div><div class=\"line\"> </div><div class=\"line\">  <span class=\"meta\">@Override</span> <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onMeasure</span><span class=\"params\">(<span class=\"keyword\">int</span> widthMeasureSpec, <span class=\"keyword\">int</span> heightMeasureSpec)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">super</span>.onMeasure(widthMeasureSpec, heightMeasureSpec);</div><div class=\"line\">    <span class=\"keyword\">if</span> (foreground != <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">      foreground.setBounds(<span class=\"number\">0</span>, <span class=\"number\">0</span>, getMeasuredWidth(), getMeasuredHeight());</div><div class=\"line\">      invalidate();</div><div class=\"line\">    &#125; </div><div class=\"line\">  &#125; </div><div class=\"line\"> </div><div class=\"line\">  <span class=\"meta\">@Override</span> <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onSizeChanged</span><span class=\"params\">(<span class=\"keyword\">int</span> w, <span class=\"keyword\">int</span> h, <span class=\"keyword\">int</span> oldw, <span class=\"keyword\">int</span> oldh)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">super</span>.onSizeChanged(w, h, oldw, oldh);</div><div class=\"line\">    <span class=\"keyword\">if</span> (foreground != <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">      foreground.setBounds(<span class=\"number\">0</span>, <span class=\"number\">0</span>, w, h);</div><div class=\"line\">      invalidate();</div><div class=\"line\">    &#125; </div><div class=\"line\">  &#125; </div><div class=\"line\"> </div><div class=\"line\">  <span class=\"meta\">@Override</span> <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">draw</span><span class=\"params\">(Canvas canvas)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">super</span>.draw(canvas);</div><div class=\"line\"> </div><div class=\"line\">    <span class=\"keyword\">if</span> (foreground != <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">      foreground.draw(canvas);</div><div class=\"line\">    &#125; </div><div class=\"line\">  &#125; </div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<hr>\n<p><a href=\"https://github.com/cesards/ForegroundViews\"></a><br></p>\n<p>##reference</p>\n<ul>\n<li><a href=\"https://www.youtube.com/watch?v=TIHXGwRTMWI\">Android themes and styles demisfied</a> ThemeStyle</li>\n<li><a href=\"https://plus.google.com/108967384991768947849/posts/aHPVDtr6mcp\">Chris Banes G+ post</a> </li>\n<li><a href=\"https://gist.github.com/shakalaca/6199283\">RelativeLayout with foreGround</a> </li>\n<li><a href=\"https://github.com/traex/RippleEffect\">Ripple Effect</a> RippleAPI 9+ RelativeLayoutViewGroup</li>\n</ul>"},{"title":"replace butterKnife with databinding","date":"2016-09-22T07:17:39.000Z","_content":"\n\nYigit Boyar 2015android Dev summitDatabinding:\n\"no binding libraries will be created from now on \"\nDatabindingButterKnife\n## \n<!--more-->\n\n# 1.Activity\n*before*\n```java\nclass ExampleActivity extends Activity {\n  @Bind(R.id.title) TextView title;\n  @Bind(R.id.subtitle) TextView subtitle;\n  @Bind(R.id.footer) TextView footer;\n\n  @Override\n  public void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.simple_activity);\n    ButterKnife.bind(this);\n  }\n}\n```\n*after*\nxml **Layout** tag \n`R.layout.smple_activity`\n```xml\n<layout>\n  <LinearLayout>\n    <TextView android:id=\"@+id/title\">\n    <TextView android:id=\"@+id/subtitle\">\n    <TextView android:id=\"@+id/footer\">\n  </LinearLayout>\n</layout>\n```\n```java\nclass ExampleActivity extends Activity {\n  private ActivitySampleBinding binding;\n\n  @Override\n  public void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    binding = DataBindingUtils.setContentView(this, R.layout.simple_activity);\n    binding.title.setText(\"I am Title\");\n    //no more findViewById!!!\n  }\n}\n```\n\n# 2.Fragment\n*before*\n```java\npublic class FancyFragment extends Fragment {\n  @Bind(R.id.button1) Button button1;\n  @Bind(R.id.button2) Button button2;\n  @Override\n  public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\n    View view = inflater.inflate(R.layout.fancy_fragment, container, false);\n    ButterKnife.bind(this, view);\n    // TODO Use fields...\n    return view;\n  }\n}\n```\n\n*after*\n```java\npublic class FancyFragment extends Fragment {\n  private FragmentFancyBinding binding;\n\n  @Override\n  public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\n    binding = DataBindingUtil.inflate(inflater,R.layout.fragment_fancy, container, false);\n\t  return binding.getRoot();\n  }\n\n}\n```\n\n# 3.ViewHolder\n\n*before*\n```java\npublic class MyAdapter extends BaseAdapter {\n  @Override\n  public View getView(int position, View view, ViewGroup parent) {\n    ViewHolder holder;\n    if (view != null) {\n      holder = (ViewHolder) view.getTag();\n    } else {\n      view = inflater.inflate(R.layout.list_item_sample, parent, false);\n      holder = new ViewHolder(view);\n      view.setTag(holder);\n    }\n\n    holder.name.setText(\"John Doe\");\n    // etc...\n\n    return view;\n  }\n\n  static class ViewHolder {\n    @Bind(R.id.title) TextView name;\n    @Bind(R.id.job_title) TextView jobTitle;\n    public ViewHolder(View view) {\n      ButterKnife.bind(this, view);\n    }\n  }\n}\n```\n\n*after*\n### ListView \n```java\npublic class MyAdapter extends BaseAdapter {\n  @Override\n  public View getView(int position, View convertView, ViewGroup parent) {\n      ListItemSampleBinding binding;\n      if (convertView == null) {\n          binding = DataBindingUtil.inflate(inflater, R.layout.list_item_sample, parent, false);\n          convertView = binding.getRoot();\n          convertView.setTag(binding);\n      } else {\n          binding = (ListItemSampleBinding) convertView.getTag();\n      }\n      binding.setUser(getItem(position));\n      // binding.name.setText(\"John Doe\");\n\n      return convertView;\n  }\n}\n```\n\n### recyclerView\n```java\npublic class SampleRecyclerAdapter extends RecyclerView.Adapter<SampleRecyclerAdapter.BindingHolder> {\n\n    @Override\n    public RegisterableDeviceListAdapter.ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {\n      final View v = LayoutInflater.from(parent.getContext()).inflate(R.layout.list_item_sample, parent, false);\n      return new BindingHolder(v);\n    }\n\n  @Override\n  public void onBindViewHolder(BindingHolder holder, int position) {\n    holder.getBinding().setVariable(BR.user, getItem(position));\n  }\n\n  static class BindingHolder extends RecyclerView.ViewHolder {\n    private final ViewDataBinding binding;\n\n    public BindingHolder(View itemView) {\n      super(itemView);\n      binding = DataBindingUtil.bind(itemView)\n    }\n\n    public ViewDataBinding getBinding() {\n      return binding;\n    }\n  }\n}\n```\n\n# 4.CustomView\nView(ViewGroup)ButterKnifeViewGroupfindViewById,Databinding\n```java\npublic class Pagination extends RelativeLayout {\n  private ViewPaginationBinding binding;\n\n  public Pagination(Context context) {\n    this(context, null);\n  }\n\n  public Pagination(Context context, AttributeSet attrs) {\n    super(context, attrs);\n    binding = DataBindingUtil.inflate(LayoutInflater.from(context), R.layout.view_pagination, this, true);\n  }\n\n  public static void setListener(Pagination paginate, View target, OnPaginationClickListener listener) {\n    if (listener != null) {\n      target.setOnClickListener(_v -> listener.onClick(paginate));\n    }\n  }\n\n  @BindingAdapter({\"android:onPrevButtonClicked\"})\n  public static void setPrevClickListener(Pagination view, OnPaginationClickListener listener) {\n    setListener(view, view.binding.btnPrevPage, listener);\n  }\n\n  @BindingAdapter({\"android:onNextButtonClicked\"})\n  public static void setNextClickListener(Pagination view, OnPaginationClickListener listener) {\n    setListener(view, view.binding.btnNextPage, listener);\n  }\n\n  public interface OnPaginationClickListener {\n    void onClick(Pagination pagination);\n  }\n}\n```\n\n# 5.EventHandler, setDefaultComponent...</br>\nDatabindingboilerplate code </br>\nSo ,ButterKnifeGoogbye ButterKnifeHello DataBinding!\n\ntodo \n###how did ButterKnife work?\n\n# Reference\n\n 1. [Data Binding Library](https://developer.android.com/topic/libraries/data-binding/index.html)\n 2. [data-binding-android-boyar-mount](https://realm.io/cn/news/data-binding-android-boyar-mount/) \n 3. [Advanced Data Bindinding](https://www.youtube.com/watch?v=DAmMN7m3wLU) Two-Way Data Binding at google io 2016\n 4. [Android Dev Summit 2015](https://www.youtube.com/watch?v=NBbeQMOcnZ0)\n 5. [Goodbye Butter Knife](http://qiita.com/izumin5210/items/2784576d86ce6b9b51e6)\n 6. [Google Sample](https://github.com/google/android-ui-toolkit-demos)\n \n","source":"_posts/replace-butterKnife-with-databinding.md","raw":"---\ntitle: replace butterKnife with databinding\ndate: 2016-09-22 15:17:39\ncategories: blog \ntags: [databinding, Butterknife,android]\n---\n\n\nYigit Boyar 2015android Dev summitDatabinding:\n\"no binding libraries will be created from now on \"\nDatabindingButterKnife\n## \n<!--more-->\n\n# 1.Activity\n*before*\n```java\nclass ExampleActivity extends Activity {\n  @Bind(R.id.title) TextView title;\n  @Bind(R.id.subtitle) TextView subtitle;\n  @Bind(R.id.footer) TextView footer;\n\n  @Override\n  public void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.simple_activity);\n    ButterKnife.bind(this);\n  }\n}\n```\n*after*\nxml **Layout** tag \n`R.layout.smple_activity`\n```xml\n<layout>\n  <LinearLayout>\n    <TextView android:id=\"@+id/title\">\n    <TextView android:id=\"@+id/subtitle\">\n    <TextView android:id=\"@+id/footer\">\n  </LinearLayout>\n</layout>\n```\n```java\nclass ExampleActivity extends Activity {\n  private ActivitySampleBinding binding;\n\n  @Override\n  public void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    binding = DataBindingUtils.setContentView(this, R.layout.simple_activity);\n    binding.title.setText(\"I am Title\");\n    //no more findViewById!!!\n  }\n}\n```\n\n# 2.Fragment\n*before*\n```java\npublic class FancyFragment extends Fragment {\n  @Bind(R.id.button1) Button button1;\n  @Bind(R.id.button2) Button button2;\n  @Override\n  public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\n    View view = inflater.inflate(R.layout.fancy_fragment, container, false);\n    ButterKnife.bind(this, view);\n    // TODO Use fields...\n    return view;\n  }\n}\n```\n\n*after*\n```java\npublic class FancyFragment extends Fragment {\n  private FragmentFancyBinding binding;\n\n  @Override\n  public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\n    binding = DataBindingUtil.inflate(inflater,R.layout.fragment_fancy, container, false);\n\t  return binding.getRoot();\n  }\n\n}\n```\n\n# 3.ViewHolder\n\n*before*\n```java\npublic class MyAdapter extends BaseAdapter {\n  @Override\n  public View getView(int position, View view, ViewGroup parent) {\n    ViewHolder holder;\n    if (view != null) {\n      holder = (ViewHolder) view.getTag();\n    } else {\n      view = inflater.inflate(R.layout.list_item_sample, parent, false);\n      holder = new ViewHolder(view);\n      view.setTag(holder);\n    }\n\n    holder.name.setText(\"John Doe\");\n    // etc...\n\n    return view;\n  }\n\n  static class ViewHolder {\n    @Bind(R.id.title) TextView name;\n    @Bind(R.id.job_title) TextView jobTitle;\n    public ViewHolder(View view) {\n      ButterKnife.bind(this, view);\n    }\n  }\n}\n```\n\n*after*\n### ListView \n```java\npublic class MyAdapter extends BaseAdapter {\n  @Override\n  public View getView(int position, View convertView, ViewGroup parent) {\n      ListItemSampleBinding binding;\n      if (convertView == null) {\n          binding = DataBindingUtil.inflate(inflater, R.layout.list_item_sample, parent, false);\n          convertView = binding.getRoot();\n          convertView.setTag(binding);\n      } else {\n          binding = (ListItemSampleBinding) convertView.getTag();\n      }\n      binding.setUser(getItem(position));\n      // binding.name.setText(\"John Doe\");\n\n      return convertView;\n  }\n}\n```\n\n### recyclerView\n```java\npublic class SampleRecyclerAdapter extends RecyclerView.Adapter<SampleRecyclerAdapter.BindingHolder> {\n\n    @Override\n    public RegisterableDeviceListAdapter.ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {\n      final View v = LayoutInflater.from(parent.getContext()).inflate(R.layout.list_item_sample, parent, false);\n      return new BindingHolder(v);\n    }\n\n  @Override\n  public void onBindViewHolder(BindingHolder holder, int position) {\n    holder.getBinding().setVariable(BR.user, getItem(position));\n  }\n\n  static class BindingHolder extends RecyclerView.ViewHolder {\n    private final ViewDataBinding binding;\n\n    public BindingHolder(View itemView) {\n      super(itemView);\n      binding = DataBindingUtil.bind(itemView)\n    }\n\n    public ViewDataBinding getBinding() {\n      return binding;\n    }\n  }\n}\n```\n\n# 4.CustomView\nView(ViewGroup)ButterKnifeViewGroupfindViewById,Databinding\n```java\npublic class Pagination extends RelativeLayout {\n  private ViewPaginationBinding binding;\n\n  public Pagination(Context context) {\n    this(context, null);\n  }\n\n  public Pagination(Context context, AttributeSet attrs) {\n    super(context, attrs);\n    binding = DataBindingUtil.inflate(LayoutInflater.from(context), R.layout.view_pagination, this, true);\n  }\n\n  public static void setListener(Pagination paginate, View target, OnPaginationClickListener listener) {\n    if (listener != null) {\n      target.setOnClickListener(_v -> listener.onClick(paginate));\n    }\n  }\n\n  @BindingAdapter({\"android:onPrevButtonClicked\"})\n  public static void setPrevClickListener(Pagination view, OnPaginationClickListener listener) {\n    setListener(view, view.binding.btnPrevPage, listener);\n  }\n\n  @BindingAdapter({\"android:onNextButtonClicked\"})\n  public static void setNextClickListener(Pagination view, OnPaginationClickListener listener) {\n    setListener(view, view.binding.btnNextPage, listener);\n  }\n\n  public interface OnPaginationClickListener {\n    void onClick(Pagination pagination);\n  }\n}\n```\n\n# 5.EventHandler, setDefaultComponent...</br>\nDatabindingboilerplate code </br>\nSo ,ButterKnifeGoogbye ButterKnifeHello DataBinding!\n\ntodo \n###how did ButterKnife work?\n\n# Reference\n\n 1. [Data Binding Library](https://developer.android.com/topic/libraries/data-binding/index.html)\n 2. [data-binding-android-boyar-mount](https://realm.io/cn/news/data-binding-android-boyar-mount/) \n 3. [Advanced Data Bindinding](https://www.youtube.com/watch?v=DAmMN7m3wLU) Two-Way Data Binding at google io 2016\n 4. [Android Dev Summit 2015](https://www.youtube.com/watch?v=NBbeQMOcnZ0)\n 5. [Goodbye Butter Knife](http://qiita.com/izumin5210/items/2784576d86ce6b9b51e6)\n 6. [Google Sample](https://github.com/google/android-ui-toolkit-demos)\n \n","slug":"replace-butterKnife-with-databinding","published":1,"updated":"2017-07-01T16:07:10.866Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj50afgyw0036i4vrh6geim7y","content":"<p>Yigit Boyar 2015android Dev summitDatabinding:<br>no binding libraries will be created from now on <br>DatabindingButterKnife</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><a id=\"more\"></a>\n<h1 id=\"1-Activity\"><a href=\"#1-Activity\" class=\"headerlink\" title=\"1.Activity\"></a>1.Activity</h1><p><em>before</em><br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ExampleActivity</span> <span class=\"keyword\">extends</span> <span class=\"title\">Activity</span> </span>&#123;</div><div class=\"line\">  <span class=\"meta\">@Bind</span>(R.id.title) TextView title;</div><div class=\"line\">  <span class=\"meta\">@Bind</span>(R.id.subtitle) TextView subtitle;</div><div class=\"line\">  <span class=\"meta\">@Bind</span>(R.id.footer) TextView footer;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"meta\">@Override</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onCreate</span><span class=\"params\">(Bundle savedInstanceState)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">super</span>.onCreate(savedInstanceState);</div><div class=\"line\">    setContentView(R.layout.simple_activity);</div><div class=\"line\">    ButterKnife.bind(<span class=\"keyword\">this</span>);</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p><em>after</em><br>xml <strong>Layout</strong> tag<br><code>R.layout.smple_activity</code><br><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">layout</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">LinearLayout</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">TextView</span> <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/title\"</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">TextView</span> <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/subtitle\"</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">TextView</span> <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/footer\"</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">LinearLayout</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">layout</span>&gt;</span></div></pre></td></tr></table></figure></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ExampleActivity</span> <span class=\"keyword\">extends</span> <span class=\"title\">Activity</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">private</span> ActivitySampleBinding binding;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"meta\">@Override</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onCreate</span><span class=\"params\">(Bundle savedInstanceState)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">super</span>.onCreate(savedInstanceState);</div><div class=\"line\">    binding = DataBindingUtils.setContentView(<span class=\"keyword\">this</span>, R.layout.simple_activity);</div><div class=\"line\">    binding.title.setText(<span class=\"string\">\"I am Title\"</span>);</div><div class=\"line\">    <span class=\"comment\">//no more findViewById!!!</span></div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h1 id=\"2-Fragment\"><a href=\"#2-Fragment\" class=\"headerlink\" title=\"2.Fragment\"></a>2.Fragment</h1><p><em>before</em><br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FancyFragment</span> <span class=\"keyword\">extends</span> <span class=\"title\">Fragment</span> </span>&#123;</div><div class=\"line\">  <span class=\"meta\">@Bind</span>(R.id.button1) Button button1;</div><div class=\"line\">  <span class=\"meta\">@Bind</span>(R.id.button2) Button button2;</div><div class=\"line\">  <span class=\"meta\">@Override</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> View <span class=\"title\">onCreateView</span><span class=\"params\">(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)</span> </span>&#123;</div><div class=\"line\">    View view = inflater.inflate(R.layout.fancy_fragment, container, <span class=\"keyword\">false</span>);</div><div class=\"line\">    ButterKnife.bind(<span class=\"keyword\">this</span>, view);</div><div class=\"line\">    <span class=\"comment\">// TODO Use fields...</span></div><div class=\"line\">    <span class=\"keyword\">return</span> view;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p><em>after</em><br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FancyFragment</span> <span class=\"keyword\">extends</span> <span class=\"title\">Fragment</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">private</span> FragmentFancyBinding binding;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"meta\">@Override</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> View <span class=\"title\">onCreateView</span><span class=\"params\">(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)</span> </span>&#123;</div><div class=\"line\">    binding = DataBindingUtil.inflate(inflater,R.layout.fragment_fancy, container, <span class=\"keyword\">false</span>);</div><div class=\"line\">true  <span class=\"keyword\">return</span> binding.getRoot();</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<h1 id=\"3-ViewHolder\"><a href=\"#3-ViewHolder\" class=\"headerlink\" title=\"3.ViewHolder\"></a>3.ViewHolder</h1><p><em>before</em><br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyAdapter</span> <span class=\"keyword\">extends</span> <span class=\"title\">BaseAdapter</span> </span>&#123;</div><div class=\"line\">  <span class=\"meta\">@Override</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> View <span class=\"title\">getView</span><span class=\"params\">(<span class=\"keyword\">int</span> position, View view, ViewGroup parent)</span> </span>&#123;</div><div class=\"line\">    ViewHolder holder;</div><div class=\"line\">    <span class=\"keyword\">if</span> (view != <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">      holder = (ViewHolder) view.getTag();</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      view = inflater.inflate(R.layout.list_item_sample, parent, <span class=\"keyword\">false</span>);</div><div class=\"line\">      holder = <span class=\"keyword\">new</span> ViewHolder(view);</div><div class=\"line\">      view.setTag(holder);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    holder.name.setText(<span class=\"string\">\"John Doe\"</span>);</div><div class=\"line\">    <span class=\"comment\">// etc...</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span> view;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ViewHolder</span> </span>&#123;</div><div class=\"line\">    <span class=\"meta\">@Bind</span>(R.id.title) TextView name;</div><div class=\"line\">    <span class=\"meta\">@Bind</span>(R.id.job_title) TextView jobTitle;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">ViewHolder</span><span class=\"params\">(View view)</span> </span>&#123;</div><div class=\"line\">      ButterKnife.bind(<span class=\"keyword\">this</span>, view);</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p><em>after</em></p>\n<h3 id=\"ListView\"><a href=\"#ListView\" class=\"headerlink\" title=\"ListView\"></a>ListView</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyAdapter</span> <span class=\"keyword\">extends</span> <span class=\"title\">BaseAdapter</span> </span>&#123;</div><div class=\"line\">  <span class=\"meta\">@Override</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> View <span class=\"title\">getView</span><span class=\"params\">(<span class=\"keyword\">int</span> position, View convertView, ViewGroup parent)</span> </span>&#123;</div><div class=\"line\">      ListItemSampleBinding binding;</div><div class=\"line\">      <span class=\"keyword\">if</span> (convertView == <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">          binding = DataBindingUtil.inflate(inflater, R.layout.list_item_sample, parent, <span class=\"keyword\">false</span>);</div><div class=\"line\">          convertView = binding.getRoot();</div><div class=\"line\">          convertView.setTag(binding);</div><div class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">          binding = (ListItemSampleBinding) convertView.getTag();</div><div class=\"line\">      &#125;</div><div class=\"line\">      binding.setUser(getItem(position));</div><div class=\"line\">      <span class=\"comment\">// binding.name.setText(\"John Doe\");</span></div><div class=\"line\"></div><div class=\"line\">      <span class=\"keyword\">return</span> convertView;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"recyclerView\"><a href=\"#recyclerView\" class=\"headerlink\" title=\"recyclerView\"></a>recyclerView</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SampleRecyclerAdapter</span> <span class=\"keyword\">extends</span> <span class=\"title\">RecyclerView</span>.<span class=\"title\">Adapter</span>&lt;<span class=\"title\">SampleRecyclerAdapter</span>.<span class=\"title\">BindingHolder</span>&gt; </span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"keyword\">public</span> RegisterableDeviceListAdapter.<span class=\"function\">ViewHolder <span class=\"title\">onCreateViewHolder</span><span class=\"params\">(ViewGroup parent, <span class=\"keyword\">int</span> viewType)</span> </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">final</span> View v = LayoutInflater.from(parent.getContext()).inflate(R.layout.list_item_sample, parent, <span class=\"keyword\">false</span>);</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> BindingHolder(v);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"meta\">@Override</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onBindViewHolder</span><span class=\"params\">(BindingHolder holder, <span class=\"keyword\">int</span> position)</span> </span>&#123;</div><div class=\"line\">    holder.getBinding().setVariable(BR.user, getItem(position));</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">BindingHolder</span> <span class=\"keyword\">extends</span> <span class=\"title\">RecyclerView</span>.<span class=\"title\">ViewHolder</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> ViewDataBinding binding;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">BindingHolder</span><span class=\"params\">(View itemView)</span> </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">super</span>(itemView);</div><div class=\"line\">      binding = DataBindingUtil.bind(itemView)</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> ViewDataBinding <span class=\"title\">getBinding</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> binding;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h1 id=\"4-CustomView\"><a href=\"#4-CustomView\" class=\"headerlink\" title=\"4.CustomView\"></a>4.CustomView</h1><p>View(ViewGroup)ButterKnifeViewGroupfindViewById,Databinding<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Pagination</span> <span class=\"keyword\">extends</span> <span class=\"title\">RelativeLayout</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">private</span> ViewPaginationBinding binding;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Pagination</span><span class=\"params\">(Context context)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>(context, <span class=\"keyword\">null</span>);</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Pagination</span><span class=\"params\">(Context context, AttributeSet attrs)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">super</span>(context, attrs);</div><div class=\"line\">    binding = DataBindingUtil.inflate(LayoutInflater.from(context), R.layout.view_pagination, <span class=\"keyword\">this</span>, <span class=\"keyword\">true</span>);</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">setListener</span><span class=\"params\">(Pagination paginate, View target, OnPaginationClickListener listener)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (listener != <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">      target.setOnClickListener(_v -&gt; listener.onClick(paginate));</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"meta\">@BindingAdapter</span>(&#123;<span class=\"string\">\"android:onPrevButtonClicked\"</span>&#125;)</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">setPrevClickListener</span><span class=\"params\">(Pagination view, OnPaginationClickListener listener)</span> </span>&#123;</div><div class=\"line\">    setListener(view, view.binding.btnPrevPage, listener);</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"meta\">@BindingAdapter</span>(&#123;<span class=\"string\">\"android:onNextButtonClicked\"</span>&#125;)</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">setNextClickListener</span><span class=\"params\">(Pagination view, OnPaginationClickListener listener)</span> </span>&#123;</div><div class=\"line\">    setListener(view, view.binding.btnNextPage, listener);</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">OnPaginationClickListener</span> </span>&#123;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">onClick</span><span class=\"params\">(Pagination pagination)</span></span>;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<h1 id=\"5-EventHandler-setDefaultComponent\"><a href=\"#5-EventHandler-setDefaultComponent\" class=\"headerlink\" title=\"5.EventHandler, setDefaultComponent\"></a>5.EventHandler, setDefaultComponent</br></h1><p>Databindingboilerplate code </br><br>So ,ButterKnifeGoogbye ButterKnifeHello DataBinding!</p>\n<p>todo </p>\n<p>###how did ButterKnife work?</p>\n<h1 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h1><ol>\n<li><a href=\"https://developer.android.com/topic/libraries/data-binding/index.html\">Data Binding Library</a></li>\n<li><a href=\"https://realm.io/cn/news/data-binding-android-boyar-mount/\">data-binding-android-boyar-mount</a> </li>\n<li><a href=\"https://www.youtube.com/watch?v=DAmMN7m3wLU\">Advanced Data Bindinding</a> Two-Way Data Binding at google io 2016</li>\n<li><a href=\"https://www.youtube.com/watch?v=NBbeQMOcnZ0\">Android Dev Summit 2015</a></li>\n<li><a href=\"http://qiita.com/izumin5210/items/2784576d86ce6b9b51e6\">Goodbye Butter Knife</a></li>\n<li><a href=\"https://github.com/google/android-ui-toolkit-demos\">Google Sample</a></li>\n</ol>\n","excerpt":"<p>Yigit Boyar 2015android Dev summitDatabinding:<br>no binding libraries will be created from now on <br>DatabindingButterKnife</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2>","more":"<h1 id=\"1-Activity\"><a href=\"#1-Activity\" class=\"headerlink\" title=\"1.Activity\"></a>1.Activity</h1><p><em>before</em><br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ExampleActivity</span> <span class=\"keyword\">extends</span> <span class=\"title\">Activity</span> </span>&#123;</div><div class=\"line\">  <span class=\"meta\">@Bind</span>(R.id.title) TextView title;</div><div class=\"line\">  <span class=\"meta\">@Bind</span>(R.id.subtitle) TextView subtitle;</div><div class=\"line\">  <span class=\"meta\">@Bind</span>(R.id.footer) TextView footer;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"meta\">@Override</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onCreate</span><span class=\"params\">(Bundle savedInstanceState)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">super</span>.onCreate(savedInstanceState);</div><div class=\"line\">    setContentView(R.layout.simple_activity);</div><div class=\"line\">    ButterKnife.bind(<span class=\"keyword\">this</span>);</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p><em>after</em><br>xml <strong>Layout</strong> tag<br><code>R.layout.smple_activity</code><br><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">layout</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">LinearLayout</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">TextView</span> <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/title\"</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">TextView</span> <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/subtitle\"</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">TextView</span> <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/footer\"</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">LinearLayout</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">layout</span>&gt;</span></div></pre></td></tr></table></figure></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ExampleActivity</span> <span class=\"keyword\">extends</span> <span class=\"title\">Activity</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">private</span> ActivitySampleBinding binding;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"meta\">@Override</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onCreate</span><span class=\"params\">(Bundle savedInstanceState)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">super</span>.onCreate(savedInstanceState);</div><div class=\"line\">    binding = DataBindingUtils.setContentView(<span class=\"keyword\">this</span>, R.layout.simple_activity);</div><div class=\"line\">    binding.title.setText(<span class=\"string\">\"I am Title\"</span>);</div><div class=\"line\">    <span class=\"comment\">//no more findViewById!!!</span></div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h1 id=\"2-Fragment\"><a href=\"#2-Fragment\" class=\"headerlink\" title=\"2.Fragment\"></a>2.Fragment</h1><p><em>before</em><br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FancyFragment</span> <span class=\"keyword\">extends</span> <span class=\"title\">Fragment</span> </span>&#123;</div><div class=\"line\">  <span class=\"meta\">@Bind</span>(R.id.button1) Button button1;</div><div class=\"line\">  <span class=\"meta\">@Bind</span>(R.id.button2) Button button2;</div><div class=\"line\">  <span class=\"meta\">@Override</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> View <span class=\"title\">onCreateView</span><span class=\"params\">(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)</span> </span>&#123;</div><div class=\"line\">    View view = inflater.inflate(R.layout.fancy_fragment, container, <span class=\"keyword\">false</span>);</div><div class=\"line\">    ButterKnife.bind(<span class=\"keyword\">this</span>, view);</div><div class=\"line\">    <span class=\"comment\">// TODO Use fields...</span></div><div class=\"line\">    <span class=\"keyword\">return</span> view;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p><em>after</em><br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FancyFragment</span> <span class=\"keyword\">extends</span> <span class=\"title\">Fragment</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">private</span> FragmentFancyBinding binding;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"meta\">@Override</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> View <span class=\"title\">onCreateView</span><span class=\"params\">(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)</span> </span>&#123;</div><div class=\"line\">    binding = DataBindingUtil.inflate(inflater,R.layout.fragment_fancy, container, <span class=\"keyword\">false</span>);</div><div class=\"line\">true  <span class=\"keyword\">return</span> binding.getRoot();</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<h1 id=\"3-ViewHolder\"><a href=\"#3-ViewHolder\" class=\"headerlink\" title=\"3.ViewHolder\"></a>3.ViewHolder</h1><p><em>before</em><br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyAdapter</span> <span class=\"keyword\">extends</span> <span class=\"title\">BaseAdapter</span> </span>&#123;</div><div class=\"line\">  <span class=\"meta\">@Override</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> View <span class=\"title\">getView</span><span class=\"params\">(<span class=\"keyword\">int</span> position, View view, ViewGroup parent)</span> </span>&#123;</div><div class=\"line\">    ViewHolder holder;</div><div class=\"line\">    <span class=\"keyword\">if</span> (view != <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">      holder = (ViewHolder) view.getTag();</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      view = inflater.inflate(R.layout.list_item_sample, parent, <span class=\"keyword\">false</span>);</div><div class=\"line\">      holder = <span class=\"keyword\">new</span> ViewHolder(view);</div><div class=\"line\">      view.setTag(holder);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    holder.name.setText(<span class=\"string\">\"John Doe\"</span>);</div><div class=\"line\">    <span class=\"comment\">// etc...</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span> view;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ViewHolder</span> </span>&#123;</div><div class=\"line\">    <span class=\"meta\">@Bind</span>(R.id.title) TextView name;</div><div class=\"line\">    <span class=\"meta\">@Bind</span>(R.id.job_title) TextView jobTitle;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">ViewHolder</span><span class=\"params\">(View view)</span> </span>&#123;</div><div class=\"line\">      ButterKnife.bind(<span class=\"keyword\">this</span>, view);</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p><em>after</em></p>\n<h3 id=\"ListView\"><a href=\"#ListView\" class=\"headerlink\" title=\"ListView\"></a>ListView</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyAdapter</span> <span class=\"keyword\">extends</span> <span class=\"title\">BaseAdapter</span> </span>&#123;</div><div class=\"line\">  <span class=\"meta\">@Override</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> View <span class=\"title\">getView</span><span class=\"params\">(<span class=\"keyword\">int</span> position, View convertView, ViewGroup parent)</span> </span>&#123;</div><div class=\"line\">      ListItemSampleBinding binding;</div><div class=\"line\">      <span class=\"keyword\">if</span> (convertView == <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">          binding = DataBindingUtil.inflate(inflater, R.layout.list_item_sample, parent, <span class=\"keyword\">false</span>);</div><div class=\"line\">          convertView = binding.getRoot();</div><div class=\"line\">          convertView.setTag(binding);</div><div class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">          binding = (ListItemSampleBinding) convertView.getTag();</div><div class=\"line\">      &#125;</div><div class=\"line\">      binding.setUser(getItem(position));</div><div class=\"line\">      <span class=\"comment\">// binding.name.setText(\"John Doe\");</span></div><div class=\"line\"></div><div class=\"line\">      <span class=\"keyword\">return</span> convertView;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"recyclerView\"><a href=\"#recyclerView\" class=\"headerlink\" title=\"recyclerView\"></a>recyclerView</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SampleRecyclerAdapter</span> <span class=\"keyword\">extends</span> <span class=\"title\">RecyclerView</span>.<span class=\"title\">Adapter</span>&lt;<span class=\"title\">SampleRecyclerAdapter</span>.<span class=\"title\">BindingHolder</span>&gt; </span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"keyword\">public</span> RegisterableDeviceListAdapter.<span class=\"function\">ViewHolder <span class=\"title\">onCreateViewHolder</span><span class=\"params\">(ViewGroup parent, <span class=\"keyword\">int</span> viewType)</span> </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">final</span> View v = LayoutInflater.from(parent.getContext()).inflate(R.layout.list_item_sample, parent, <span class=\"keyword\">false</span>);</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> BindingHolder(v);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"meta\">@Override</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onBindViewHolder</span><span class=\"params\">(BindingHolder holder, <span class=\"keyword\">int</span> position)</span> </span>&#123;</div><div class=\"line\">    holder.getBinding().setVariable(BR.user, getItem(position));</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">BindingHolder</span> <span class=\"keyword\">extends</span> <span class=\"title\">RecyclerView</span>.<span class=\"title\">ViewHolder</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> ViewDataBinding binding;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">BindingHolder</span><span class=\"params\">(View itemView)</span> </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">super</span>(itemView);</div><div class=\"line\">      binding = DataBindingUtil.bind(itemView)</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> ViewDataBinding <span class=\"title\">getBinding</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> binding;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h1 id=\"4-CustomView\"><a href=\"#4-CustomView\" class=\"headerlink\" title=\"4.CustomView\"></a>4.CustomView</h1><p>View(ViewGroup)ButterKnifeViewGroupfindViewById,Databinding<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Pagination</span> <span class=\"keyword\">extends</span> <span class=\"title\">RelativeLayout</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">private</span> ViewPaginationBinding binding;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Pagination</span><span class=\"params\">(Context context)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>(context, <span class=\"keyword\">null</span>);</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Pagination</span><span class=\"params\">(Context context, AttributeSet attrs)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">super</span>(context, attrs);</div><div class=\"line\">    binding = DataBindingUtil.inflate(LayoutInflater.from(context), R.layout.view_pagination, <span class=\"keyword\">this</span>, <span class=\"keyword\">true</span>);</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">setListener</span><span class=\"params\">(Pagination paginate, View target, OnPaginationClickListener listener)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (listener != <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">      target.setOnClickListener(_v -&gt; listener.onClick(paginate));</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"meta\">@BindingAdapter</span>(&#123;<span class=\"string\">\"android:onPrevButtonClicked\"</span>&#125;)</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">setPrevClickListener</span><span class=\"params\">(Pagination view, OnPaginationClickListener listener)</span> </span>&#123;</div><div class=\"line\">    setListener(view, view.binding.btnPrevPage, listener);</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"meta\">@BindingAdapter</span>(&#123;<span class=\"string\">\"android:onNextButtonClicked\"</span>&#125;)</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">setNextClickListener</span><span class=\"params\">(Pagination view, OnPaginationClickListener listener)</span> </span>&#123;</div><div class=\"line\">    setListener(view, view.binding.btnNextPage, listener);</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">OnPaginationClickListener</span> </span>&#123;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">onClick</span><span class=\"params\">(Pagination pagination)</span></span>;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<h1 id=\"5-EventHandler-setDefaultComponent\"><a href=\"#5-EventHandler-setDefaultComponent\" class=\"headerlink\" title=\"5.EventHandler, setDefaultComponent\"></a>5.EventHandler, setDefaultComponent</br></h1><p>Databindingboilerplate code </br><br>So ,ButterKnifeGoogbye ButterKnifeHello DataBinding!</p>\n<p>todo </p>\n<p>###how did ButterKnife work?</p>\n<h1 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h1><ol>\n<li><a href=\"https://developer.android.com/topic/libraries/data-binding/index.html\">Data Binding Library</a></li>\n<li><a href=\"https://realm.io/cn/news/data-binding-android-boyar-mount/\">data-binding-android-boyar-mount</a> </li>\n<li><a href=\"https://www.youtube.com/watch?v=DAmMN7m3wLU\">Advanced Data Bindinding</a> Two-Way Data Binding at google io 2016</li>\n<li><a href=\"https://www.youtube.com/watch?v=NBbeQMOcnZ0\">Android Dev Summit 2015</a></li>\n<li><a href=\"http://qiita.com/izumin5210/items/2784576d86ce6b9b51e6\">Goodbye Butter Knife</a></li>\n<li><a href=\"https://github.com/google/android-ui-toolkit-demos\">Google Sample</a></li>\n</ol>"},{"title":"ThemeStyle","date":"2016-10-10T11:35:32.000Z","_content":"\n\n\nThemeStyles\n\nUsing Themes and styles without going crazy\n\n#### 1. Styles\n\n##### 1.1 layoutStyle\n\n```xml\n<View android:background= \"#ff0000\" />\n```\n\n\n\n```xml\n<View style= \"@Style/MyStyle\" />\n\n<Style name = \"MyStyle\">\n\t<item name = \"android:background\">#ff0000</item>\n</Style>\n```\n\n**ViewStylelayoutlayoutView\n\n<!--more-->\n\n##### 1.2 Style Inheritance\n\nStyle\n\nparent style nameparentparent\n\n```xml\n<style name = \"Parent\"/>\n```\n\nExplicit child\n\n```xml\n<style name = \"Child\" parent = \"Parent\">\n```\n\n  Implicit Child\n\n```xml\n<style name = \"Parent.Child\"/>\n```\n\nExplicit Parent  \n\nExplicit ChildChild name  \n\nViewStyle,TextView\n\n```xml\n<TextView>\n  android:textColor = \"#ffffff\"\n\tstyle=\"@style/SomeStyle\"\n  android:textAppearance = \"@style/MyText\"\n</TextView>\n```\n\nTextViewTextAppearancetextColortextSizeattributesViewStylestylesattributes\n\n> android:textColor >> SomeStyleandroid:textColor>>MyTextandroid:textColor\n\n> TextAppearance parent\n\n```xml\n<style name = \"MyText\" parent=\"TextAppearance.Appcompat\">\n\t<item name = \"android:TextColor\">#F08</item>\n</style>\n```\n\nstylestyleattributeViewattributeTextViewattribute textSize = 0parentparent styleTextAppearanceThemeTextView\n\n- ####2. Themes\n  AndroidTheme\"Theme.\"color attributes Window attributesThemesStylesthemesApplication,ActivityWidgetTheme\n\n  Theme\n\n  ```xml\n  <style name = \"Theme\">\n  \t<item name = android:statusBarColor>#ff0000</item>\n  </style>\n  ```\n\n  Style\n\n  ```xml\n  <Style name = \"Style\">\n  \t<item name = \"android:background\">#ff0000</item>\n  </Style>\n  ```\n\n  \n\n  stylesViewViewattrsAttributeSets\n\n  ThemeStyle\n\n  Themedefault widget styleStyleTheme(?attr:selectableItemBackground)\n  Themedefault widget style:\n\n  ```xml\n  <style name= \"MyTheme\" parent=\"Theme.AppCompat.Light\">\n    <item name=\"android:editTextStyle\">@style/MyEditTextStyle</item>\n  </style>\n  ```\n  AppTheme\n\n\n  2.1 Theme\n\n  :\n\n  1.Manifest\n\n```xml\n  <application\n    android:theme=\"@style/Theme.AppCompat\" />\n\n  \n  <activity\n    android:theme=\"@style/Theme.AppCompat.Light\"        />\n```\n\n  activtyTheme override ApplicationTheme\n\n  2. View\n\n  LollipopView Theming\n\n```xml\n  <Toolbar\n     android:theme=\"@style/ThemeOverlay.AppCompat.Dark.ActionBar\"\n     app:popupTheme=\"@style/ThemeOverlay.AppCompa.Light\"/>      \n```\n\n  ViewThemeViewChildrenViewTheme\n\n  HoloHolo.Light.DarkActionBarActionBarThemeToolbar\n\n  ### 3 .AppCompat\n\n  : \n\n- Material on all devices ,AppCompat21Theme.Material\n- Baseline themes/styles AppCompat AppCompat\n    - Enable View theming pre-Lollipop \n    - ColorPrimary , ColorAccentattributes(backPorted by AppCompat)Widget\n    - ThemeWidget\n```xml\n<style name=\"AppTheme\" parent = \"Theme.AppCompat\">\n<item name=\"android:spinnerItemStyle\">@sytle/MySpinnerStyle</item>\n</style>\n```\n\n- \n\n```xml\n<style name = \"AttrTheme\" parent =\"Theme.AppCompat\">\n<item name =\"selectableItemBackground\">@drawable/bg</item>\n</style>\n\n\n<Button android:background=?attr/selectableItemBackground\"/>\n```\n\nDrawable\n\n- android:theme: API 7+(View)API 11+(ViewView) \n\nView themingAPI 21AppCompat\n\n### 4 .  ?attr\n\n> ?android:attr/selectableItemBackground\n\n\n\n?  :  we're doing a theme lookup\n\nandroid:  were looking up something within the android namespace\n\nattr/  : we're looking for an attribute()\n\nselectableItemBackground: The name of the atribute we're looking up\n\nattr/\n\n> ?android:selectableItemBackground\n\n\n\n```xml\n<style name=\"MyTheme\">\n\t<item name = \"android:colorPrimary\">@color/red</item>\n</style>\n```\n\nandroid:ColorPromaryLollipop\n\n```xml\n<syle name = \"MyTheme\" parent=\"Theme.AppCompat\">\n\t<item name = \"colorPrimary\">@color/red</item>\n</syle>\n```\n\nandroid: AppCompatAPI21\n\n\n\n```xml\nvalues/attrs.xml\n<attr name:\"myAttribute\" format=\"dimension\"/>\n\nvalues/themes.xml\n<style name = \"MyTheme\" parent = \"Theme.AppCompat\">\n\t<item name=\"myAttribute\">4dp</item>  Theme\n</style>\n\nvalues/styles.xml\n<style name=\"MyStyle\">\n\t<item name=\"android:padding\">?attr/myAttribute</item>\n</style>\n\n\nlayout?attrThemeattribute\n```\n\nandroid nameSpaceattribute Namegloballibraryattribute Name\n\nStyle?attrTheme\n\n\n\n### 5 .Theme\n\n```java\ncontext.getTheme().resolveAttribute(R.attr.dialogTheme,outValue,true)\n  \nView\n  TypedArray a = context.obtainStyledAttributes(attrs,com.android.internal.R.styleable.ImageView,defStyleAttr,defStyleRes)\n  \nint alpha = a.getInt(\n  com.android.internal.R.styleable.ImageView_drawableAlpha,255)   \n```\n\nActivitysetTheme(int themeResId)Theme,ThemeapplyActivityonCreate()setTheme(manifestTheme)\n\n\n\n### 6. v21\n\n```xml\nvalues/styles.xml\n<style name=\"BaseToolbar\"/>\n\nvalues-v21/styles.xml\n<style name= \"BaseToolbar\">\n\t<item name = \"android:elevation\">4dp</item>\n</style>\nelevation21apilint\nvalues/styles.xml\n<style name = \"Toolbar\" parent = \"BaseToolbar\"/>\nlintToolbar\n```\n\nThemethemeTheme\n\n### 7 . ThemeOverlay\n\n```JAVA\nThemeOverlay.Material.Light\nThemeOverlay.Material.Dark\n//etc ...   \n```\n\nThemeTheme.Material.Lightcolor relevant to a light ThemeThemewindow AttributesThemeattribute\n\n### 8. \n\n1. Themestyleparent\n\n\n```xml\nAppTheme\n<item name = \"android:editTextStyle\">@style/MyEditTextStyle</item>\n\n<style name= \"MyEditTextStyle\">\n\t<item name= \"android:fontFamily\">\n  sans-serif-medium\n  </item>\n</style>\n```\nEditText\n\n2. defStyleAttr vs defStyleRes\n\n \n\n```java\nObtainStyledAttributes(AttributeSet set,int []attrs,\n int defStyleAttr,int defStyleRes)\n```\n\n\n\n>  defStyleAttr: The attr in your theme which points to the default style\n>\n>  eg: R.attr.editTextStyle\n>\n>  defStyleRes: The resource ID of the default style\n>\n>  eg:R.style.Widget_Material_EditText\n\nObtainStyledAttributesValue\n\n```java\n1. Value in the AttributeSet\n2. Value in the explicit style\n3. Default style specified in defStyleRes\n4. Default style specified in defStyleAttr\n5. Base value in this theme     \n```\nmanifests\n\n```xml\n<Style name = \"AppTheme\" parent = \"Theme.AppCompat\">\n\t<item name = \"android:background\">...</item>\n</Style>\n```\n\n\n\n> Any View which doesn't have a background set ,will use the theme's value ,  SHIT!\n\n\n\n\n### 9. \n\n```java\nError retrieving parent for item: No resource found that matches the given name\n '@android:style/TextAppearance.Holo.Widget.ActionBar.Title'\n```\n\n\n\n### 10. \n\n```java\nContext themedContext = \n  new ContextThemeWrapper(baseContext,R.style.MyTheme);\n\nView view = LayoutInflator.form(themedContext)\n  \t\t.inflate(R.layout.some_layout,null);\n//\nView view = new View(themedContext);\n//ViewMyTheme\n```\n\nAppComPatAPI 21 \n\nContextThemeWrapper : Added in API level 1\n\nAppCompat2014 [](https://chris.banes.me/2014/11/12/theme-vs-style/)\n\n## reference\n\n- [Daniel Lew](https://www.youtube.com/watch?v=Jr8hJdVGHAk)\n- [View Constructor](http://blog.danlew.net/2016/07/19/a-deep-dive-into-android-view-constructors/)\n- [IO 2016](https://www.youtube.com/watch?v=TIHXGwRTMWI)\n\n\n\n\n\n\n","source":"_posts/theme-versus-style.md","raw":"---\ntitle: ThemeStyle\ndate: 2016-10-10 19:35:32\ncategories: blog\ntags: [android]\n---\n\n\n\nThemeStyles\n\nUsing Themes and styles without going crazy\n\n#### 1. Styles\n\n##### 1.1 layoutStyle\n\n```xml\n<View android:background= \"#ff0000\" />\n```\n\n\n\n```xml\n<View style= \"@Style/MyStyle\" />\n\n<Style name = \"MyStyle\">\n\t<item name = \"android:background\">#ff0000</item>\n</Style>\n```\n\n**ViewStylelayoutlayoutView\n\n<!--more-->\n\n##### 1.2 Style Inheritance\n\nStyle\n\nparent style nameparentparent\n\n```xml\n<style name = \"Parent\"/>\n```\n\nExplicit child\n\n```xml\n<style name = \"Child\" parent = \"Parent\">\n```\n\n  Implicit Child\n\n```xml\n<style name = \"Parent.Child\"/>\n```\n\nExplicit Parent  \n\nExplicit ChildChild name  \n\nViewStyle,TextView\n\n```xml\n<TextView>\n  android:textColor = \"#ffffff\"\n\tstyle=\"@style/SomeStyle\"\n  android:textAppearance = \"@style/MyText\"\n</TextView>\n```\n\nTextViewTextAppearancetextColortextSizeattributesViewStylestylesattributes\n\n> android:textColor >> SomeStyleandroid:textColor>>MyTextandroid:textColor\n\n> TextAppearance parent\n\n```xml\n<style name = \"MyText\" parent=\"TextAppearance.Appcompat\">\n\t<item name = \"android:TextColor\">#F08</item>\n</style>\n```\n\nstylestyleattributeViewattributeTextViewattribute textSize = 0parentparent styleTextAppearanceThemeTextView\n\n- ####2. Themes\n  AndroidTheme\"Theme.\"color attributes Window attributesThemesStylesthemesApplication,ActivityWidgetTheme\n\n  Theme\n\n  ```xml\n  <style name = \"Theme\">\n  \t<item name = android:statusBarColor>#ff0000</item>\n  </style>\n  ```\n\n  Style\n\n  ```xml\n  <Style name = \"Style\">\n  \t<item name = \"android:background\">#ff0000</item>\n  </Style>\n  ```\n\n  \n\n  stylesViewViewattrsAttributeSets\n\n  ThemeStyle\n\n  Themedefault widget styleStyleTheme(?attr:selectableItemBackground)\n  Themedefault widget style:\n\n  ```xml\n  <style name= \"MyTheme\" parent=\"Theme.AppCompat.Light\">\n    <item name=\"android:editTextStyle\">@style/MyEditTextStyle</item>\n  </style>\n  ```\n  AppTheme\n\n\n  2.1 Theme\n\n  :\n\n  1.Manifest\n\n```xml\n  <application\n    android:theme=\"@style/Theme.AppCompat\" />\n\n  \n  <activity\n    android:theme=\"@style/Theme.AppCompat.Light\"        />\n```\n\n  activtyTheme override ApplicationTheme\n\n  2. View\n\n  LollipopView Theming\n\n```xml\n  <Toolbar\n     android:theme=\"@style/ThemeOverlay.AppCompat.Dark.ActionBar\"\n     app:popupTheme=\"@style/ThemeOverlay.AppCompa.Light\"/>      \n```\n\n  ViewThemeViewChildrenViewTheme\n\n  HoloHolo.Light.DarkActionBarActionBarThemeToolbar\n\n  ### 3 .AppCompat\n\n  : \n\n- Material on all devices ,AppCompat21Theme.Material\n- Baseline themes/styles AppCompat AppCompat\n    - Enable View theming pre-Lollipop \n    - ColorPrimary , ColorAccentattributes(backPorted by AppCompat)Widget\n    - ThemeWidget\n```xml\n<style name=\"AppTheme\" parent = \"Theme.AppCompat\">\n<item name=\"android:spinnerItemStyle\">@sytle/MySpinnerStyle</item>\n</style>\n```\n\n- \n\n```xml\n<style name = \"AttrTheme\" parent =\"Theme.AppCompat\">\n<item name =\"selectableItemBackground\">@drawable/bg</item>\n</style>\n\n\n<Button android:background=?attr/selectableItemBackground\"/>\n```\n\nDrawable\n\n- android:theme: API 7+(View)API 11+(ViewView) \n\nView themingAPI 21AppCompat\n\n### 4 .  ?attr\n\n> ?android:attr/selectableItemBackground\n\n\n\n?  :  we're doing a theme lookup\n\nandroid:  were looking up something within the android namespace\n\nattr/  : we're looking for an attribute()\n\nselectableItemBackground: The name of the atribute we're looking up\n\nattr/\n\n> ?android:selectableItemBackground\n\n\n\n```xml\n<style name=\"MyTheme\">\n\t<item name = \"android:colorPrimary\">@color/red</item>\n</style>\n```\n\nandroid:ColorPromaryLollipop\n\n```xml\n<syle name = \"MyTheme\" parent=\"Theme.AppCompat\">\n\t<item name = \"colorPrimary\">@color/red</item>\n</syle>\n```\n\nandroid: AppCompatAPI21\n\n\n\n```xml\nvalues/attrs.xml\n<attr name:\"myAttribute\" format=\"dimension\"/>\n\nvalues/themes.xml\n<style name = \"MyTheme\" parent = \"Theme.AppCompat\">\n\t<item name=\"myAttribute\">4dp</item>  Theme\n</style>\n\nvalues/styles.xml\n<style name=\"MyStyle\">\n\t<item name=\"android:padding\">?attr/myAttribute</item>\n</style>\n\n\nlayout?attrThemeattribute\n```\n\nandroid nameSpaceattribute Namegloballibraryattribute Name\n\nStyle?attrTheme\n\n\n\n### 5 .Theme\n\n```java\ncontext.getTheme().resolveAttribute(R.attr.dialogTheme,outValue,true)\n  \nView\n  TypedArray a = context.obtainStyledAttributes(attrs,com.android.internal.R.styleable.ImageView,defStyleAttr,defStyleRes)\n  \nint alpha = a.getInt(\n  com.android.internal.R.styleable.ImageView_drawableAlpha,255)   \n```\n\nActivitysetTheme(int themeResId)Theme,ThemeapplyActivityonCreate()setTheme(manifestTheme)\n\n\n\n### 6. v21\n\n```xml\nvalues/styles.xml\n<style name=\"BaseToolbar\"/>\n\nvalues-v21/styles.xml\n<style name= \"BaseToolbar\">\n\t<item name = \"android:elevation\">4dp</item>\n</style>\nelevation21apilint\nvalues/styles.xml\n<style name = \"Toolbar\" parent = \"BaseToolbar\"/>\nlintToolbar\n```\n\nThemethemeTheme\n\n### 7 . ThemeOverlay\n\n```JAVA\nThemeOverlay.Material.Light\nThemeOverlay.Material.Dark\n//etc ...   \n```\n\nThemeTheme.Material.Lightcolor relevant to a light ThemeThemewindow AttributesThemeattribute\n\n### 8. \n\n1. Themestyleparent\n\n\n```xml\nAppTheme\n<item name = \"android:editTextStyle\">@style/MyEditTextStyle</item>\n\n<style name= \"MyEditTextStyle\">\n\t<item name= \"android:fontFamily\">\n  sans-serif-medium\n  </item>\n</style>\n```\nEditText\n\n2. defStyleAttr vs defStyleRes\n\n \n\n```java\nObtainStyledAttributes(AttributeSet set,int []attrs,\n int defStyleAttr,int defStyleRes)\n```\n\n\n\n>  defStyleAttr: The attr in your theme which points to the default style\n>\n>  eg: R.attr.editTextStyle\n>\n>  defStyleRes: The resource ID of the default style\n>\n>  eg:R.style.Widget_Material_EditText\n\nObtainStyledAttributesValue\n\n```java\n1. Value in the AttributeSet\n2. Value in the explicit style\n3. Default style specified in defStyleRes\n4. Default style specified in defStyleAttr\n5. Base value in this theme     \n```\nmanifests\n\n```xml\n<Style name = \"AppTheme\" parent = \"Theme.AppCompat\">\n\t<item name = \"android:background\">...</item>\n</Style>\n```\n\n\n\n> Any View which doesn't have a background set ,will use the theme's value ,  SHIT!\n\n\n\n\n### 9. \n\n```java\nError retrieving parent for item: No resource found that matches the given name\n '@android:style/TextAppearance.Holo.Widget.ActionBar.Title'\n```\n\n\n\n### 10. \n\n```java\nContext themedContext = \n  new ContextThemeWrapper(baseContext,R.style.MyTheme);\n\nView view = LayoutInflator.form(themedContext)\n  \t\t.inflate(R.layout.some_layout,null);\n//\nView view = new View(themedContext);\n//ViewMyTheme\n```\n\nAppComPatAPI 21 \n\nContextThemeWrapper : Added in API level 1\n\nAppCompat2014 [](https://chris.banes.me/2014/11/12/theme-vs-style/)\n\n## reference\n\n- [Daniel Lew](https://www.youtube.com/watch?v=Jr8hJdVGHAk)\n- [View Constructor](http://blog.danlew.net/2016/07/19/a-deep-dive-into-android-view-constructors/)\n- [IO 2016](https://www.youtube.com/watch?v=TIHXGwRTMWI)\n\n\n\n\n\n\n","slug":"theme-versus-style","published":1,"updated":"2017-04-23T10:52:38.816Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj50afgyw0039i4vrp6zzs2hr","content":"<p>ThemeStyles</p>\n<p>Using Themes and styles without going crazy</p>\n<h4 id=\"1-Styles\"><a href=\"#1-Styles\" class=\"headerlink\" title=\"1. Styles\"></a>1. Styles</h4><h5 id=\"1-1-layoutStyle\"><a href=\"#1-1-layoutStyle\" class=\"headerlink\" title=\"1.1 layoutStyle\"></a>1.1 layoutStyle</h5><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">View</span> <span class=\"attr\">android:background</span>= <span class=\"string\">\"#ff0000\"</span> /&gt;</span></div></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">View</span> <span class=\"attr\">style</span>= <span class=\"string\">\"@Style/MyStyle\"</span> /&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">Style</span> <span class=\"attr\">name</span> = <span class=\"string\">\"MyStyle\"</span>&gt;</span><span class=\"xml\"></div><div class=\"line\">true<span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span> = <span class=\"string\">\"android:background\"</span>&gt;</span>#ff0000<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></div><div class=\"line\"></span><span class=\"tag\">&lt;/<span class=\"name\">Style</span>&gt;</span></div></pre></td></tr></table></figure>\n<p><em></em>ViewStylelayoutlayoutView</p>\n<a id=\"more\"></a>\n<h5 id=\"1-2-Style-Inheritance\"><a href=\"#1-2-Style-Inheritance\" class=\"headerlink\" title=\"1.2 Style Inheritance\"></a>1.2 Style Inheritance</h5><p>Style</p>\n<p>parent style nameparentparent</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">name</span> = <span class=\"string\">\"Parent\"</span>/&gt;</span><span class=\"undefined\"></span></div></pre></td></tr></table></figure>\n<p>Explicit child</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">name</span> = <span class=\"string\">\"Child\"</span> <span class=\"attr\">parent</span> = <span class=\"string\">\"Parent\"</span>&gt;</span><span class=\"undefined\"></span></div></pre></td></tr></table></figure>\n<p>  Implicit Child</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">name</span> = <span class=\"string\">\"Parent.Child\"</span>/&gt;</span><span class=\"undefined\"></span></div></pre></td></tr></table></figure>\n<p>Explicit Parent  </p>\n<p>Explicit ChildChild name  </p>\n<p>ViewStyle,TextView</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">TextView</span>&gt;</span></div><div class=\"line\">  android:textColor = \"#ffffff\"</div><div class=\"line\">truestyle=\"@style/SomeStyle\"</div><div class=\"line\">  android:textAppearance = \"@style/MyText\"</div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">TextView</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>TextViewTextAppearancetextColortextSizeattributesViewStylestylesattributes</p>\n<blockquote>\n<p>android:textColor &gt;&gt; SomeStyleandroid:textColor&gt;&gt;MyTextandroid:textColor</p>\n<p>TextAppearance parent</p>\n</blockquote>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">name</span> = <span class=\"string\">\"MyText\"</span> <span class=\"attr\">parent</span>=<span class=\"string\">\"TextAppearance.Appcompat\"</span>&gt;</span><span class=\"xml\"></div><div class=\"line\">true<span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span> = <span class=\"string\">\"android:TextColor\"</span>&gt;</span>#F08<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></div><div class=\"line\"></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>stylestyleattributeViewattributeTextViewattribute textSize = 0parentparent styleTextAppearanceThemeTextView</p>\n<ul>\n<li><p>####2. Themes<br>AndroidThemeTheme.color attributes Window attributesThemesStylesthemesApplication,ActivityWidgetTheme</p>\n<p>Theme</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">name</span> = <span class=\"string\">\"Theme\"</span>&gt;</span><span class=\"xml\"></div><div class=\"line\">true<span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span> = <span class=\"string\">android:statusBarColor</span>&gt;</span>#ff0000<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></div><div class=\"line\"></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>Style</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">Style</span> <span class=\"attr\">name</span> = <span class=\"string\">\"Style\"</span>&gt;</span><span class=\"xml\"></div><div class=\"line\">true<span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span> = <span class=\"string\">\"android:background\"</span>&gt;</span>#ff0000<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></div><div class=\"line\"></span><span class=\"tag\">&lt;/<span class=\"name\">Style</span>&gt;</span></div></pre></td></tr></table></figure>\n<p></p>\n<p>stylesViewViewattrsAttributeSets</p>\n<p>ThemeStyle</p>\n<p>Themedefault widget styleStyleTheme(?attr:selectableItemBackground)<br>Themedefault widget style:</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">name</span>= <span class=\"string\">\"MyTheme\"</span> <span class=\"attr\">parent</span>=<span class=\"string\">\"Theme.AppCompat.Light\"</span>&gt;</span><span class=\"xml\"></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">\"android:editTextStyle\"</span>&gt;</span>@style/MyEditTextStyle<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></div><div class=\"line\"></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>AppTheme</p>\n</li>\n</ul>\n<p>  2.1 Theme</p>\n<p>  :</p>\n<p>  1.Manifest</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">application</span></div><div class=\"line\">  <span class=\"attr\">android:theme</span>=<span class=\"string\">\"@style/Theme.AppCompat\"</span> /&gt;</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">activity</span></div><div class=\"line\">  <span class=\"attr\">android:theme</span>=<span class=\"string\">\"@style/Theme.AppCompat.Light\"</span>        /&gt;</span></div></pre></td></tr></table></figure>\n<p>  activtyTheme override ApplicationTheme</p>\n<ol>\n<li><p>View</p>\n<p>LollipopView Theming</p>\n</li>\n</ol>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">Toolbar</span></div><div class=\"line\">   <span class=\"attr\">android:theme</span>=<span class=\"string\">\"@style/ThemeOverlay.AppCompat.Dark.ActionBar\"</span></div><div class=\"line\">   <span class=\"attr\">app:popupTheme</span>=<span class=\"string\">\"@style/ThemeOverlay.AppCompa.Light\"</span>/&gt;</span></div></pre></td></tr></table></figure>\n<p>  ViewThemeViewChildrenViewTheme</p>\n<p>  HoloHolo.Light.DarkActionBarActionBarThemeToolbar</p>\n<h3 id=\"3-AppCompat\"><a href=\"#3-AppCompat\" class=\"headerlink\" title=\"3 .AppCompat\"></a>3 .AppCompat</h3><p>  : </p>\n<ul>\n<li>Material on all devices ,AppCompat21Theme.Material</li>\n<li><p>Baseline themes/styles AppCompat AppCompat</p>\n<ul>\n<li>Enable View theming pre-Lollipop </li>\n<li>ColorPrimary , ColorAccentattributes(backPorted by AppCompat)Widget</li>\n<li>ThemeWidget<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">name</span>=<span class=\"string\">\"AppTheme\"</span> <span class=\"attr\">parent</span> = <span class=\"string\">\"Theme.AppCompat\"</span>&gt;</span><span class=\"xml\"></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">\"android:spinnerItemStyle\"</span>&gt;</span>@sytle/MySpinnerStyle<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></div><div class=\"line\"></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></div></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n<li><p></p>\n</li>\n</ul>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">name</span> = <span class=\"string\">\"AttrTheme\"</span> <span class=\"attr\">parent</span> =<span class=\"string\">\"Theme.AppCompat\"</span>&gt;</span><span class=\"xml\"></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span> =<span class=\"string\">\"selectableItemBackground\"</span>&gt;</span>@drawable/bg<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></div><div class=\"line\"></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">Button</span> <span class=\"attr\">android:background</span>=<span class=\"string\">?attr/selectableItemBackground</span>\"/&gt;</span></div></pre></td></tr></table></figure>\n<p>Drawable</p>\n<ul>\n<li>android:theme: API 7+(View)API 11+(ViewView) </li>\n</ul>\n<p>View themingAPI 21AppCompat</p>\n<h3 id=\"4-attr\"><a href=\"#4-attr\" class=\"headerlink\" title=\"4 .  ?attr\"></a>4 .  ?attr</h3><blockquote>\n<p>?android:attr/selectableItemBackground</p>\n</blockquote>\n<p></p>\n<p>?  :  were doing a theme lookup</p>\n<p>android:  were looking up something within the android namespace</p>\n<p>attr/  : were looking for an attribute()</p>\n<p>selectableItemBackground: The name of the atribute were looking up</p>\n<p>attr/</p>\n<blockquote>\n<p>?android:selectableItemBackground</p>\n</blockquote>\n<p></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">name</span>=<span class=\"string\">\"MyTheme\"</span>&gt;</span><span class=\"xml\"></div><div class=\"line\">true<span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span> = <span class=\"string\">\"android:colorPrimary\"</span>&gt;</span>@color/red<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></div><div class=\"line\"></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>android:ColorPromaryLollipop</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">syle</span> <span class=\"attr\">name</span> = <span class=\"string\">\"MyTheme\"</span> <span class=\"attr\">parent</span>=<span class=\"string\">\"Theme.AppCompat\"</span>&gt;</span></div><div class=\"line\">true<span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span> = <span class=\"string\">\"colorPrimary\"</span>&gt;</span>@color/red<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">syle</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>android: AppCompatAPI21</p>\n<p></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\">values/attrs.xml</div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">attr</span> <span class=\"attr\">name:</span>\"<span class=\"attr\">myAttribute</span>\" <span class=\"attr\">format</span>=<span class=\"string\">\"dimension\"</span>/&gt;</span></div><div class=\"line\"></div><div class=\"line\">values/themes.xml</div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">name</span> = <span class=\"string\">\"MyTheme\"</span> <span class=\"attr\">parent</span> = <span class=\"string\">\"Theme.AppCompat\"</span>&gt;</span><span class=\"xml\"></div><div class=\"line\">true<span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">\"myAttribute\"</span>&gt;</span>4dp<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span>  Theme</div><div class=\"line\"></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\">values/styles.xml</div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">name</span>=<span class=\"string\">\"MyStyle\"</span>&gt;</span><span class=\"xml\"></div><div class=\"line\">true<span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">\"android:padding\"</span>&gt;</span>?attr/myAttribute<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></div><div class=\"line\"></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">layout?attrThemeattribute</div></pre></td></tr></table></figure>\n<p>android nameSpaceattribute Namegloballibraryattribute Name</p>\n<p>Style?attrTheme</p>\n<h3 id=\"5-Theme\"><a href=\"#5-Theme\" class=\"headerlink\" title=\"5 .Theme\"></a>5 .Theme</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">context.getTheme().resolveAttribute(R.attr.dialogTheme,outValue,<span class=\"keyword\">true</span>)</div><div class=\"line\">  </div><div class=\"line\">View</div><div class=\"line\">  TypedArray a = context.obtainStyledAttributes(attrs,com.android.internal.R.styleable.ImageView,defStyleAttr,defStyleRes)</div><div class=\"line\">  </div><div class=\"line\"><span class=\"keyword\">int</span> alpha = a.getInt(</div><div class=\"line\">  com.android.internal.R.styleable.ImageView_drawableAlpha,<span class=\"number\">255</span>)</div></pre></td></tr></table></figure>\n<p>ActivitysetTheme(int themeResId)Theme,ThemeapplyActivityonCreate()setTheme(manifestTheme)</p>\n<h3 id=\"6-v21\"><a href=\"#6-v21\" class=\"headerlink\" title=\"6. v21\"></a>6. v21</h3><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">values/styles.xml</div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">name</span>=<span class=\"string\">\"BaseToolbar\"</span>/&gt;</span><span class=\"xml\"></div><div class=\"line\"></div><div class=\"line\">values-v21/styles.xml</div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">name</span>= <span class=\"string\">\"BaseToolbar\"</span>&gt;</span><span class=\"xml\"></div><div class=\"line\">true<span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span> = <span class=\"string\">\"android:elevation\"</span>&gt;</span>4dp<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></div><div class=\"line\"></span></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></div><div class=\"line\">elevation21apilint</div><div class=\"line\">values/styles.xml</div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">name</span> = <span class=\"string\">\"Toolbar\"</span> <span class=\"attr\">parent</span> = <span class=\"string\">\"BaseToolbar\"</span>/&gt;</span><span class=\"undefined\"></div><div class=\"line\">lintToolbar</span></div></pre></td></tr></table></figure>\n<p>ThemethemeTheme</p>\n<h3 id=\"7-ThemeOverlay\"><a href=\"#7-ThemeOverlay\" class=\"headerlink\" title=\"7 . ThemeOverlay\"></a>7 . ThemeOverlay</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">ThemeOverlay.Material.Light</div><div class=\"line\">ThemeOverlay.Material.Dark</div><div class=\"line\"><span class=\"comment\">//etc ...</span></div></pre></td></tr></table></figure>\n<p>ThemeTheme.Material.Lightcolor relevant to a light ThemeThemewindow AttributesThemeattribute</p>\n<h3 id=\"8-\"><a href=\"#8-\" class=\"headerlink\" title=\"8. \"></a>8. </h3><ol>\n<li>Themestyleparent</li>\n</ol>\n<p><br><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">AppTheme</div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span> = <span class=\"string\">\"android:editTextStyle\"</span>&gt;</span>@style/MyEditTextStyle<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">name</span>= <span class=\"string\">\"MyEditTextStyle\"</span>&gt;</span><span class=\"xml\"></div><div class=\"line\">true<span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>= <span class=\"string\">\"android:fontFamily\"</span>&gt;</span></div><div class=\"line\">  sans-serif-medium</div><div class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></div><div class=\"line\"></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></div></pre></td></tr></table></figure></p>\n<p>EditText</p>\n<ol>\n<li>defStyleAttr vs defStyleRes</li>\n</ol>\n<p> </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">ObtainStyledAttributes(AttributeSet set,<span class=\"keyword\">int</span> []attrs,</div><div class=\"line\"> <span class=\"keyword\">int</span> defStyleAttr,<span class=\"keyword\">int</span> defStyleRes)</div></pre></td></tr></table></figure>\n<p></p>\n<blockquote>\n<p> defStyleAttr: The attr in your theme which points to the default style</p>\n<p> eg: R.attr.editTextStyle</p>\n<p> defStyleRes: The resource ID of the default style</p>\n<p> eg:R.style.Widget_Material_EditText</p>\n</blockquote>\n<p>ObtainStyledAttributesValue</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"number\">1</span>. Value in the AttributeSet</div><div class=\"line\"><span class=\"number\">2</span>. Value in the explicit style</div><div class=\"line\"><span class=\"number\">3</span>. Default style specified in defStyleRes</div><div class=\"line\"><span class=\"number\">4</span>. Default style specified in defStyleAttr</div><div class=\"line\"><span class=\"number\">5</span>. Base value in <span class=\"keyword\">this</span> theme</div></pre></td></tr></table></figure>\n<p>manifests</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">Style</span> <span class=\"attr\">name</span> = <span class=\"string\">\"AppTheme\"</span> <span class=\"attr\">parent</span> = <span class=\"string\">\"Theme.AppCompat\"</span>&gt;</span><span class=\"xml\"></div><div class=\"line\">true<span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span> = <span class=\"string\">\"android:background\"</span>&gt;</span>...<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></div><div class=\"line\"></span><span class=\"tag\">&lt;/<span class=\"name\">Style</span>&gt;</span></div></pre></td></tr></table></figure>\n<p></p>\n<blockquote>\n<p>Any View which doesnt have a background set ,will use the themes value ,  SHIT!</p>\n</blockquote>\n<h3 id=\"9-\"><a href=\"#9-\" class=\"headerlink\" title=\"9. \"></a>9. </h3><p><br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">Error retrieving parent <span class=\"keyword\">for</span> item: No resource found that matches the given name</div><div class=\"line\"> <span class=\"string\">'@android:style/TextAppearance.Holo.Widget.ActionBar.Title'</span></div></pre></td></tr></table></figure></p>\n<h3 id=\"10-\"><a href=\"#10-\" class=\"headerlink\" title=\"10. \"></a>10. </h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">Context themedContext = </div><div class=\"line\">  <span class=\"keyword\">new</span> ContextThemeWrapper(baseContext,R.style.MyTheme);</div><div class=\"line\"></div><div class=\"line\">View view = LayoutInflator.form(themedContext)</div><div class=\"line\">  \t\t.inflate(R.layout.some_layout,<span class=\"keyword\">null</span>);</div><div class=\"line\"><span class=\"comment\">//</span></div><div class=\"line\">View view = <span class=\"keyword\">new</span> View(themedContext);</div><div class=\"line\"><span class=\"comment\">//ViewMyTheme</span></div></pre></td></tr></table></figure>\n<p>AppComPatAPI 21<br><br>ContextThemeWrapper : Added in API level 1</p>\n<p>AppCompat2014 <a href=\"https://chris.banes.me/2014/11/12/theme-vs-style/\"></a></p>\n<h2 id=\"reference\"><a href=\"#reference\" class=\"headerlink\" title=\"reference\"></a>reference</h2><ul>\n<li><a href=\"https://www.youtube.com/watch?v=Jr8hJdVGHAk\">Daniel Lew</a></li>\n<li><a href=\"http://blog.danlew.net/2016/07/19/a-deep-dive-into-android-view-constructors/\">View Constructor</a></li>\n<li><a href=\"https://www.youtube.com/watch?v=TIHXGwRTMWI\">IO 2016</a></li>\n</ul>\n","excerpt":"<p>ThemeStyles</p>\n<p>Using Themes and styles without going crazy</p>\n<h4 id=\"1-Styles\"><a href=\"#1-Styles\" class=\"headerlink\" title=\"1. Styles\"></a>1. Styles</h4><h5 id=\"1-1-layoutStyle\"><a href=\"#1-1-layoutStyle\" class=\"headerlink\" title=\"1.1 layoutStyle\"></a>1.1 layoutStyle</h5><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">View</span> <span class=\"attr\">android:background</span>= <span class=\"string\">\"#ff0000\"</span> /&gt;</span></div></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">View</span> <span class=\"attr\">style</span>= <span class=\"string\">\"@Style/MyStyle\"</span> /&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">Style</span> <span class=\"attr\">name</span> = <span class=\"string\">\"MyStyle\"</span>&gt;</span><span class=\"xml\"></div><div class=\"line\">true<span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span> = <span class=\"string\">\"android:background\"</span>&gt;</span>#ff0000<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></div><div class=\"line\"></span><span class=\"tag\">&lt;/<span class=\"name\">Style</span>&gt;</span></div></pre></td></tr></table></figure>\n<p><em></em>ViewStylelayoutlayoutView</p>","more":"<h5 id=\"1-2-Style-Inheritance\"><a href=\"#1-2-Style-Inheritance\" class=\"headerlink\" title=\"1.2 Style Inheritance\"></a>1.2 Style Inheritance</h5><p>Style</p>\n<p>parent style nameparentparent</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">name</span> = <span class=\"string\">\"Parent\"</span>/&gt;</span><span class=\"undefined\"></span></div></pre></td></tr></table></figure>\n<p>Explicit child</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">name</span> = <span class=\"string\">\"Child\"</span> <span class=\"attr\">parent</span> = <span class=\"string\">\"Parent\"</span>&gt;</span><span class=\"undefined\"></span></div></pre></td></tr></table></figure>\n<p>  Implicit Child</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">name</span> = <span class=\"string\">\"Parent.Child\"</span>/&gt;</span><span class=\"undefined\"></span></div></pre></td></tr></table></figure>\n<p>Explicit Parent  </p>\n<p>Explicit ChildChild name  </p>\n<p>ViewStyle,TextView</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">TextView</span>&gt;</span></div><div class=\"line\">  android:textColor = \"#ffffff\"</div><div class=\"line\">truestyle=\"@style/SomeStyle\"</div><div class=\"line\">  android:textAppearance = \"@style/MyText\"</div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">TextView</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>TextViewTextAppearancetextColortextSizeattributesViewStylestylesattributes</p>\n<blockquote>\n<p>android:textColor &gt;&gt; SomeStyleandroid:textColor&gt;&gt;MyTextandroid:textColor</p>\n<p>TextAppearance parent</p>\n</blockquote>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">name</span> = <span class=\"string\">\"MyText\"</span> <span class=\"attr\">parent</span>=<span class=\"string\">\"TextAppearance.Appcompat\"</span>&gt;</span><span class=\"xml\"></div><div class=\"line\">true<span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span> = <span class=\"string\">\"android:TextColor\"</span>&gt;</span>#F08<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></div><div class=\"line\"></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>stylestyleattributeViewattributeTextViewattribute textSize = 0parentparent styleTextAppearanceThemeTextView</p>\n<ul>\n<li><p>####2. Themes<br>AndroidThemeTheme.color attributes Window attributesThemesStylesthemesApplication,ActivityWidgetTheme</p>\n<p>Theme</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">name</span> = <span class=\"string\">\"Theme\"</span>&gt;</span><span class=\"xml\"></div><div class=\"line\">true<span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span> = <span class=\"string\">android:statusBarColor</span>&gt;</span>#ff0000<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></div><div class=\"line\"></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>Style</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">Style</span> <span class=\"attr\">name</span> = <span class=\"string\">\"Style\"</span>&gt;</span><span class=\"xml\"></div><div class=\"line\">true<span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span> = <span class=\"string\">\"android:background\"</span>&gt;</span>#ff0000<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></div><div class=\"line\"></span><span class=\"tag\">&lt;/<span class=\"name\">Style</span>&gt;</span></div></pre></td></tr></table></figure>\n<p></p>\n<p>stylesViewViewattrsAttributeSets</p>\n<p>ThemeStyle</p>\n<p>Themedefault widget styleStyleTheme(?attr:selectableItemBackground)<br>Themedefault widget style:</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">name</span>= <span class=\"string\">\"MyTheme\"</span> <span class=\"attr\">parent</span>=<span class=\"string\">\"Theme.AppCompat.Light\"</span>&gt;</span><span class=\"xml\"></div><div class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">\"android:editTextStyle\"</span>&gt;</span>@style/MyEditTextStyle<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></div><div class=\"line\"></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>AppTheme</p>\n</li>\n</ul>\n<p>  2.1 Theme</p>\n<p>  :</p>\n<p>  1.Manifest</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">application</span></div><div class=\"line\">  <span class=\"attr\">android:theme</span>=<span class=\"string\">\"@style/Theme.AppCompat\"</span> /&gt;</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">activity</span></div><div class=\"line\">  <span class=\"attr\">android:theme</span>=<span class=\"string\">\"@style/Theme.AppCompat.Light\"</span>        /&gt;</span></div></pre></td></tr></table></figure>\n<p>  activtyTheme override ApplicationTheme</p>\n<ol>\n<li><p>View</p>\n<p>LollipopView Theming</p>\n</li>\n</ol>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">Toolbar</span></div><div class=\"line\">   <span class=\"attr\">android:theme</span>=<span class=\"string\">\"@style/ThemeOverlay.AppCompat.Dark.ActionBar\"</span></div><div class=\"line\">   <span class=\"attr\">app:popupTheme</span>=<span class=\"string\">\"@style/ThemeOverlay.AppCompa.Light\"</span>/&gt;</span></div></pre></td></tr></table></figure>\n<p>  ViewThemeViewChildrenViewTheme</p>\n<p>  HoloHolo.Light.DarkActionBarActionBarThemeToolbar</p>\n<h3 id=\"3-AppCompat\"><a href=\"#3-AppCompat\" class=\"headerlink\" title=\"3 .AppCompat\"></a>3 .AppCompat</h3><p>  : </p>\n<ul>\n<li>Material on all devices ,AppCompat21Theme.Material</li>\n<li><p>Baseline themes/styles AppCompat AppCompat</p>\n<ul>\n<li>Enable View theming pre-Lollipop </li>\n<li>ColorPrimary , ColorAccentattributes(backPorted by AppCompat)Widget</li>\n<li>ThemeWidget<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">name</span>=<span class=\"string\">\"AppTheme\"</span> <span class=\"attr\">parent</span> = <span class=\"string\">\"Theme.AppCompat\"</span>&gt;</span><span class=\"xml\"></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">\"android:spinnerItemStyle\"</span>&gt;</span>@sytle/MySpinnerStyle<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></div><div class=\"line\"></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></div></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n<li><p></p>\n</li>\n</ul>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">name</span> = <span class=\"string\">\"AttrTheme\"</span> <span class=\"attr\">parent</span> =<span class=\"string\">\"Theme.AppCompat\"</span>&gt;</span><span class=\"xml\"></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span> =<span class=\"string\">\"selectableItemBackground\"</span>&gt;</span>@drawable/bg<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></div><div class=\"line\"></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">Button</span> <span class=\"attr\">android:background</span>=<span class=\"string\">?attr/selectableItemBackground</span>\"/&gt;</span></div></pre></td></tr></table></figure>\n<p>Drawable</p>\n<ul>\n<li>android:theme: API 7+(View)API 11+(ViewView) </li>\n</ul>\n<p>View themingAPI 21AppCompat</p>\n<h3 id=\"4-attr\"><a href=\"#4-attr\" class=\"headerlink\" title=\"4 .  ?attr\"></a>4 .  ?attr</h3><blockquote>\n<p>?android:attr/selectableItemBackground</p>\n</blockquote>\n<p></p>\n<p>?  :  were doing a theme lookup</p>\n<p>android:  were looking up something within the android namespace</p>\n<p>attr/  : were looking for an attribute()</p>\n<p>selectableItemBackground: The name of the atribute were looking up</p>\n<p>attr/</p>\n<blockquote>\n<p>?android:selectableItemBackground</p>\n</blockquote>\n<p></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">name</span>=<span class=\"string\">\"MyTheme\"</span>&gt;</span><span class=\"xml\"></div><div class=\"line\">true<span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span> = <span class=\"string\">\"android:colorPrimary\"</span>&gt;</span>@color/red<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></div><div class=\"line\"></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>android:ColorPromaryLollipop</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">syle</span> <span class=\"attr\">name</span> = <span class=\"string\">\"MyTheme\"</span> <span class=\"attr\">parent</span>=<span class=\"string\">\"Theme.AppCompat\"</span>&gt;</span></div><div class=\"line\">true<span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span> = <span class=\"string\">\"colorPrimary\"</span>&gt;</span>@color/red<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">syle</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>android: AppCompatAPI21</p>\n<p></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\">values/attrs.xml</div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">attr</span> <span class=\"attr\">name:</span>\"<span class=\"attr\">myAttribute</span>\" <span class=\"attr\">format</span>=<span class=\"string\">\"dimension\"</span>/&gt;</span></div><div class=\"line\"></div><div class=\"line\">values/themes.xml</div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">name</span> = <span class=\"string\">\"MyTheme\"</span> <span class=\"attr\">parent</span> = <span class=\"string\">\"Theme.AppCompat\"</span>&gt;</span><span class=\"xml\"></div><div class=\"line\">true<span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">\"myAttribute\"</span>&gt;</span>4dp<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span>  Theme</div><div class=\"line\"></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\">values/styles.xml</div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">name</span>=<span class=\"string\">\"MyStyle\"</span>&gt;</span><span class=\"xml\"></div><div class=\"line\">true<span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">\"android:padding\"</span>&gt;</span>?attr/myAttribute<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></div><div class=\"line\"></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">layout?attrThemeattribute</div></pre></td></tr></table></figure>\n<p>android nameSpaceattribute Namegloballibraryattribute Name</p>\n<p>Style?attrTheme</p>\n<h3 id=\"5-Theme\"><a href=\"#5-Theme\" class=\"headerlink\" title=\"5 .Theme\"></a>5 .Theme</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">context.getTheme().resolveAttribute(R.attr.dialogTheme,outValue,<span class=\"keyword\">true</span>)</div><div class=\"line\">  </div><div class=\"line\">View</div><div class=\"line\">  TypedArray a = context.obtainStyledAttributes(attrs,com.android.internal.R.styleable.ImageView,defStyleAttr,defStyleRes)</div><div class=\"line\">  </div><div class=\"line\"><span class=\"keyword\">int</span> alpha = a.getInt(</div><div class=\"line\">  com.android.internal.R.styleable.ImageView_drawableAlpha,<span class=\"number\">255</span>)</div></pre></td></tr></table></figure>\n<p>ActivitysetTheme(int themeResId)Theme,ThemeapplyActivityonCreate()setTheme(manifestTheme)</p>\n<h3 id=\"6-v21\"><a href=\"#6-v21\" class=\"headerlink\" title=\"6. v21\"></a>6. v21</h3><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">values/styles.xml</div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">name</span>=<span class=\"string\">\"BaseToolbar\"</span>/&gt;</span><span class=\"xml\"></div><div class=\"line\"></div><div class=\"line\">values-v21/styles.xml</div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">name</span>= <span class=\"string\">\"BaseToolbar\"</span>&gt;</span><span class=\"xml\"></div><div class=\"line\">true<span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span> = <span class=\"string\">\"android:elevation\"</span>&gt;</span>4dp<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></div><div class=\"line\"></span></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></div><div class=\"line\">elevation21apilint</div><div class=\"line\">values/styles.xml</div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">name</span> = <span class=\"string\">\"Toolbar\"</span> <span class=\"attr\">parent</span> = <span class=\"string\">\"BaseToolbar\"</span>/&gt;</span><span class=\"undefined\"></div><div class=\"line\">lintToolbar</span></div></pre></td></tr></table></figure>\n<p>ThemethemeTheme</p>\n<h3 id=\"7-ThemeOverlay\"><a href=\"#7-ThemeOverlay\" class=\"headerlink\" title=\"7 . ThemeOverlay\"></a>7 . ThemeOverlay</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">ThemeOverlay.Material.Light</div><div class=\"line\">ThemeOverlay.Material.Dark</div><div class=\"line\"><span class=\"comment\">//etc ...</span></div></pre></td></tr></table></figure>\n<p>ThemeTheme.Material.Lightcolor relevant to a light ThemeThemewindow AttributesThemeattribute</p>\n<h3 id=\"8-\"><a href=\"#8-\" class=\"headerlink\" title=\"8. \"></a>8. </h3><ol>\n<li>Themestyleparent</li>\n</ol>\n<p><br><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">AppTheme</div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span> = <span class=\"string\">\"android:editTextStyle\"</span>&gt;</span>@style/MyEditTextStyle<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">name</span>= <span class=\"string\">\"MyEditTextStyle\"</span>&gt;</span><span class=\"xml\"></div><div class=\"line\">true<span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>= <span class=\"string\">\"android:fontFamily\"</span>&gt;</span></div><div class=\"line\">  sans-serif-medium</div><div class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></div><div class=\"line\"></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></div></pre></td></tr></table></figure></p>\n<p>EditText</p>\n<ol>\n<li>defStyleAttr vs defStyleRes</li>\n</ol>\n<p> </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">ObtainStyledAttributes(AttributeSet set,<span class=\"keyword\">int</span> []attrs,</div><div class=\"line\"> <span class=\"keyword\">int</span> defStyleAttr,<span class=\"keyword\">int</span> defStyleRes)</div></pre></td></tr></table></figure>\n<p></p>\n<blockquote>\n<p> defStyleAttr: The attr in your theme which points to the default style</p>\n<p> eg: R.attr.editTextStyle</p>\n<p> defStyleRes: The resource ID of the default style</p>\n<p> eg:R.style.Widget_Material_EditText</p>\n</blockquote>\n<p>ObtainStyledAttributesValue</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"number\">1</span>. Value in the AttributeSet</div><div class=\"line\"><span class=\"number\">2</span>. Value in the explicit style</div><div class=\"line\"><span class=\"number\">3</span>. Default style specified in defStyleRes</div><div class=\"line\"><span class=\"number\">4</span>. Default style specified in defStyleAttr</div><div class=\"line\"><span class=\"number\">5</span>. Base value in <span class=\"keyword\">this</span> theme</div></pre></td></tr></table></figure>\n<p>manifests</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">Style</span> <span class=\"attr\">name</span> = <span class=\"string\">\"AppTheme\"</span> <span class=\"attr\">parent</span> = <span class=\"string\">\"Theme.AppCompat\"</span>&gt;</span><span class=\"xml\"></div><div class=\"line\">true<span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span> = <span class=\"string\">\"android:background\"</span>&gt;</span>...<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></div><div class=\"line\"></span><span class=\"tag\">&lt;/<span class=\"name\">Style</span>&gt;</span></div></pre></td></tr></table></figure>\n<p></p>\n<blockquote>\n<p>Any View which doesnt have a background set ,will use the themes value ,  SHIT!</p>\n</blockquote>\n<h3 id=\"9-\"><a href=\"#9-\" class=\"headerlink\" title=\"9. \"></a>9. </h3><p><br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">Error retrieving parent <span class=\"keyword\">for</span> item: No resource found that matches the given name</div><div class=\"line\"> <span class=\"string\">'@android:style/TextAppearance.Holo.Widget.ActionBar.Title'</span></div></pre></td></tr></table></figure></p>\n<h3 id=\"10-\"><a href=\"#10-\" class=\"headerlink\" title=\"10. \"></a>10. </h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">Context themedContext = </div><div class=\"line\">  <span class=\"keyword\">new</span> ContextThemeWrapper(baseContext,R.style.MyTheme);</div><div class=\"line\"></div><div class=\"line\">View view = LayoutInflator.form(themedContext)</div><div class=\"line\">  \t\t.inflate(R.layout.some_layout,<span class=\"keyword\">null</span>);</div><div class=\"line\"><span class=\"comment\">//</span></div><div class=\"line\">View view = <span class=\"keyword\">new</span> View(themedContext);</div><div class=\"line\"><span class=\"comment\">//ViewMyTheme</span></div></pre></td></tr></table></figure>\n<p>AppComPatAPI 21<br><br>ContextThemeWrapper : Added in API level 1</p>\n<p>AppCompat2014 <a href=\"https://chris.banes.me/2014/11/12/theme-vs-style/\"></a></p>\n<h2 id=\"reference\"><a href=\"#reference\" class=\"headerlink\" title=\"reference\"></a>reference</h2><ul>\n<li><a href=\"https://www.youtube.com/watch?v=Jr8hJdVGHAk\">Daniel Lew</a></li>\n<li><a href=\"http://blog.danlew.net/2016/07/19/a-deep-dive-into-android-view-constructors/\">View Constructor</a></li>\n<li><a href=\"https://www.youtube.com/watch?v=TIHXGwRTMWI\">IO 2016</a></li>\n</ul>"},{"title":"serviceactivity","date":"2016-09-30T07:25:28.000Z","_content":"\n![](http://odzl05jxx.bkt.clouddn.com/service_lifecycle.png)\n\nserviceActivityaidldemo\n\n<!--more-->\n\n1. AndroidService[](https://developer.android.com/guide/components/services.html)\n\n> `Service`  (IPC)  I/O \n\nAndroidServiceUI\n\nServicestarted ServiceBinded Service\n\nBinded Service \n\n![](http://odzl05jxx.bkt.clouddn.com/service_binding_tree_lifecycle.png)\n\n\n\n## \n\n### reference\n\n[csdn](http://blog.csdn.net/javazejian/article/details/52709857)\n\n\n\n","source":"_posts/service-activity-communication.md","raw":"---\ntitle: serviceactivity\ndate: 2016-09-30 15:25:28\ncategories: blog\ntags: [service,android]\n---\n\n![](http://odzl05jxx.bkt.clouddn.com/service_lifecycle.png)\n\nserviceActivityaidldemo\n\n<!--more-->\n\n1. AndroidService[](https://developer.android.com/guide/components/services.html)\n\n> `Service`  (IPC)  I/O \n\nAndroidServiceUI\n\nServicestarted ServiceBinded Service\n\nBinded Service \n\n![](http://odzl05jxx.bkt.clouddn.com/service_binding_tree_lifecycle.png)\n\n\n\n## \n\n### reference\n\n[csdn](http://blog.csdn.net/javazejian/article/details/52709857)\n\n\n\n","slug":"service-activity-communication","published":1,"updated":"2017-04-23T10:52:32.678Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj50afgzb003bi4vrjeyipukr","content":"<p><img src=\"http://odzl05jxx.bkt.clouddn.com/service_lifecycle.png\" alt=\"\"></p>\n<p>serviceActivityaidldemo</p>\n<a id=\"more\"></a>\n<ol>\n<li>AndroidService<a href=\"https://developer.android.com/guide/components/services.html\"></a></li>\n</ol>\n<blockquote>\n<p><code>Service</code>   (IPC)  I/O </p>\n</blockquote>\n<p>AndroidServiceUI</p>\n<p>Servicestarted ServiceBinded Service</p>\n<p>Binded Service </p>\n<p><img src=\"http://odzl05jxx.bkt.clouddn.com/service_binding_tree_lifecycle.png\" alt=\"\"></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"reference\"><a href=\"#reference\" class=\"headerlink\" title=\"reference\"></a>reference</h3><p><a href=\"http://blog.csdn.net/javazejian/article/details/52709857\">csdn</a></p>\n","excerpt":"<p><img src=\"http://odzl05jxx.bkt.clouddn.com/service_lifecycle.png\" alt=\"\"></p>\n<p>serviceActivityaidldemo</p>","more":"<ol>\n<li>AndroidService<a href=\"https://developer.android.com/guide/components/services.html\"></a></li>\n</ol>\n<blockquote>\n<p><code>Service</code>   (IPC)  I/O </p>\n</blockquote>\n<p>AndroidServiceUI</p>\n<p>Servicestarted ServiceBinded Service</p>\n<p>Binded Service </p>\n<p><img src=\"http://odzl05jxx.bkt.clouddn.com/service_binding_tree_lifecycle.png\" alt=\"\"></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"reference\"><a href=\"#reference\" class=\"headerlink\" title=\"reference\"></a>reference</h3><p><a href=\"http://blog.csdn.net/javazejian/article/details/52709857\">csdn</a></p>"},{"title":"","date":"2016-10-06T15:32:30.000Z","_content":"\n![](http://odzl05jxx.bkt.clouddn.com/dispatch_touch_event_video.JPG)\n\n1  \n\n> TouchACTION_DOWN, ACTION_UP, ACTION_MOVE,ACTION_CANCEL\n<!--more-->\n\n- ACTION_DOWNMotionEvent\n\n> 1. Activity.dispatchTouchEvent\n>\n> 2. ViewGroup.dispatchTouchEvent\n>\n> 3. ViewGroup.onInterceptTouchEvent\n>\n>    .....n ....>>>\n>\n> 4. View.dispatchTouchEvent\n>\n> 5. View.onTouchEvent\n>\n>       ....n....>>>\n>\n> 6. ViewGroup.onTouchEvent\n> 7. Activity.onTouchEvent\n\n1(super)ACTION_DOWN\n\n- ACTION_DOWNoverride\n\n  > true , false ,super\n\n  - return trueACTION_DOWN()onInterceptTouchEvent,trueViewGroupViewACTION_CANCELViewGrouponTouchEvent\n  - return false: dispatchTouchEventfalseACTION_DOWNViewGroup(Activity)OnTouchEventonInterceptTouchEvent,falseViewGrouponTouchEventfalseViewGroupOnTouchEvent \n  - return super : 1\n\n![](http://odzl05jxx.bkt.clouddn.com/touch_event_1.png)\n\n2 [](http://www.jianshu.com/p/e99b5e8bd67b)  \n\n![](http://odzl05jxx.bkt.clouddn.com/touch_event_2.png)\n\n3 [](http://www.jianshu.com/p/e99b5e8bd67b) \n\nACTION_DOWNACTION_MOVE,ACTION_UP\n\n\n\n> gesture = ACTION_DOWN+ a bounch of ACTIONS +ACTION_UP\n\ngesture(),swipe,click,fling\n\nACTION_DWONandroidtouchViewTouch Target,gestureACTION_MOVE,ACTION_UP1.Touch Targettargetview traversing; 2Touch TargetViewViewgestureOnTouchEventACTION_DOWNtrue,TouchTarget[](http://www.jianshu.com/p/e99b5e8bd67b):\n\n> ACTION_DOWNreturn true  ACTION_MOVEACTION_UPdispatchTouchEventACTION_DOWNdispatchTouchEventACTION_DOWNonTouchEventACTION_MOVEACTION_UPonTouchEvent\n\nTouchTargetTouchTarget******()ViewGroupdispatchTouchEventonInterceptTouchEventTouchTargetACTION_MOVEViewGrouponInterceptTouchEventtrueViewGroupViewViewTarget,(ACTION_MOVE)ViewGroupViewACTION_CANCEL(foucusedunfocused)ScrollView(Android)ButtonACTION_DOWNBUTTONACTION_DOWN,clickButtonTouchTargetScrollViewScrollViewScrollViewonInterceptTouchEventACTION_DWONfalse()ACTION_MOVE(),trueTouchTargetOnInterceptTouchEventdispatchTouchEventViewGrouponTouchEventdispatchandroidApi\n\n### #onClick\n\nonClickonLongClickonTouchListener\n\nViewdispatchTouchEvent\n\n```java\ncase MotionEvent.ACTION_UP:\n                    boolean prepressed = (mPrivateFlags & PFLAG_PREPRESSED) != 0;\n                    if ((mPrivateFlags & PFLAG_PRESSED) != 0 || prepressed) {\n                        // take focus if we don't have it already and we should in\n                        // touch mode.\n                        boolean focusTaken = false;\n                        if (isFocusable() && isFocusableInTouchMode() && !isFocused()) {\n                            focusTaken = requestFocus();\n                        }\n\n                        if (prepressed) {\n                            // The button is being released before we actually\n                            // showed it as pressed.  Make it show the pressed\n                            // state now (before scheduling the click) to ensure\n                            // the user sees it.\n                            setPressed(true, x, y);\n                       }\n\n                        if (!mHasPerformedLongPress && !mIgnoreNextUpEvent) {\n                            // This is a tap, so remove the longpress check\n                            removeLongPressCallback();\n\n                            // Only perform take click actions if we were in the pressed state\n                            if (!focusTaken) {\n                                // Use a Runnable and post this rather than calling\n                                // performClick directly. This lets other visual state\n                                // of the view update before click actions start.\n                                if (mPerformClick == null) {\n                                    mPerformClick = new PerformClick();\n                                }\n                                if (!post(mPerformClick)) {\n                                    performClick();\n                                }\n                            }\n                        }\n\n                        if (mUnsetPressedState == null) {\n                            mUnsetPressedState = new UnsetPressedState();\n                        }\n\n                        if (prepressed) {\n                            postDelayed(mUnsetPressedState,\n                                    ViewConfiguration.getPressedStateDuration());\n                        } else if (!post(mUnsetPressedState)) {\n                            // If the post failed, unpress right now\n                            mUnsetPressedState.run();\n                        }\n\n                        removeTapCallback();\n                    }\n                    mIgnoreNextUpEvent = false;\n                    break;\n```\n\nonClickACTION_UP\n\nLongClickACTION_DOWN\n\n```java\n  case MotionEvent.ACTION_DOWN:\n                    mHasPerformedLongPress = false;\n\n                    if (performButtonActionOnTouchDown(event)) {\n                        break;\n                    }\n\n                    // Walk up the hierarchy to determine if we're inside a scrolling container.\n                    boolean isInScrollingContainer = isInScrollingContainer();\n\n                    // For views inside a scrolling container, delay the pressed feedback for\n                    // a short period in case this is a scroll.\n                    if (isInScrollingContainer) {\n                        mPrivateFlags |= PFLAG_PREPRESSED;\n                        if (mPendingCheckForTap == null) {\n                            mPendingCheckForTap = new CheckForTap();\n                        }\n                        mPendingCheckForTap.x = event.getX();\n                        mPendingCheckForTap.y = event.getY();\n                        postDelayed(mPendingCheckForTap, ViewConfiguration.getTapTimeout());\n                    } else {\n                        // Not inside a scrolling container, so show the feedback right away\n                        setPressed(true, x, y);\n                        checkForLongClick(0, x, y);\n                    }\n                    break;\n```\n\ncheckForLongClick, ACTION_DOWNpostDelayeddelay\n\n> ```\n> ViewConfiguration.getLongPressTimeout() - delayOffset\n> ```\n\nEclair2.1500ms500msCheckForLongPress\n\nLongClickDOWN500msOnClickUPOnClickOnLongClickonLongClicktrue *mHasPerformedLongPress* = true ,ACTION_UPHasPerformLongPress==trueonClickonLongClickListenerboolean\n\n```java\n if (!mHasPerformedLongPress && !mIgnoreNextUpEvent) {\n                            // This is a tap, so remove the longpress check\n                            removeLongPressCallback();\n\n                            // Only perform take click actions if we were in the pressed state\n                            if (!focusTaken) {\n                                // Use a Runnable and post this rather than calling\n                                // performClick directly. This lets other visual state\n                                // of the view update before click actions start.\n                                if (mPerformClick == null) {\n                                    mPerformClick = new PerformClick();\n                                }\n                                if (!post(mPerformClick)) {\n                                    performClick();\n                                }\n                            }\n                        }\n```\n\nOnTouchListener: onTouchListenerdispatchTouchEventlisteneronTouchtrueonTouchEventOnTouchListeneronClickonLongClick\n\n## VelocityTracker\n\n```java\nvelocityTracker = VelocityTracker.obtain()\nvelocityTracker.addMovement(event);\nvelocityTracker.computeCurrentVelocity(1);  \nvelocityTracker.getXVelocity();\nvelocityTracker.recycle();\n```\n\nVelocityTrackernativejava\n\n### Fling \n\n```java\nprivate void onFling(float velocityX,float velocityY){\n  scroller.fling(getScrollX(),getScrollY(),(int)-velocityX\n                (int)-velocityY,minScrollX,maxScrollX,\n                minScrollY,maxScrollY);\n  invalidate();\n}\n@overdide// View\nprivate void computeScroll(){\n  if(scroller.isFinished()){\n    scroller.computeScrollOffset();\n    scrollTo(scroller.getCurrX(),scroller.getCurrY());\n    postInvalidateOnAnimation();\n  }\n}\n\n\n```\n\n### \n\n```java\npublic class MyView extends View {\n \nGestureDetector gestureDetector;\n \npublic MyView(Context context, AttributeSet attrs) {\n    super(context, attrs);\n            // creating new gesture detector \n    gestureDetector = new GestureDetector(context, new GestureListener());\n} \n \n// skipping measure calculation and drawing \n \n    // delegate the event to the gesture detector \n@Override \npublic boolean onTouchEvent(MotionEvent e) {\n    return gestureDetector.onTouchEvent(e);\n} \n \n \nprivate class GestureListener extends GestureDetector.SimpleOnGestureListener {\n \n    @Override \n    public boolean onDown(MotionEvent e) {\n        return true; \n    } \n    // event when double tap occurs \n    @Override \n    public boolean onDoubleTap(MotionEvent e) {\n        float x = e.getX();\n        float y = e.getY();\n \n        Log.d(\"Double Tap\", \"Tapped at: (\" + x + \",\" + y + \")\");\n \n        return true; \n    } \n} \n} \n```\n\n ViewConfiguration\n\nint getScaledTouchSlop(); (if Math.abs(x*x+y*y)>mTouchSlop )\n\n```java\n/**    \n  * UI    \n  */ \n public class ViewConfiguration {     \n     // px     \n     private static final int SCROLL_BAR_SIZE = 10;     \n          \n     //     \n     private static final int SCROLL_BAR_FADE_DURATION = 250;     \n          \n     //      \n     private static final int SCROLL_BAR_DEFAULT_DELAY = 300;     \n          \n     //      \n     private static final int FADING_EDGE_LENGTH = 12;     \n          \n     //     \n     private static final int PRESSED_STATE_DURATION = 125;     \n              \n     //     \n     private static final int LONG_PRESS_TIMEOUT = 500;     \n              \n     //     \n     private static final int GLOBAL_ACTIONS_KEY_TIMEOUT = 500;     \n              \n     //touch     \n     private static final int TAP_TIMEOUT = 115;     \n              \n     /**    \n      * Defines the duration in milliseconds we will wait to see if a touch event     \n      * is a jump tap. If the user does not complete the jump tap within this interval, it is    \n      * considered to be a tap.     \n      */ \n     //touch     \n     private static final int JUMP_TAP_TIMEOUT = 500;     \n          \n     //     \n     private static final int DOUBLE_TAP_TIMEOUT = 300;     \n              \n     //     \n     private static final int ZOOM_CONTROLS_TIMEOUT = 3000;     \n          \n     /**    \n      * Inset in pixels to look for touchable content when the user touches the edge of the screen    \n      */ \n     private static final int EDGE_SLOP = 12;     \n              \n     /**    \n      * Distance a touch can wander before we think the user is scrolling in pixels    \n      */ \n     private static final int TOUCH_SLOP = 16;     \n              \n     /**    \n      * Distance a touch can wander before we think the user is attempting a paged scroll    \n      * (in dips)    \n      */ \n     private static final int PAGING_TOUCH_SLOP = TOUCH_SLOP * 2;     \n              \n     /**    \n      * Distance between the first touch and second touch to still be considered a double tap    \n      */ \n     private static final int DOUBLE_TAP_SLOP = 100;     \n              \n     /**    \n      * Distance a touch needs to be outside of a window's bounds for it to    \n      * count as outside for purposes of dismissing the window.    \n      */ \n     private static final int WINDOW_TOUCH_SLOP = 16;     \n          \n    //fling     \n     private static final int MINIMUM_FLING_VELOCITY = 50;     \n              \n     //fling     \n     private static final int MAXIMUM_FLING_VELOCITY = 4000;     \n          \n     //ARGB888     \n     @Deprecated     \n     private static final int MAXIMUM_DRAWING_CACHE_SIZE = 320 * 480 * 4; // HVGA screen, ARGB8888     \n          \n     //flingsscrolls     \n     private static float SCROLL_FRICTION = 0.015f;     \n          \n     /**    \n      * Max distance to over scroll for edge effects    \n      */ \n     private static final int OVERSCROLL_DISTANCE = 0;     \n          \n     /**    \n      * Max distance to over fling for edge effects    \n      */ \n     private static final int OVERFLING_DISTANCE = 4;     \n          \n }\n```\n\n\n\n\n\n- ## Reference\n\n1. [](http://www.jianshu.com/p/e99b5e8bd67b)\n2. [making sense of the touch system](https://www.youtube.com/watch?v=usBaTHZdXSI)\n3. [Android onTouchEvent, onClickonLongClick](http://blog.csdn.net/ddna/article/details/5451722)\n4. [Android()](http://wangkuiwu.github.io/2015/01/03/TouchEvent-View/)\n5. [ViewConfiguration](http://www.jcodecraeer.com/a/anzhuokaifa/androidkaifa/2013/0225/907.html)\n6. [](http://glblong.blog.51cto.com/3058613/1559320)\n\n   ","source":"_posts/touch-event-distribution.md","raw":"---\ntitle: \ndate: 2016-10-06 23:32:30\ncategories: blog \ntags: [android]\n---\n\n![](http://odzl05jxx.bkt.clouddn.com/dispatch_touch_event_video.JPG)\n\n1  \n\n> TouchACTION_DOWN, ACTION_UP, ACTION_MOVE,ACTION_CANCEL\n<!--more-->\n\n- ACTION_DOWNMotionEvent\n\n> 1. Activity.dispatchTouchEvent\n>\n> 2. ViewGroup.dispatchTouchEvent\n>\n> 3. ViewGroup.onInterceptTouchEvent\n>\n>    .....n ....>>>\n>\n> 4. View.dispatchTouchEvent\n>\n> 5. View.onTouchEvent\n>\n>       ....n....>>>\n>\n> 6. ViewGroup.onTouchEvent\n> 7. Activity.onTouchEvent\n\n1(super)ACTION_DOWN\n\n- ACTION_DOWNoverride\n\n  > true , false ,super\n\n  - return trueACTION_DOWN()onInterceptTouchEvent,trueViewGroupViewACTION_CANCELViewGrouponTouchEvent\n  - return false: dispatchTouchEventfalseACTION_DOWNViewGroup(Activity)OnTouchEventonInterceptTouchEvent,falseViewGrouponTouchEventfalseViewGroupOnTouchEvent \n  - return super : 1\n\n![](http://odzl05jxx.bkt.clouddn.com/touch_event_1.png)\n\n2 [](http://www.jianshu.com/p/e99b5e8bd67b)  \n\n![](http://odzl05jxx.bkt.clouddn.com/touch_event_2.png)\n\n3 [](http://www.jianshu.com/p/e99b5e8bd67b) \n\nACTION_DOWNACTION_MOVE,ACTION_UP\n\n\n\n> gesture = ACTION_DOWN+ a bounch of ACTIONS +ACTION_UP\n\ngesture(),swipe,click,fling\n\nACTION_DWONandroidtouchViewTouch Target,gestureACTION_MOVE,ACTION_UP1.Touch Targettargetview traversing; 2Touch TargetViewViewgestureOnTouchEventACTION_DOWNtrue,TouchTarget[](http://www.jianshu.com/p/e99b5e8bd67b):\n\n> ACTION_DOWNreturn true  ACTION_MOVEACTION_UPdispatchTouchEventACTION_DOWNdispatchTouchEventACTION_DOWNonTouchEventACTION_MOVEACTION_UPonTouchEvent\n\nTouchTargetTouchTarget******()ViewGroupdispatchTouchEventonInterceptTouchEventTouchTargetACTION_MOVEViewGrouponInterceptTouchEventtrueViewGroupViewViewTarget,(ACTION_MOVE)ViewGroupViewACTION_CANCEL(foucusedunfocused)ScrollView(Android)ButtonACTION_DOWNBUTTONACTION_DOWN,clickButtonTouchTargetScrollViewScrollViewScrollViewonInterceptTouchEventACTION_DWONfalse()ACTION_MOVE(),trueTouchTargetOnInterceptTouchEventdispatchTouchEventViewGrouponTouchEventdispatchandroidApi\n\n### #onClick\n\nonClickonLongClickonTouchListener\n\nViewdispatchTouchEvent\n\n```java\ncase MotionEvent.ACTION_UP:\n                    boolean prepressed = (mPrivateFlags & PFLAG_PREPRESSED) != 0;\n                    if ((mPrivateFlags & PFLAG_PRESSED) != 0 || prepressed) {\n                        // take focus if we don't have it already and we should in\n                        // touch mode.\n                        boolean focusTaken = false;\n                        if (isFocusable() && isFocusableInTouchMode() && !isFocused()) {\n                            focusTaken = requestFocus();\n                        }\n\n                        if (prepressed) {\n                            // The button is being released before we actually\n                            // showed it as pressed.  Make it show the pressed\n                            // state now (before scheduling the click) to ensure\n                            // the user sees it.\n                            setPressed(true, x, y);\n                       }\n\n                        if (!mHasPerformedLongPress && !mIgnoreNextUpEvent) {\n                            // This is a tap, so remove the longpress check\n                            removeLongPressCallback();\n\n                            // Only perform take click actions if we were in the pressed state\n                            if (!focusTaken) {\n                                // Use a Runnable and post this rather than calling\n                                // performClick directly. This lets other visual state\n                                // of the view update before click actions start.\n                                if (mPerformClick == null) {\n                                    mPerformClick = new PerformClick();\n                                }\n                                if (!post(mPerformClick)) {\n                                    performClick();\n                                }\n                            }\n                        }\n\n                        if (mUnsetPressedState == null) {\n                            mUnsetPressedState = new UnsetPressedState();\n                        }\n\n                        if (prepressed) {\n                            postDelayed(mUnsetPressedState,\n                                    ViewConfiguration.getPressedStateDuration());\n                        } else if (!post(mUnsetPressedState)) {\n                            // If the post failed, unpress right now\n                            mUnsetPressedState.run();\n                        }\n\n                        removeTapCallback();\n                    }\n                    mIgnoreNextUpEvent = false;\n                    break;\n```\n\nonClickACTION_UP\n\nLongClickACTION_DOWN\n\n```java\n  case MotionEvent.ACTION_DOWN:\n                    mHasPerformedLongPress = false;\n\n                    if (performButtonActionOnTouchDown(event)) {\n                        break;\n                    }\n\n                    // Walk up the hierarchy to determine if we're inside a scrolling container.\n                    boolean isInScrollingContainer = isInScrollingContainer();\n\n                    // For views inside a scrolling container, delay the pressed feedback for\n                    // a short period in case this is a scroll.\n                    if (isInScrollingContainer) {\n                        mPrivateFlags |= PFLAG_PREPRESSED;\n                        if (mPendingCheckForTap == null) {\n                            mPendingCheckForTap = new CheckForTap();\n                        }\n                        mPendingCheckForTap.x = event.getX();\n                        mPendingCheckForTap.y = event.getY();\n                        postDelayed(mPendingCheckForTap, ViewConfiguration.getTapTimeout());\n                    } else {\n                        // Not inside a scrolling container, so show the feedback right away\n                        setPressed(true, x, y);\n                        checkForLongClick(0, x, y);\n                    }\n                    break;\n```\n\ncheckForLongClick, ACTION_DOWNpostDelayeddelay\n\n> ```\n> ViewConfiguration.getLongPressTimeout() - delayOffset\n> ```\n\nEclair2.1500ms500msCheckForLongPress\n\nLongClickDOWN500msOnClickUPOnClickOnLongClickonLongClicktrue *mHasPerformedLongPress* = true ,ACTION_UPHasPerformLongPress==trueonClickonLongClickListenerboolean\n\n```java\n if (!mHasPerformedLongPress && !mIgnoreNextUpEvent) {\n                            // This is a tap, so remove the longpress check\n                            removeLongPressCallback();\n\n                            // Only perform take click actions if we were in the pressed state\n                            if (!focusTaken) {\n                                // Use a Runnable and post this rather than calling\n                                // performClick directly. This lets other visual state\n                                // of the view update before click actions start.\n                                if (mPerformClick == null) {\n                                    mPerformClick = new PerformClick();\n                                }\n                                if (!post(mPerformClick)) {\n                                    performClick();\n                                }\n                            }\n                        }\n```\n\nOnTouchListener: onTouchListenerdispatchTouchEventlisteneronTouchtrueonTouchEventOnTouchListeneronClickonLongClick\n\n## VelocityTracker\n\n```java\nvelocityTracker = VelocityTracker.obtain()\nvelocityTracker.addMovement(event);\nvelocityTracker.computeCurrentVelocity(1);  \nvelocityTracker.getXVelocity();\nvelocityTracker.recycle();\n```\n\nVelocityTrackernativejava\n\n### Fling \n\n```java\nprivate void onFling(float velocityX,float velocityY){\n  scroller.fling(getScrollX(),getScrollY(),(int)-velocityX\n                (int)-velocityY,minScrollX,maxScrollX,\n                minScrollY,maxScrollY);\n  invalidate();\n}\n@overdide// View\nprivate void computeScroll(){\n  if(scroller.isFinished()){\n    scroller.computeScrollOffset();\n    scrollTo(scroller.getCurrX(),scroller.getCurrY());\n    postInvalidateOnAnimation();\n  }\n}\n\n\n```\n\n### \n\n```java\npublic class MyView extends View {\n \nGestureDetector gestureDetector;\n \npublic MyView(Context context, AttributeSet attrs) {\n    super(context, attrs);\n            // creating new gesture detector \n    gestureDetector = new GestureDetector(context, new GestureListener());\n} \n \n// skipping measure calculation and drawing \n \n    // delegate the event to the gesture detector \n@Override \npublic boolean onTouchEvent(MotionEvent e) {\n    return gestureDetector.onTouchEvent(e);\n} \n \n \nprivate class GestureListener extends GestureDetector.SimpleOnGestureListener {\n \n    @Override \n    public boolean onDown(MotionEvent e) {\n        return true; \n    } \n    // event when double tap occurs \n    @Override \n    public boolean onDoubleTap(MotionEvent e) {\n        float x = e.getX();\n        float y = e.getY();\n \n        Log.d(\"Double Tap\", \"Tapped at: (\" + x + \",\" + y + \")\");\n \n        return true; \n    } \n} \n} \n```\n\n ViewConfiguration\n\nint getScaledTouchSlop(); (if Math.abs(x*x+y*y)>mTouchSlop )\n\n```java\n/**    \n  * UI    \n  */ \n public class ViewConfiguration {     \n     // px     \n     private static final int SCROLL_BAR_SIZE = 10;     \n          \n     //     \n     private static final int SCROLL_BAR_FADE_DURATION = 250;     \n          \n     //      \n     private static final int SCROLL_BAR_DEFAULT_DELAY = 300;     \n          \n     //      \n     private static final int FADING_EDGE_LENGTH = 12;     \n          \n     //     \n     private static final int PRESSED_STATE_DURATION = 125;     \n              \n     //     \n     private static final int LONG_PRESS_TIMEOUT = 500;     \n              \n     //     \n     private static final int GLOBAL_ACTIONS_KEY_TIMEOUT = 500;     \n              \n     //touch     \n     private static final int TAP_TIMEOUT = 115;     \n              \n     /**    \n      * Defines the duration in milliseconds we will wait to see if a touch event     \n      * is a jump tap. If the user does not complete the jump tap within this interval, it is    \n      * considered to be a tap.     \n      */ \n     //touch     \n     private static final int JUMP_TAP_TIMEOUT = 500;     \n          \n     //     \n     private static final int DOUBLE_TAP_TIMEOUT = 300;     \n              \n     //     \n     private static final int ZOOM_CONTROLS_TIMEOUT = 3000;     \n          \n     /**    \n      * Inset in pixels to look for touchable content when the user touches the edge of the screen    \n      */ \n     private static final int EDGE_SLOP = 12;     \n              \n     /**    \n      * Distance a touch can wander before we think the user is scrolling in pixels    \n      */ \n     private static final int TOUCH_SLOP = 16;     \n              \n     /**    \n      * Distance a touch can wander before we think the user is attempting a paged scroll    \n      * (in dips)    \n      */ \n     private static final int PAGING_TOUCH_SLOP = TOUCH_SLOP * 2;     \n              \n     /**    \n      * Distance between the first touch and second touch to still be considered a double tap    \n      */ \n     private static final int DOUBLE_TAP_SLOP = 100;     \n              \n     /**    \n      * Distance a touch needs to be outside of a window's bounds for it to    \n      * count as outside for purposes of dismissing the window.    \n      */ \n     private static final int WINDOW_TOUCH_SLOP = 16;     \n          \n    //fling     \n     private static final int MINIMUM_FLING_VELOCITY = 50;     \n              \n     //fling     \n     private static final int MAXIMUM_FLING_VELOCITY = 4000;     \n          \n     //ARGB888     \n     @Deprecated     \n     private static final int MAXIMUM_DRAWING_CACHE_SIZE = 320 * 480 * 4; // HVGA screen, ARGB8888     \n          \n     //flingsscrolls     \n     private static float SCROLL_FRICTION = 0.015f;     \n          \n     /**    \n      * Max distance to over scroll for edge effects    \n      */ \n     private static final int OVERSCROLL_DISTANCE = 0;     \n          \n     /**    \n      * Max distance to over fling for edge effects    \n      */ \n     private static final int OVERFLING_DISTANCE = 4;     \n          \n }\n```\n\n\n\n\n\n- ## Reference\n\n1. [](http://www.jianshu.com/p/e99b5e8bd67b)\n2. [making sense of the touch system](https://www.youtube.com/watch?v=usBaTHZdXSI)\n3. [Android onTouchEvent, onClickonLongClick](http://blog.csdn.net/ddna/article/details/5451722)\n4. [Android()](http://wangkuiwu.github.io/2015/01/03/TouchEvent-View/)\n5. [ViewConfiguration](http://www.jcodecraeer.com/a/anzhuokaifa/androidkaifa/2013/0225/907.html)\n6. [](http://glblong.blog.51cto.com/3058613/1559320)\n\n   ","slug":"touch-event-distribution","published":1,"updated":"2017-04-23T10:52:50.056Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj50afgzb003fi4vrq2jwzoeu","content":"<p><img src=\"http://odzl05jxx.bkt.clouddn.com/dispatch_touch_event_video.JPG\" alt=\"\"></p>\n<p>1  </p>\n<blockquote>\n<p>TouchACTION_DOWN, ACTION_UP, ACTION_MOVE,ACTION_CANCEL<br><a id=\"more\"></a></p>\n</blockquote>\n<ul>\n<li>ACTION_DOWNMotionEvent</li>\n</ul>\n<blockquote>\n<ol>\n<li><p>Activity.dispatchTouchEvent</p>\n</li>\n<li><p>ViewGroup.dispatchTouchEvent</p>\n</li>\n<li><p>ViewGroup.onInterceptTouchEvent</p>\n<p>..n .&gt;&gt;&gt;</p>\n</li>\n<li><p>View.dispatchTouchEvent</p>\n</li>\n<li><p>View.onTouchEvent</p>\n</li>\n</ol>\n<p>      .n.&gt;&gt;&gt;</p>\n<ol>\n<li>ViewGroup.onTouchEvent</li>\n<li>Activity.onTouchEvent</li>\n</ol>\n</blockquote>\n<p>1(super)ACTION_DOWN</p>\n<ul>\n<li><p>ACTION_DOWNoverride</p>\n<blockquote>\n<p>true , false ,super</p>\n</blockquote>\n<ul>\n<li>return trueACTION_DOWN()onInterceptTouchEvent,trueViewGroupViewACTION_CANCELViewGrouponTouchEvent</li>\n<li>return false: dispatchTouchEventfalseACTION_DOWNViewGroup(Activity)OnTouchEventonInterceptTouchEvent,falseViewGrouponTouchEventfalseViewGroupOnTouchEvent </li>\n<li>return super : 1</li>\n</ul>\n</li>\n</ul>\n<p><img src=\"http://odzl05jxx.bkt.clouddn.com/touch_event_1.png\" alt=\"\"></p>\n<p>2 <a href=\"http://www.jianshu.com/p/e99b5e8bd67b\"></a>  </p>\n<p><img src=\"http://odzl05jxx.bkt.clouddn.com/touch_event_2.png\" alt=\"\"></p>\n<p>3 <a href=\"http://www.jianshu.com/p/e99b5e8bd67b\"></a> </p>\n<p>ACTION_DOWNACTION_MOVE,ACTION_UP</p>\n<p></p>\n<blockquote>\n<p>gesture = ACTION_DOWN+ a bounch of ACTIONS +ACTION_UP</p>\n</blockquote>\n<p>gesture(),swipe,click,fling</p>\n<p>ACTION_DWONandroidtouchViewTouch Target,gestureACTION_MOVE,ACTION_UP1.Touch Targettargetview traversing; 2Touch TargetViewViewgestureOnTouchEventACTION_DOWNtrue,TouchTarget<a href=\"http://www.jianshu.com/p/e99b5e8bd67b\"></a>:</p>\n<blockquote>\n<p>ACTION_DOWNreturn true  ACTION_MOVEACTION_UPdispatchTouchEventACTION_DOWNdispatchTouchEventACTION_DOWNonTouchEventACTION_MOVEACTION_UPonTouchEvent</p>\n</blockquote>\n<p>TouchTargetTouchTarget<strong><em></em></strong>()ViewGroupdispatchTouchEventonInterceptTouchEventTouchTargetACTION_MOVEViewGrouponInterceptTouchEventtrueViewGroupViewViewTarget,(ACTION_MOVE)ViewGroupViewACTION_CANCEL(foucusedunfocused)ScrollView(Android)ButtonACTION_DOWNBUTTONACTION_DOWN,clickButtonTouchTargetScrollViewScrollViewScrollViewonInterceptTouchEventACTION_DWONfalse()ACTION_MOVE(),trueTouchTargetOnInterceptTouchEventdispatchTouchEventViewGrouponTouchEventdispatchandroidApi</p>\n<h3 id=\"onClick\"><a href=\"#onClick\" class=\"headerlink\" title=\"#onClick\"></a>#onClick</h3><p>onClickonLongClickonTouchListener</p>\n<p>ViewdispatchTouchEvent</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">case</span> MotionEvent.ACTION_UP:</div><div class=\"line\">                    <span class=\"keyword\">boolean</span> prepressed = (mPrivateFlags &amp; PFLAG_PREPRESSED) != <span class=\"number\">0</span>;</div><div class=\"line\">                    <span class=\"keyword\">if</span> ((mPrivateFlags &amp; PFLAG_PRESSED) != <span class=\"number\">0</span> || prepressed) &#123;</div><div class=\"line\">                        <span class=\"comment\">// take focus if we don't have it already and we should in</span></div><div class=\"line\">                        <span class=\"comment\">// touch mode.</span></div><div class=\"line\">                        <span class=\"keyword\">boolean</span> focusTaken = <span class=\"keyword\">false</span>;</div><div class=\"line\">                        <span class=\"keyword\">if</span> (isFocusable() &amp;&amp; isFocusableInTouchMode() &amp;&amp; !isFocused()) &#123;</div><div class=\"line\">                            focusTaken = requestFocus();</div><div class=\"line\">                        &#125;</div><div class=\"line\"></div><div class=\"line\">                        <span class=\"keyword\">if</span> (prepressed) &#123;</div><div class=\"line\">                            <span class=\"comment\">// The button is being released before we actually</span></div><div class=\"line\">                            <span class=\"comment\">// showed it as pressed.  Make it show the pressed</span></div><div class=\"line\">                            <span class=\"comment\">// state now (before scheduling the click) to ensure</span></div><div class=\"line\">                            <span class=\"comment\">// the user sees it.</span></div><div class=\"line\">                            setPressed(<span class=\"keyword\">true</span>, x, y);</div><div class=\"line\">                       &#125;</div><div class=\"line\"></div><div class=\"line\">                        <span class=\"keyword\">if</span> (!mHasPerformedLongPress &amp;&amp; !mIgnoreNextUpEvent) &#123;</div><div class=\"line\">                            <span class=\"comment\">// This is a tap, so remove the longpress check</span></div><div class=\"line\">                            removeLongPressCallback();</div><div class=\"line\"></div><div class=\"line\">                            <span class=\"comment\">// Only perform take click actions if we were in the pressed state</span></div><div class=\"line\">                            <span class=\"keyword\">if</span> (!focusTaken) &#123;</div><div class=\"line\">                                <span class=\"comment\">// Use a Runnable and post this rather than calling</span></div><div class=\"line\">                                <span class=\"comment\">// performClick directly. This lets other visual state</span></div><div class=\"line\">                                <span class=\"comment\">// of the view update before click actions start.</span></div><div class=\"line\">                                <span class=\"keyword\">if</span> (mPerformClick == <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">                                    mPerformClick = <span class=\"keyword\">new</span> PerformClick();</div><div class=\"line\">                                &#125;</div><div class=\"line\">                                <span class=\"keyword\">if</span> (!post(mPerformClick)) &#123;</div><div class=\"line\">                                    performClick();</div><div class=\"line\">                                &#125;</div><div class=\"line\">                            &#125;</div><div class=\"line\">                        &#125;</div><div class=\"line\"></div><div class=\"line\">                        <span class=\"keyword\">if</span> (mUnsetPressedState == <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">                            mUnsetPressedState = <span class=\"keyword\">new</span> UnsetPressedState();</div><div class=\"line\">                        &#125;</div><div class=\"line\"></div><div class=\"line\">                        <span class=\"keyword\">if</span> (prepressed) &#123;</div><div class=\"line\">                            postDelayed(mUnsetPressedState,</div><div class=\"line\">                                    ViewConfiguration.getPressedStateDuration());</div><div class=\"line\">                        &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (!post(mUnsetPressedState)) &#123;</div><div class=\"line\">                            <span class=\"comment\">// If the post failed, unpress right now</span></div><div class=\"line\">                            mUnsetPressedState.run();</div><div class=\"line\">                        &#125;</div><div class=\"line\"></div><div class=\"line\">                        removeTapCallback();</div><div class=\"line\">                    &#125;</div><div class=\"line\">                    mIgnoreNextUpEvent = <span class=\"keyword\">false</span>;</div><div class=\"line\">                    <span class=\"keyword\">break</span>;</div></pre></td></tr></table></figure>\n<p>onClickACTION_UP</p>\n<p>LongClickACTION_DOWN</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">case</span> MotionEvent.ACTION_DOWN:</div><div class=\"line\">                  mHasPerformedLongPress = <span class=\"keyword\">false</span>;</div><div class=\"line\"></div><div class=\"line\">                  <span class=\"keyword\">if</span> (performButtonActionOnTouchDown(event)) &#123;</div><div class=\"line\">                      <span class=\"keyword\">break</span>;</div><div class=\"line\">                  &#125;</div><div class=\"line\"></div><div class=\"line\">                  <span class=\"comment\">// Walk up the hierarchy to determine if we're inside a scrolling container.</span></div><div class=\"line\">                  <span class=\"keyword\">boolean</span> isInScrollingContainer = isInScrollingContainer();</div><div class=\"line\"></div><div class=\"line\">                  <span class=\"comment\">// For views inside a scrolling container, delay the pressed feedback for</span></div><div class=\"line\">                  <span class=\"comment\">// a short period in case this is a scroll.</span></div><div class=\"line\">                  <span class=\"keyword\">if</span> (isInScrollingContainer) &#123;</div><div class=\"line\">                      mPrivateFlags |= PFLAG_PREPRESSED;</div><div class=\"line\">                      <span class=\"keyword\">if</span> (mPendingCheckForTap == <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">                          mPendingCheckForTap = <span class=\"keyword\">new</span> CheckForTap();</div><div class=\"line\">                      &#125;</div><div class=\"line\">                      mPendingCheckForTap.x = event.getX();</div><div class=\"line\">                      mPendingCheckForTap.y = event.getY();</div><div class=\"line\">                      postDelayed(mPendingCheckForTap, ViewConfiguration.getTapTimeout());</div><div class=\"line\">                  &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">                      <span class=\"comment\">// Not inside a scrolling container, so show the feedback right away</span></div><div class=\"line\">                      setPressed(<span class=\"keyword\">true</span>, x, y);</div><div class=\"line\">                      checkForLongClick(<span class=\"number\">0</span>, x, y);</div><div class=\"line\">                  &#125;</div><div class=\"line\">                  <span class=\"keyword\">break</span>;</div></pre></td></tr></table></figure>\n<p>checkForLongClick, ACTION_DOWNpostDelayeddelay</p>\n<blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">&gt; ViewConfiguration.getLongPressTimeout() - delayOffset</div><div class=\"line\">&gt;</div></pre></td></tr></table></figure>\n</blockquote>\n<p>Eclair2.1500ms500msCheckForLongPress</p>\n<p>LongClickDOWN500msOnClickUPOnClickOnLongClickonLongClicktrue <em>mHasPerformedLongPress</em> = true ,ACTION_UPHasPerformLongPress==trueonClickonLongClickListenerboolean</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">if</span> (!mHasPerformedLongPress &amp;&amp; !mIgnoreNextUpEvent) &#123;</div><div class=\"line\">                           <span class=\"comment\">// This is a tap, so remove the longpress check</span></div><div class=\"line\">                           removeLongPressCallback();</div><div class=\"line\"></div><div class=\"line\">                           <span class=\"comment\">// Only perform take click actions if we were in the pressed state</span></div><div class=\"line\">                           <span class=\"keyword\">if</span> (!focusTaken) &#123;</div><div class=\"line\">                               <span class=\"comment\">// Use a Runnable and post this rather than calling</span></div><div class=\"line\">                               <span class=\"comment\">// performClick directly. This lets other visual state</span></div><div class=\"line\">                               <span class=\"comment\">// of the view update before click actions start.</span></div><div class=\"line\">                               <span class=\"keyword\">if</span> (mPerformClick == <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">                                   mPerformClick = <span class=\"keyword\">new</span> PerformClick();</div><div class=\"line\">                               &#125;</div><div class=\"line\">                               <span class=\"keyword\">if</span> (!post(mPerformClick)) &#123;</div><div class=\"line\">                                   performClick();</div><div class=\"line\">                               &#125;</div><div class=\"line\">                           &#125;</div><div class=\"line\">                       &#125;</div></pre></td></tr></table></figure>\n<p>OnTouchListener: onTouchListenerdispatchTouchEventlisteneronTouchtrueonTouchEventOnTouchListeneronClickonLongClick</p>\n<h2 id=\"VelocityTracker\"><a href=\"#VelocityTracker\" class=\"headerlink\" title=\"VelocityTracker\"></a>VelocityTracker</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">velocityTracker = VelocityTracker.obtain()</div><div class=\"line\">velocityTracker.addMovement(event);</div><div class=\"line\">velocityTracker.computeCurrentVelocity(<span class=\"number\">1</span>);  </div><div class=\"line\">velocityTracker.getXVelocity();</div><div class=\"line\">velocityTracker.recycle();</div></pre></td></tr></table></figure>\n<p>VelocityTrackernativejava</p>\n<h3 id=\"Fling\"><a href=\"#Fling\" class=\"headerlink\" title=\"Fling\"></a>Fling</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">onFling</span><span class=\"params\">(<span class=\"keyword\">float</span> velocityX,<span class=\"keyword\">float</span> velocityY)</span></span>&#123;</div><div class=\"line\">  scroller.fling(getScrollX(),getScrollY(),(<span class=\"keyword\">int</span>)-velocityX</div><div class=\"line\">                (<span class=\"keyword\">int</span>)-velocityY,minScrollX,maxScrollX,</div><div class=\"line\">                minScrollY,maxScrollY);</div><div class=\"line\">  invalidate();</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"meta\">@overdide</span><span class=\"comment\">// View</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">computeScroll</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\">  <span class=\"keyword\">if</span>(scroller.isFinished())&#123;</div><div class=\"line\">    scroller.computeScrollOffset();</div><div class=\"line\">    scrollTo(scroller.getCurrX(),scroller.getCurrY());</div><div class=\"line\">    postInvalidateOnAnimation();</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyView</span> <span class=\"keyword\">extends</span> <span class=\"title\">View</span> </span>&#123;</div><div class=\"line\"> </div><div class=\"line\">GestureDetector gestureDetector;</div><div class=\"line\"> </div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">MyView</span><span class=\"params\">(Context context, AttributeSet attrs)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">super</span>(context, attrs);</div><div class=\"line\">            <span class=\"comment\">// creating new gesture detector </span></div><div class=\"line\">    gestureDetector = <span class=\"keyword\">new</span> GestureDetector(context, <span class=\"keyword\">new</span> GestureListener());</div><div class=\"line\">&#125; </div><div class=\"line\"> </div><div class=\"line\"><span class=\"comment\">// skipping measure calculation and drawing </span></div><div class=\"line\"> </div><div class=\"line\">    <span class=\"comment\">// delegate the event to the gesture detector </span></div><div class=\"line\"><span class=\"meta\">@Override</span> </div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">onTouchEvent</span><span class=\"params\">(MotionEvent e)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> gestureDetector.onTouchEvent(e);</div><div class=\"line\">&#125; </div><div class=\"line\"> </div><div class=\"line\"> </div><div class=\"line\"><span class=\"keyword\">private</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">GestureListener</span> <span class=\"keyword\">extends</span> <span class=\"title\">GestureDetector</span>.<span class=\"title\">SimpleOnGestureListener</span> </span>&#123;</div><div class=\"line\"> </div><div class=\"line\">    <span class=\"meta\">@Override</span> </div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">onDown</span><span class=\"params\">(MotionEvent e)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>; </div><div class=\"line\">    &#125; </div><div class=\"line\">    <span class=\"comment\">// event when double tap occurs </span></div><div class=\"line\">    <span class=\"meta\">@Override</span> </div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">onDoubleTap</span><span class=\"params\">(MotionEvent e)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">float</span> x = e.getX();</div><div class=\"line\">        <span class=\"keyword\">float</span> y = e.getY();</div><div class=\"line\"> </div><div class=\"line\">        Log.d(<span class=\"string\">\"Double Tap\"</span>, <span class=\"string\">\"Tapped at: (\"</span> + x + <span class=\"string\">\",\"</span> + y + <span class=\"string\">\")\"</span>);</div><div class=\"line\"> </div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>; </div><div class=\"line\">    &#125; </div><div class=\"line\">&#125; </div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p> ViewConfiguration</p>\n<p>int getScaledTouchSlop(); (if Math.abs(x<em>x+y</em>y)&gt;mTouchSlop )</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/**    </div><div class=\"line\">  * UI    </div><div class=\"line\">  */</span> </div><div class=\"line\"> <span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ViewConfiguration</span> </span>&#123;     </div><div class=\"line\">     <span class=\"comment\">// px     </span></div><div class=\"line\">     <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> SCROLL_BAR_SIZE = <span class=\"number\">10</span>;     </div><div class=\"line\">          </div><div class=\"line\">     <span class=\"comment\">//     </span></div><div class=\"line\">     <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> SCROLL_BAR_FADE_DURATION = <span class=\"number\">250</span>;     </div><div class=\"line\">          </div><div class=\"line\">     <span class=\"comment\">//      </span></div><div class=\"line\">     <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> SCROLL_BAR_DEFAULT_DELAY = <span class=\"number\">300</span>;     </div><div class=\"line\">          </div><div class=\"line\">     <span class=\"comment\">//      </span></div><div class=\"line\">     <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> FADING_EDGE_LENGTH = <span class=\"number\">12</span>;     </div><div class=\"line\">          </div><div class=\"line\">     <span class=\"comment\">//     </span></div><div class=\"line\">     <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> PRESSED_STATE_DURATION = <span class=\"number\">125</span>;     </div><div class=\"line\">              </div><div class=\"line\">     <span class=\"comment\">//     </span></div><div class=\"line\">     <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> LONG_PRESS_TIMEOUT = <span class=\"number\">500</span>;     </div><div class=\"line\">              </div><div class=\"line\">     <span class=\"comment\">//     </span></div><div class=\"line\">     <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> GLOBAL_ACTIONS_KEY_TIMEOUT = <span class=\"number\">500</span>;     </div><div class=\"line\">              </div><div class=\"line\">     <span class=\"comment\">//touch     </span></div><div class=\"line\">     <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> TAP_TIMEOUT = <span class=\"number\">115</span>;     </div><div class=\"line\">              </div><div class=\"line\">     <span class=\"comment\">/**    </div><div class=\"line\">      * Defines the duration in milliseconds we will wait to see if a touch event     </div><div class=\"line\">      * is a jump tap. If the user does not complete the jump tap within this interval, it is    </div><div class=\"line\">      * considered to be a tap.     </div><div class=\"line\">      */</span> </div><div class=\"line\">     <span class=\"comment\">//touch     </span></div><div class=\"line\">     <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> JUMP_TAP_TIMEOUT = <span class=\"number\">500</span>;     </div><div class=\"line\">          </div><div class=\"line\">     <span class=\"comment\">//     </span></div><div class=\"line\">     <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> DOUBLE_TAP_TIMEOUT = <span class=\"number\">300</span>;     </div><div class=\"line\">              </div><div class=\"line\">     <span class=\"comment\">//     </span></div><div class=\"line\">     <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> ZOOM_CONTROLS_TIMEOUT = <span class=\"number\">3000</span>;     </div><div class=\"line\">          </div><div class=\"line\">     <span class=\"comment\">/**    </div><div class=\"line\">      * Inset in pixels to look for touchable content when the user touches the edge of the screen    </div><div class=\"line\">      */</span> </div><div class=\"line\">     <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> EDGE_SLOP = <span class=\"number\">12</span>;     </div><div class=\"line\">              </div><div class=\"line\">     <span class=\"comment\">/**    </div><div class=\"line\">      * Distance a touch can wander before we think the user is scrolling in pixels    </div><div class=\"line\">      */</span> </div><div class=\"line\">     <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> TOUCH_SLOP = <span class=\"number\">16</span>;     </div><div class=\"line\">              </div><div class=\"line\">     <span class=\"comment\">/**    </div><div class=\"line\">      * Distance a touch can wander before we think the user is attempting a paged scroll    </div><div class=\"line\">      * (in dips)    </div><div class=\"line\">      */</span> </div><div class=\"line\">     <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> PAGING_TOUCH_SLOP = TOUCH_SLOP * <span class=\"number\">2</span>;     </div><div class=\"line\">              </div><div class=\"line\">     <span class=\"comment\">/**    </div><div class=\"line\">      * Distance between the first touch and second touch to still be considered a double tap    </div><div class=\"line\">      */</span> </div><div class=\"line\">     <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> DOUBLE_TAP_SLOP = <span class=\"number\">100</span>;     </div><div class=\"line\">              </div><div class=\"line\">     <span class=\"comment\">/**    </div><div class=\"line\">      * Distance a touch needs to be outside of a window's bounds for it to    </div><div class=\"line\">      * count as outside for purposes of dismissing the window.    </div><div class=\"line\">      */</span> </div><div class=\"line\">     <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> WINDOW_TOUCH_SLOP = <span class=\"number\">16</span>;     </div><div class=\"line\">          </div><div class=\"line\">    <span class=\"comment\">//fling     </span></div><div class=\"line\">     <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> MINIMUM_FLING_VELOCITY = <span class=\"number\">50</span>;     </div><div class=\"line\">              </div><div class=\"line\">     <span class=\"comment\">//fling     </span></div><div class=\"line\">     <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> MAXIMUM_FLING_VELOCITY = <span class=\"number\">4000</span>;     </div><div class=\"line\">          </div><div class=\"line\">     <span class=\"comment\">//ARGB888     </span></div><div class=\"line\">     <span class=\"meta\">@Deprecated</span>     </div><div class=\"line\">     <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> MAXIMUM_DRAWING_CACHE_SIZE = <span class=\"number\">320</span> * <span class=\"number\">480</span> * <span class=\"number\">4</span>; <span class=\"comment\">// HVGA screen, ARGB8888     </span></div><div class=\"line\">          </div><div class=\"line\">     <span class=\"comment\">//flingsscrolls     </span></div><div class=\"line\">     <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">float</span> SCROLL_FRICTION = <span class=\"number\">0.015f</span>;     </div><div class=\"line\">          </div><div class=\"line\">     <span class=\"comment\">/**    </div><div class=\"line\">      * Max distance to over scroll for edge effects    </div><div class=\"line\">      */</span> </div><div class=\"line\">     <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> OVERSCROLL_DISTANCE = <span class=\"number\">0</span>;     </div><div class=\"line\">          </div><div class=\"line\">     <span class=\"comment\">/**    </div><div class=\"line\">      * Max distance to over fling for edge effects    </div><div class=\"line\">      */</span> </div><div class=\"line\">     <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> OVERFLING_DISTANCE = <span class=\"number\">4</span>;     </div><div class=\"line\">          </div><div class=\"line\"> &#125;</div></pre></td></tr></table></figure>\n<ul>\n<li><h2 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h2></li>\n</ul>\n<ol>\n<li><a href=\"http://www.jianshu.com/p/e99b5e8bd67b\"></a></li>\n<li><a href=\"https://www.youtube.com/watch?v=usBaTHZdXSI\">making sense of the touch system</a></li>\n<li><a href=\"http://blog.csdn.net/ddna/article/details/5451722\">Android onTouchEvent, onClickonLongClick</a></li>\n<li><a href=\"http://wangkuiwu.github.io/2015/01/03/TouchEvent-View/\">Android()</a></li>\n<li><a href=\"http://www.jcodecraeer.com/a/anzhuokaifa/androidkaifa/2013/0225/907.html\">ViewConfiguration</a></li>\n<li><p><a href=\"http://glblong.blog.51cto.com/3058613/1559320\"></a></p>\n<p></p>\n</li>\n</ol>\n","excerpt":"<p><img src=\"http://odzl05jxx.bkt.clouddn.com/dispatch_touch_event_video.JPG\" alt=\"\"></p>\n<p>1  </p>\n<blockquote>\n<p>TouchACTION_DOWN, ACTION_UP, ACTION_MOVE,ACTION_CANCEL<br>","more":"</p>\n</blockquote>\n<ul>\n<li>ACTION_DOWNMotionEvent</li>\n</ul>\n<blockquote>\n<ol>\n<li><p>Activity.dispatchTouchEvent</p>\n</li>\n<li><p>ViewGroup.dispatchTouchEvent</p>\n</li>\n<li><p>ViewGroup.onInterceptTouchEvent</p>\n<p>..n .&gt;&gt;&gt;</p>\n</li>\n<li><p>View.dispatchTouchEvent</p>\n</li>\n<li><p>View.onTouchEvent</p>\n</li>\n</ol>\n<p>      .n.&gt;&gt;&gt;</p>\n<ol>\n<li>ViewGroup.onTouchEvent</li>\n<li>Activity.onTouchEvent</li>\n</ol>\n</blockquote>\n<p>1(super)ACTION_DOWN</p>\n<ul>\n<li><p>ACTION_DOWNoverride</p>\n<blockquote>\n<p>true , false ,super</p>\n</blockquote>\n<ul>\n<li>return trueACTION_DOWN()onInterceptTouchEvent,trueViewGroupViewACTION_CANCELViewGrouponTouchEvent</li>\n<li>return false: dispatchTouchEventfalseACTION_DOWNViewGroup(Activity)OnTouchEventonInterceptTouchEvent,falseViewGrouponTouchEventfalseViewGroupOnTouchEvent </li>\n<li>return super : 1</li>\n</ul>\n</li>\n</ul>\n<p><img src=\"http://odzl05jxx.bkt.clouddn.com/touch_event_1.png\" alt=\"\"></p>\n<p>2 <a href=\"http://www.jianshu.com/p/e99b5e8bd67b\"></a>  </p>\n<p><img src=\"http://odzl05jxx.bkt.clouddn.com/touch_event_2.png\" alt=\"\"></p>\n<p>3 <a href=\"http://www.jianshu.com/p/e99b5e8bd67b\"></a> </p>\n<p>ACTION_DOWNACTION_MOVE,ACTION_UP</p>\n<p></p>\n<blockquote>\n<p>gesture = ACTION_DOWN+ a bounch of ACTIONS +ACTION_UP</p>\n</blockquote>\n<p>gesture(),swipe,click,fling</p>\n<p>ACTION_DWONandroidtouchViewTouch Target,gestureACTION_MOVE,ACTION_UP1.Touch Targettargetview traversing; 2Touch TargetViewViewgestureOnTouchEventACTION_DOWNtrue,TouchTarget<a href=\"http://www.jianshu.com/p/e99b5e8bd67b\"></a>:</p>\n<blockquote>\n<p>ACTION_DOWNreturn true  ACTION_MOVEACTION_UPdispatchTouchEventACTION_DOWNdispatchTouchEventACTION_DOWNonTouchEventACTION_MOVEACTION_UPonTouchEvent</p>\n</blockquote>\n<p>TouchTargetTouchTarget<strong><em></em></strong>()ViewGroupdispatchTouchEventonInterceptTouchEventTouchTargetACTION_MOVEViewGrouponInterceptTouchEventtrueViewGroupViewViewTarget,(ACTION_MOVE)ViewGroupViewACTION_CANCEL(foucusedunfocused)ScrollView(Android)ButtonACTION_DOWNBUTTONACTION_DOWN,clickButtonTouchTargetScrollViewScrollViewScrollViewonInterceptTouchEventACTION_DWONfalse()ACTION_MOVE(),trueTouchTargetOnInterceptTouchEventdispatchTouchEventViewGrouponTouchEventdispatchandroidApi</p>\n<h3 id=\"onClick\"><a href=\"#onClick\" class=\"headerlink\" title=\"#onClick\"></a>#onClick</h3><p>onClickonLongClickonTouchListener</p>\n<p>ViewdispatchTouchEvent</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">case</span> MotionEvent.ACTION_UP:</div><div class=\"line\">                    <span class=\"keyword\">boolean</span> prepressed = (mPrivateFlags &amp; PFLAG_PREPRESSED) != <span class=\"number\">0</span>;</div><div class=\"line\">                    <span class=\"keyword\">if</span> ((mPrivateFlags &amp; PFLAG_PRESSED) != <span class=\"number\">0</span> || prepressed) &#123;</div><div class=\"line\">                        <span class=\"comment\">// take focus if we don't have it already and we should in</span></div><div class=\"line\">                        <span class=\"comment\">// touch mode.</span></div><div class=\"line\">                        <span class=\"keyword\">boolean</span> focusTaken = <span class=\"keyword\">false</span>;</div><div class=\"line\">                        <span class=\"keyword\">if</span> (isFocusable() &amp;&amp; isFocusableInTouchMode() &amp;&amp; !isFocused()) &#123;</div><div class=\"line\">                            focusTaken = requestFocus();</div><div class=\"line\">                        &#125;</div><div class=\"line\"></div><div class=\"line\">                        <span class=\"keyword\">if</span> (prepressed) &#123;</div><div class=\"line\">                            <span class=\"comment\">// The button is being released before we actually</span></div><div class=\"line\">                            <span class=\"comment\">// showed it as pressed.  Make it show the pressed</span></div><div class=\"line\">                            <span class=\"comment\">// state now (before scheduling the click) to ensure</span></div><div class=\"line\">                            <span class=\"comment\">// the user sees it.</span></div><div class=\"line\">                            setPressed(<span class=\"keyword\">true</span>, x, y);</div><div class=\"line\">                       &#125;</div><div class=\"line\"></div><div class=\"line\">                        <span class=\"keyword\">if</span> (!mHasPerformedLongPress &amp;&amp; !mIgnoreNextUpEvent) &#123;</div><div class=\"line\">                            <span class=\"comment\">// This is a tap, so remove the longpress check</span></div><div class=\"line\">                            removeLongPressCallback();</div><div class=\"line\"></div><div class=\"line\">                            <span class=\"comment\">// Only perform take click actions if we were in the pressed state</span></div><div class=\"line\">                            <span class=\"keyword\">if</span> (!focusTaken) &#123;</div><div class=\"line\">                                <span class=\"comment\">// Use a Runnable and post this rather than calling</span></div><div class=\"line\">                                <span class=\"comment\">// performClick directly. This lets other visual state</span></div><div class=\"line\">                                <span class=\"comment\">// of the view update before click actions start.</span></div><div class=\"line\">                                <span class=\"keyword\">if</span> (mPerformClick == <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">                                    mPerformClick = <span class=\"keyword\">new</span> PerformClick();</div><div class=\"line\">                                &#125;</div><div class=\"line\">                                <span class=\"keyword\">if</span> (!post(mPerformClick)) &#123;</div><div class=\"line\">                                    performClick();</div><div class=\"line\">                                &#125;</div><div class=\"line\">                            &#125;</div><div class=\"line\">                        &#125;</div><div class=\"line\"></div><div class=\"line\">                        <span class=\"keyword\">if</span> (mUnsetPressedState == <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">                            mUnsetPressedState = <span class=\"keyword\">new</span> UnsetPressedState();</div><div class=\"line\">                        &#125;</div><div class=\"line\"></div><div class=\"line\">                        <span class=\"keyword\">if</span> (prepressed) &#123;</div><div class=\"line\">                            postDelayed(mUnsetPressedState,</div><div class=\"line\">                                    ViewConfiguration.getPressedStateDuration());</div><div class=\"line\">                        &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (!post(mUnsetPressedState)) &#123;</div><div class=\"line\">                            <span class=\"comment\">// If the post failed, unpress right now</span></div><div class=\"line\">                            mUnsetPressedState.run();</div><div class=\"line\">                        &#125;</div><div class=\"line\"></div><div class=\"line\">                        removeTapCallback();</div><div class=\"line\">                    &#125;</div><div class=\"line\">                    mIgnoreNextUpEvent = <span class=\"keyword\">false</span>;</div><div class=\"line\">                    <span class=\"keyword\">break</span>;</div></pre></td></tr></table></figure>\n<p>onClickACTION_UP</p>\n<p>LongClickACTION_DOWN</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">case</span> MotionEvent.ACTION_DOWN:</div><div class=\"line\">                  mHasPerformedLongPress = <span class=\"keyword\">false</span>;</div><div class=\"line\"></div><div class=\"line\">                  <span class=\"keyword\">if</span> (performButtonActionOnTouchDown(event)) &#123;</div><div class=\"line\">                      <span class=\"keyword\">break</span>;</div><div class=\"line\">                  &#125;</div><div class=\"line\"></div><div class=\"line\">                  <span class=\"comment\">// Walk up the hierarchy to determine if we're inside a scrolling container.</span></div><div class=\"line\">                  <span class=\"keyword\">boolean</span> isInScrollingContainer = isInScrollingContainer();</div><div class=\"line\"></div><div class=\"line\">                  <span class=\"comment\">// For views inside a scrolling container, delay the pressed feedback for</span></div><div class=\"line\">                  <span class=\"comment\">// a short period in case this is a scroll.</span></div><div class=\"line\">                  <span class=\"keyword\">if</span> (isInScrollingContainer) &#123;</div><div class=\"line\">                      mPrivateFlags |= PFLAG_PREPRESSED;</div><div class=\"line\">                      <span class=\"keyword\">if</span> (mPendingCheckForTap == <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">                          mPendingCheckForTap = <span class=\"keyword\">new</span> CheckForTap();</div><div class=\"line\">                      &#125;</div><div class=\"line\">                      mPendingCheckForTap.x = event.getX();</div><div class=\"line\">                      mPendingCheckForTap.y = event.getY();</div><div class=\"line\">                      postDelayed(mPendingCheckForTap, ViewConfiguration.getTapTimeout());</div><div class=\"line\">                  &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">                      <span class=\"comment\">// Not inside a scrolling container, so show the feedback right away</span></div><div class=\"line\">                      setPressed(<span class=\"keyword\">true</span>, x, y);</div><div class=\"line\">                      checkForLongClick(<span class=\"number\">0</span>, x, y);</div><div class=\"line\">                  &#125;</div><div class=\"line\">                  <span class=\"keyword\">break</span>;</div></pre></td></tr></table></figure>\n<p>checkForLongClick, ACTION_DOWNpostDelayeddelay</p>\n<blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">&gt; ViewConfiguration.getLongPressTimeout() - delayOffset</div><div class=\"line\">&gt;</div></pre></td></tr></table></figure>\n</blockquote>\n<p>Eclair2.1500ms500msCheckForLongPress</p>\n<p>LongClickDOWN500msOnClickUPOnClickOnLongClickonLongClicktrue <em>mHasPerformedLongPress</em> = true ,ACTION_UPHasPerformLongPress==trueonClickonLongClickListenerboolean</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">if</span> (!mHasPerformedLongPress &amp;&amp; !mIgnoreNextUpEvent) &#123;</div><div class=\"line\">                           <span class=\"comment\">// This is a tap, so remove the longpress check</span></div><div class=\"line\">                           removeLongPressCallback();</div><div class=\"line\"></div><div class=\"line\">                           <span class=\"comment\">// Only perform take click actions if we were in the pressed state</span></div><div class=\"line\">                           <span class=\"keyword\">if</span> (!focusTaken) &#123;</div><div class=\"line\">                               <span class=\"comment\">// Use a Runnable and post this rather than calling</span></div><div class=\"line\">                               <span class=\"comment\">// performClick directly. This lets other visual state</span></div><div class=\"line\">                               <span class=\"comment\">// of the view update before click actions start.</span></div><div class=\"line\">                               <span class=\"keyword\">if</span> (mPerformClick == <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">                                   mPerformClick = <span class=\"keyword\">new</span> PerformClick();</div><div class=\"line\">                               &#125;</div><div class=\"line\">                               <span class=\"keyword\">if</span> (!post(mPerformClick)) &#123;</div><div class=\"line\">                                   performClick();</div><div class=\"line\">                               &#125;</div><div class=\"line\">                           &#125;</div><div class=\"line\">                       &#125;</div></pre></td></tr></table></figure>\n<p>OnTouchListener: onTouchListenerdispatchTouchEventlisteneronTouchtrueonTouchEventOnTouchListeneronClickonLongClick</p>\n<h2 id=\"VelocityTracker\"><a href=\"#VelocityTracker\" class=\"headerlink\" title=\"VelocityTracker\"></a>VelocityTracker</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">velocityTracker = VelocityTracker.obtain()</div><div class=\"line\">velocityTracker.addMovement(event);</div><div class=\"line\">velocityTracker.computeCurrentVelocity(<span class=\"number\">1</span>);  </div><div class=\"line\">velocityTracker.getXVelocity();</div><div class=\"line\">velocityTracker.recycle();</div></pre></td></tr></table></figure>\n<p>VelocityTrackernativejava</p>\n<h3 id=\"Fling\"><a href=\"#Fling\" class=\"headerlink\" title=\"Fling\"></a>Fling</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">onFling</span><span class=\"params\">(<span class=\"keyword\">float</span> velocityX,<span class=\"keyword\">float</span> velocityY)</span></span>&#123;</div><div class=\"line\">  scroller.fling(getScrollX(),getScrollY(),(<span class=\"keyword\">int</span>)-velocityX</div><div class=\"line\">                (<span class=\"keyword\">int</span>)-velocityY,minScrollX,maxScrollX,</div><div class=\"line\">                minScrollY,maxScrollY);</div><div class=\"line\">  invalidate();</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"meta\">@overdide</span><span class=\"comment\">// View</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">computeScroll</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\">  <span class=\"keyword\">if</span>(scroller.isFinished())&#123;</div><div class=\"line\">    scroller.computeScrollOffset();</div><div class=\"line\">    scrollTo(scroller.getCurrX(),scroller.getCurrY());</div><div class=\"line\">    postInvalidateOnAnimation();</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyView</span> <span class=\"keyword\">extends</span> <span class=\"title\">View</span> </span>&#123;</div><div class=\"line\"> </div><div class=\"line\">GestureDetector gestureDetector;</div><div class=\"line\"> </div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">MyView</span><span class=\"params\">(Context context, AttributeSet attrs)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">super</span>(context, attrs);</div><div class=\"line\">            <span class=\"comment\">// creating new gesture detector </span></div><div class=\"line\">    gestureDetector = <span class=\"keyword\">new</span> GestureDetector(context, <span class=\"keyword\">new</span> GestureListener());</div><div class=\"line\">&#125; </div><div class=\"line\"> </div><div class=\"line\"><span class=\"comment\">// skipping measure calculation and drawing </span></div><div class=\"line\"> </div><div class=\"line\">    <span class=\"comment\">// delegate the event to the gesture detector </span></div><div class=\"line\"><span class=\"meta\">@Override</span> </div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">onTouchEvent</span><span class=\"params\">(MotionEvent e)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> gestureDetector.onTouchEvent(e);</div><div class=\"line\">&#125; </div><div class=\"line\"> </div><div class=\"line\"> </div><div class=\"line\"><span class=\"keyword\">private</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">GestureListener</span> <span class=\"keyword\">extends</span> <span class=\"title\">GestureDetector</span>.<span class=\"title\">SimpleOnGestureListener</span> </span>&#123;</div><div class=\"line\"> </div><div class=\"line\">    <span class=\"meta\">@Override</span> </div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">onDown</span><span class=\"params\">(MotionEvent e)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>; </div><div class=\"line\">    &#125; </div><div class=\"line\">    <span class=\"comment\">// event when double tap occurs </span></div><div class=\"line\">    <span class=\"meta\">@Override</span> </div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">onDoubleTap</span><span class=\"params\">(MotionEvent e)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">float</span> x = e.getX();</div><div class=\"line\">        <span class=\"keyword\">float</span> y = e.getY();</div><div class=\"line\"> </div><div class=\"line\">        Log.d(<span class=\"string\">\"Double Tap\"</span>, <span class=\"string\">\"Tapped at: (\"</span> + x + <span class=\"string\">\",\"</span> + y + <span class=\"string\">\")\"</span>);</div><div class=\"line\"> </div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>; </div><div class=\"line\">    &#125; </div><div class=\"line\">&#125; </div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p> ViewConfiguration</p>\n<p>int getScaledTouchSlop(); (if Math.abs(x<em>x+y</em>y)&gt;mTouchSlop )</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/**    </div><div class=\"line\">  * UI    </div><div class=\"line\">  */</span> </div><div class=\"line\"> <span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ViewConfiguration</span> </span>&#123;     </div><div class=\"line\">     <span class=\"comment\">// px     </span></div><div class=\"line\">     <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> SCROLL_BAR_SIZE = <span class=\"number\">10</span>;     </div><div class=\"line\">          </div><div class=\"line\">     <span class=\"comment\">//     </span></div><div class=\"line\">     <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> SCROLL_BAR_FADE_DURATION = <span class=\"number\">250</span>;     </div><div class=\"line\">          </div><div class=\"line\">     <span class=\"comment\">//      </span></div><div class=\"line\">     <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> SCROLL_BAR_DEFAULT_DELAY = <span class=\"number\">300</span>;     </div><div class=\"line\">          </div><div class=\"line\">     <span class=\"comment\">//      </span></div><div class=\"line\">     <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> FADING_EDGE_LENGTH = <span class=\"number\">12</span>;     </div><div class=\"line\">          </div><div class=\"line\">     <span class=\"comment\">//     </span></div><div class=\"line\">     <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> PRESSED_STATE_DURATION = <span class=\"number\">125</span>;     </div><div class=\"line\">              </div><div class=\"line\">     <span class=\"comment\">//     </span></div><div class=\"line\">     <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> LONG_PRESS_TIMEOUT = <span class=\"number\">500</span>;     </div><div class=\"line\">              </div><div class=\"line\">     <span class=\"comment\">//     </span></div><div class=\"line\">     <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> GLOBAL_ACTIONS_KEY_TIMEOUT = <span class=\"number\">500</span>;     </div><div class=\"line\">              </div><div class=\"line\">     <span class=\"comment\">//touch     </span></div><div class=\"line\">     <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> TAP_TIMEOUT = <span class=\"number\">115</span>;     </div><div class=\"line\">              </div><div class=\"line\">     <span class=\"comment\">/**    </div><div class=\"line\">      * Defines the duration in milliseconds we will wait to see if a touch event     </div><div class=\"line\">      * is a jump tap. If the user does not complete the jump tap within this interval, it is    </div><div class=\"line\">      * considered to be a tap.     </div><div class=\"line\">      */</span> </div><div class=\"line\">     <span class=\"comment\">//touch     </span></div><div class=\"line\">     <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> JUMP_TAP_TIMEOUT = <span class=\"number\">500</span>;     </div><div class=\"line\">          </div><div class=\"line\">     <span class=\"comment\">//     </span></div><div class=\"line\">     <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> DOUBLE_TAP_TIMEOUT = <span class=\"number\">300</span>;     </div><div class=\"line\">              </div><div class=\"line\">     <span class=\"comment\">//     </span></div><div class=\"line\">     <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> ZOOM_CONTROLS_TIMEOUT = <span class=\"number\">3000</span>;     </div><div class=\"line\">          </div><div class=\"line\">     <span class=\"comment\">/**    </div><div class=\"line\">      * Inset in pixels to look for touchable content when the user touches the edge of the screen    </div><div class=\"line\">      */</span> </div><div class=\"line\">     <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> EDGE_SLOP = <span class=\"number\">12</span>;     </div><div class=\"line\">              </div><div class=\"line\">     <span class=\"comment\">/**    </div><div class=\"line\">      * Distance a touch can wander before we think the user is scrolling in pixels    </div><div class=\"line\">      */</span> </div><div class=\"line\">     <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> TOUCH_SLOP = <span class=\"number\">16</span>;     </div><div class=\"line\">              </div><div class=\"line\">     <span class=\"comment\">/**    </div><div class=\"line\">      * Distance a touch can wander before we think the user is attempting a paged scroll    </div><div class=\"line\">      * (in dips)    </div><div class=\"line\">      */</span> </div><div class=\"line\">     <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> PAGING_TOUCH_SLOP = TOUCH_SLOP * <span class=\"number\">2</span>;     </div><div class=\"line\">              </div><div class=\"line\">     <span class=\"comment\">/**    </div><div class=\"line\">      * Distance between the first touch and second touch to still be considered a double tap    </div><div class=\"line\">      */</span> </div><div class=\"line\">     <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> DOUBLE_TAP_SLOP = <span class=\"number\">100</span>;     </div><div class=\"line\">              </div><div class=\"line\">     <span class=\"comment\">/**    </div><div class=\"line\">      * Distance a touch needs to be outside of a window's bounds for it to    </div><div class=\"line\">      * count as outside for purposes of dismissing the window.    </div><div class=\"line\">      */</span> </div><div class=\"line\">     <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> WINDOW_TOUCH_SLOP = <span class=\"number\">16</span>;     </div><div class=\"line\">          </div><div class=\"line\">    <span class=\"comment\">//fling     </span></div><div class=\"line\">     <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> MINIMUM_FLING_VELOCITY = <span class=\"number\">50</span>;     </div><div class=\"line\">              </div><div class=\"line\">     <span class=\"comment\">//fling     </span></div><div class=\"line\">     <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> MAXIMUM_FLING_VELOCITY = <span class=\"number\">4000</span>;     </div><div class=\"line\">          </div><div class=\"line\">     <span class=\"comment\">//ARGB888     </span></div><div class=\"line\">     <span class=\"meta\">@Deprecated</span>     </div><div class=\"line\">     <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> MAXIMUM_DRAWING_CACHE_SIZE = <span class=\"number\">320</span> * <span class=\"number\">480</span> * <span class=\"number\">4</span>; <span class=\"comment\">// HVGA screen, ARGB8888     </span></div><div class=\"line\">          </div><div class=\"line\">     <span class=\"comment\">//flingsscrolls     </span></div><div class=\"line\">     <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">float</span> SCROLL_FRICTION = <span class=\"number\">0.015f</span>;     </div><div class=\"line\">          </div><div class=\"line\">     <span class=\"comment\">/**    </div><div class=\"line\">      * Max distance to over scroll for edge effects    </div><div class=\"line\">      */</span> </div><div class=\"line\">     <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> OVERSCROLL_DISTANCE = <span class=\"number\">0</span>;     </div><div class=\"line\">          </div><div class=\"line\">     <span class=\"comment\">/**    </div><div class=\"line\">      * Max distance to over fling for edge effects    </div><div class=\"line\">      */</span> </div><div class=\"line\">     <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> OVERFLING_DISTANCE = <span class=\"number\">4</span>;     </div><div class=\"line\">          </div><div class=\"line\"> &#125;</div></pre></td></tr></table></figure>\n<ul>\n<li><h2 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h2></li>\n</ul>\n<ol>\n<li><a href=\"http://www.jianshu.com/p/e99b5e8bd67b\"></a></li>\n<li><a href=\"https://www.youtube.com/watch?v=usBaTHZdXSI\">making sense of the touch system</a></li>\n<li><a href=\"http://blog.csdn.net/ddna/article/details/5451722\">Android onTouchEvent, onClickonLongClick</a></li>\n<li><a href=\"http://wangkuiwu.github.io/2015/01/03/TouchEvent-View/\">Android()</a></li>\n<li><a href=\"http://www.jcodecraeer.com/a/anzhuokaifa/androidkaifa/2013/0225/907.html\">ViewConfiguration</a></li>\n<li><p><a href=\"http://glblong.blog.51cto.com/3058613/1559320\"></a></p>\n<p></p>\n</li>\n</ol>"}],"PostAsset":[],"PostCategory":[{"post_id":"cj50afguj0005i4vriok52p3k","category_id":"cj50afguj0002i4vriqy0t9ak","_id":"cj50afgvf000ai4vrmdd9fxeg"},{"post_id":"cj50afgu40000i4vrs8wji6k6","category_id":"cj50afguj0002i4vriqy0t9ak","_id":"cj50afgvf000fi4vrlnv5mkt3"},{"post_id":"cj50afguz0006i4vrnqz79z8g","category_id":"cj50afguj0002i4vriqy0t9ak","_id":"cj50afgvu000hi4vr9k0nrkz4"},{"post_id":"cj50afguz0009i4vr0g6lldz4","category_id":"cj50afguj0002i4vriqy0t9ak","_id":"cj50afgwa000ki4vrb154l5aq"},{"post_id":"cj50afgu40001i4vrnwoilyof","category_id":"cj50afguj0002i4vriqy0t9ak","_id":"cj50afgwa000ni4vrpksiyak6"},{"post_id":"cj50afgvf000bi4vrjn3mqp4b","category_id":"cj50afguj0002i4vriqy0t9ak","_id":"cj50afgwa000ri4vr21k5sjpj"},{"post_id":"cj50afgvf000gi4vr6wk06b7f","category_id":"cj50afguj0002i4vriqy0t9ak","_id":"cj50afgwa000ui4vri2gk0cq8"},{"post_id":"cj50afguj0004i4vr3ny0qsqb","category_id":"cj50afguj0002i4vriqy0t9ak","_id":"cj50afgwp000xi4vro2t4e6b2"},{"post_id":"cj50afgvu000ii4vra6xg2uus","category_id":"cj50afguj0002i4vriqy0t9ak","_id":"cj50afgwp0011i4vr9pchkvqe"},{"post_id":"cj50afgwa000li4vr3k7y0tns","category_id":"cj50afguj0002i4vriqy0t9ak","_id":"cj50afgwp0014i4vrlxklbioi"},{"post_id":"cj50afgwa000oi4vr3us5833h","category_id":"cj50afguj0002i4vriqy0t9ak","_id":"cj50afgx50018i4vrehaho2dx"},{"post_id":"cj50afgwa000vi4vrptwjk3p4","category_id":"cj50afguj0002i4vriqy0t9ak","_id":"cj50afgx5001bi4vr6y2537zu"},{"post_id":"cj50afgwp000zi4vrurztttuw","category_id":"cj50afguj0002i4vriqy0t9ak","_id":"cj50afgx5001fi4vr82srmbvy"},{"post_id":"cj50afgwp0012i4vr7wmwv6u6","category_id":"cj50afguj0002i4vriqy0t9ak","_id":"cj50afgx5001ii4vrqtgmbxec"},{"post_id":"cj50afgwp0015i4vryhapa6hx","category_id":"cj50afguj0002i4vriqy0t9ak","_id":"cj50afgxl001mi4vrarbhq1xl"},{"post_id":"cj50afgx5001ci4vrtn1j1kcw","category_id":"cj50afguj0002i4vriqy0t9ak","_id":"cj50afgxl001pi4vrmhrx0s48"},{"post_id":"cj50afgx5001gi4vrgvmjeexh","category_id":"cj50afguj0002i4vriqy0t9ak","_id":"cj50afgxl001si4vr02uz1rbm"},{"post_id":"cj50afgx5001ji4vrjnwiyj0f","category_id":"cj50afguj0002i4vriqy0t9ak","_id":"cj50afgxl001wi4vrz21vv6p4"},{"post_id":"cj50afgxl001ni4vr5z27zhzh","category_id":"cj50afguj0002i4vriqy0t9ak","_id":"cj50afgxl001zi4vrloojt4u9"},{"post_id":"cj50afgxl001qi4vrj68xfkbs","category_id":"cj50afguj0002i4vriqy0t9ak","_id":"cj50afgy00023i4vrfhyy9gxd"},{"post_id":"cj50afgxl001ui4vrvchfpjgn","category_id":"cj50afguj0002i4vriqy0t9ak","_id":"cj50afgy00026i4vr88q1y1oz"},{"post_id":"cj50afgxl001xi4vr9hbdqhkv","category_id":"cj50afguj0002i4vriqy0t9ak","_id":"cj50afgy0002ai4vrd4z2cfn0"},{"post_id":"cj50afgxl0021i4vr5k3l98yr","category_id":"cj50afguj0002i4vriqy0t9ak","_id":"cj50afgy0002di4vr18sc06ai"},{"post_id":"cj50afgy00027i4vrh82ogy6f","category_id":"cj50afguj0002i4vriqy0t9ak","_id":"cj50afgy0002hi4vrz1nx9ksf"},{"post_id":"cj50afgy0002ii4vrnc3spcpn","category_id":"cj50afguj0002i4vriqy0t9ak","_id":"cj50afgyg002oi4vr8vrukwck"},{"post_id":"cj50afgyg002qi4vrzjit0av5","category_id":"cj50afguj0002i4vriqy0t9ak","_id":"cj50afgyw002xi4vrm4k6gh5l"},{"post_id":"cj50afgyw002ti4vr68309x4t","category_id":"cj50afguj0002i4vriqy0t9ak","_id":"cj50afgyw0030i4vrn9mzio0g"},{"post_id":"cj50afgyw002vi4vr58m6m9p5","category_id":"cj50afguj0002i4vriqy0t9ak","_id":"cj50afgyw0033i4vr6tju6erd"},{"post_id":"cj50afgyw002zi4vrg6n9idxb","category_id":"cj50afguj0002i4vriqy0t9ak","_id":"cj50afgyw0037i4vroxhtrkv1"},{"post_id":"cj50afgyw0032i4vr6n368dfk","category_id":"cj50afguj0002i4vriqy0t9ak","_id":"cj50afgzb003ai4vruwh1ggm8"},{"post_id":"cj50afgyw0036i4vrh6geim7y","category_id":"cj50afguj0002i4vriqy0t9ak","_id":"cj50afgzb003ei4vr20ryqc31"},{"post_id":"cj50afgyw0039i4vrp6zzs2hr","category_id":"cj50afguj0002i4vriqy0t9ak","_id":"cj50afgzb003hi4vro5062nxq"},{"post_id":"cj50afgzb003bi4vrjeyipukr","category_id":"cj50afguj0002i4vriqy0t9ak","_id":"cj50afgzb003ki4vrtalhtx1h"},{"post_id":"cj50afgzb003fi4vrq2jwzoeu","category_id":"cj50afguj0002i4vriqy0t9ak","_id":"cj50afgzb003mi4vrwjxe36mc"}],"PostTag":[{"post_id":"cj50afguz0009i4vr0g6lldz4","tag_id":"cj50afguj0003i4vrqh8vx0wo","_id":"cj50afgvf000ei4vrycswak1g"},{"post_id":"cj50afgu40000i4vrs8wji6k6","tag_id":"cj50afguj0003i4vrqh8vx0wo","_id":"cj50afgwa000mi4vrnb3wsase"},{"post_id":"cj50afgu40000i4vrs8wji6k6","tag_id":"cj50afguz0008i4vrhg46o1dv","_id":"cj50afgwa000pi4vr8ghtr94y"},{"post_id":"cj50afgu40000i4vrs8wji6k6","tag_id":"cj50afgvf000di4vroi6e03di","_id":"cj50afgwa000ti4vrznckfxho"},{"post_id":"cj50afgvu000ii4vra6xg2uus","tag_id":"cj50afguj0003i4vrqh8vx0wo","_id":"cj50afgwp000wi4vrir724ipy"},{"post_id":"cj50afgu40001i4vrnwoilyof","tag_id":"cj50afguj0003i4vrqh8vx0wo","_id":"cj50afgwp0010i4vrp9qtjroz"},{"post_id":"cj50afguj0004i4vr3ny0qsqb","tag_id":"cj50afgwa000qi4vr5kyxx2z2","_id":"cj50afgwp0013i4vr7uox5gif"},{"post_id":"cj50afgwp0012i4vr7wmwv6u6","tag_id":"cj50afguj0003i4vrqh8vx0wo","_id":"cj50afgx50017i4vru24rvd9f"},{"post_id":"cj50afguj0005i4vriok52p3k","tag_id":"cj50afguj0003i4vrqh8vx0wo","_id":"cj50afgx5001ai4vrm53niglw"},{"post_id":"cj50afguj0005i4vriok52p3k","tag_id":"cj50afgwp000yi4vrm3s0hn3p","_id":"cj50afgx5001ei4vrq5ywg81a"},{"post_id":"cj50afgwp0015i4vryhapa6hx","tag_id":"cj50afguj0003i4vrqh8vx0wo","_id":"cj50afgx5001hi4vr1ks4r9nz"},{"post_id":"cj50afguz0006i4vrnqz79z8g","tag_id":"cj50afguj0003i4vrqh8vx0wo","_id":"cj50afgxl001li4vrz6ggfylv"},{"post_id":"cj50afguz0006i4vrnqz79z8g","tag_id":"cj50afgx50016i4vrvkv5eewy","_id":"cj50afgxl001oi4vr2rezbzc9"},{"post_id":"cj50afgvf000bi4vrjn3mqp4b","tag_id":"cj50afgx5001di4vr7wmmvb3c","_id":"cj50afgxl001ri4vro2io6let"},{"post_id":"cj50afgxl001ni4vr5z27zhzh","tag_id":"cj50afgx5001ki4vrclmjqlrq","_id":"cj50afgxl001vi4vrghatul2j"},{"post_id":"cj50afgvf000gi4vr6wk06b7f","tag_id":"cj50afgx5001ki4vrclmjqlrq","_id":"cj50afgxl001yi4vr8977797v"},{"post_id":"cj50afgwa000li4vr3k7y0tns","tag_id":"cj50afgx5001ki4vrclmjqlrq","_id":"cj50afgy00022i4vrmp16w0zp"},{"post_id":"cj50afgxl001xi4vr9hbdqhkv","tag_id":"cj50afgx5001ki4vrclmjqlrq","_id":"cj50afgy00025i4vrzeikrpcu"},{"post_id":"cj50afgxl0021i4vr5k3l98yr","tag_id":"cj50afgx5001ki4vrclmjqlrq","_id":"cj50afgy00029i4vrbez360rl"},{"post_id":"cj50afgy00024i4vrpf5hm87f","tag_id":"cj50afguj0003i4vrqh8vx0wo","_id":"cj50afgy0002ci4vrqa50v00c"},{"post_id":"cj50afgy0002bi4vrbzbz99tp","tag_id":"cj50afguj0003i4vrqh8vx0wo","_id":"cj50afgy0002gi4vre17q8tco"},{"post_id":"cj50afgwa000oi4vr3us5833h","tag_id":"cj50afgxl0020i4vr1gl7ujbv","_id":"cj50afgyg002ji4vrjmf08tun"},{"post_id":"cj50afgwa000oi4vr3us5833h","tag_id":"cj50afgx5001di4vr7wmmvb3c","_id":"cj50afgyg002mi4vr4ver7vnx"},{"post_id":"cj50afgwa000si4vrc3qy3y5d","tag_id":"cj50afguj0003i4vrqh8vx0wo","_id":"cj50afgyg002pi4vrzyf37n8c"},{"post_id":"cj50afgwa000si4vrc3qy3y5d","tag_id":"cj50afgy0002fi4vrzv7ouln0","_id":"cj50afgyw002si4vryzmfijkc"},{"post_id":"cj50afgyg002ni4vrkymkbfv7","tag_id":"cj50afgx5001ki4vrclmjqlrq","_id":"cj50afgyw002ui4vrnlm4h8qf"},{"post_id":"cj50afgwa000vi4vrptwjk3p4","tag_id":"cj50afguj0003i4vrqh8vx0wo","_id":"cj50afgyw002yi4vrdb26l56z"},{"post_id":"cj50afgwa000vi4vrptwjk3p4","tag_id":"cj50afgyg002li4vrkfd9siix","_id":"cj50afgyw0031i4vrfeg2erzi"},{"post_id":"cj50afgyw002vi4vr58m6m9p5","tag_id":"cj50afguj0003i4vrqh8vx0wo","_id":"cj50afgyw0034i4vrkdyk1di4"},{"post_id":"cj50afgyw002zi4vrg6n9idxb","tag_id":"cj50afguj0003i4vrqh8vx0wo","_id":"cj50afgyw0038i4vril76kdo2"},{"post_id":"cj50afgyw0039i4vrp6zzs2hr","tag_id":"cj50afguj0003i4vrqh8vx0wo","_id":"cj50afgzb003di4vrgdtnyuv5"},{"post_id":"cj50afgwp000zi4vrurztttuw","tag_id":"cj50afgx5001di4vr7wmmvb3c","_id":"cj50afgzb003gi4vruw6nrcdo"},{"post_id":"cj50afgwp000zi4vrurztttuw","tag_id":"cj50afgyw002wi4vrshjz2nfi","_id":"cj50afgzb003ji4vryhuv16sw"},{"post_id":"cj50afgwp000zi4vrurztttuw","tag_id":"cj50afgyw0035i4vru2b4lhes","_id":"cj50afgzb003li4vrwdli17cw"},{"post_id":"cj50afgzb003fi4vrq2jwzoeu","tag_id":"cj50afguj0003i4vrqh8vx0wo","_id":"cj50afgzb003oi4vr39ag2uh7"},{"post_id":"cj50afgx50019i4vrhjmion16","tag_id":"cj50afgzb003ci4vrcmbt95bw","_id":"cj50afgzr003pi4vrpg3yev4y"},{"post_id":"cj50afgx5001ci4vrtn1j1kcw","tag_id":"cj50afgzb003ii4vr1cyw9132","_id":"cj50afgzr003qi4vrw8frs6g3"},{"post_id":"cj50afgx5001ci4vrtn1j1kcw","tag_id":"cj50afguj0003i4vrqh8vx0wo","_id":"cj50afgzr003si4vrm7mm78jh"},{"post_id":"cj50afgx5001gi4vrgvmjeexh","tag_id":"cj50afgzb003ni4vrzo5zfzhz","_id":"cj50afgzr003ti4vrr3zu9694"},{"post_id":"cj50afgx5001ji4vrjnwiyj0f","tag_id":"cj50afguj0003i4vrqh8vx0wo","_id":"cj50afgzr003vi4vrtdtho1l6"},{"post_id":"cj50afgx5001ji4vrjnwiyj0f","tag_id":"cj50afgyw0035i4vru2b4lhes","_id":"cj50afgzr003wi4vrnlij0til"},{"post_id":"cj50afgxl001qi4vrj68xfkbs","tag_id":"cj50afgzr003ui4vr6sbdftfg","_id":"cj50afgzr003yi4vr1yc3n8hw"},{"post_id":"cj50afgxl001ui4vrvchfpjgn","tag_id":"cj50afgyw002wi4vrshjz2nfi","_id":"cj50afgzr0040i4vr7mee0iio"},{"post_id":"cj50afgxl001ui4vrvchfpjgn","tag_id":"cj50afgx5001ki4vrclmjqlrq","_id":"cj50afgzr0041i4vroyfbo6of"},{"post_id":"cj50afgy00027i4vrh82ogy6f","tag_id":"cj50afgyw002wi4vrshjz2nfi","_id":"cj50afgzr0043i4vrb63vn4i2"},{"post_id":"cj50afgy0002ei4vraietus0u","tag_id":"cj50afgzr0042i4vr5o2haako","_id":"cj50afgzr0047i4vrrwjom6ul"},{"post_id":"cj50afgy0002ei4vraietus0u","tag_id":"cj50afgzr0044i4vr71psmfjg","_id":"cj50afgzr0048i4vr3jks8ndt"},{"post_id":"cj50afgy0002ei4vraietus0u","tag_id":"cj50afgzr0045i4vrung6cvs9","_id":"cj50afh06004ai4vrg0ayul54"},{"post_id":"cj50afgy0002ii4vrnc3spcpn","tag_id":"cj50afgzr0046i4vrekz12b15","_id":"cj50afh06004bi4vr6mp6ri4m"},{"post_id":"cj50afgyg002ki4vrx7mchh7s","tag_id":"cj50afgzr003ui4vr6sbdftfg","_id":"cj50afh06004di4vr3i7lgwsw"},{"post_id":"cj50afgyg002qi4vrzjit0av5","tag_id":"cj50afh06004ci4vrib4o6fjl","_id":"cj50afh06004fi4vr625wbs3m"},{"post_id":"cj50afgyg002qi4vrzjit0av5","tag_id":"cj50afguj0003i4vrqh8vx0wo","_id":"cj50afh06004gi4vr7n0w8z1n"},{"post_id":"cj50afgyw002ti4vr68309x4t","tag_id":"cj50afh06004ei4vrvvcgp2il","_id":"cj50afh06004ji4vr06yumm93"},{"post_id":"cj50afgyw002ti4vr68309x4t","tag_id":"cj50afgyw0035i4vru2b4lhes","_id":"cj50afh06004ki4vr11gfe36n"},{"post_id":"cj50afgyw0032i4vr6n368dfk","tag_id":"cj50afh06004ii4vr93d9m3mi","_id":"cj50afh06004mi4vrq1aamp5g"},{"post_id":"cj50afgyw0032i4vr6n368dfk","tag_id":"cj50afguj0003i4vrqh8vx0wo","_id":"cj50afh06004ni4vrjxvgnsq3"},{"post_id":"cj50afgyw0036i4vrh6geim7y","tag_id":"cj50afh06004li4vr05nxfori","_id":"cj50afh06004qi4vrd1ikim5f"},{"post_id":"cj50afgyw0036i4vrh6geim7y","tag_id":"cj50afh06004oi4vr72smkv8n","_id":"cj50afh06004ri4vrmopnki9h"},{"post_id":"cj50afgyw0036i4vrh6geim7y","tag_id":"cj50afguj0003i4vrqh8vx0wo","_id":"cj50afh06004si4vruu1yg7wf"},{"post_id":"cj50afgzb003bi4vrjeyipukr","tag_id":"cj50afh06004pi4vrw2n9hmda","_id":"cj50afh06004ti4vrgyju9796"},{"post_id":"cj50afgzb003bi4vrjeyipukr","tag_id":"cj50afguj0003i4vrqh8vx0wo","_id":"cj50afh06004ui4vrnuk99fza"}],"Tag":[{"name":"android","_id":"cj50afguj0003i4vrqh8vx0wo"},{"name":"Window","_id":"cj50afguz0008i4vrhg46o1dv"},{"name":"statusBar","_id":"cj50afgvf000di4vroi6e03di"},{"name":"Handler Message","_id":"cj50afgwa000qi4vr5kyxx2z2"},{"name":"TouchEvent","_id":"cj50afgwp000yi4vrm3s0hn3p"},{"name":"RecyclerView","_id":"cj50afgx50016i4vrvkv5eewy"},{"name":"","_id":"cj50afgx5001di4vr7wmmvb3c"},{"name":"python","_id":"cj50afgx5001ki4vrclmjqlrq"},{"name":"hexo","_id":"cj50afgxl0020i4vr1gl7ujbv"},{"name":"adb","_id":"cj50afgy0002fi4vrzv7ouln0"},{"name":"annotation","_id":"cj50afgyg002li4vrkfd9siix"},{"name":"linux","_id":"cj50afgyw002wi4vrshjz2nfi"},{"name":"notes","_id":"cj50afgyw0035i4vru2b4lhes"},{"name":"concurrency","_id":"cj50afgzb003ci4vrcmbt95bw"},{"name":"rxjava2","_id":"cj50afgzb003ii4vr1cyw9132"},{"name":"kotlin","_id":"cj50afgzb003ni4vrzo5zfzhz"},{"name":"java","_id":"cj50afgzr003ui4vr6sbdftfg"},{"name":"Retrofit","_id":"cj50afgzr0042i4vr5o2haako"},{"name":"OkHttp","_id":"cj50afgzr0044i4vr71psmfjg"},{"name":"Okio","_id":"cj50afgzr0045i4vrung6cvs9"},{"name":"jvm","_id":"cj50afgzr0046i4vrekz12b15"},{"name":"transition","_id":"cj50afh06004ci4vrib4o6fjl"},{"name":"git","_id":"cj50afh06004ei4vrvvcgp2il"},{"name":"foreground","_id":"cj50afh06004ii4vr93d9m3mi"},{"name":"databinding","_id":"cj50afh06004li4vr05nxfori"},{"name":"Butterknife","_id":"cj50afh06004oi4vr72smkv8n"},{"name":"service","_id":"cj50afh06004pi4vrw2n9hmda"}]}}